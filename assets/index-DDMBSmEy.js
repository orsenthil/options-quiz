function d1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function aw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var lw={exports:{}},yu={},cw={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Da=Symbol.for("react.element"),h1=Symbol.for("react.portal"),f1=Symbol.for("react.fragment"),p1=Symbol.for("react.strict_mode"),m1=Symbol.for("react.profiler"),g1=Symbol.for("react.provider"),y1=Symbol.for("react.context"),v1=Symbol.for("react.forward_ref"),w1=Symbol.for("react.suspense"),_1=Symbol.for("react.memo"),x1=Symbol.for("react.lazy"),ny=Symbol.iterator;function E1(t){return t===null||typeof t!="object"?null:(t=ny&&t[ny]||t["@@iterator"],typeof t=="function"?t:null)}var uw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dw=Object.assign,hw={};function Jo(t,e,n){this.props=t,this.context=e,this.refs=hw,this.updater=n||uw}Jo.prototype.isReactComponent={};Jo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Jo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function fw(){}fw.prototype=Jo.prototype;function ep(t,e,n){this.props=t,this.context=e,this.refs=hw,this.updater=n||uw}var tp=ep.prototype=new fw;tp.constructor=ep;dw(tp,Jo.prototype);tp.isPureReactComponent=!0;var ry=Array.isArray,pw=Object.prototype.hasOwnProperty,np={current:null},mw={key:!0,ref:!0,__self:!0,__source:!0};function gw(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)pw.call(e,r)&&!mw.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Da,type:t,key:o,ref:s,props:i,_owner:np.current}}function T1(t,e){return{$$typeof:Da,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function rp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Da}function C1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var iy=/\/+/g;function Id(t,e){return typeof t=="object"&&t!==null&&t.key!=null?C1(""+t.key):e.toString(36)}function Jl(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Da:case h1:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+Id(s,0):r,ry(i)?(n="",t!=null&&(n=t.replace(iy,"$&/")+"/"),Jl(i,e,n,"",function(u){return u})):i!=null&&(rp(i)&&(i=T1(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(iy,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",ry(t))for(var a=0;a<t.length;a++){o=t[a];var l=r+Id(o,a);s+=Jl(o,e,n,l,i)}else if(l=E1(t),typeof l=="function")for(t=l.call(t),a=0;!(o=t.next()).done;)o=o.value,l=r+Id(o,a++),s+=Jl(o,e,n,l,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function xl(t,e,n){if(t==null)return t;var r=[],i=0;return Jl(t,r,"","",function(o){return e.call(n,o,i++)}),r}function S1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var It={current:null},Zl={transition:null},I1={ReactCurrentDispatcher:It,ReactCurrentBatchConfig:Zl,ReactCurrentOwner:np};function yw(){throw Error("act(...) is not supported in production builds of React.")}ae.Children={map:xl,forEach:function(t,e,n){xl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return xl(t,function(){e++}),e},toArray:function(t){return xl(t,function(e){return e})||[]},only:function(t){if(!rp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ae.Component=Jo;ae.Fragment=f1;ae.Profiler=m1;ae.PureComponent=ep;ae.StrictMode=p1;ae.Suspense=w1;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I1;ae.act=yw;ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=dw({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=np.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)pw.call(e,l)&&!mw.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Da,type:t.type,key:i,ref:o,props:r,_owner:s}};ae.createContext=function(t){return t={$$typeof:y1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:g1,_context:t},t.Consumer=t};ae.createElement=gw;ae.createFactory=function(t){var e=gw.bind(null,t);return e.type=t,e};ae.createRef=function(){return{current:null}};ae.forwardRef=function(t){return{$$typeof:v1,render:t}};ae.isValidElement=rp;ae.lazy=function(t){return{$$typeof:x1,_payload:{_status:-1,_result:t},_init:S1}};ae.memo=function(t,e){return{$$typeof:_1,type:t,compare:e===void 0?null:e}};ae.startTransition=function(t){var e=Zl.transition;Zl.transition={};try{t()}finally{Zl.transition=e}};ae.unstable_act=yw;ae.useCallback=function(t,e){return It.current.useCallback(t,e)};ae.useContext=function(t){return It.current.useContext(t)};ae.useDebugValue=function(){};ae.useDeferredValue=function(t){return It.current.useDeferredValue(t)};ae.useEffect=function(t,e){return It.current.useEffect(t,e)};ae.useId=function(){return It.current.useId()};ae.useImperativeHandle=function(t,e,n){return It.current.useImperativeHandle(t,e,n)};ae.useInsertionEffect=function(t,e){return It.current.useInsertionEffect(t,e)};ae.useLayoutEffect=function(t,e){return It.current.useLayoutEffect(t,e)};ae.useMemo=function(t,e){return It.current.useMemo(t,e)};ae.useReducer=function(t,e,n){return It.current.useReducer(t,e,n)};ae.useRef=function(t){return It.current.useRef(t)};ae.useState=function(t){return It.current.useState(t)};ae.useSyncExternalStore=function(t,e,n){return It.current.useSyncExternalStore(t,e,n)};ae.useTransition=function(){return It.current.useTransition()};ae.version="18.3.1";cw.exports=ae;var x=cw.exports;const Mn=aw(x),A1=d1({__proto__:null,default:Mn},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R1=x,k1=Symbol.for("react.element"),P1=Symbol.for("react.fragment"),b1=Object.prototype.hasOwnProperty,$1=R1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,N1={key:!0,ref:!0,__self:!0,__source:!0};function vw(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)b1.call(e,r)&&!N1.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:k1,type:t,key:o,ref:s,props:i,_owner:$1.current}}yu.Fragment=P1;yu.jsx=vw;yu.jsxs=vw;lw.exports=yu;var v=lw.exports,Eh={},ww={exports:{}},Ht={},_w={exports:{}},xw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,z){var Q=M.length;M.push(z);e:for(;0<Q;){var ee=Q-1>>>1,ue=M[ee];if(0<i(ue,z))M[ee]=z,M[Q]=ue,Q=ee;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var z=M[0],Q=M.pop();if(Q!==z){M[0]=Q;e:for(var ee=0,ue=M.length,we=ue>>>1;ee<we;){var Qe=2*(ee+1)-1,ut=M[Qe],et=Qe+1,X=M[et];if(0>i(ut,Q))et<ue&&0>i(X,ut)?(M[ee]=X,M[et]=Q,ee=et):(M[ee]=ut,M[Qe]=Q,ee=Qe);else if(et<ue&&0>i(X,Q))M[ee]=X,M[et]=Q,ee=et;else break e}}return z}function i(M,z){var Q=M.sortIndex-z.sortIndex;return Q!==0?Q:M.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],u=[],d=1,p=null,f=3,g=!1,E=!1,w=!1,A=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(M){for(var z=n(u);z!==null;){if(z.callback===null)r(u);else if(z.startTime<=M)r(u),z.sortIndex=z.expirationTime,e(l,z);else break;z=n(u)}}function b(M){if(w=!1,C(M),!E)if(n(l)!==null)E=!0,K(F);else{var z=n(u);z!==null&&Y(b,z.startTime-M)}}function F(M,z){E=!1,w&&(w=!1,_(T),T=-1),g=!0;var Q=f;try{for(C(z),p=n(l);p!==null&&(!(p.expirationTime>z)||M&&!$());){var ee=p.callback;if(typeof ee=="function"){p.callback=null,f=p.priorityLevel;var ue=ee(p.expirationTime<=z);z=t.unstable_now(),typeof ue=="function"?p.callback=ue:p===n(l)&&r(l),C(z)}else r(l);p=n(l)}if(p!==null)var we=!0;else{var Qe=n(u);Qe!==null&&Y(b,Qe.startTime-z),we=!1}return we}finally{p=null,f=Q,g=!1}}var O=!1,S=null,T=-1,R=5,k=-1;function $(){return!(t.unstable_now()-k<R)}function N(){if(S!==null){var M=t.unstable_now();k=M;var z=!0;try{z=S(!0,M)}finally{z?P():(O=!1,S=null)}}else O=!1}var P;if(typeof y=="function")P=function(){y(N)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,ie=W.port2;W.port1.onmessage=N,P=function(){ie.postMessage(null)}}else P=function(){A(N,0)};function K(M){S=M,O||(O=!0,P())}function Y(M,z){T=A(function(){M(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){E||g||(E=!0,K(F))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(M){switch(f){case 1:case 2:case 3:var z=3;break;default:z=f}var Q=f;f=z;try{return M()}finally{f=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,z){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var Q=f;f=M;try{return z()}finally{f=Q}},t.unstable_scheduleCallback=function(M,z,Q){var ee=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ee+Q:ee):Q=ee,M){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=Q+ue,M={id:d++,callback:z,priorityLevel:M,startTime:Q,expirationTime:ue,sortIndex:-1},Q>ee?(M.sortIndex=Q,e(u,M),n(l)===null&&M===n(u)&&(w?(_(T),T=-1):w=!0,Y(b,Q-ee))):(M.sortIndex=ue,e(l,M),E||g||(E=!0,K(F))),M},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(M){var z=f;return function(){var Q=f;f=z;try{return M.apply(this,arguments)}finally{f=Q}}}})(xw);_w.exports=xw;var F1=_w.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L1=x,Bt=F1;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ew=new Set,la={};function Di(t,e){No(t,e),No(t+"Capture",e)}function No(t,e){for(la[t]=e,t=0;t<e.length;t++)Ew.add(e[t])}var Yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Th=Object.prototype.hasOwnProperty,O1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,oy={},sy={};function D1(t){return Th.call(sy,t)?!0:Th.call(oy,t)?!1:O1.test(t)?sy[t]=!0:(oy[t]=!0,!1)}function M1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function V1(t,e,n,r){if(e===null||typeof e>"u"||M1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function At(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var at={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){at[t]=new At(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];at[e]=new At(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){at[t]=new At(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){at[t]=new At(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){at[t]=new At(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){at[t]=new At(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){at[t]=new At(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){at[t]=new At(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){at[t]=new At(t,5,!1,t.toLowerCase(),null,!1,!1)});var ip=/[\-:]([a-z])/g;function op(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ip,op);at[e]=new At(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ip,op);at[e]=new At(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ip,op);at[e]=new At(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){at[t]=new At(t,1,!1,t.toLowerCase(),null,!1,!1)});at.xlinkHref=new At("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){at[t]=new At(t,1,!1,t.toLowerCase(),null,!0,!0)});function sp(t,e,n,r){var i=at.hasOwnProperty(e)?at[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(V1(e,n,i,r)&&(n=null),r||i===null?D1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var cr=L1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,El=Symbol.for("react.element"),ao=Symbol.for("react.portal"),lo=Symbol.for("react.fragment"),ap=Symbol.for("react.strict_mode"),Ch=Symbol.for("react.profiler"),Tw=Symbol.for("react.provider"),Cw=Symbol.for("react.context"),lp=Symbol.for("react.forward_ref"),Sh=Symbol.for("react.suspense"),Ih=Symbol.for("react.suspense_list"),cp=Symbol.for("react.memo"),Er=Symbol.for("react.lazy"),Sw=Symbol.for("react.offscreen"),ay=Symbol.iterator;function As(t){return t===null||typeof t!="object"?null:(t=ay&&t[ay]||t["@@iterator"],typeof t=="function"?t:null)}var Ne=Object.assign,Ad;function js(t){if(Ad===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ad=e&&e[1]||""}return`
`+Ad+t}var Rd=!1;function kd(t,e){if(!t||Rd)return"";Rd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=a);break}}}finally{Rd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?js(t):""}function j1(t){switch(t.tag){case 5:return js(t.type);case 16:return js("Lazy");case 13:return js("Suspense");case 19:return js("SuspenseList");case 0:case 2:case 15:return t=kd(t.type,!1),t;case 11:return t=kd(t.type.render,!1),t;case 1:return t=kd(t.type,!0),t;default:return""}}function Ah(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case lo:return"Fragment";case ao:return"Portal";case Ch:return"Profiler";case ap:return"StrictMode";case Sh:return"Suspense";case Ih:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Cw:return(t.displayName||"Context")+".Consumer";case Tw:return(t._context.displayName||"Context")+".Provider";case lp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case cp:return e=t.displayName||null,e!==null?e:Ah(t.type)||"Memo";case Er:e=t._payload,t=t._init;try{return Ah(t(e))}catch{}}return null}function U1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ah(e);case 8:return e===ap?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Hr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Iw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function B1(t){var e=Iw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Tl(t){t._valueTracker||(t._valueTracker=B1(t))}function Aw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Iw(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Cc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Rh(t,e){var n=e.checked;return Ne({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ly(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Hr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Rw(t,e){e=e.checked,e!=null&&sp(t,"checked",e,!1)}function kh(t,e){Rw(t,e);var n=Hr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ph(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ph(t,e.type,Hr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function cy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ph(t,e,n){(e!=="number"||Cc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Us=Array.isArray;function _o(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Hr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function bh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Ne({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function uy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Us(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Hr(n)}}function kw(t,e){var n=Hr(e.value),r=Hr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function dy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Pw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $h(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Pw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Cl,bw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Cl=Cl||document.createElement("div"),Cl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Cl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ca(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ks={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},z1=["Webkit","ms","Moz","O"];Object.keys(Ks).forEach(function(t){z1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ks[e]=Ks[t]})});function $w(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ks.hasOwnProperty(t)&&Ks[t]?(""+e).trim():e+"px"}function Nw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=$w(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var W1=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nh(t,e){if(e){if(W1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Fh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lh=null;function up(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Oh=null,xo=null,Eo=null;function hy(t){if(t=ja(t)){if(typeof Oh!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Eu(e),Oh(t.stateNode,t.type,e))}}function Fw(t){xo?Eo?Eo.push(t):Eo=[t]:xo=t}function Lw(){if(xo){var t=xo,e=Eo;if(Eo=xo=null,hy(t),e)for(t=0;t<e.length;t++)hy(e[t])}}function Ow(t,e){return t(e)}function Dw(){}var Pd=!1;function Mw(t,e,n){if(Pd)return t(e,n);Pd=!0;try{return Ow(t,e,n)}finally{Pd=!1,(xo!==null||Eo!==null)&&(Dw(),Lw())}}function ua(t,e){var n=t.stateNode;if(n===null)return null;var r=Eu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var Dh=!1;if(Yn)try{var Rs={};Object.defineProperty(Rs,"passive",{get:function(){Dh=!0}}),window.addEventListener("test",Rs,Rs),window.removeEventListener("test",Rs,Rs)}catch{Dh=!1}function H1(t,e,n,r,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Qs=!1,Sc=null,Ic=!1,Mh=null,q1={onError:function(t){Qs=!0,Sc=t}};function G1(t,e,n,r,i,o,s,a,l){Qs=!1,Sc=null,H1.apply(q1,arguments)}function K1(t,e,n,r,i,o,s,a,l){if(G1.apply(this,arguments),Qs){if(Qs){var u=Sc;Qs=!1,Sc=null}else throw Error(U(198));Ic||(Ic=!0,Mh=u)}}function Mi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Vw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function fy(t){if(Mi(t)!==t)throw Error(U(188))}function Q1(t){var e=t.alternate;if(!e){if(e=Mi(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return fy(i),t;if(o===r)return fy(i),e;o=o.sibling}throw Error(U(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function jw(t){return t=Q1(t),t!==null?Uw(t):null}function Uw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Uw(t);if(e!==null)return e;t=t.sibling}return null}var Bw=Bt.unstable_scheduleCallback,py=Bt.unstable_cancelCallback,Y1=Bt.unstable_shouldYield,X1=Bt.unstable_requestPaint,Me=Bt.unstable_now,J1=Bt.unstable_getCurrentPriorityLevel,dp=Bt.unstable_ImmediatePriority,zw=Bt.unstable_UserBlockingPriority,Ac=Bt.unstable_NormalPriority,Z1=Bt.unstable_LowPriority,Ww=Bt.unstable_IdlePriority,vu=null,_n=null;function eI(t){if(_n&&typeof _n.onCommitFiberRoot=="function")try{_n.onCommitFiberRoot(vu,t,void 0,(t.current.flags&128)===128)}catch{}}var ln=Math.clz32?Math.clz32:rI,tI=Math.log,nI=Math.LN2;function rI(t){return t>>>=0,t===0?32:31-(tI(t)/nI|0)|0}var Sl=64,Il=4194304;function Bs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Rc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=Bs(a):(o&=s,o!==0&&(r=Bs(o)))}else s=n&~i,s!==0?r=Bs(s):o!==0&&(r=Bs(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ln(e),i=1<<n,r|=t[n],e&=~i;return r}function iI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-ln(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=iI(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}function Vh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Hw(){var t=Sl;return Sl<<=1,!(Sl&4194240)&&(Sl=64),t}function bd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ma(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ln(e),t[e]=n}function sI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ln(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function hp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ln(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var _e=0;function qw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Gw,fp,Kw,Qw,Yw,jh=!1,Al=[],$r=null,Nr=null,Fr=null,da=new Map,ha=new Map,Cr=[],aI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function my(t,e){switch(t){case"focusin":case"focusout":$r=null;break;case"dragenter":case"dragleave":Nr=null;break;case"mouseover":case"mouseout":Fr=null;break;case"pointerover":case"pointerout":da.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ha.delete(e.pointerId)}}function ks(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=ja(e),e!==null&&fp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function lI(t,e,n,r,i){switch(e){case"focusin":return $r=ks($r,t,e,n,r,i),!0;case"dragenter":return Nr=ks(Nr,t,e,n,r,i),!0;case"mouseover":return Fr=ks(Fr,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return da.set(o,ks(da.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,ha.set(o,ks(ha.get(o)||null,t,e,n,r,i)),!0}return!1}function Xw(t){var e=yi(t.target);if(e!==null){var n=Mi(e);if(n!==null){if(e=n.tag,e===13){if(e=Vw(n),e!==null){t.blockedOn=e,Yw(t.priority,function(){Kw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ec(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Uh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Lh=r,n.target.dispatchEvent(r),Lh=null}else return e=ja(n),e!==null&&fp(e),t.blockedOn=n,!1;e.shift()}return!0}function gy(t,e,n){ec(t)&&n.delete(e)}function cI(){jh=!1,$r!==null&&ec($r)&&($r=null),Nr!==null&&ec(Nr)&&(Nr=null),Fr!==null&&ec(Fr)&&(Fr=null),da.forEach(gy),ha.forEach(gy)}function Ps(t,e){t.blockedOn===e&&(t.blockedOn=null,jh||(jh=!0,Bt.unstable_scheduleCallback(Bt.unstable_NormalPriority,cI)))}function fa(t){function e(i){return Ps(i,t)}if(0<Al.length){Ps(Al[0],t);for(var n=1;n<Al.length;n++){var r=Al[n];r.blockedOn===t&&(r.blockedOn=null)}}for($r!==null&&Ps($r,t),Nr!==null&&Ps(Nr,t),Fr!==null&&Ps(Fr,t),da.forEach(e),ha.forEach(e),n=0;n<Cr.length;n++)r=Cr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Cr.length&&(n=Cr[0],n.blockedOn===null);)Xw(n),n.blockedOn===null&&Cr.shift()}var To=cr.ReactCurrentBatchConfig,kc=!0;function uI(t,e,n,r){var i=_e,o=To.transition;To.transition=null;try{_e=1,pp(t,e,n,r)}finally{_e=i,To.transition=o}}function dI(t,e,n,r){var i=_e,o=To.transition;To.transition=null;try{_e=4,pp(t,e,n,r)}finally{_e=i,To.transition=o}}function pp(t,e,n,r){if(kc){var i=Uh(t,e,n,r);if(i===null)Ud(t,e,r,Pc,n),my(t,r);else if(lI(i,t,e,n,r))r.stopPropagation();else if(my(t,r),e&4&&-1<aI.indexOf(t)){for(;i!==null;){var o=ja(i);if(o!==null&&Gw(o),o=Uh(t,e,n,r),o===null&&Ud(t,e,r,Pc,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Ud(t,e,r,null,n)}}var Pc=null;function Uh(t,e,n,r){if(Pc=null,t=up(r),t=yi(t),t!==null)if(e=Mi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Vw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Pc=t,null}function Jw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(J1()){case dp:return 1;case zw:return 4;case Ac:case Z1:return 16;case Ww:return 536870912;default:return 16}default:return 16}}var kr=null,mp=null,tc=null;function Zw(){if(tc)return tc;var t,e=mp,n=e.length,r,i="value"in kr?kr.value:kr.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return tc=i.slice(t,1<r?1-r:void 0)}function nc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Rl(){return!0}function yy(){return!1}function qt(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Rl:yy,this.isPropagationStopped=yy,this}return Ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Rl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Rl)},persist:function(){},isPersistent:Rl}),e}var Zo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gp=qt(Zo),Va=Ne({},Zo,{view:0,detail:0}),hI=qt(Va),$d,Nd,bs,wu=Ne({},Va,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bs&&(bs&&t.type==="mousemove"?($d=t.screenX-bs.screenX,Nd=t.screenY-bs.screenY):Nd=$d=0,bs=t),$d)},movementY:function(t){return"movementY"in t?t.movementY:Nd}}),vy=qt(wu),fI=Ne({},wu,{dataTransfer:0}),pI=qt(fI),mI=Ne({},Va,{relatedTarget:0}),Fd=qt(mI),gI=Ne({},Zo,{animationName:0,elapsedTime:0,pseudoElement:0}),yI=qt(gI),vI=Ne({},Zo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),wI=qt(vI),_I=Ne({},Zo,{data:0}),wy=qt(_I),xI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},EI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},TI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function CI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=TI[t])?!!e[t]:!1}function yp(){return CI}var SI=Ne({},Va,{key:function(t){if(t.key){var e=xI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=nc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?EI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yp,charCode:function(t){return t.type==="keypress"?nc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?nc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),II=qt(SI),AI=Ne({},wu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_y=qt(AI),RI=Ne({},Va,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yp}),kI=qt(RI),PI=Ne({},Zo,{propertyName:0,elapsedTime:0,pseudoElement:0}),bI=qt(PI),$I=Ne({},wu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),NI=qt($I),FI=[9,13,27,32],vp=Yn&&"CompositionEvent"in window,Ys=null;Yn&&"documentMode"in document&&(Ys=document.documentMode);var LI=Yn&&"TextEvent"in window&&!Ys,e_=Yn&&(!vp||Ys&&8<Ys&&11>=Ys),xy=" ",Ey=!1;function t_(t,e){switch(t){case"keyup":return FI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function n_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var co=!1;function OI(t,e){switch(t){case"compositionend":return n_(e);case"keypress":return e.which!==32?null:(Ey=!0,xy);case"textInput":return t=e.data,t===xy&&Ey?null:t;default:return null}}function DI(t,e){if(co)return t==="compositionend"||!vp&&t_(t,e)?(t=Zw(),tc=mp=kr=null,co=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return e_&&e.locale!=="ko"?null:e.data;default:return null}}var MI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ty(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!MI[t.type]:e==="textarea"}function r_(t,e,n,r){Fw(r),e=bc(e,"onChange"),0<e.length&&(n=new gp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Xs=null,pa=null;function VI(t){p_(t,0)}function _u(t){var e=fo(t);if(Aw(e))return t}function jI(t,e){if(t==="change")return e}var i_=!1;if(Yn){var Ld;if(Yn){var Od="oninput"in document;if(!Od){var Cy=document.createElement("div");Cy.setAttribute("oninput","return;"),Od=typeof Cy.oninput=="function"}Ld=Od}else Ld=!1;i_=Ld&&(!document.documentMode||9<document.documentMode)}function Sy(){Xs&&(Xs.detachEvent("onpropertychange",o_),pa=Xs=null)}function o_(t){if(t.propertyName==="value"&&_u(pa)){var e=[];r_(e,pa,t,up(t)),Mw(VI,e)}}function UI(t,e,n){t==="focusin"?(Sy(),Xs=e,pa=n,Xs.attachEvent("onpropertychange",o_)):t==="focusout"&&Sy()}function BI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return _u(pa)}function zI(t,e){if(t==="click")return _u(e)}function WI(t,e){if(t==="input"||t==="change")return _u(e)}function HI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var dn=typeof Object.is=="function"?Object.is:HI;function ma(t,e){if(dn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Th.call(e,i)||!dn(t[i],e[i]))return!1}return!0}function Iy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ay(t,e){var n=Iy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Iy(n)}}function s_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?s_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function a_(){for(var t=window,e=Cc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Cc(t.document)}return e}function wp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function qI(t){var e=a_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&s_(n.ownerDocument.documentElement,n)){if(r!==null&&wp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=Ay(n,o);var s=Ay(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var GI=Yn&&"documentMode"in document&&11>=document.documentMode,uo=null,Bh=null,Js=null,zh=!1;function Ry(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;zh||uo==null||uo!==Cc(r)||(r=uo,"selectionStart"in r&&wp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Js&&ma(Js,r)||(Js=r,r=bc(Bh,"onSelect"),0<r.length&&(e=new gp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=uo)))}function kl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ho={animationend:kl("Animation","AnimationEnd"),animationiteration:kl("Animation","AnimationIteration"),animationstart:kl("Animation","AnimationStart"),transitionend:kl("Transition","TransitionEnd")},Dd={},l_={};Yn&&(l_=document.createElement("div").style,"AnimationEvent"in window||(delete ho.animationend.animation,delete ho.animationiteration.animation,delete ho.animationstart.animation),"TransitionEvent"in window||delete ho.transitionend.transition);function xu(t){if(Dd[t])return Dd[t];if(!ho[t])return t;var e=ho[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in l_)return Dd[t]=e[n];return t}var c_=xu("animationend"),u_=xu("animationiteration"),d_=xu("animationstart"),h_=xu("transitionend"),f_=new Map,ky="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ni(t,e){f_.set(t,e),Di(e,[t])}for(var Md=0;Md<ky.length;Md++){var Vd=ky[Md],KI=Vd.toLowerCase(),QI=Vd[0].toUpperCase()+Vd.slice(1);ni(KI,"on"+QI)}ni(c_,"onAnimationEnd");ni(u_,"onAnimationIteration");ni(d_,"onAnimationStart");ni("dblclick","onDoubleClick");ni("focusin","onFocus");ni("focusout","onBlur");ni(h_,"onTransitionEnd");No("onMouseEnter",["mouseout","mouseover"]);No("onMouseLeave",["mouseout","mouseover"]);No("onPointerEnter",["pointerout","pointerover"]);No("onPointerLeave",["pointerout","pointerover"]);Di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Di("onBeforeInput",["compositionend","keypress","textInput","paste"]);Di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YI=new Set("cancel close invalid load scroll toggle".split(" ").concat(zs));function Py(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,K1(r,e,void 0,t),t.currentTarget=null}function p_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;Py(i,a,u),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,u=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;Py(i,a,u),o=l}}}if(Ic)throw t=Mh,Ic=!1,Mh=null,t}function Ie(t,e){var n=e[Kh];n===void 0&&(n=e[Kh]=new Set);var r=t+"__bubble";n.has(r)||(m_(e,t,2,!1),n.add(r))}function jd(t,e,n){var r=0;e&&(r|=4),m_(n,t,r,e)}var Pl="_reactListening"+Math.random().toString(36).slice(2);function ga(t){if(!t[Pl]){t[Pl]=!0,Ew.forEach(function(n){n!=="selectionchange"&&(YI.has(n)||jd(n,!1,t),jd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Pl]||(e[Pl]=!0,jd("selectionchange",!1,e))}}function m_(t,e,n,r){switch(Jw(e)){case 1:var i=uI;break;case 4:i=dI;break;default:i=pp}n=i.bind(null,e,n,t),i=void 0,!Dh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Ud(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=yi(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}Mw(function(){var u=o,d=up(n),p=[];e:{var f=f_.get(t);if(f!==void 0){var g=gp,E=t;switch(t){case"keypress":if(nc(n)===0)break e;case"keydown":case"keyup":g=II;break;case"focusin":E="focus",g=Fd;break;case"focusout":E="blur",g=Fd;break;case"beforeblur":case"afterblur":g=Fd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=vy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=pI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=kI;break;case c_:case u_:case d_:g=yI;break;case h_:g=bI;break;case"scroll":g=hI;break;case"wheel":g=NI;break;case"copy":case"cut":case"paste":g=wI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=_y}var w=(e&4)!==0,A=!w&&t==="scroll",_=w?f!==null?f+"Capture":null:f;w=[];for(var y=u,C;y!==null;){C=y;var b=C.stateNode;if(C.tag===5&&b!==null&&(C=b,_!==null&&(b=ua(y,_),b!=null&&w.push(ya(y,b,C)))),A)break;y=y.return}0<w.length&&(f=new g(f,E,null,n,d),p.push({event:f,listeners:w}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==Lh&&(E=n.relatedTarget||n.fromElement)&&(yi(E)||E[Xn]))break e;if((g||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,g?(E=n.relatedTarget||n.toElement,g=u,E=E?yi(E):null,E!==null&&(A=Mi(E),E!==A||E.tag!==5&&E.tag!==6)&&(E=null)):(g=null,E=u),g!==E)){if(w=vy,b="onMouseLeave",_="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(w=_y,b="onPointerLeave",_="onPointerEnter",y="pointer"),A=g==null?f:fo(g),C=E==null?f:fo(E),f=new w(b,y+"leave",g,n,d),f.target=A,f.relatedTarget=C,b=null,yi(d)===u&&(w=new w(_,y+"enter",E,n,d),w.target=C,w.relatedTarget=A,b=w),A=b,g&&E)t:{for(w=g,_=E,y=0,C=w;C;C=Xi(C))y++;for(C=0,b=_;b;b=Xi(b))C++;for(;0<y-C;)w=Xi(w),y--;for(;0<C-y;)_=Xi(_),C--;for(;y--;){if(w===_||_!==null&&w===_.alternate)break t;w=Xi(w),_=Xi(_)}w=null}else w=null;g!==null&&by(p,f,g,w,!1),E!==null&&A!==null&&by(p,A,E,w,!0)}}e:{if(f=u?fo(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var F=jI;else if(Ty(f))if(i_)F=WI;else{F=BI;var O=UI}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(F=zI);if(F&&(F=F(t,u))){r_(p,F,n,d);break e}O&&O(t,f,u),t==="focusout"&&(O=f._wrapperState)&&O.controlled&&f.type==="number"&&Ph(f,"number",f.value)}switch(O=u?fo(u):window,t){case"focusin":(Ty(O)||O.contentEditable==="true")&&(uo=O,Bh=u,Js=null);break;case"focusout":Js=Bh=uo=null;break;case"mousedown":zh=!0;break;case"contextmenu":case"mouseup":case"dragend":zh=!1,Ry(p,n,d);break;case"selectionchange":if(GI)break;case"keydown":case"keyup":Ry(p,n,d)}var S;if(vp)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else co?t_(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(e_&&n.locale!=="ko"&&(co||T!=="onCompositionStart"?T==="onCompositionEnd"&&co&&(S=Zw()):(kr=d,mp="value"in kr?kr.value:kr.textContent,co=!0)),O=bc(u,T),0<O.length&&(T=new wy(T,t,null,n,d),p.push({event:T,listeners:O}),S?T.data=S:(S=n_(n),S!==null&&(T.data=S)))),(S=LI?OI(t,n):DI(t,n))&&(u=bc(u,"onBeforeInput"),0<u.length&&(d=new wy("onBeforeInput","beforeinput",null,n,d),p.push({event:d,listeners:u}),d.data=S))}p_(p,e)})}function ya(t,e,n){return{instance:t,listener:e,currentTarget:n}}function bc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=ua(t,n),o!=null&&r.unshift(ya(t,o,i)),o=ua(t,e),o!=null&&r.push(ya(t,o,i))),t=t.return}return r}function Xi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function by(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=ua(n,o),l!=null&&s.unshift(ya(n,l,a))):i||(l=ua(n,o),l!=null&&s.push(ya(n,l,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var XI=/\r\n?/g,JI=/\u0000|\uFFFD/g;function $y(t){return(typeof t=="string"?t:""+t).replace(XI,`
`).replace(JI,"")}function bl(t,e,n){if(e=$y(e),$y(t)!==e&&n)throw Error(U(425))}function $c(){}var Wh=null,Hh=null;function qh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Gh=typeof setTimeout=="function"?setTimeout:void 0,ZI=typeof clearTimeout=="function"?clearTimeout:void 0,Ny=typeof Promise=="function"?Promise:void 0,eA=typeof queueMicrotask=="function"?queueMicrotask:typeof Ny<"u"?function(t){return Ny.resolve(null).then(t).catch(tA)}:Gh;function tA(t){setTimeout(function(){throw t})}function Bd(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),fa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);fa(e)}function Lr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Fy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var es=Math.random().toString(36).slice(2),vn="__reactFiber$"+es,va="__reactProps$"+es,Xn="__reactContainer$"+es,Kh="__reactEvents$"+es,nA="__reactListeners$"+es,rA="__reactHandles$"+es;function yi(t){var e=t[vn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Xn]||n[vn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Fy(t);t!==null;){if(n=t[vn])return n;t=Fy(t)}return e}t=n,n=t.parentNode}return null}function ja(t){return t=t[vn]||t[Xn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function fo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Eu(t){return t[va]||null}var Qh=[],po=-1;function ri(t){return{current:t}}function Ae(t){0>po||(t.current=Qh[po],Qh[po]=null,po--)}function Te(t,e){po++,Qh[po]=t.current,t.current=e}var qr={},_t=ri(qr),$t=ri(!1),Ii=qr;function Fo(t,e){var n=t.type.contextTypes;if(!n)return qr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Nt(t){return t=t.childContextTypes,t!=null}function Nc(){Ae($t),Ae(_t)}function Ly(t,e,n){if(_t.current!==qr)throw Error(U(168));Te(_t,e),Te($t,n)}function g_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(U(108,U1(t)||"Unknown",i));return Ne({},n,r)}function Fc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qr,Ii=_t.current,Te(_t,t),Te($t,$t.current),!0}function Oy(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=g_(t,e,Ii),r.__reactInternalMemoizedMergedChildContext=t,Ae($t),Ae(_t),Te(_t,t)):Ae($t),Te($t,n)}var jn=null,Tu=!1,zd=!1;function y_(t){jn===null?jn=[t]:jn.push(t)}function iA(t){Tu=!0,y_(t)}function ii(){if(!zd&&jn!==null){zd=!0;var t=0,e=_e;try{var n=jn;for(_e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}jn=null,Tu=!1}catch(i){throw jn!==null&&(jn=jn.slice(t+1)),Bw(dp,ii),i}finally{_e=e,zd=!1}}return null}var mo=[],go=0,Lc=null,Oc=0,Gt=[],Kt=0,Ai=null,Bn=1,zn="";function pi(t,e){mo[go++]=Oc,mo[go++]=Lc,Lc=t,Oc=e}function v_(t,e,n){Gt[Kt++]=Bn,Gt[Kt++]=zn,Gt[Kt++]=Ai,Ai=t;var r=Bn;t=zn;var i=32-ln(r)-1;r&=~(1<<i),n+=1;var o=32-ln(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Bn=1<<32-ln(e)+i|n<<i|r,zn=o+t}else Bn=1<<o|n<<i|r,zn=t}function _p(t){t.return!==null&&(pi(t,1),v_(t,1,0))}function xp(t){for(;t===Lc;)Lc=mo[--go],mo[go]=null,Oc=mo[--go],mo[go]=null;for(;t===Ai;)Ai=Gt[--Kt],Gt[Kt]=null,zn=Gt[--Kt],Gt[Kt]=null,Bn=Gt[--Kt],Gt[Kt]=null}var Vt=null,Mt=null,Re=!1,sn=null;function w_(t,e){var n=Yt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Dy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Vt=t,Mt=Lr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Vt=t,Mt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ai!==null?{id:Bn,overflow:zn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Yt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Vt=t,Mt=null,!0):!1;default:return!1}}function Yh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Xh(t){if(Re){var e=Mt;if(e){var n=e;if(!Dy(t,e)){if(Yh(t))throw Error(U(418));e=Lr(n.nextSibling);var r=Vt;e&&Dy(t,e)?w_(r,n):(t.flags=t.flags&-4097|2,Re=!1,Vt=t)}}else{if(Yh(t))throw Error(U(418));t.flags=t.flags&-4097|2,Re=!1,Vt=t}}}function My(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Vt=t}function $l(t){if(t!==Vt)return!1;if(!Re)return My(t),Re=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!qh(t.type,t.memoizedProps)),e&&(e=Mt)){if(Yh(t))throw __(),Error(U(418));for(;e;)w_(t,e),e=Lr(e.nextSibling)}if(My(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Mt=Lr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Mt=null}}else Mt=Vt?Lr(t.stateNode.nextSibling):null;return!0}function __(){for(var t=Mt;t;)t=Lr(t.nextSibling)}function Lo(){Mt=Vt=null,Re=!1}function Ep(t){sn===null?sn=[t]:sn.push(t)}var oA=cr.ReactCurrentBatchConfig;function $s(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Nl(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Vy(t){var e=t._init;return e(t._payload)}function x_(t){function e(_,y){if(t){var C=_.deletions;C===null?(_.deletions=[y],_.flags|=16):C.push(y)}}function n(_,y){if(!t)return null;for(;y!==null;)e(_,y),y=y.sibling;return null}function r(_,y){for(_=new Map;y!==null;)y.key!==null?_.set(y.key,y):_.set(y.index,y),y=y.sibling;return _}function i(_,y){return _=Vr(_,y),_.index=0,_.sibling=null,_}function o(_,y,C){return _.index=C,t?(C=_.alternate,C!==null?(C=C.index,C<y?(_.flags|=2,y):C):(_.flags|=2,y)):(_.flags|=1048576,y)}function s(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,y,C,b){return y===null||y.tag!==6?(y=Yd(C,_.mode,b),y.return=_,y):(y=i(y,C),y.return=_,y)}function l(_,y,C,b){var F=C.type;return F===lo?d(_,y,C.props.children,b,C.key):y!==null&&(y.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Er&&Vy(F)===y.type)?(b=i(y,C.props),b.ref=$s(_,y,C),b.return=_,b):(b=cc(C.type,C.key,C.props,null,_.mode,b),b.ref=$s(_,y,C),b.return=_,b)}function u(_,y,C,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==C.containerInfo||y.stateNode.implementation!==C.implementation?(y=Xd(C,_.mode,b),y.return=_,y):(y=i(y,C.children||[]),y.return=_,y)}function d(_,y,C,b,F){return y===null||y.tag!==7?(y=Ti(C,_.mode,b,F),y.return=_,y):(y=i(y,C),y.return=_,y)}function p(_,y,C){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Yd(""+y,_.mode,C),y.return=_,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case El:return C=cc(y.type,y.key,y.props,null,_.mode,C),C.ref=$s(_,null,y),C.return=_,C;case ao:return y=Xd(y,_.mode,C),y.return=_,y;case Er:var b=y._init;return p(_,b(y._payload),C)}if(Us(y)||As(y))return y=Ti(y,_.mode,C,null),y.return=_,y;Nl(_,y)}return null}function f(_,y,C,b){var F=y!==null?y.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return F!==null?null:a(_,y,""+C,b);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case El:return C.key===F?l(_,y,C,b):null;case ao:return C.key===F?u(_,y,C,b):null;case Er:return F=C._init,f(_,y,F(C._payload),b)}if(Us(C)||As(C))return F!==null?null:d(_,y,C,b,null);Nl(_,C)}return null}function g(_,y,C,b,F){if(typeof b=="string"&&b!==""||typeof b=="number")return _=_.get(C)||null,a(y,_,""+b,F);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case El:return _=_.get(b.key===null?C:b.key)||null,l(y,_,b,F);case ao:return _=_.get(b.key===null?C:b.key)||null,u(y,_,b,F);case Er:var O=b._init;return g(_,y,C,O(b._payload),F)}if(Us(b)||As(b))return _=_.get(C)||null,d(y,_,b,F,null);Nl(y,b)}return null}function E(_,y,C,b){for(var F=null,O=null,S=y,T=y=0,R=null;S!==null&&T<C.length;T++){S.index>T?(R=S,S=null):R=S.sibling;var k=f(_,S,C[T],b);if(k===null){S===null&&(S=R);break}t&&S&&k.alternate===null&&e(_,S),y=o(k,y,T),O===null?F=k:O.sibling=k,O=k,S=R}if(T===C.length)return n(_,S),Re&&pi(_,T),F;if(S===null){for(;T<C.length;T++)S=p(_,C[T],b),S!==null&&(y=o(S,y,T),O===null?F=S:O.sibling=S,O=S);return Re&&pi(_,T),F}for(S=r(_,S);T<C.length;T++)R=g(S,_,T,C[T],b),R!==null&&(t&&R.alternate!==null&&S.delete(R.key===null?T:R.key),y=o(R,y,T),O===null?F=R:O.sibling=R,O=R);return t&&S.forEach(function($){return e(_,$)}),Re&&pi(_,T),F}function w(_,y,C,b){var F=As(C);if(typeof F!="function")throw Error(U(150));if(C=F.call(C),C==null)throw Error(U(151));for(var O=F=null,S=y,T=y=0,R=null,k=C.next();S!==null&&!k.done;T++,k=C.next()){S.index>T?(R=S,S=null):R=S.sibling;var $=f(_,S,k.value,b);if($===null){S===null&&(S=R);break}t&&S&&$.alternate===null&&e(_,S),y=o($,y,T),O===null?F=$:O.sibling=$,O=$,S=R}if(k.done)return n(_,S),Re&&pi(_,T),F;if(S===null){for(;!k.done;T++,k=C.next())k=p(_,k.value,b),k!==null&&(y=o(k,y,T),O===null?F=k:O.sibling=k,O=k);return Re&&pi(_,T),F}for(S=r(_,S);!k.done;T++,k=C.next())k=g(S,_,T,k.value,b),k!==null&&(t&&k.alternate!==null&&S.delete(k.key===null?T:k.key),y=o(k,y,T),O===null?F=k:O.sibling=k,O=k);return t&&S.forEach(function(N){return e(_,N)}),Re&&pi(_,T),F}function A(_,y,C,b){if(typeof C=="object"&&C!==null&&C.type===lo&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case El:e:{for(var F=C.key,O=y;O!==null;){if(O.key===F){if(F=C.type,F===lo){if(O.tag===7){n(_,O.sibling),y=i(O,C.props.children),y.return=_,_=y;break e}}else if(O.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Er&&Vy(F)===O.type){n(_,O.sibling),y=i(O,C.props),y.ref=$s(_,O,C),y.return=_,_=y;break e}n(_,O);break}else e(_,O);O=O.sibling}C.type===lo?(y=Ti(C.props.children,_.mode,b,C.key),y.return=_,_=y):(b=cc(C.type,C.key,C.props,null,_.mode,b),b.ref=$s(_,y,C),b.return=_,_=b)}return s(_);case ao:e:{for(O=C.key;y!==null;){if(y.key===O)if(y.tag===4&&y.stateNode.containerInfo===C.containerInfo&&y.stateNode.implementation===C.implementation){n(_,y.sibling),y=i(y,C.children||[]),y.return=_,_=y;break e}else{n(_,y);break}else e(_,y);y=y.sibling}y=Xd(C,_.mode,b),y.return=_,_=y}return s(_);case Er:return O=C._init,A(_,y,O(C._payload),b)}if(Us(C))return E(_,y,C,b);if(As(C))return w(_,y,C,b);Nl(_,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,y!==null&&y.tag===6?(n(_,y.sibling),y=i(y,C),y.return=_,_=y):(n(_,y),y=Yd(C,_.mode,b),y.return=_,_=y),s(_)):n(_,y)}return A}var Oo=x_(!0),E_=x_(!1),Dc=ri(null),Mc=null,yo=null,Tp=null;function Cp(){Tp=yo=Mc=null}function Sp(t){var e=Dc.current;Ae(Dc),t._currentValue=e}function Jh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Co(t,e){Mc=t,Tp=yo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(bt=!0),t.firstContext=null)}function Jt(t){var e=t._currentValue;if(Tp!==t)if(t={context:t,memoizedValue:e,next:null},yo===null){if(Mc===null)throw Error(U(308));yo=t,Mc.dependencies={lanes:0,firstContext:t}}else yo=yo.next=t;return e}var vi=null;function Ip(t){vi===null?vi=[t]:vi.push(t)}function T_(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Ip(e)):(n.next=i.next,i.next=n),e.interleaved=n,Jn(t,r)}function Jn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Tr=!1;function Ap(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function C_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Kn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Or(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,pe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Jn(t,n)}return i=r.interleaved,i===null?(e.next=e,Ip(r)):(e.next=i.next,i.next=e),r.interleaved=e,Jn(t,n)}function rc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hp(t,n)}}function jy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Vc(t,e,n,r){var i=t.updateQueue;Tr=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,s===null?o=u:s.next=u,s=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==s&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(o!==null){var p=i.baseState;s=0,d=u=l=null,a=o;do{var f=a.lane,g=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var E=t,w=a;switch(f=e,g=n,w.tag){case 1:if(E=w.payload,typeof E=="function"){p=E.call(g,p,f);break e}p=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=w.payload,f=typeof E=="function"?E.call(g,p,f):E,f==null)break e;p=Ne({},p,f);break e;case 2:Tr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=g,l=p):d=d.next=g,s|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(d===null&&(l=p),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);ki|=s,t.lanes=s,t.memoizedState=p}}function Uy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(U(191,i));i.call(r)}}}var Ua={},xn=ri(Ua),wa=ri(Ua),_a=ri(Ua);function wi(t){if(t===Ua)throw Error(U(174));return t}function Rp(t,e){switch(Te(_a,e),Te(wa,t),Te(xn,Ua),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$h(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$h(e,t)}Ae(xn),Te(xn,e)}function Do(){Ae(xn),Ae(wa),Ae(_a)}function S_(t){wi(_a.current);var e=wi(xn.current),n=$h(e,t.type);e!==n&&(Te(wa,t),Te(xn,n))}function kp(t){wa.current===t&&(Ae(xn),Ae(wa))}var Pe=ri(0);function jc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Wd=[];function Pp(){for(var t=0;t<Wd.length;t++)Wd[t]._workInProgressVersionPrimary=null;Wd.length=0}var ic=cr.ReactCurrentDispatcher,Hd=cr.ReactCurrentBatchConfig,Ri=0,be=null,We=null,Je=null,Uc=!1,Zs=!1,xa=0,sA=0;function pt(){throw Error(U(321))}function bp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!dn(t[n],e[n]))return!1;return!0}function $p(t,e,n,r,i,o){if(Ri=o,be=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ic.current=t===null||t.memoizedState===null?uA:dA,t=n(r,i),Zs){o=0;do{if(Zs=!1,xa=0,25<=o)throw Error(U(301));o+=1,Je=We=null,e.updateQueue=null,ic.current=hA,t=n(r,i)}while(Zs)}if(ic.current=Bc,e=We!==null&&We.next!==null,Ri=0,Je=We=be=null,Uc=!1,e)throw Error(U(300));return t}function Np(){var t=xa!==0;return xa=0,t}function yn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?be.memoizedState=Je=t:Je=Je.next=t,Je}function Zt(){if(We===null){var t=be.alternate;t=t!==null?t.memoizedState:null}else t=We.next;var e=Je===null?be.memoizedState:Je.next;if(e!==null)Je=e,We=t;else{if(t===null)throw Error(U(310));We=t,t={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Je===null?be.memoizedState=Je=t:Je=Je.next=t}return Je}function Ea(t,e){return typeof e=="function"?e(t):e}function qd(t){var e=Zt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=We,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,u=o;do{var d=u.lane;if((Ri&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var p={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=p,s=r):l=l.next=p,be.lanes|=d,ki|=d}u=u.next}while(u!==null&&u!==o);l===null?s=r:l.next=a,dn(r,e.memoizedState)||(bt=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,be.lanes|=o,ki|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Gd(t){var e=Zt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);dn(o,e.memoizedState)||(bt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function I_(){}function A_(t,e){var n=be,r=Zt(),i=e(),o=!dn(r.memoizedState,i);if(o&&(r.memoizedState=i,bt=!0),r=r.queue,Fp(P_.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Je!==null&&Je.memoizedState.tag&1){if(n.flags|=2048,Ta(9,k_.bind(null,n,r,i,e),void 0,null),Ze===null)throw Error(U(349));Ri&30||R_(n,e,i)}return i}function R_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function k_(t,e,n,r){e.value=n,e.getSnapshot=r,b_(e)&&$_(t)}function P_(t,e,n){return n(function(){b_(e)&&$_(t)})}function b_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!dn(t,n)}catch{return!0}}function $_(t){var e=Jn(t,1);e!==null&&cn(e,t,1,-1)}function By(t){var e=yn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ea,lastRenderedState:t},e.queue=t,t=t.dispatch=cA.bind(null,be,t),[e.memoizedState,t]}function Ta(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function N_(){return Zt().memoizedState}function oc(t,e,n,r){var i=yn();be.flags|=t,i.memoizedState=Ta(1|e,n,void 0,r===void 0?null:r)}function Cu(t,e,n,r){var i=Zt();r=r===void 0?null:r;var o=void 0;if(We!==null){var s=We.memoizedState;if(o=s.destroy,r!==null&&bp(r,s.deps)){i.memoizedState=Ta(e,n,o,r);return}}be.flags|=t,i.memoizedState=Ta(1|e,n,o,r)}function zy(t,e){return oc(8390656,8,t,e)}function Fp(t,e){return Cu(2048,8,t,e)}function F_(t,e){return Cu(4,2,t,e)}function L_(t,e){return Cu(4,4,t,e)}function O_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function D_(t,e,n){return n=n!=null?n.concat([t]):null,Cu(4,4,O_.bind(null,e,t),n)}function Lp(){}function M_(t,e){var n=Zt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function V_(t,e){var n=Zt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function j_(t,e,n){return Ri&21?(dn(n,e)||(n=Hw(),be.lanes|=n,ki|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,bt=!0),t.memoizedState=n)}function aA(t,e){var n=_e;_e=n!==0&&4>n?n:4,t(!0);var r=Hd.transition;Hd.transition={};try{t(!1),e()}finally{_e=n,Hd.transition=r}}function U_(){return Zt().memoizedState}function lA(t,e,n){var r=Mr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},B_(t))z_(e,n);else if(n=T_(t,e,n,r),n!==null){var i=St();cn(n,t,r,i),W_(n,e,r)}}function cA(t,e,n){var r=Mr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(B_(t))z_(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,dn(a,s)){var l=e.interleaved;l===null?(i.next=i,Ip(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=T_(t,e,i,r),n!==null&&(i=St(),cn(n,t,r,i),W_(n,e,r))}}function B_(t){var e=t.alternate;return t===be||e!==null&&e===be}function z_(t,e){Zs=Uc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function W_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hp(t,n)}}var Bc={readContext:Jt,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useInsertionEffect:pt,useLayoutEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useMutableSource:pt,useSyncExternalStore:pt,useId:pt,unstable_isNewReconciler:!1},uA={readContext:Jt,useCallback:function(t,e){return yn().memoizedState=[t,e===void 0?null:e],t},useContext:Jt,useEffect:zy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,oc(4194308,4,O_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return oc(4194308,4,t,e)},useInsertionEffect:function(t,e){return oc(4,2,t,e)},useMemo:function(t,e){var n=yn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=yn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=lA.bind(null,be,t),[r.memoizedState,t]},useRef:function(t){var e=yn();return t={current:t},e.memoizedState=t},useState:By,useDebugValue:Lp,useDeferredValue:function(t){return yn().memoizedState=t},useTransition:function(){var t=By(!1),e=t[0];return t=aA.bind(null,t[1]),yn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=be,i=yn();if(Re){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Ze===null)throw Error(U(349));Ri&30||R_(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,zy(P_.bind(null,r,o,t),[t]),r.flags|=2048,Ta(9,k_.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=yn(),e=Ze.identifierPrefix;if(Re){var n=zn,r=Bn;n=(r&~(1<<32-ln(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=xa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=sA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},dA={readContext:Jt,useCallback:M_,useContext:Jt,useEffect:Fp,useImperativeHandle:D_,useInsertionEffect:F_,useLayoutEffect:L_,useMemo:V_,useReducer:qd,useRef:N_,useState:function(){return qd(Ea)},useDebugValue:Lp,useDeferredValue:function(t){var e=Zt();return j_(e,We.memoizedState,t)},useTransition:function(){var t=qd(Ea)[0],e=Zt().memoizedState;return[t,e]},useMutableSource:I_,useSyncExternalStore:A_,useId:U_,unstable_isNewReconciler:!1},hA={readContext:Jt,useCallback:M_,useContext:Jt,useEffect:Fp,useImperativeHandle:D_,useInsertionEffect:F_,useLayoutEffect:L_,useMemo:V_,useReducer:Gd,useRef:N_,useState:function(){return Gd(Ea)},useDebugValue:Lp,useDeferredValue:function(t){var e=Zt();return We===null?e.memoizedState=t:j_(e,We.memoizedState,t)},useTransition:function(){var t=Gd(Ea)[0],e=Zt().memoizedState;return[t,e]},useMutableSource:I_,useSyncExternalStore:A_,useId:U_,unstable_isNewReconciler:!1};function rn(t,e){if(t&&t.defaultProps){e=Ne({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Zh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ne({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Su={isMounted:function(t){return(t=t._reactInternals)?Mi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=St(),i=Mr(t),o=Kn(r,i);o.payload=e,n!=null&&(o.callback=n),e=Or(t,o,i),e!==null&&(cn(e,t,i,r),rc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=St(),i=Mr(t),o=Kn(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Or(t,o,i),e!==null&&(cn(e,t,i,r),rc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=St(),r=Mr(t),i=Kn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Or(t,i,r),e!==null&&(cn(e,t,r,n),rc(e,t,r))}};function Wy(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!ma(n,r)||!ma(i,o):!0}function H_(t,e,n){var r=!1,i=qr,o=e.contextType;return typeof o=="object"&&o!==null?o=Jt(o):(i=Nt(e)?Ii:_t.current,r=e.contextTypes,o=(r=r!=null)?Fo(t,i):qr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Su,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Hy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Su.enqueueReplaceState(e,e.state,null)}function ef(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Ap(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Jt(o):(o=Nt(e)?Ii:_t.current,i.context=Fo(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Zh(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Su.enqueueReplaceState(i,i.state,null),Vc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Mo(t,e){try{var n="",r=e;do n+=j1(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Kd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function tf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var fA=typeof WeakMap=="function"?WeakMap:Map;function q_(t,e,n){n=Kn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Wc||(Wc=!0,hf=r),tf(t,e)},n}function G_(t,e,n){n=Kn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){tf(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){tf(t,e),typeof r!="function"&&(Dr===null?Dr=new Set([this]):Dr.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function qy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new fA;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=AA.bind(null,t,e,n),e.then(t,t))}function Gy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ky(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Kn(-1,1),e.tag=2,Or(n,e,1))),n.lanes|=1),t)}var pA=cr.ReactCurrentOwner,bt=!1;function Ct(t,e,n,r){e.child=t===null?E_(e,null,n,r):Oo(e,t.child,n,r)}function Qy(t,e,n,r,i){n=n.render;var o=e.ref;return Co(e,i),r=$p(t,e,n,r,o,i),n=Np(),t!==null&&!bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Zn(t,e,i)):(Re&&n&&_p(e),e.flags|=1,Ct(t,e,r,i),e.child)}function Yy(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!zp(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,K_(t,e,o,r,i)):(t=cc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:ma,n(s,r)&&t.ref===e.ref)return Zn(t,e,i)}return e.flags|=1,t=Vr(o,r),t.ref=e.ref,t.return=e,e.child=t}function K_(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(ma(o,r)&&t.ref===e.ref)if(bt=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(bt=!0);else return e.lanes=t.lanes,Zn(t,e,i)}return nf(t,e,n,r,i)}function Q_(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(wo,Ot),Ot|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Te(wo,Ot),Ot|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Te(wo,Ot),Ot|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Te(wo,Ot),Ot|=r;return Ct(t,e,i,n),e.child}function Y_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function nf(t,e,n,r,i){var o=Nt(n)?Ii:_t.current;return o=Fo(e,o),Co(e,i),n=$p(t,e,n,r,o,i),r=Np(),t!==null&&!bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Zn(t,e,i)):(Re&&r&&_p(e),e.flags|=1,Ct(t,e,n,i),e.child)}function Xy(t,e,n,r,i){if(Nt(n)){var o=!0;Fc(e)}else o=!1;if(Co(e,i),e.stateNode===null)sc(t,e),H_(e,n,r),ef(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=Jt(u):(u=Nt(n)?Ii:_t.current,u=Fo(e,u));var d=n.getDerivedStateFromProps,p=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Hy(e,s,r,u),Tr=!1;var f=e.memoizedState;s.state=f,Vc(e,r,s,i),l=e.memoizedState,a!==r||f!==l||$t.current||Tr?(typeof d=="function"&&(Zh(e,n,d,r),l=e.memoizedState),(a=Tr||Wy(e,n,a,r,f,l,u))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,C_(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:rn(e.type,a),s.props=u,p=e.pendingProps,f=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=Jt(l):(l=Nt(n)?Ii:_t.current,l=Fo(e,l));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==p||f!==l)&&Hy(e,s,r,l),Tr=!1,f=e.memoizedState,s.state=f,Vc(e,r,s,i);var E=e.memoizedState;a!==p||f!==E||$t.current||Tr?(typeof g=="function"&&(Zh(e,n,g,r),E=e.memoizedState),(u=Tr||Wy(e,n,u,r,f,E,l)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,E,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,E,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),s.props=r,s.state=E,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return rf(t,e,n,r,o,i)}function rf(t,e,n,r,i,o){Y_(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&Oy(e,n,!1),Zn(t,e,o);r=e.stateNode,pA.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Oo(e,t.child,null,o),e.child=Oo(e,null,a,o)):Ct(t,e,a,o),e.memoizedState=r.state,i&&Oy(e,n,!0),e.child}function X_(t){var e=t.stateNode;e.pendingContext?Ly(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ly(t,e.context,!1),Rp(t,e.containerInfo)}function Jy(t,e,n,r,i){return Lo(),Ep(i),e.flags|=256,Ct(t,e,n,r),e.child}var of={dehydrated:null,treeContext:null,retryLane:0};function sf(t){return{baseLanes:t,cachePool:null,transitions:null}}function J_(t,e,n){var r=e.pendingProps,i=Pe.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Te(Pe,i&1),t===null)return Xh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Ru(s,r,0,null),t=Ti(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=sf(n),e.memoizedState=of,t):Op(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return mA(t,e,s,r,a,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Vr(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=Vr(a,o):(o=Ti(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?sf(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=of,r}return o=t.child,t=o.sibling,r=Vr(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Op(t,e){return e=Ru({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Fl(t,e,n,r){return r!==null&&Ep(r),Oo(e,t.child,null,n),t=Op(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function mA(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=Kd(Error(U(422))),Fl(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Ru({mode:"visible",children:r.children},i,0,null),o=Ti(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Oo(e,t.child,null,s),e.child.memoizedState=sf(s),e.memoizedState=of,o);if(!(e.mode&1))return Fl(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(U(419)),r=Kd(o,r,void 0),Fl(t,e,s,r)}if(a=(s&t.childLanes)!==0,bt||a){if(r=Ze,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Jn(t,i),cn(r,t,i,-1))}return Bp(),r=Kd(Error(U(421))),Fl(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=RA.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Mt=Lr(i.nextSibling),Vt=e,Re=!0,sn=null,t!==null&&(Gt[Kt++]=Bn,Gt[Kt++]=zn,Gt[Kt++]=Ai,Bn=t.id,zn=t.overflow,Ai=e),e=Op(e,r.children),e.flags|=4096,e)}function Zy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Jh(t.return,e,n)}function Qd(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Z_(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Ct(t,e,r.children,n),r=Pe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Zy(t,n,e);else if(t.tag===19)Zy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Te(Pe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&jc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Qd(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&jc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Qd(e,!0,n,null,o);break;case"together":Qd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function sc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Zn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ki|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Vr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Vr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function gA(t,e,n){switch(e.tag){case 3:X_(e),Lo();break;case 5:S_(e);break;case 1:Nt(e.type)&&Fc(e);break;case 4:Rp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Te(Dc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Te(Pe,Pe.current&1),e.flags|=128,null):n&e.child.childLanes?J_(t,e,n):(Te(Pe,Pe.current&1),t=Zn(t,e,n),t!==null?t.sibling:null);Te(Pe,Pe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Z_(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Te(Pe,Pe.current),r)break;return null;case 22:case 23:return e.lanes=0,Q_(t,e,n)}return Zn(t,e,n)}var ex,af,tx,nx;ex=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};af=function(){};tx=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,wi(xn.current);var o=null;switch(n){case"input":i=Rh(t,i),r=Rh(t,r),o=[];break;case"select":i=Ne({},i,{value:void 0}),r=Ne({},r,{value:void 0}),o=[];break;case"textarea":i=bh(t,i),r=bh(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=$c)}Nh(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(la.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(la.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ie("scroll",t),o||a===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};nx=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ns(t,e){if(!Re)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function yA(t,e,n){var r=e.pendingProps;switch(xp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(e),null;case 1:return Nt(e.type)&&Nc(),mt(e),null;case 3:return r=e.stateNode,Do(),Ae($t),Ae(_t),Pp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&($l(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,sn!==null&&(mf(sn),sn=null))),af(t,e),mt(e),null;case 5:kp(e);var i=wi(_a.current);if(n=e.type,t!==null&&e.stateNode!=null)tx(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return mt(e),null}if(t=wi(xn.current),$l(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[vn]=e,r[va]=o,t=(e.mode&1)!==0,n){case"dialog":Ie("cancel",r),Ie("close",r);break;case"iframe":case"object":case"embed":Ie("load",r);break;case"video":case"audio":for(i=0;i<zs.length;i++)Ie(zs[i],r);break;case"source":Ie("error",r);break;case"img":case"image":case"link":Ie("error",r),Ie("load",r);break;case"details":Ie("toggle",r);break;case"input":ly(r,o),Ie("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ie("invalid",r);break;case"textarea":uy(r,o),Ie("invalid",r)}Nh(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&bl(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&bl(r.textContent,a,t),i=["children",""+a]):la.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Ie("scroll",r)}switch(n){case"input":Tl(r),cy(r,o,!0);break;case"textarea":Tl(r),dy(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=$c)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Pw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[vn]=e,t[va]=r,ex(t,e,!1,!1),e.stateNode=t;e:{switch(s=Fh(n,r),n){case"dialog":Ie("cancel",t),Ie("close",t),i=r;break;case"iframe":case"object":case"embed":Ie("load",t),i=r;break;case"video":case"audio":for(i=0;i<zs.length;i++)Ie(zs[i],t);i=r;break;case"source":Ie("error",t),i=r;break;case"img":case"image":case"link":Ie("error",t),Ie("load",t),i=r;break;case"details":Ie("toggle",t),i=r;break;case"input":ly(t,r),i=Rh(t,r),Ie("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ne({},r,{value:void 0}),Ie("invalid",t);break;case"textarea":uy(t,r),i=bh(t,r),Ie("invalid",t);break;default:i=r}Nh(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?Nw(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&bw(t,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ca(t,l):typeof l=="number"&&ca(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(la.hasOwnProperty(o)?l!=null&&o==="onScroll"&&Ie("scroll",t):l!=null&&sp(t,o,l,s))}switch(n){case"input":Tl(t),cy(t,r,!1);break;case"textarea":Tl(t),dy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Hr(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?_o(t,!!r.multiple,o,!1):r.defaultValue!=null&&_o(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=$c)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return mt(e),null;case 6:if(t&&e.stateNode!=null)nx(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=wi(_a.current),wi(xn.current),$l(e)){if(r=e.stateNode,n=e.memoizedProps,r[vn]=e,(o=r.nodeValue!==n)&&(t=Vt,t!==null))switch(t.tag){case 3:bl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&bl(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[vn]=e,e.stateNode=r}return mt(e),null;case 13:if(Ae(Pe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Re&&Mt!==null&&e.mode&1&&!(e.flags&128))__(),Lo(),e.flags|=98560,o=!1;else if(o=$l(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(U(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(U(317));o[vn]=e}else Lo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;mt(e),o=!1}else sn!==null&&(mf(sn),sn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Pe.current&1?qe===0&&(qe=3):Bp())),e.updateQueue!==null&&(e.flags|=4),mt(e),null);case 4:return Do(),af(t,e),t===null&&ga(e.stateNode.containerInfo),mt(e),null;case 10:return Sp(e.type._context),mt(e),null;case 17:return Nt(e.type)&&Nc(),mt(e),null;case 19:if(Ae(Pe),o=e.memoizedState,o===null)return mt(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)Ns(o,!1);else{if(qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=jc(t),s!==null){for(e.flags|=128,Ns(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Te(Pe,Pe.current&1|2),e.child}t=t.sibling}o.tail!==null&&Me()>Vo&&(e.flags|=128,r=!0,Ns(o,!1),e.lanes=4194304)}else{if(!r)if(t=jc(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ns(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Re)return mt(e),null}else 2*Me()-o.renderingStartTime>Vo&&n!==1073741824&&(e.flags|=128,r=!0,Ns(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Me(),e.sibling=null,n=Pe.current,Te(Pe,r?n&1|2:n&1),e):(mt(e),null);case 22:case 23:return Up(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ot&1073741824&&(mt(e),e.subtreeFlags&6&&(e.flags|=8192)):mt(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function vA(t,e){switch(xp(e),e.tag){case 1:return Nt(e.type)&&Nc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Do(),Ae($t),Ae(_t),Pp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return kp(e),null;case 13:if(Ae(Pe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Lo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ae(Pe),null;case 4:return Do(),null;case 10:return Sp(e.type._context),null;case 22:case 23:return Up(),null;case 24:return null;default:return null}}var Ll=!1,vt=!1,wA=typeof WeakSet=="function"?WeakSet:Set,G=null;function vo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Oe(t,e,r)}else n.current=null}function lf(t,e,n){try{n()}catch(r){Oe(t,e,r)}}var ev=!1;function _A(t,e){if(Wh=kc,t=a_(),wp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,u=0,d=0,p=t,f=null;t:for(;;){for(var g;p!==n||i!==0&&p.nodeType!==3||(a=s+i),p!==o||r!==0&&p.nodeType!==3||(l=s+r),p.nodeType===3&&(s+=p.nodeValue.length),(g=p.firstChild)!==null;)f=p,p=g;for(;;){if(p===t)break t;if(f===n&&++u===i&&(a=s),f===o&&++d===r&&(l=s),(g=p.nextSibling)!==null)break;p=f,f=p.parentNode}p=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Hh={focusedElem:t,selectionRange:n},kc=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var w=E.memoizedProps,A=E.memoizedState,_=e.stateNode,y=_.getSnapshotBeforeUpdate(e.elementType===e.type?w:rn(e.type,w),A);_.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(b){Oe(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return E=ev,ev=!1,E}function ea(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&lf(e,n,o)}i=i.next}while(i!==r)}}function Iu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function cf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function rx(t){var e=t.alternate;e!==null&&(t.alternate=null,rx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[vn],delete e[va],delete e[Kh],delete e[nA],delete e[rA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ix(t){return t.tag===5||t.tag===3||t.tag===4}function tv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ix(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function uf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=$c));else if(r!==4&&(t=t.child,t!==null))for(uf(t,e,n),t=t.sibling;t!==null;)uf(t,e,n),t=t.sibling}function df(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(df(t,e,n),t=t.sibling;t!==null;)df(t,e,n),t=t.sibling}var rt=null,on=!1;function gr(t,e,n){for(n=n.child;n!==null;)ox(t,e,n),n=n.sibling}function ox(t,e,n){if(_n&&typeof _n.onCommitFiberUnmount=="function")try{_n.onCommitFiberUnmount(vu,n)}catch{}switch(n.tag){case 5:vt||vo(n,e);case 6:var r=rt,i=on;rt=null,gr(t,e,n),rt=r,on=i,rt!==null&&(on?(t=rt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):rt.removeChild(n.stateNode));break;case 18:rt!==null&&(on?(t=rt,n=n.stateNode,t.nodeType===8?Bd(t.parentNode,n):t.nodeType===1&&Bd(t,n),fa(t)):Bd(rt,n.stateNode));break;case 4:r=rt,i=on,rt=n.stateNode.containerInfo,on=!0,gr(t,e,n),rt=r,on=i;break;case 0:case 11:case 14:case 15:if(!vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&lf(n,e,s),i=i.next}while(i!==r)}gr(t,e,n);break;case 1:if(!vt&&(vo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Oe(n,e,a)}gr(t,e,n);break;case 21:gr(t,e,n);break;case 22:n.mode&1?(vt=(r=vt)||n.memoizedState!==null,gr(t,e,n),vt=r):gr(t,e,n);break;default:gr(t,e,n)}}function nv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new wA),e.forEach(function(r){var i=kA.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function tn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:rt=a.stateNode,on=!1;break e;case 3:rt=a.stateNode.containerInfo,on=!0;break e;case 4:rt=a.stateNode.containerInfo,on=!0;break e}a=a.return}if(rt===null)throw Error(U(160));ox(o,s,i),rt=null,on=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Oe(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)sx(e,t),e=e.sibling}function sx(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(tn(e,t),gn(t),r&4){try{ea(3,t,t.return),Iu(3,t)}catch(w){Oe(t,t.return,w)}try{ea(5,t,t.return)}catch(w){Oe(t,t.return,w)}}break;case 1:tn(e,t),gn(t),r&512&&n!==null&&vo(n,n.return);break;case 5:if(tn(e,t),gn(t),r&512&&n!==null&&vo(n,n.return),t.flags&32){var i=t.stateNode;try{ca(i,"")}catch(w){Oe(t,t.return,w)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&Rw(i,o),Fh(a,s);var u=Fh(a,o);for(s=0;s<l.length;s+=2){var d=l[s],p=l[s+1];d==="style"?Nw(i,p):d==="dangerouslySetInnerHTML"?bw(i,p):d==="children"?ca(i,p):sp(i,d,p,u)}switch(a){case"input":kh(i,o);break;case"textarea":kw(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var g=o.value;g!=null?_o(i,!!o.multiple,g,!1):f!==!!o.multiple&&(o.defaultValue!=null?_o(i,!!o.multiple,o.defaultValue,!0):_o(i,!!o.multiple,o.multiple?[]:"",!1))}i[va]=o}catch(w){Oe(t,t.return,w)}}break;case 6:if(tn(e,t),gn(t),r&4){if(t.stateNode===null)throw Error(U(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(w){Oe(t,t.return,w)}}break;case 3:if(tn(e,t),gn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{fa(e.containerInfo)}catch(w){Oe(t,t.return,w)}break;case 4:tn(e,t),gn(t);break;case 13:tn(e,t),gn(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Vp=Me())),r&4&&nv(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(vt=(u=vt)||d,tn(e,t),vt=u):tn(e,t),gn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(G=t,d=t.child;d!==null;){for(p=G=d;G!==null;){switch(f=G,g=f.child,f.tag){case 0:case 11:case 14:case 15:ea(4,f,f.return);break;case 1:vo(f,f.return);var E=f.stateNode;if(typeof E.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(w){Oe(r,n,w)}}break;case 5:vo(f,f.return);break;case 22:if(f.memoizedState!==null){iv(p);continue}}g!==null?(g.return=f,G=g):iv(p)}d=d.sibling}e:for(d=null,p=t;;){if(p.tag===5){if(d===null){d=p;try{i=p.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=p.stateNode,l=p.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=$w("display",s))}catch(w){Oe(t,t.return,w)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(w){Oe(t,t.return,w)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:tn(e,t),gn(t),r&4&&nv(t);break;case 21:break;default:tn(e,t),gn(t)}}function gn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ix(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ca(i,""),r.flags&=-33);var o=tv(t);df(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=tv(t);uf(t,a,s);break;default:throw Error(U(161))}}catch(l){Oe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function xA(t,e,n){G=t,ax(t)}function ax(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var i=G,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Ll;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||vt;a=Ll;var u=vt;if(Ll=s,(vt=l)&&!u)for(G=i;G!==null;)s=G,l=s.child,s.tag===22&&s.memoizedState!==null?ov(i):l!==null?(l.return=s,G=l):ov(i);for(;o!==null;)G=o,ax(o),o=o.sibling;G=i,Ll=a,vt=u}rv(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,G=o):rv(t)}}function rv(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:vt||Iu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!vt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:rn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Uy(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Uy(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&fa(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}vt||e.flags&512&&cf(e)}catch(f){Oe(e,e.return,f)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function iv(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function ov(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Iu(4,e)}catch(l){Oe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Oe(e,i,l)}}var o=e.return;try{cf(e)}catch(l){Oe(e,o,l)}break;case 5:var s=e.return;try{cf(e)}catch(l){Oe(e,s,l)}}}catch(l){Oe(e,e.return,l)}if(e===t){G=null;break}var a=e.sibling;if(a!==null){a.return=e.return,G=a;break}G=e.return}}var EA=Math.ceil,zc=cr.ReactCurrentDispatcher,Dp=cr.ReactCurrentOwner,Xt=cr.ReactCurrentBatchConfig,pe=0,Ze=null,Be=null,st=0,Ot=0,wo=ri(0),qe=0,Ca=null,ki=0,Au=0,Mp=0,ta=null,Pt=null,Vp=0,Vo=1/0,Vn=null,Wc=!1,hf=null,Dr=null,Ol=!1,Pr=null,Hc=0,na=0,ff=null,ac=-1,lc=0;function St(){return pe&6?Me():ac!==-1?ac:ac=Me()}function Mr(t){return t.mode&1?pe&2&&st!==0?st&-st:oA.transition!==null?(lc===0&&(lc=Hw()),lc):(t=_e,t!==0||(t=window.event,t=t===void 0?16:Jw(t.type)),t):1}function cn(t,e,n,r){if(50<na)throw na=0,ff=null,Error(U(185));Ma(t,n,r),(!(pe&2)||t!==Ze)&&(t===Ze&&(!(pe&2)&&(Au|=n),qe===4&&Sr(t,st)),Ft(t,r),n===1&&pe===0&&!(e.mode&1)&&(Vo=Me()+500,Tu&&ii()))}function Ft(t,e){var n=t.callbackNode;oI(t,e);var r=Rc(t,t===Ze?st:0);if(r===0)n!==null&&py(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&py(n),e===1)t.tag===0?iA(sv.bind(null,t)):y_(sv.bind(null,t)),eA(function(){!(pe&6)&&ii()}),n=null;else{switch(qw(r)){case 1:n=dp;break;case 4:n=zw;break;case 16:n=Ac;break;case 536870912:n=Ww;break;default:n=Ac}n=mx(n,lx.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function lx(t,e){if(ac=-1,lc=0,pe&6)throw Error(U(327));var n=t.callbackNode;if(So()&&t.callbackNode!==n)return null;var r=Rc(t,t===Ze?st:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=qc(t,r);else{e=r;var i=pe;pe|=2;var o=ux();(Ze!==t||st!==e)&&(Vn=null,Vo=Me()+500,Ei(t,e));do try{SA();break}catch(a){cx(t,a)}while(!0);Cp(),zc.current=o,pe=i,Be!==null?e=0:(Ze=null,st=0,e=qe)}if(e!==0){if(e===2&&(i=Vh(t),i!==0&&(r=i,e=pf(t,i))),e===1)throw n=Ca,Ei(t,0),Sr(t,r),Ft(t,Me()),n;if(e===6)Sr(t,r);else{if(i=t.current.alternate,!(r&30)&&!TA(i)&&(e=qc(t,r),e===2&&(o=Vh(t),o!==0&&(r=o,e=pf(t,o))),e===1))throw n=Ca,Ei(t,0),Sr(t,r),Ft(t,Me()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:mi(t,Pt,Vn);break;case 3:if(Sr(t,r),(r&130023424)===r&&(e=Vp+500-Me(),10<e)){if(Rc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){St(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Gh(mi.bind(null,t,Pt,Vn),e);break}mi(t,Pt,Vn);break;case 4:if(Sr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-ln(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=Me()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*EA(r/1960))-r,10<r){t.timeoutHandle=Gh(mi.bind(null,t,Pt,Vn),r);break}mi(t,Pt,Vn);break;case 5:mi(t,Pt,Vn);break;default:throw Error(U(329))}}}return Ft(t,Me()),t.callbackNode===n?lx.bind(null,t):null}function pf(t,e){var n=ta;return t.current.memoizedState.isDehydrated&&(Ei(t,e).flags|=256),t=qc(t,e),t!==2&&(e=Pt,Pt=n,e!==null&&mf(e)),t}function mf(t){Pt===null?Pt=t:Pt.push.apply(Pt,t)}function TA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!dn(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Sr(t,e){for(e&=~Mp,e&=~Au,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ln(e),r=1<<n;t[n]=-1,e&=~r}}function sv(t){if(pe&6)throw Error(U(327));So();var e=Rc(t,0);if(!(e&1))return Ft(t,Me()),null;var n=qc(t,e);if(t.tag!==0&&n===2){var r=Vh(t);r!==0&&(e=r,n=pf(t,r))}if(n===1)throw n=Ca,Ei(t,0),Sr(t,e),Ft(t,Me()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,mi(t,Pt,Vn),Ft(t,Me()),null}function jp(t,e){var n=pe;pe|=1;try{return t(e)}finally{pe=n,pe===0&&(Vo=Me()+500,Tu&&ii())}}function Pi(t){Pr!==null&&Pr.tag===0&&!(pe&6)&&So();var e=pe;pe|=1;var n=Xt.transition,r=_e;try{if(Xt.transition=null,_e=1,t)return t()}finally{_e=r,Xt.transition=n,pe=e,!(pe&6)&&ii()}}function Up(){Ot=wo.current,Ae(wo)}function Ei(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ZI(n)),Be!==null)for(n=Be.return;n!==null;){var r=n;switch(xp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Nc();break;case 3:Do(),Ae($t),Ae(_t),Pp();break;case 5:kp(r);break;case 4:Do();break;case 13:Ae(Pe);break;case 19:Ae(Pe);break;case 10:Sp(r.type._context);break;case 22:case 23:Up()}n=n.return}if(Ze=t,Be=t=Vr(t.current,null),st=Ot=e,qe=0,Ca=null,Mp=Au=ki=0,Pt=ta=null,vi!==null){for(e=0;e<vi.length;e++)if(n=vi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}vi=null}return t}function cx(t,e){do{var n=Be;try{if(Cp(),ic.current=Bc,Uc){for(var r=be.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Uc=!1}if(Ri=0,Je=We=be=null,Zs=!1,xa=0,Dp.current=null,n===null||n.return===null){qe=1,Ca=e,Be=null;break}e:{var o=t,s=n.return,a=n,l=e;if(e=st,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=Gy(s);if(g!==null){g.flags&=-257,Ky(g,s,a,o,e),g.mode&1&&qy(o,u,e),e=g,l=u;var E=e.updateQueue;if(E===null){var w=new Set;w.add(l),e.updateQueue=w}else E.add(l);break e}else{if(!(e&1)){qy(o,u,e),Bp();break e}l=Error(U(426))}}else if(Re&&a.mode&1){var A=Gy(s);if(A!==null){!(A.flags&65536)&&(A.flags|=256),Ky(A,s,a,o,e),Ep(Mo(l,a));break e}}o=l=Mo(l,a),qe!==4&&(qe=2),ta===null?ta=[o]:ta.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var _=q_(o,l,e);jy(o,_);break e;case 1:a=l;var y=o.type,C=o.stateNode;if(!(o.flags&128)&&(typeof y.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Dr===null||!Dr.has(C)))){o.flags|=65536,e&=-e,o.lanes|=e;var b=G_(o,a,e);jy(o,b);break e}}o=o.return}while(o!==null)}hx(n)}catch(F){e=F,Be===n&&n!==null&&(Be=n=n.return);continue}break}while(!0)}function ux(){var t=zc.current;return zc.current=Bc,t===null?Bc:t}function Bp(){(qe===0||qe===3||qe===2)&&(qe=4),Ze===null||!(ki&268435455)&&!(Au&268435455)||Sr(Ze,st)}function qc(t,e){var n=pe;pe|=2;var r=ux();(Ze!==t||st!==e)&&(Vn=null,Ei(t,e));do try{CA();break}catch(i){cx(t,i)}while(!0);if(Cp(),pe=n,zc.current=r,Be!==null)throw Error(U(261));return Ze=null,st=0,qe}function CA(){for(;Be!==null;)dx(Be)}function SA(){for(;Be!==null&&!Y1();)dx(Be)}function dx(t){var e=px(t.alternate,t,Ot);t.memoizedProps=t.pendingProps,e===null?hx(t):Be=e,Dp.current=null}function hx(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=vA(n,e),n!==null){n.flags&=32767,Be=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qe=6,Be=null;return}}else if(n=yA(n,e,Ot),n!==null){Be=n;return}if(e=e.sibling,e!==null){Be=e;return}Be=e=t}while(e!==null);qe===0&&(qe=5)}function mi(t,e,n){var r=_e,i=Xt.transition;try{Xt.transition=null,_e=1,IA(t,e,n,r)}finally{Xt.transition=i,_e=r}return null}function IA(t,e,n,r){do So();while(Pr!==null);if(pe&6)throw Error(U(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(sI(t,o),t===Ze&&(Be=Ze=null,st=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ol||(Ol=!0,mx(Ac,function(){return So(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Xt.transition,Xt.transition=null;var s=_e;_e=1;var a=pe;pe|=4,Dp.current=null,_A(t,n),sx(n,t),qI(Hh),kc=!!Wh,Hh=Wh=null,t.current=n,xA(n),X1(),pe=a,_e=s,Xt.transition=o}else t.current=n;if(Ol&&(Ol=!1,Pr=t,Hc=i),o=t.pendingLanes,o===0&&(Dr=null),eI(n.stateNode),Ft(t,Me()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wc)throw Wc=!1,t=hf,hf=null,t;return Hc&1&&t.tag!==0&&So(),o=t.pendingLanes,o&1?t===ff?na++:(na=0,ff=t):na=0,ii(),null}function So(){if(Pr!==null){var t=qw(Hc),e=Xt.transition,n=_e;try{if(Xt.transition=null,_e=16>t?16:t,Pr===null)var r=!1;else{if(t=Pr,Pr=null,Hc=0,pe&6)throw Error(U(331));var i=pe;for(pe|=4,G=t.current;G!==null;){var o=G,s=o.child;if(G.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(G=u;G!==null;){var d=G;switch(d.tag){case 0:case 11:case 15:ea(8,d,o)}var p=d.child;if(p!==null)p.return=d,G=p;else for(;G!==null;){d=G;var f=d.sibling,g=d.return;if(rx(d),d===u){G=null;break}if(f!==null){f.return=g,G=f;break}G=g}}}var E=o.alternate;if(E!==null){var w=E.child;if(w!==null){E.child=null;do{var A=w.sibling;w.sibling=null,w=A}while(w!==null)}}G=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,G=s;else e:for(;G!==null;){if(o=G,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ea(9,o,o.return)}var _=o.sibling;if(_!==null){_.return=o.return,G=_;break e}G=o.return}}var y=t.current;for(G=y;G!==null;){s=G;var C=s.child;if(s.subtreeFlags&2064&&C!==null)C.return=s,G=C;else e:for(s=y;G!==null;){if(a=G,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Iu(9,a)}}catch(F){Oe(a,a.return,F)}if(a===s){G=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,G=b;break e}G=a.return}}if(pe=i,ii(),_n&&typeof _n.onPostCommitFiberRoot=="function")try{_n.onPostCommitFiberRoot(vu,t)}catch{}r=!0}return r}finally{_e=n,Xt.transition=e}}return!1}function av(t,e,n){e=Mo(n,e),e=q_(t,e,1),t=Or(t,e,1),e=St(),t!==null&&(Ma(t,1,e),Ft(t,e))}function Oe(t,e,n){if(t.tag===3)av(t,t,n);else for(;e!==null;){if(e.tag===3){av(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Dr===null||!Dr.has(r))){t=Mo(n,t),t=G_(e,t,1),e=Or(e,t,1),t=St(),e!==null&&(Ma(e,1,t),Ft(e,t));break}}e=e.return}}function AA(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=St(),t.pingedLanes|=t.suspendedLanes&n,Ze===t&&(st&n)===n&&(qe===4||qe===3&&(st&130023424)===st&&500>Me()-Vp?Ei(t,0):Mp|=n),Ft(t,e)}function fx(t,e){e===0&&(t.mode&1?(e=Il,Il<<=1,!(Il&130023424)&&(Il=4194304)):e=1);var n=St();t=Jn(t,e),t!==null&&(Ma(t,e,n),Ft(t,n))}function RA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),fx(t,n)}function kA(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),fx(t,n)}var px;px=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||$t.current)bt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return bt=!1,gA(t,e,n);bt=!!(t.flags&131072)}else bt=!1,Re&&e.flags&1048576&&v_(e,Oc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;sc(t,e),t=e.pendingProps;var i=Fo(e,_t.current);Co(e,n),i=$p(null,e,r,t,i,n);var o=Np();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Nt(r)?(o=!0,Fc(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ap(e),i.updater=Su,e.stateNode=i,i._reactInternals=e,ef(e,r,t,n),e=rf(null,e,r,!0,o,n)):(e.tag=0,Re&&o&&_p(e),Ct(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(sc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=bA(r),t=rn(r,t),i){case 0:e=nf(null,e,r,t,n);break e;case 1:e=Xy(null,e,r,t,n);break e;case 11:e=Qy(null,e,r,t,n);break e;case 14:e=Yy(null,e,r,rn(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rn(r,i),nf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rn(r,i),Xy(t,e,r,i,n);case 3:e:{if(X_(e),t===null)throw Error(U(387));r=e.pendingProps,o=e.memoizedState,i=o.element,C_(t,e),Vc(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Mo(Error(U(423)),e),e=Jy(t,e,r,n,i);break e}else if(r!==i){i=Mo(Error(U(424)),e),e=Jy(t,e,r,n,i);break e}else for(Mt=Lr(e.stateNode.containerInfo.firstChild),Vt=e,Re=!0,sn=null,n=E_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Lo(),r===i){e=Zn(t,e,n);break e}Ct(t,e,r,n)}e=e.child}return e;case 5:return S_(e),t===null&&Xh(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,qh(r,i)?s=null:o!==null&&qh(r,o)&&(e.flags|=32),Y_(t,e),Ct(t,e,s,n),e.child;case 6:return t===null&&Xh(e),null;case 13:return J_(t,e,n);case 4:return Rp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Oo(e,null,r,n):Ct(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rn(r,i),Qy(t,e,r,i,n);case 7:return Ct(t,e,e.pendingProps,n),e.child;case 8:return Ct(t,e,e.pendingProps.children,n),e.child;case 12:return Ct(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,Te(Dc,r._currentValue),r._currentValue=s,o!==null)if(dn(o.value,s)){if(o.children===i.children&&!$t.current){e=Zn(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=Kn(-1,n&-n),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Jh(o.return,n,e),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(U(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Jh(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Ct(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Co(e,n),i=Jt(i),r=r(i),e.flags|=1,Ct(t,e,r,n),e.child;case 14:return r=e.type,i=rn(r,e.pendingProps),i=rn(r.type,i),Yy(t,e,r,i,n);case 15:return K_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rn(r,i),sc(t,e),e.tag=1,Nt(r)?(t=!0,Fc(e)):t=!1,Co(e,n),H_(e,r,i),ef(e,r,i,n),rf(null,e,r,!0,t,n);case 19:return Z_(t,e,n);case 22:return Q_(t,e,n)}throw Error(U(156,e.tag))};function mx(t,e){return Bw(t,e)}function PA(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(t,e,n,r){return new PA(t,e,n,r)}function zp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function bA(t){if(typeof t=="function")return zp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===lp)return 11;if(t===cp)return 14}return 2}function Vr(t,e){var n=t.alternate;return n===null?(n=Yt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function cc(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")zp(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case lo:return Ti(n.children,i,o,e);case ap:s=8,i|=8;break;case Ch:return t=Yt(12,n,e,i|2),t.elementType=Ch,t.lanes=o,t;case Sh:return t=Yt(13,n,e,i),t.elementType=Sh,t.lanes=o,t;case Ih:return t=Yt(19,n,e,i),t.elementType=Ih,t.lanes=o,t;case Sw:return Ru(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Tw:s=10;break e;case Cw:s=9;break e;case lp:s=11;break e;case cp:s=14;break e;case Er:s=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Yt(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Ti(t,e,n,r){return t=Yt(7,t,r,e),t.lanes=n,t}function Ru(t,e,n,r){return t=Yt(22,t,r,e),t.elementType=Sw,t.lanes=n,t.stateNode={isHidden:!1},t}function Yd(t,e,n){return t=Yt(6,t,null,e),t.lanes=n,t}function Xd(t,e,n){return e=Yt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $A(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bd(0),this.expirationTimes=bd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Wp(t,e,n,r,i,o,s,a,l){return t=new $A(t,e,n,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Yt(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ap(o),t}function NA(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ao,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function gx(t){if(!t)return qr;t=t._reactInternals;e:{if(Mi(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Nt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Nt(n))return g_(t,n,e)}return e}function yx(t,e,n,r,i,o,s,a,l){return t=Wp(n,r,!0,t,i,o,s,a,l),t.context=gx(null),n=t.current,r=St(),i=Mr(n),o=Kn(r,i),o.callback=e??null,Or(n,o,i),t.current.lanes=i,Ma(t,i,r),Ft(t,r),t}function ku(t,e,n,r){var i=e.current,o=St(),s=Mr(i);return n=gx(n),e.context===null?e.context=n:e.pendingContext=n,e=Kn(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Or(i,e,s),t!==null&&(cn(t,i,s,o),rc(t,i,s)),s}function Gc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function lv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Hp(t,e){lv(t,e),(t=t.alternate)&&lv(t,e)}function FA(){return null}var vx=typeof reportError=="function"?reportError:function(t){console.error(t)};function qp(t){this._internalRoot=t}Pu.prototype.render=qp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));ku(t,e,null,null)};Pu.prototype.unmount=qp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Pi(function(){ku(null,t,null,null)}),e[Xn]=null}};function Pu(t){this._internalRoot=t}Pu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Qw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Cr.length&&e!==0&&e<Cr[n].priority;n++);Cr.splice(n,0,t),n===0&&Xw(t)}};function Gp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function bu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function cv(){}function LA(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=Gc(s);o.call(u)}}var s=yx(e,r,t,0,null,!1,!1,"",cv);return t._reactRootContainer=s,t[Xn]=s.current,ga(t.nodeType===8?t.parentNode:t),Pi(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Gc(l);a.call(u)}}var l=Wp(t,0,!1,null,null,!1,!1,"",cv);return t._reactRootContainer=l,t[Xn]=l.current,ga(t.nodeType===8?t.parentNode:t),Pi(function(){ku(e,l,n,r)}),l}function $u(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=Gc(s);a.call(l)}}ku(e,s,t,i)}else s=LA(n,e,t,i,r);return Gc(s)}Gw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Bs(e.pendingLanes);n!==0&&(hp(e,n|1),Ft(e,Me()),!(pe&6)&&(Vo=Me()+500,ii()))}break;case 13:Pi(function(){var r=Jn(t,1);if(r!==null){var i=St();cn(r,t,1,i)}}),Hp(t,1)}};fp=function(t){if(t.tag===13){var e=Jn(t,134217728);if(e!==null){var n=St();cn(e,t,134217728,n)}Hp(t,134217728)}};Kw=function(t){if(t.tag===13){var e=Mr(t),n=Jn(t,e);if(n!==null){var r=St();cn(n,t,e,r)}Hp(t,e)}};Qw=function(){return _e};Yw=function(t,e){var n=_e;try{return _e=t,e()}finally{_e=n}};Oh=function(t,e,n){switch(e){case"input":if(kh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Eu(r);if(!i)throw Error(U(90));Aw(r),kh(r,i)}}}break;case"textarea":kw(t,n);break;case"select":e=n.value,e!=null&&_o(t,!!n.multiple,e,!1)}};Ow=jp;Dw=Pi;var OA={usingClientEntryPoint:!1,Events:[ja,fo,Eu,Fw,Lw,jp]},Fs={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},DA={bundleType:Fs.bundleType,version:Fs.version,rendererPackageName:Fs.rendererPackageName,rendererConfig:Fs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:cr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=jw(t),t===null?null:t.stateNode},findFiberByHostInstance:Fs.findFiberByHostInstance||FA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dl.isDisabled&&Dl.supportsFiber)try{vu=Dl.inject(DA),_n=Dl}catch{}}Ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OA;Ht.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gp(e))throw Error(U(200));return NA(t,e,null,n)};Ht.createRoot=function(t,e){if(!Gp(t))throw Error(U(299));var n=!1,r="",i=vx;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Wp(t,1,!1,null,null,n,!1,r,i),t[Xn]=e.current,ga(t.nodeType===8?t.parentNode:t),new qp(e)};Ht.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=jw(e),t=t===null?null:t.stateNode,t};Ht.flushSync=function(t){return Pi(t)};Ht.hydrate=function(t,e,n){if(!bu(e))throw Error(U(200));return $u(null,t,e,!0,n)};Ht.hydrateRoot=function(t,e,n){if(!Gp(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=vx;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=yx(e,null,t,1,n??null,i,!1,o,s),t[Xn]=e.current,ga(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Pu(e)};Ht.render=function(t,e,n){if(!bu(e))throw Error(U(200));return $u(null,t,e,!1,n)};Ht.unmountComponentAtNode=function(t){if(!bu(t))throw Error(U(40));return t._reactRootContainer?(Pi(function(){$u(null,null,t,!1,function(){t._reactRootContainer=null,t[Xn]=null})}),!0):!1};Ht.unstable_batchedUpdates=jp;Ht.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!bu(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return $u(t,e,n,!1,r)};Ht.version="18.3.1-next-f1338f8080-20240426";function wx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wx)}catch(t){console.error(t)}}wx(),ww.exports=Ht;var ts=ww.exports;const MA=aw(ts);var uv=ts;Eh.createRoot=uv.createRoot,Eh.hydrateRoot=uv.hydrateRoot;var Kp={};Object.defineProperty(Kp,"__esModule",{value:!0});Kp.parse=HA;Kp.serialize=qA;const VA=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,jA=/^[\u0021-\u003A\u003C-\u007E]*$/,UA=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,BA=/^[\u0020-\u003A\u003D-\u007E]*$/,zA=Object.prototype.toString,WA=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function HA(t,e){const n=new WA,r=t.length;if(r<2)return n;const i=(e==null?void 0:e.decode)||GA;let o=0;do{const s=t.indexOf("=",o);if(s===-1)break;const a=t.indexOf(";",o),l=a===-1?r:a;if(s>l){o=t.lastIndexOf(";",s-1)+1;continue}const u=dv(t,o,s),d=hv(t,s,u),p=t.slice(u,d);if(n[p]===void 0){let f=dv(t,s+1,l),g=hv(t,l,f);const E=i(t.slice(f,g));n[p]=E}o=l+1}while(o<r);return n}function dv(t,e,n){do{const r=t.charCodeAt(e);if(r!==32&&r!==9)return e}while(++e<n);return n}function hv(t,e,n){for(;e>n;){const r=t.charCodeAt(--e);if(r!==32&&r!==9)return e+1}return n}function qA(t,e,n){const r=(n==null?void 0:n.encode)||encodeURIComponent;if(!VA.test(t))throw new TypeError(`argument name is invalid: ${t}`);const i=r(e);if(!jA.test(i))throw new TypeError(`argument val is invalid: ${e}`);let o=t+"="+i;if(!n)return o;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);o+="; Max-Age="+n.maxAge}if(n.domain){if(!UA.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);o+="; Domain="+n.domain}if(n.path){if(!BA.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);o+="; Path="+n.path}if(n.expires){if(!KA(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);o+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(o+="; HttpOnly"),n.secure&&(o+="; Secure"),n.partitioned&&(o+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"none":o+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return o}function GA(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function KA(t){return zA.call(t)==="[object Date]"}/**
 * react-router v7.1.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var fv="popstate";function QA(t={}){function e(i,o){let{pathname:s="/",search:a="",hash:l=""}=Vi(i.location.hash.substring(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),gf("",{pathname:s,search:a,hash:l},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){let s=i.document.querySelector("base"),a="";if(s&&s.getAttribute("href")){let l=i.location.href,u=l.indexOf("#");a=u===-1?l:l.slice(0,u)}return a+"#"+(typeof o=="string"?o:Sa(o))}function r(i,o){hn(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return XA(e,n,r,t)}function $e(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function hn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function YA(){return Math.random().toString(36).substring(2,10)}function pv(t,e){return{usr:t.state,key:t.key,idx:e}}function gf(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Vi(e):e,state:n,key:e&&e.key||r||YA()}}function Sa({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Vi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function XA(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a="POP",l=null,u=d();u==null&&(u=0,s.replaceState({...s.state,idx:u},""));function d(){return(s.state||{idx:null}).idx}function p(){a="POP";let A=d(),_=A==null?null:A-u;u=A,l&&l({action:a,location:w.location,delta:_})}function f(A,_){a="PUSH";let y=gf(w.location,A,_);n&&n(y,A),u=d()+1;let C=pv(y,u),b=w.createHref(y);try{s.pushState(C,"",b)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;i.location.assign(b)}o&&l&&l({action:a,location:w.location,delta:1})}function g(A,_){a="REPLACE";let y=gf(w.location,A,_);n&&n(y,A),u=d();let C=pv(y,u),b=w.createHref(y);s.replaceState(C,"",b),o&&l&&l({action:a,location:w.location,delta:0})}function E(A){let _=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof A=="string"?A:Sa(A);return y=y.replace(/ $/,"%20"),$e(_,`No window.location.(origin|href) available to create URL for href: ${y}`),new URL(y,_)}let w={get action(){return a},get location(){return t(i,s)},listen(A){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(fv,p),l=A,()=>{i.removeEventListener(fv,p),l=null}},createHref(A){return e(i,A)},createURL:E,encodeLocation(A){let _=E(A);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:f,replace:g,go(A){return s.go(A)}};return w}function _x(t,e,n="/"){return JA(t,e,n,!1)}function JA(t,e,n,r){let i=typeof e=="string"?Vi(e):e,o=Gr(i.pathname||"/",n);if(o==null)return null;let s=xx(t);ZA(s);let a=null;for(let l=0;a==null&&l<s.length;++l){let u=uR(o);a=lR(s[l],u,r)}return a}function xx(t,e=[],n=[],r=""){let i=(o,s,a)=>{let l={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};l.relativePath.startsWith("/")&&($e(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let u=Qn([r,l.relativePath]),d=n.concat(l);o.children&&o.children.length>0&&($e(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),xx(o.children,e,d,u)),!(o.path==null&&!o.index)&&e.push({path:u,score:sR(u,o.index),routesMeta:d})};return t.forEach((o,s)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))i(o,s);else for(let l of Ex(o.path))i(o,s,l)}),e}function Ex(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=Ex(r.join("/")),a=[];return a.push(...s.map(l=>l===""?o:[o,l].join("/"))),i&&a.push(...s),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function ZA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:aR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var eR=/^:[\w-]+$/,tR=3,nR=2,rR=1,iR=10,oR=-2,mv=t=>t==="*";function sR(t,e){let n=t.split("/"),r=n.length;return n.some(mv)&&(r+=oR),e&&(r+=nR),n.filter(i=>!mv(i)).reduce((i,o)=>i+(eR.test(o)?tR:o===""?rR:iR),r)}function aR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function lR(t,e,n=!1){let{routesMeta:r}=t,i={},o="/",s=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,d=o==="/"?e:e.slice(o.length)||"/",p=Kc({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),f=l.route;if(!p&&u&&n&&!r[r.length-1].route.index&&(p=Kc({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!p)return null;Object.assign(i,p.params),s.push({params:i,pathname:Qn([o,p.pathname]),pathnameBase:pR(Qn([o,p.pathnameBase])),route:f}),p.pathnameBase!=="/"&&(o=Qn([o,p.pathnameBase]))}return s}function Kc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=cR(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,{paramName:d,isOptional:p},f)=>{if(d==="*"){let E=a[f]||"";s=o.slice(0,o.length-E.length).replace(/(.)\/+$/,"$1")}const g=a[f];return p&&!g?u[d]=void 0:u[d]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:s,pattern:t}}function cR(t,e=!1,n=!0){hn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function uR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return hn(!1,`The URL path "${t}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Gr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function dR(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Vi(t):t;return{pathname:n?n.startsWith("/")?n:hR(n,e):e,search:mR(r),hash:gR(i)}}function hR(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Jd(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function fR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Tx(t){let e=fR(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Cx(t,e,n,r=!1){let i;typeof t=="string"?i=Vi(t):(i={...t},$e(!i.pathname||!i.pathname.includes("?"),Jd("?","pathname","search",i)),$e(!i.pathname||!i.pathname.includes("#"),Jd("#","pathname","hash",i)),$e(!i.search||!i.search.includes("#"),Jd("#","search","hash",i)));let o=t===""||i.pathname==="",s=o?"/":i.pathname,a;if(s==null)a=n;else{let p=e.length-1;if(!r&&s.startsWith("..")){let f=s.split("/");for(;f[0]==="..";)f.shift(),p-=1;i.pathname=f.join("/")}a=p>=0?e[p]:"/"}let l=dR(i,a),u=s&&s!=="/"&&s.endsWith("/"),d=(o||s===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}var Qn=t=>t.join("/").replace(/\/\/+/g,"/"),pR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),mR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,gR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function yR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var Sx=["POST","PUT","PATCH","DELETE"];new Set(Sx);var vR=["GET",...Sx];new Set(vR);var ns=x.createContext(null);ns.displayName="DataRouter";var Nu=x.createContext(null);Nu.displayName="DataRouterState";var Ix=x.createContext({isTransitioning:!1});Ix.displayName="ViewTransition";var wR=x.createContext(new Map);wR.displayName="Fetchers";var _R=x.createContext(null);_R.displayName="Await";var bn=x.createContext(null);bn.displayName="Navigation";var Ba=x.createContext(null);Ba.displayName="Location";var ur=x.createContext({outlet:null,matches:[],isDataRoute:!1});ur.displayName="Route";var Qp=x.createContext(null);Qp.displayName="RouteError";function xR(t,{relative:e}={}){$e(za(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=x.useContext(bn),{hash:i,pathname:o,search:s}=Wa(t,{relative:e}),a=o;return n!=="/"&&(a=o==="/"?n:Qn([n,o])),r.createHref({pathname:a,search:s,hash:i})}function za(){return x.useContext(Ba)!=null}function ji(){return $e(za(),"useLocation() may be used only in the context of a <Router> component."),x.useContext(Ba).location}var Ax="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Rx(t){x.useContext(bn).static||x.useLayoutEffect(t)}function kx(){let{isDataRoute:t}=x.useContext(ur);return t?FR():ER()}function ER(){$e(za(),"useNavigate() may be used only in the context of a <Router> component.");let t=x.useContext(ns),{basename:e,navigator:n}=x.useContext(bn),{matches:r}=x.useContext(ur),{pathname:i}=ji(),o=JSON.stringify(Tx(r)),s=x.useRef(!1);return Rx(()=>{s.current=!0}),x.useCallback((l,u={})=>{if(hn(s.current,Ax),!s.current)return;if(typeof l=="number"){n.go(l);return}let d=Cx(l,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Qn([e,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[e,n,o,i,t])}x.createContext(null);function Wa(t,{relative:e}={}){let{matches:n}=x.useContext(ur),{pathname:r}=ji(),i=JSON.stringify(Tx(n));return x.useMemo(()=>Cx(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function TR(t,e){return Px(t,e)}function Px(t,e,n,r){var _;$e(za(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=x.useContext(bn),{matches:o}=x.useContext(ur),s=o[o.length-1],a=s?s.params:{},l=s?s.pathname:"/",u=s?s.pathnameBase:"/",d=s&&s.route;{let y=d&&d.path||"";bx(l,!d||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let p=ji(),f;if(e){let y=typeof e=="string"?Vi(e):e;$e(u==="/"||((_=y.pathname)==null?void 0:_.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${y.pathname}" was given in the \`location\` prop.`),f=y}else f=p;let g=f.pathname||"/",E=g;if(u!=="/"){let y=u.replace(/^\//,"").split("/");E="/"+g.replace(/^\//,"").split("/").slice(y.length).join("/")}let w=_x(t,{pathname:E});hn(d||w!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),hn(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let A=RR(w&&w.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:Qn([u,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?u:Qn([u,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),o,n,r);return e&&A?x.createElement(Ba.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},A):A}function CR(){let t=NR(),e=yR(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=x.createElement(x.Fragment,null,x.createElement("p",null," Hey developer "),x.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",x.createElement("code",{style:o},"ErrorBoundary")," or"," ",x.createElement("code",{style:o},"errorElement")," prop on your route.")),x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),n?x.createElement("pre",{style:i},n):null,s)}var SR=x.createElement(CR,null),IR=class extends x.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?x.createElement(ur.Provider,{value:this.props.routeContext},x.createElement(Qp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function AR({routeContext:t,match:e,children:n}){let r=x.useContext(ns);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),x.createElement(ur.Provider,{value:t},n)}function RR(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=n==null?void 0:n.errors;if(o!=null){let l=i.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id])!==void 0);$e(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let s=!1,a=-1;if(n)for(let l=0;l<i.length;l++){let u=i[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(a=l),u.route.id){let{loaderData:d,errors:p}=n,f=u.route.loader&&!d.hasOwnProperty(u.route.id)&&(!p||p[u.route.id]===void 0);if(u.route.lazy||f){s=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((l,u,d)=>{let p,f=!1,g=null,E=null;n&&(p=o&&u.route.id?o[u.route.id]:void 0,g=u.route.errorElement||SR,s&&(a<0&&d===0?(bx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,E=null):a===d&&(f=!0,E=u.route.hydrateFallbackElement||null)));let w=e.concat(i.slice(0,d+1)),A=()=>{let _;return p?_=g:f?_=E:u.route.Component?_=x.createElement(u.route.Component,null):u.route.element?_=u.route.element:_=l,x.createElement(AR,{match:u,routeContext:{outlet:l,matches:w,isDataRoute:n!=null},children:_})};return n&&(u.route.ErrorBoundary||u.route.errorElement||d===0)?x.createElement(IR,{location:n.location,revalidation:n.revalidation,component:g,error:p,children:A(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):A()},null)}function Yp(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function kR(t){let e=x.useContext(ns);return $e(e,Yp(t)),e}function PR(t){let e=x.useContext(Nu);return $e(e,Yp(t)),e}function bR(t){let e=x.useContext(ur);return $e(e,Yp(t)),e}function Xp(t){let e=bR(t),n=e.matches[e.matches.length-1];return $e(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function $R(){return Xp("useRouteId")}function NR(){var r;let t=x.useContext(Qp),e=PR("useRouteError"),n=Xp("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function FR(){let{router:t}=kR("useNavigate"),e=Xp("useNavigate"),n=x.useRef(!1);return Rx(()=>{n.current=!0}),x.useCallback(async(i,o={})=>{hn(n.current,Ax),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...o}))},[t,e])}var gv={};function bx(t,e,n){!e&&!gv[t]&&(gv[t]=!0,hn(!1,n))}x.memo(LR);function LR({routes:t,future:e,state:n}){return Px(t,void 0,n,e)}function yf(t){$e(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function OR({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:o=!1}){$e(!za(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=t.replace(/^\/*/,"/"),a=x.useMemo(()=>({basename:s,navigator:i,static:o,future:{}}),[s,i,o]);typeof n=="string"&&(n=Vi(n));let{pathname:l="/",search:u="",hash:d="",state:p=null,key:f="default"}=n,g=x.useMemo(()=>{let E=Gr(l,s);return E==null?null:{location:{pathname:E,search:u,hash:d,state:p,key:f},navigationType:r}},[s,l,u,d,p,f,r]);return hn(g!=null,`<Router basename="${s}"> is not able to match the URL "${l}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:x.createElement(bn.Provider,{value:a},x.createElement(Ba.Provider,{children:e,value:g}))}function DR({children:t,location:e}){return TR(vf(t),e)}function vf(t,e=[]){let n=[];return x.Children.forEach(t,(r,i)=>{if(!x.isValidElement(r))return;let o=[...e,i];if(r.type===x.Fragment){n.push.apply(n,vf(r.props.children,o));return}$e(r.type===yf,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),$e(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=vf(r.props.children,o)),n.push(s)}),n}var uc="get",dc="application/x-www-form-urlencoded";function Fu(t){return t!=null&&typeof t.tagName=="string"}function MR(t){return Fu(t)&&t.tagName.toLowerCase()==="button"}function VR(t){return Fu(t)&&t.tagName.toLowerCase()==="form"}function jR(t){return Fu(t)&&t.tagName.toLowerCase()==="input"}function UR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function BR(t,e){return t.button===0&&(!e||e==="_self")&&!UR(t)}var Ml=null;function zR(){if(Ml===null)try{new FormData(document.createElement("form"),0),Ml=!1}catch{Ml=!0}return Ml}var WR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Zd(t){return t!=null&&!WR.has(t)?(hn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${dc}"`),null):t}function HR(t,e){let n,r,i,o,s;if(VR(t)){let a=t.getAttribute("action");r=a?Gr(a,e):null,n=t.getAttribute("method")||uc,i=Zd(t.getAttribute("enctype"))||dc,o=new FormData(t)}else if(MR(t)||jR(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?Gr(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||uc,i=Zd(t.getAttribute("formenctype"))||Zd(a.getAttribute("enctype"))||dc,o=new FormData(a,t),!zR()){let{name:u,type:d,value:p}=t;if(d==="image"){let f=u?`${u}.`:"";o.append(`${f}x`,"0"),o.append(`${f}y`,"0")}else u&&o.append(u,p)}}else{if(Fu(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=uc,r=null,i=dc,s=t}return o&&i==="text/plain"&&(s=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:s}}function Jp(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function qR(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function GR(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function KR(t,e,n){let r=await Promise.all(t.map(async i=>{let o=e.routes[i.route.id];if(o){let s=await qR(o,n);return s.links?s.links():[]}return[]}));return JR(r.flat(1).filter(GR).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function yv(t,e,n,r,i,o){let s=(l,u)=>n[u]?l.route.id!==n[u].route.id:!0,a=(l,u)=>{var d;return n[u].pathname!==l.pathname||((d=n[u].route.path)==null?void 0:d.endsWith("*"))&&n[u].params["*"]!==l.params["*"]};return o==="assets"?e.filter((l,u)=>s(l,u)||a(l,u)):o==="data"?e.filter((l,u)=>{var p;let d=r.routes[l.route.id];if(!d||!d.hasLoader)return!1;if(s(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((p=n[0])==null?void 0:p.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function QR(t,e){return YR(t.map(n=>{let r=e.routes[n.route.id];if(!r)return[];let i=[r.module];return r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function YR(t){return[...new Set(t)]}function XR(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function JR(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let o=JSON.stringify(XR(i));return n.has(o)||(n.add(o),r.push({key:o,link:i})),r},[])}function ZR(t){let e=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function ek(){let t=x.useContext(ns);return Jp(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function tk(){let t=x.useContext(Nu);return Jp(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Zp=x.createContext(void 0);Zp.displayName="FrameworkContext";function $x(){let t=x.useContext(Zp);return Jp(t,"You must render this element inside a <HydratedRouter> element"),t}function nk(t,e){let n=x.useContext(Zp),[r,i]=x.useState(!1),[o,s]=x.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:d,onTouchStart:p}=e,f=x.useRef(null);x.useEffect(()=>{if(t==="render"&&s(!0),t==="viewport"){let w=_=>{_.forEach(y=>{s(y.isIntersecting)})},A=new IntersectionObserver(w,{threshold:.5});return f.current&&A.observe(f.current),()=>{A.disconnect()}}},[t]),x.useEffect(()=>{if(r){let w=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(w)}}},[r]);let g=()=>{i(!0)},E=()=>{i(!1),s(!1)};return n?t!=="intent"?[o,f,{}]:[o,f,{onFocus:Ls(a,g),onBlur:Ls(l,E),onMouseEnter:Ls(u,g),onMouseLeave:Ls(d,E),onTouchStart:Ls(p,g)}]:[!1,f,{}]}function Ls(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function rk({page:t,...e}){let{router:n}=ek(),r=x.useMemo(()=>_x(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?x.createElement(ok,{page:t,matches:r,...e}):null}function ik(t){let{manifest:e,routeModules:n}=$x(),[r,i]=x.useState([]);return x.useEffect(()=>{let o=!1;return KR(t,e,n).then(s=>{o||i(s)}),()=>{o=!0}},[t,e,n]),r}function ok({page:t,matches:e,...n}){let r=ji(),{manifest:i,routeModules:o}=$x(),{loaderData:s,matches:a}=tk(),l=x.useMemo(()=>yv(t,e,a,i,r,"data"),[t,e,a,i,r]),u=x.useMemo(()=>yv(t,e,a,i,r,"assets"),[t,e,a,i,r]),d=x.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let g=new Set,E=!1;if(e.forEach(A=>{var y;let _=i.routes[A.route.id];!_||!_.hasLoader||(!l.some(C=>C.route.id===A.route.id)&&A.route.id in s&&((y=o[A.route.id])!=null&&y.shouldRevalidate)||_.hasClientLoader?E=!0:g.add(A.route.id))}),g.size===0)return[];let w=ZR(t);return E&&g.size>0&&w.searchParams.set("_routes",e.filter(A=>g.has(A.route.id)).map(A=>A.route.id).join(",")),[w.pathname+w.search]},[s,r,i,l,e,t,o]),p=x.useMemo(()=>QR(u,i),[u,i]),f=ik(u);return x.createElement(x.Fragment,null,d.map(g=>x.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...n})),p.map(g=>x.createElement("link",{key:g,rel:"modulepreload",href:g,...n})),f.map(({key:g,link:E})=>x.createElement("link",{key:g,...E})))}function sk(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Nx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Nx&&(window.__reactRouterVersion="7.1.1")}catch{}function ak({basename:t,children:e,window:n}){let r=x.useRef();r.current==null&&(r.current=QA({window:n,v5Compat:!0}));let i=r.current,[o,s]=x.useState({action:i.action,location:i.location}),a=x.useCallback(l=>{x.startTransition(()=>s(l))},[s]);return x.useLayoutEffect(()=>i.listen(a),[i,a]),x.createElement(OR,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:i})}var Fx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Lx=x.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:s,state:a,target:l,to:u,preventScrollReset:d,viewTransition:p,...f},g){let{basename:E}=x.useContext(bn),w=typeof u=="string"&&Fx.test(u),A,_=!1;if(typeof u=="string"&&w&&(A=u,Nx))try{let R=new URL(window.location.href),k=u.startsWith("//")?new URL(R.protocol+u):new URL(u),$=Gr(k.pathname,E);k.origin===R.origin&&$!=null?u=$+k.search+k.hash:_=!0}catch{hn(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=xR(u,{relative:i}),[C,b,F]=nk(r,f),O=dk(u,{replace:s,state:a,target:l,preventScrollReset:d,relative:i,viewTransition:p});function S(R){e&&e(R),R.defaultPrevented||O(R)}let T=x.createElement("a",{...f,...F,href:A||y,onClick:_||o?e:S,ref:sk(g,b),target:l,"data-discover":!w&&n==="render"?"true":void 0});return C&&!w?x.createElement(x.Fragment,null,T,x.createElement(rk,{page:y})):T});Lx.displayName="Link";var lk=x.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:s,viewTransition:a,children:l,...u},d){let p=Wa(s,{relative:u.relative}),f=ji(),g=x.useContext(Nu),{navigator:E,basename:w}=x.useContext(bn),A=g!=null&&gk(p)&&a===!0,_=E.encodeLocation?E.encodeLocation(p).pathname:p.pathname,y=f.pathname,C=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;n||(y=y.toLowerCase(),C=C?C.toLowerCase():null,_=_.toLowerCase()),C&&w&&(C=Gr(C,w)||C);const b=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let F=y===_||!i&&y.startsWith(_)&&y.charAt(b)==="/",O=C!=null&&(C===_||!i&&C.startsWith(_)&&C.charAt(_.length)==="/"),S={isActive:F,isPending:O,isTransitioning:A},T=F?e:void 0,R;typeof r=="function"?R=r(S):R=[r,F?"active":null,O?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let k=typeof o=="function"?o(S):o;return x.createElement(Lx,{...u,"aria-current":T,className:R,ref:d,style:k,to:s,viewTransition:a},typeof l=="function"?l(S):l)});lk.displayName="NavLink";var ck=x.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:o,method:s=uc,action:a,onSubmit:l,relative:u,preventScrollReset:d,viewTransition:p,...f},g)=>{let E=pk(),w=mk(a,{relative:u}),A=s.toLowerCase()==="get"?"get":"post",_=typeof a=="string"&&Fx.test(a),y=C=>{if(l&&l(C),C.defaultPrevented)return;C.preventDefault();let b=C.nativeEvent.submitter,F=(b==null?void 0:b.getAttribute("formmethod"))||s;E(b||C.currentTarget,{fetcherKey:e,method:F,navigate:n,replace:i,state:o,relative:u,preventScrollReset:d,viewTransition:p})};return x.createElement("form",{ref:g,method:A,action:w,onSubmit:r?l:y,...f,"data-discover":!_&&t==="render"?"true":void 0})});ck.displayName="Form";function uk(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ox(t){let e=x.useContext(ns);return $e(e,uk(t)),e}function dk(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:s}={}){let a=kx(),l=ji(),u=Wa(t,{relative:o});return x.useCallback(d=>{if(BR(d,e)){d.preventDefault();let p=n!==void 0?n:Sa(l)===Sa(u);a(t,{replace:p,state:r,preventScrollReset:i,relative:o,viewTransition:s})}},[l,a,u,n,r,e,t,i,o,s])}var hk=0,fk=()=>`__${String(++hk)}__`;function pk(){let{router:t}=Ox("useSubmit"),{basename:e}=x.useContext(bn),n=$R();return x.useCallback(async(r,i={})=>{let{action:o,method:s,encType:a,formData:l,body:u}=HR(r,e);if(i.navigate===!1){let d=i.fetcherKey||fk();await t.fetch(d,n,i.action||o,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||s,formEncType:i.encType||a,flushSync:i.flushSync})}else await t.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||s,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function mk(t,{relative:e}={}){let{basename:n}=x.useContext(bn),r=x.useContext(ur);$e(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...Wa(t||".",{relative:e})},s=ji();if(t==null){o.search=s.search;let a=new URLSearchParams(o.search),l=a.getAll("index");if(l.some(d=>d==="")){a.delete("index"),l.filter(p=>p).forEach(p=>a.append("index",p));let d=a.toString();o.search=d?`?${d}`:""}}return(!t||t===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Qn([n,o.pathname])),Sa(o)}function gk(t,e={}){let n=x.useContext(Ix);$e(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Ox("useViewTransitionState"),i=Wa(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=Gr(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=Gr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Kc(i.pathname,s)!=null||Kc(i.pathname,o)!=null}new TextEncoder;var vv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},yk=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],s=t[n++],a=t[n++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Mx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,a=s?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,d=o>>2,p=(o&3)<<4|a>>4;let f=(a&15)<<2|u>>6,g=u&63;l||(g=64,s||(f=64)),r.push(n[d],n[p],n[f],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Dx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||u==null||p==null)throw new vk;const f=o<<2|a>>4;if(r.push(f),u!==64){const g=a<<4&240|u>>2;if(r.push(g),p!==64){const E=u<<6&192|p;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class vk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wk=function(t){const e=Dx(t);return Mx.encodeByteArray(e,!0)},Qc=function(t){return wk(t).replace(/\./g,"")},Vx=function(t){try{return Mx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _k(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk=()=>_k().__FIREBASE_DEFAULTS__,Ek=()=>{if(typeof process>"u"||typeof vv>"u")return;const t=vv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Tk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Vx(t[1]);return e&&JSON.parse(e)},Lu=()=>{try{return xk()||Ek()||Tk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},jx=t=>{var e,n;return(n=(e=Lu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Ck=t=>{const e=jx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Ux=()=>{var t;return(t=Lu())===null||t===void 0?void 0:t.config},Bx=t=>{var e;return(e=Lu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Qc(JSON.stringify(n)),Qc(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ak(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xt())}function Rk(){var t;const e=(t=Lu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Pk(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function bk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $k(){const t=xt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Nk(){return!Rk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Fk(){try{return typeof indexedDB=="object"}catch{return!1}}function Lk(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok="FirebaseError";class dr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Ok,Object.setPrototypeOf(this,dr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ha.prototype.create)}}class Ha{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?Dk(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new dr(i,a,r)}}function Dk(t,e){return t.replace(Mk,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Mk=/\{\$([^}]+)}/g;function Vk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Yc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(wv(o)&&wv(s)){if(!Yc(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function wv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function jk(t,e){const n=new Uk(t,e);return n.subscribe.bind(n)}class Uk{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Bk(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=eh),i.error===void 0&&(i.error=eh),i.complete===void 0&&(i.complete=eh);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Bk(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function eh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(t){return t&&t._delegate?t._delegate:t}class bi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Sk;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Hk(e))try{this.getOrInitializeService({instanceIdentifier:gi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=gi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=gi){return this.instances.has(e)}getOptions(e=gi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Wk(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=gi){return this.component?this.component.multipleInstances?e:gi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Wk(t){return t===gi?void 0:t}function Hk(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new zk(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var le;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(le||(le={}));const Gk={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},Kk=le.INFO,Qk={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},Yk=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Qk[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class em{constructor(e){this.name=e,this._logLevel=Kk,this._logHandler=Yk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Gk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}}const Xk=(t,e)=>e.some(n=>t instanceof n);let _v,xv;function Jk(){return _v||(_v=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Zk(){return xv||(xv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zx=new WeakMap,wf=new WeakMap,Wx=new WeakMap,th=new WeakMap,tm=new WeakMap;function eP(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(jr(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&zx.set(n,t)}).catch(()=>{}),tm.set(e,t),e}function tP(t){if(wf.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});wf.set(t,e)}let _f={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return wf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Wx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return jr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function nP(t){_f=t(_f)}function rP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(nh(this),e,...n);return Wx.set(r,e.sort?e.sort():[e]),jr(r)}:Zk().includes(t)?function(...e){return t.apply(nh(this),e),jr(zx.get(this))}:function(...e){return jr(t.apply(nh(this),e))}}function iP(t){return typeof t=="function"?rP(t):(t instanceof IDBTransaction&&tP(t),Xk(t,Jk())?new Proxy(t,_f):t)}function jr(t){if(t instanceof IDBRequest)return eP(t);if(th.has(t))return th.get(t);const e=iP(t);return e!==t&&(th.set(t,e),tm.set(e,t)),e}const nh=t=>tm.get(t);function oP(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=jr(s);return r&&s.addEventListener("upgradeneeded",l=>{r(jr(s.result),l.oldVersion,l.newVersion,jr(s.transaction),l)}),n&&s.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const sP=["get","getKey","getAll","getAllKeys","count"],aP=["put","add","delete","clear"],rh=new Map;function Ev(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(rh.get(e))return rh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=aP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||sP.includes(n)))return;const o=async function(s,...a){const l=this.transaction(s,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return rh.set(e,o),o}nP(t=>({...t,get:(e,n,r)=>Ev(e,n)||t.get(e,n,r),has:(e,n)=>!!Ev(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(cP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function cP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xf="@firebase/app",Tv="0.10.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er=new em("@firebase/app"),uP="@firebase/app-compat",dP="@firebase/analytics-compat",hP="@firebase/analytics",fP="@firebase/app-check-compat",pP="@firebase/app-check",mP="@firebase/auth",gP="@firebase/auth-compat",yP="@firebase/database",vP="@firebase/data-connect",wP="@firebase/database-compat",_P="@firebase/functions",xP="@firebase/functions-compat",EP="@firebase/installations",TP="@firebase/installations-compat",CP="@firebase/messaging",SP="@firebase/messaging-compat",IP="@firebase/performance",AP="@firebase/performance-compat",RP="@firebase/remote-config",kP="@firebase/remote-config-compat",PP="@firebase/storage",bP="@firebase/storage-compat",$P="@firebase/firestore",NP="@firebase/vertexai",FP="@firebase/firestore-compat",LP="firebase",OP="11.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ef="[DEFAULT]",DP={[xf]:"fire-core",[uP]:"fire-core-compat",[hP]:"fire-analytics",[dP]:"fire-analytics-compat",[pP]:"fire-app-check",[fP]:"fire-app-check-compat",[mP]:"fire-auth",[gP]:"fire-auth-compat",[yP]:"fire-rtdb",[vP]:"fire-data-connect",[wP]:"fire-rtdb-compat",[_P]:"fire-fn",[xP]:"fire-fn-compat",[EP]:"fire-iid",[TP]:"fire-iid-compat",[CP]:"fire-fcm",[SP]:"fire-fcm-compat",[IP]:"fire-perf",[AP]:"fire-perf-compat",[RP]:"fire-rc",[kP]:"fire-rc-compat",[PP]:"fire-gcs",[bP]:"fire-gcs-compat",[$P]:"fire-fst",[FP]:"fire-fst-compat",[NP]:"fire-vertex","fire-js":"fire-js",[LP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xc=new Map,MP=new Map,Tf=new Map;function Cv(t,e){try{t.container.addComponent(e)}catch(n){er.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function jo(t){const e=t.name;if(Tf.has(e))return er.debug(`There were multiple attempts to register component ${e}.`),!1;Tf.set(e,t);for(const n of Xc.values())Cv(n,t);for(const n of MP.values())Cv(n,t);return!0}function nm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Wn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ur=new Ha("app","Firebase",VP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new bi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ur.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs=OP;function Hx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ef,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ur.create("bad-app-name",{appName:String(i)});if(n||(n=Ux()),!n)throw Ur.create("no-options");const o=Xc.get(i);if(o){if(Yc(n,o.options)&&Yc(r,o.config))return o;throw Ur.create("duplicate-app",{appName:i})}const s=new qk(i);for(const l of Tf.values())s.addComponent(l);const a=new jP(n,r,s);return Xc.set(i,a),a}function qx(t=Ef){const e=Xc.get(t);if(!e&&t===Ef&&Ux())return Hx();if(!e)throw Ur.create("no-app",{appName:t});return e}function Br(t,e,n){var r;let i=(r=DP[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),er.warn(a.join(" "));return}jo(new bi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP="firebase-heartbeat-database",BP=1,Ia="firebase-heartbeat-store";let ih=null;function Gx(){return ih||(ih=oP(UP,BP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ia)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ur.create("idb-open",{originalErrorMessage:t.message})})),ih}async function zP(t){try{const n=(await Gx()).transaction(Ia),r=await n.objectStore(Ia).get(Kx(t));return await n.done,r}catch(e){if(e instanceof dr)er.warn(e.message);else{const n=Ur.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});er.warn(n.message)}}}async function Sv(t,e){try{const r=(await Gx()).transaction(Ia,"readwrite");await r.objectStore(Ia).put(e,Kx(t)),await r.done}catch(n){if(n instanceof dr)er.warn(n.message);else{const r=Ur.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});er.warn(r.message)}}}function Kx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP=1024,HP=30*24*60*60*1e3;class qP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new KP(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Iv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const a=new Date(s.date).valueOf();return Date.now()-a<=HP}),this._storage.overwrite(this._heartbeatsCache))}catch(r){er.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Iv(),{heartbeatsToSend:r,unsentEntries:i}=GP(this._heartbeatsCache.heartbeats),o=Qc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return er.warn(n),""}}}function Iv(){return new Date().toISOString().substring(0,10)}function GP(t,e=WP){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Av(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Av(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class KP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Fk()?Lk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await zP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Sv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Sv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Av(t){return Qc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QP(t){jo(new bi("platform-logger",e=>new lP(e),"PRIVATE")),jo(new bi("heartbeat",e=>new qP(e),"PRIVATE")),Br(xf,Tv,t),Br(xf,Tv,"esm2017"),Br("fire-js","")}QP("");var YP="firebase",XP="11.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Br(YP,XP,"app");var wn=function(){return wn=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},wn.apply(this,arguments)};function Ga(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function JP(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}function Qx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ZP=Qx,Yx=new Ha("auth","Firebase",Qx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jc=new em("@firebase/auth");function e2(t,...e){Jc.logLevel<=le.WARN&&Jc.warn(`Auth (${rs}): ${t}`,...e)}function hc(t,...e){Jc.logLevel<=le.ERROR&&Jc.error(`Auth (${rs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(t,...e){throw im(t,...e)}function un(t,...e){return im(t,...e)}function rm(t,e,n){const r=Object.assign(Object.assign({},ZP()),{[e]:n});return new Ha("auth","Firebase",r).create(e,{appName:t.name})}function Ci(t){return rm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function t2(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&An(t,"argument-error"),rm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function im(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Yx.create(t,...e)}function te(t,e,...n){if(!t)throw im(e,...n)}function Hn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw hc(e),new Error(e)}function tr(t,e){t||Hn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function n2(){return Rv()==="http:"||Rv()==="https:"}function Rv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(n2()||Pk()||"connection"in navigator)?navigator.onLine:!0}function i2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,n){this.shortDelay=e,this.longDelay=n,tr(n>e,"Short delay should be less than long delay!"),this.isMobile=Ak()||bk()}get(){return r2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(t,e){tr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Hn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Hn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Hn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2=new Ka(3e4,6e4);function sm(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function is(t,e,n,r,i={}){return Jx(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});const a=qa(Object.assign({key:t.config.apiKey},s)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},o);return kk()||(u.referrerPolicy="no-referrer"),Xx.fetch()(Zx(t,t.config.apiHost,n,a),u)})}async function Jx(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},o2),e);try{const i=new l2(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw Vl(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vl(t,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw Vl(t,"email-already-in-use",s);if(l==="USER_DISABLED")throw Vl(t,"user-disabled",s);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw rm(t,d,u);An(t,d)}}catch(i){if(i instanceof dr)throw i;An(t,"network-request-failed",{message:String(i)})}}async function a2(t,e,n,r,i={}){const o=await is(t,e,n,r,i);return"mfaPendingCredential"in o&&An(t,"multi-factor-auth-required",{_serverResponse:o}),o}function Zx(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?om(t.config,i):`${t.config.apiScheme}://${i}`}class l2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(un(this.auth,"network-request-failed")),s2.get())})}}function Vl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=un(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c2(t,e){return is(t,"POST","/v1/accounts:delete",e)}async function eE(t,e){return is(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function u2(t,e=!1){const n=zt(t),r=await n.getIdToken(e),i=am(r);te(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:ra(oh(i.auth_time)),issuedAtTime:ra(oh(i.iat)),expirationTime:ra(oh(i.exp)),signInProvider:s||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function oh(t){return Number(t)*1e3}function am(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return hc("JWT malformed, contained fewer than 3 sections"),null;try{const i=Vx(n);return i?JSON.parse(i):(hc("Failed to decode base64 JWT payload"),null)}catch(i){return hc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function kv(t){const e=am(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aa(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof dr&&d2(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function d2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ra(this.lastLoginAt),this.creationTime=ra(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zc(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Aa(t,eE(n,{idToken:r}));te(i==null?void 0:i.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?tE(o.providerUserInfo):[],a=p2(t.providerData,s),l=t.isAnonymous,u=!(t.email&&o.passwordHash)&&!(a!=null&&a.length),d=l?u:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Sf(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(t,p)}async function f2(t){const e=zt(t);await Zc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function p2(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function tE(t){return t.map(e=>{var{providerId:n}=e,r=Ga(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m2(t,e){const n=await Jx(t,{},async()=>{const r=qa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=Zx(t,i,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Xx.fetch()(s,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function g2(t,e){return is(t,"POST","/v2/accounts:revokeToken",sm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):kv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){te(e.length!==0,"internal-error");const n=kv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await m2(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new Io;return r&&(te(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(te(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(te(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Io,this.toJSON())}_performRefresh(){return Hn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yr(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class qn{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Ga(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new h2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Sf(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Aa(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return u2(this,e)}reload(){return f2(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new qn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Zc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wn(this.auth.app))return Promise.reject(Ci(this.auth));const e=await this.getIdToken();return await Aa(this,c2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,l,u,d;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,g=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,E=(s=n.photoURL)!==null&&s!==void 0?s:void 0,w=(a=n.tenantId)!==null&&a!==void 0?a:void 0,A=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,_=(u=n.createdAt)!==null&&u!==void 0?u:void 0,y=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:C,emailVerified:b,isAnonymous:F,providerData:O,stsTokenManager:S}=n;te(C&&S,e,"internal-error");const T=Io.fromJSON(this.name,S);te(typeof C=="string",e,"internal-error"),yr(p,e.name),yr(f,e.name),te(typeof b=="boolean",e,"internal-error"),te(typeof F=="boolean",e,"internal-error"),yr(g,e.name),yr(E,e.name),yr(w,e.name),yr(A,e.name),yr(_,e.name),yr(y,e.name);const R=new qn({uid:C,auth:e,email:f,emailVerified:b,displayName:p,isAnonymous:F,photoURL:E,phoneNumber:g,tenantId:w,stsTokenManager:T,createdAt:_,lastLoginAt:y});return O&&Array.isArray(O)&&(R.providerData=O.map(k=>Object.assign({},k))),A&&(R._redirectEventId=A),R}static async _fromIdTokenResponse(e,n,r=!1){const i=new Io;i.updateFromServerResponse(n);const o=new qn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Zc(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];te(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?tE(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),a=new Io;a.updateFromIdToken(r);const l=new qn({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Sf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv=new Map;function Gn(t){tr(t instanceof Function,"Expected a class definition");let e=Pv.get(t);return e?(tr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Pv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}nE.type="NONE";const bv=nE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(t,e,n){return`firebase:${t}:${e}:${n}`}class Ao{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=fc(this.userKey,i.apiKey,o),this.fullPersistenceKey=fc("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?qn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ao(Gn(bv),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let o=i[0]||Gn(bv);const s=fc(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(s);if(d){const p=qn._fromJSON(e,d);u!==o&&(a=p),o=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!l.length?new Ao(o,e,r):(o=l[0],a&&await o._set(s,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==o)try{await u._remove(s)}catch{}})),new Ao(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lE(e))return"Blackberry";if(cE(e))return"Webos";if(iE(e))return"Safari";if((e.includes("chrome/")||oE(e))&&!e.includes("edge/"))return"Chrome";if(aE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function rE(t=xt()){return/firefox\//i.test(t)}function iE(t=xt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function oE(t=xt()){return/crios\//i.test(t)}function sE(t=xt()){return/iemobile/i.test(t)}function aE(t=xt()){return/android/i.test(t)}function lE(t=xt()){return/blackberry/i.test(t)}function cE(t=xt()){return/webos/i.test(t)}function lm(t=xt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function y2(t=xt()){var e;return lm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function v2(){return $k()&&document.documentMode===10}function uE(t=xt()){return lm(t)||aE(t)||cE(t)||lE(t)||/windows phone/i.test(t)||sE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(t,e=[]){let n;switch(t){case"Browser":n=$v(xt());break;case"Worker":n=`${$v(xt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${rs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,a)=>{try{const l=e(o);s(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _2(t,e={}){return is(t,"GET","/v2/passwordPolicy",sm(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2=6;class E2{constructor(e){var n,r,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:x2,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsUppercaseLetter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(s=l.containsNumericCharacter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Nv(this),this.idTokenSubscription=new Nv(this),this.beforeStateQueue=new w2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Yx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Gn(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ao.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await eE(this,{idToken:e}),r=await qn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Wn(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!s||s===a)&&(l!=null&&l.user)&&(i=l.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Zc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=i2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Wn(this.app))return Promise.reject(Ci(this));const n=e?zt(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Wn(this.app)?Promise.reject(Ci(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Wn(this.app)?Promise.reject(Ci(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _2(this),n=new E2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ha("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await g2(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Gn(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await Ao.create(this,[Gn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{s=!0,l()}}else{const l=e.addObserver(n);return()=>{s=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=dE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&e2(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ou(t){return zt(t)}class Nv{constructor(e){this.auth=e,this.observer=null,this.addObserver=jk(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function C2(t){cm=t}function S2(t){return cm.loadJS(t)}function I2(){return cm.gapiScript}function A2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R2(t,e){const n=nm(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(Yc(o,e??{}))return i;An(i,"already-initialized")}return n.initialize({options:e})}function k2(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Gn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function P2(t,e,n){const r=Ou(t);te(r._canInitEmulator,r,"emulator-config-failed"),te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=hE(e),{host:s,port:a}=b2(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),$2()}function hE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function b2(t){const e=hE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:Fv(r.substr(o.length+1))}}else{const[o,s]=r.split(":");return{host:o,port:Fv(s)}}}function Fv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function $2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Hn("not implemented")}_getIdTokenResponse(e){return Hn("not implemented")}_linkToIdToken(e,n){return Hn("not implemented")}_getReauthenticationResolver(e){return Hn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ro(t,e){return a2(t,"POST","/v1/accounts:signInWithIdp",sm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2="http://localhost";class $i extends fE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new $i(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):An("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=Ga(n,["providerId","signInMethod"]);if(!r||!i)return null;const s=new $i(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return Ro(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ro(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ro(e,n)}buildRequest(){const e={requestUri:N2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=qa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa extends um{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir extends Qa{constructor(){super("facebook.com")}static credential(e){return $i._fromParams({providerId:Ir.PROVIDER_ID,signInMethod:Ir.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ir.credentialFromTaggedObject(e)}static credentialFromError(e){return Ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ir.credential(e.oauthAccessToken)}catch{return null}}}Ir.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ir.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un extends Qa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return $i._fromParams({providerId:Un.PROVIDER_ID,signInMethod:Un.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Un.credentialFromTaggedObject(e)}static credentialFromError(e){return Un.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Un.credential(n,r)}catch{return null}}}Un.GOOGLE_SIGN_IN_METHOD="google.com";Un.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar extends Qa{constructor(){super("github.com")}static credential(e){return $i._fromParams({providerId:Ar.PROVIDER_ID,signInMethod:Ar.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ar.credentialFromTaggedObject(e)}static credentialFromError(e){return Ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ar.credential(e.oauthAccessToken)}catch{return null}}}Ar.GITHUB_SIGN_IN_METHOD="github.com";Ar.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends Qa{constructor(){super("twitter.com")}static credential(e,n){return $i._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Rr.credential(n,r)}catch{return null}}}Rr.TWITTER_SIGN_IN_METHOD="twitter.com";Rr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await qn._fromIdTokenResponse(e,r,i),s=Lv(r);return new Uo({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Lv(r);return new Uo({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Lv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu extends dr{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,eu.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new eu(e,n,r,i)}}function pE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?eu._fromErrorAndOperation(t,o,e,r):o})}async function F2(t,e,n=!1){const r=await Aa(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Uo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L2(t,e,n=!1){const{auth:r}=t;if(Wn(r.app))return Promise.reject(Ci(r));const i="reauthenticate";try{const o=await Aa(t,pE(r,i,e,t),n);te(o.idToken,r,"internal-error");const s=am(o.idToken);te(s,r,"internal-error");const{sub:a}=s;return te(t.uid===a,r,"user-mismatch"),Uo._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&An(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O2(t,e,n=!1){if(Wn(t.app))return Promise.reject(Ci(t));const r="signIn",i=await pE(t,r,e),o=await Uo._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}function D2(t,e,n,r){return zt(t).onIdTokenChanged(e,n,r)}function M2(t,e,n){return zt(t).beforeAuthStateChanged(e,n)}function V2(t,e,n,r){return zt(t).onAuthStateChanged(e,n,r)}function j2(t){return zt(t).signOut()}const tu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(tu,"1"),this.storage.removeItem(tu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2=1e3,B2=10;class gE extends mE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=uE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,a,l)=>{this.notifyListeners(s,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},o=this.storage.getItem(r);v2()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,B2):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},U2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}gE.type="LOCAL";const z2=gE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE extends mE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}yE.type="SESSION";const vE=yE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Du(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(s).map(async u=>u(n.origin,o)),l=await W2(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Du.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,l)=>{const u=dm("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){const f=p;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(f.data.response);break;default:clearTimeout(d),clearTimeout(o),l(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(){return window}function q2(t){En().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(){return typeof En().WorkerGlobalScope<"u"&&typeof En().importScripts=="function"}async function G2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function K2(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Q2(){return wE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E="firebaseLocalStorageDb",Y2=1,nu="firebaseLocalStorage",xE="fbase_key";class Ya{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Mu(t,e){return t.transaction([nu],e?"readwrite":"readonly").objectStore(nu)}function X2(){const t=indexedDB.deleteDatabase(_E);return new Ya(t).toPromise()}function If(){const t=indexedDB.open(_E,Y2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(nu,{keyPath:xE})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(nu)?e(r):(r.close(),await X2(),e(await If()))})})}async function Ov(t,e,n){const r=Mu(t,!0).put({[xE]:e,value:n});return new Ya(r).toPromise()}async function J2(t,e){const n=Mu(t,!1).get(e),r=await new Ya(n).toPromise();return r===void 0?null:r.value}function Dv(t,e){const n=Mu(t,!0).delete(e);return new Ya(n).toPromise()}const Z2=800,eb=3;class EE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await If(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>eb)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return wE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Du._getInstance(Q2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await G2(),!this.activeServiceWorker)return;this.sender=new H2(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||K2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await If();return await Ov(e,tu,"1"),await Dv(e,tu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ov(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>J2(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Dv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Mu(i,!1).getAll();return new Ya(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Z2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}EE.type="LOCAL";const tb=EE;new Ka(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(t,e){return e?Gn(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm extends fE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ro(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ro(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ro(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function nb(t){return O2(t.auth,new hm(t),t.bypassAuthState)}function rb(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),L2(n,new hm(t),t.bypassAuthState)}async function ib(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),F2(n,new hm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return nb;case"linkViaPopup":case"linkViaRedirect":return ib;case"reauthViaPopup":case"reauthViaRedirect":return rb;default:An(this.auth,"internal-error")}}resolve(e){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob=new Ka(2e3,1e4);async function sb(t,e,n){if(Wn(t.app))return Promise.reject(un(t,"operation-not-supported-in-this-environment"));const r=Ou(t);t2(t,e,um);const i=TE(r,n);return new _i(r,"signInViaPopup",e,i).executeNotNull()}class _i extends CE{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,_i.currentPopupAction&&_i.currentPopupAction.cancel(),_i.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){tr(this.filter.length===1,"Popup operations only handle one event");const e=dm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(un(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(un(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_i.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(un(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ob.get())};e()}}_i.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab="pendingRedirect",pc=new Map;class lb extends CE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=pc.get(this.auth._key());if(!e){try{const r=await cb(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}pc.set(this.auth._key(),e)}return this.bypassAuthState||pc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function cb(t,e){const n=hb(e),r=db(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function ub(t,e){pc.set(t._key(),e)}function db(t){return Gn(t._redirectPersistence)}function hb(t){return fc(ab,t.config.apiKey,t.name)}async function fb(t,e,n=!1){if(Wn(t.app))return Promise.reject(Ci(t));const r=Ou(t),i=TE(r,e),s=await new lb(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb=10*60*1e3;class mb{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gb(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!SE(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(un(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=pb&&this.cachedEventUids.clear(),this.cachedEventUids.has(Mv(e))}saveEventToCache(e){this.cachedEventUids.add(Mv(e)),this.lastProcessedEventTime=Date.now()}}function Mv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function SE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function gb(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return SE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yb(t,e={}){return is(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wb=/^https?/;async function _b(t){if(t.config.emulator)return;const{authorizedDomains:e}=await yb(t);for(const n of e)try{if(xb(n))return}catch{}An(t,"unauthorized-domain")}function xb(t){const e=Cf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!wb.test(n))return!1;if(vb.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb=new Ka(3e4,6e4);function Vv(){const t=En().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Tb(t){return new Promise((e,n)=>{var r,i,o;function s(){Vv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Vv(),n(un(t,"network-request-failed"))},timeout:Eb.get()})}if(!((i=(r=En().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=En().gapi)===null||o===void 0)&&o.load)s();else{const a=A2("iframefcb");return En()[a]=()=>{gapi.load?s():n(un(t,"network-request-failed"))},S2(`${I2()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw mc=null,e})}let mc=null;function Cb(t){return mc=mc||Tb(t),mc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb=new Ka(5e3,15e3),Ib="__/auth/iframe",Ab="emulator/auth/iframe",Rb={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Pb(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?om(e,Ab):`https://${t.config.authDomain}/${Ib}`,r={apiKey:e.apiKey,appName:t.name,v:rs},i=kb.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${qa(r).slice(1)}`}async function bb(t){const e=await Cb(t),n=En().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:Pb(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Rb,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const s=un(t,"network-request-failed"),a=En().setTimeout(()=>{o(s)},Sb.get());function l(){En().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Nb=500,Fb=600,Lb="_blank",Ob="http://localhost";class jv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Db(t,e,n,r=Nb,i=Fb){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},$b),{width:r.toString(),height:i.toString(),top:o,left:s}),u=xt().toLowerCase();n&&(a=oE(u)?Lb:n),rE(u)&&(e=e||Ob,l.scrollbars="yes");const d=Object.entries(l).reduce((f,[g,E])=>`${f}${g}=${E},`,"");if(y2(u)&&a!=="_self")return Mb(e||"",a),new jv(null);const p=window.open(e||"",a,d);te(p,t,"popup-blocked");try{p.focus()}catch{}return new jv(p)}function Mb(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb="__/auth/handler",jb="emulator/auth/handler",Ub=encodeURIComponent("fac");async function Uv(t,e,n,r,i,o){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:rs,eventId:i};if(e instanceof um){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",Vk(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries({}))s[d]=p}if(e instanceof Qa){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(s.scopes=d.join(","))}t.tenantId&&(s.tid=t.tenantId);const a=s;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),u=l?`#${Ub}=${encodeURIComponent(l)}`:"";return`${Bb(t)}?${qa(a).slice(1)}${u}`}function Bb({config:t}){return t.emulator?om(t,jb):`https://${t.authDomain}/${Vb}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh="webStorageSupport";class zb{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vE,this._completeRedirectFn=fb,this._overrideRedirectResult=ub}async _openPopup(e,n,r,i){var o;tr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await Uv(e,n,r,Cf(),i);return Db(e,s,dm())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await Uv(e,n,r,Cf(),i);return q2(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(tr(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await bb(e),r=new mb(e);return n.register("authEvent",i=>(te(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(sh,{type:sh},i=>{var o;const s=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[sh];s!==void 0&&n(!!s),An(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=_b(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return uE()||iE()||lm()}}const Wb=zb;var Bv="@firebase/auth",zv="1.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Gb(t){jo(new bi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;te(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dE(t)},u=new T2(r,i,o,l);return k2(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),jo(new bi("auth-internal",e=>{const n=Ou(e.getProvider("auth").getImmediate());return(r=>new Hb(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Br(Bv,zv,qb(t)),Br(Bv,zv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb=5*60,Qb=Bx("authIdTokenMaxAge")||Kb;let Wv=null;const Yb=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Qb)return;const i=n==null?void 0:n.token;Wv!==i&&(Wv=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Xb(t=qx()){const e=nm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=R2(t,{popupRedirectResolver:Wb,persistence:[tb,z2,vE]}),r=Bx("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=Yb(o.toString());M2(n,s,()=>s(n.currentUser)),D2(n,a=>s(a))}}const i=jx("auth");return i&&P2(n,`http://${i}`),n}function Jb(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}C2({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=un("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",Jb().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Gb("Browser");var Hv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Si,IE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,T){function R(){}R.prototype=T.prototype,S.D=T.prototype,S.prototype=new R,S.prototype.constructor=S,S.C=function(k,$,N){for(var P=Array(arguments.length-2),W=2;W<arguments.length;W++)P[W-2]=arguments[W];return T.prototype[$].apply(k,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,T,R){R||(R=0);var k=Array(16);if(typeof T=="string")for(var $=0;16>$;++$)k[$]=T.charCodeAt(R++)|T.charCodeAt(R++)<<8|T.charCodeAt(R++)<<16|T.charCodeAt(R++)<<24;else for($=0;16>$;++$)k[$]=T[R++]|T[R++]<<8|T[R++]<<16|T[R++]<<24;T=S.g[0],R=S.g[1],$=S.g[2];var N=S.g[3],P=T+(N^R&($^N))+k[0]+3614090360&4294967295;T=R+(P<<7&4294967295|P>>>25),P=N+($^T&(R^$))+k[1]+3905402710&4294967295,N=T+(P<<12&4294967295|P>>>20),P=$+(R^N&(T^R))+k[2]+606105819&4294967295,$=N+(P<<17&4294967295|P>>>15),P=R+(T^$&(N^T))+k[3]+3250441966&4294967295,R=$+(P<<22&4294967295|P>>>10),P=T+(N^R&($^N))+k[4]+4118548399&4294967295,T=R+(P<<7&4294967295|P>>>25),P=N+($^T&(R^$))+k[5]+1200080426&4294967295,N=T+(P<<12&4294967295|P>>>20),P=$+(R^N&(T^R))+k[6]+2821735955&4294967295,$=N+(P<<17&4294967295|P>>>15),P=R+(T^$&(N^T))+k[7]+4249261313&4294967295,R=$+(P<<22&4294967295|P>>>10),P=T+(N^R&($^N))+k[8]+1770035416&4294967295,T=R+(P<<7&4294967295|P>>>25),P=N+($^T&(R^$))+k[9]+2336552879&4294967295,N=T+(P<<12&4294967295|P>>>20),P=$+(R^N&(T^R))+k[10]+4294925233&4294967295,$=N+(P<<17&4294967295|P>>>15),P=R+(T^$&(N^T))+k[11]+2304563134&4294967295,R=$+(P<<22&4294967295|P>>>10),P=T+(N^R&($^N))+k[12]+1804603682&4294967295,T=R+(P<<7&4294967295|P>>>25),P=N+($^T&(R^$))+k[13]+4254626195&4294967295,N=T+(P<<12&4294967295|P>>>20),P=$+(R^N&(T^R))+k[14]+2792965006&4294967295,$=N+(P<<17&4294967295|P>>>15),P=R+(T^$&(N^T))+k[15]+1236535329&4294967295,R=$+(P<<22&4294967295|P>>>10),P=T+($^N&(R^$))+k[1]+4129170786&4294967295,T=R+(P<<5&4294967295|P>>>27),P=N+(R^$&(T^R))+k[6]+3225465664&4294967295,N=T+(P<<9&4294967295|P>>>23),P=$+(T^R&(N^T))+k[11]+643717713&4294967295,$=N+(P<<14&4294967295|P>>>18),P=R+(N^T&($^N))+k[0]+3921069994&4294967295,R=$+(P<<20&4294967295|P>>>12),P=T+($^N&(R^$))+k[5]+3593408605&4294967295,T=R+(P<<5&4294967295|P>>>27),P=N+(R^$&(T^R))+k[10]+38016083&4294967295,N=T+(P<<9&4294967295|P>>>23),P=$+(T^R&(N^T))+k[15]+3634488961&4294967295,$=N+(P<<14&4294967295|P>>>18),P=R+(N^T&($^N))+k[4]+3889429448&4294967295,R=$+(P<<20&4294967295|P>>>12),P=T+($^N&(R^$))+k[9]+568446438&4294967295,T=R+(P<<5&4294967295|P>>>27),P=N+(R^$&(T^R))+k[14]+3275163606&4294967295,N=T+(P<<9&4294967295|P>>>23),P=$+(T^R&(N^T))+k[3]+4107603335&4294967295,$=N+(P<<14&4294967295|P>>>18),P=R+(N^T&($^N))+k[8]+1163531501&4294967295,R=$+(P<<20&4294967295|P>>>12),P=T+($^N&(R^$))+k[13]+2850285829&4294967295,T=R+(P<<5&4294967295|P>>>27),P=N+(R^$&(T^R))+k[2]+4243563512&4294967295,N=T+(P<<9&4294967295|P>>>23),P=$+(T^R&(N^T))+k[7]+1735328473&4294967295,$=N+(P<<14&4294967295|P>>>18),P=R+(N^T&($^N))+k[12]+2368359562&4294967295,R=$+(P<<20&4294967295|P>>>12),P=T+(R^$^N)+k[5]+4294588738&4294967295,T=R+(P<<4&4294967295|P>>>28),P=N+(T^R^$)+k[8]+2272392833&4294967295,N=T+(P<<11&4294967295|P>>>21),P=$+(N^T^R)+k[11]+1839030562&4294967295,$=N+(P<<16&4294967295|P>>>16),P=R+($^N^T)+k[14]+4259657740&4294967295,R=$+(P<<23&4294967295|P>>>9),P=T+(R^$^N)+k[1]+2763975236&4294967295,T=R+(P<<4&4294967295|P>>>28),P=N+(T^R^$)+k[4]+1272893353&4294967295,N=T+(P<<11&4294967295|P>>>21),P=$+(N^T^R)+k[7]+4139469664&4294967295,$=N+(P<<16&4294967295|P>>>16),P=R+($^N^T)+k[10]+3200236656&4294967295,R=$+(P<<23&4294967295|P>>>9),P=T+(R^$^N)+k[13]+681279174&4294967295,T=R+(P<<4&4294967295|P>>>28),P=N+(T^R^$)+k[0]+3936430074&4294967295,N=T+(P<<11&4294967295|P>>>21),P=$+(N^T^R)+k[3]+3572445317&4294967295,$=N+(P<<16&4294967295|P>>>16),P=R+($^N^T)+k[6]+76029189&4294967295,R=$+(P<<23&4294967295|P>>>9),P=T+(R^$^N)+k[9]+3654602809&4294967295,T=R+(P<<4&4294967295|P>>>28),P=N+(T^R^$)+k[12]+3873151461&4294967295,N=T+(P<<11&4294967295|P>>>21),P=$+(N^T^R)+k[15]+530742520&4294967295,$=N+(P<<16&4294967295|P>>>16),P=R+($^N^T)+k[2]+3299628645&4294967295,R=$+(P<<23&4294967295|P>>>9),P=T+($^(R|~N))+k[0]+4096336452&4294967295,T=R+(P<<6&4294967295|P>>>26),P=N+(R^(T|~$))+k[7]+1126891415&4294967295,N=T+(P<<10&4294967295|P>>>22),P=$+(T^(N|~R))+k[14]+2878612391&4294967295,$=N+(P<<15&4294967295|P>>>17),P=R+(N^($|~T))+k[5]+4237533241&4294967295,R=$+(P<<21&4294967295|P>>>11),P=T+($^(R|~N))+k[12]+1700485571&4294967295,T=R+(P<<6&4294967295|P>>>26),P=N+(R^(T|~$))+k[3]+2399980690&4294967295,N=T+(P<<10&4294967295|P>>>22),P=$+(T^(N|~R))+k[10]+4293915773&4294967295,$=N+(P<<15&4294967295|P>>>17),P=R+(N^($|~T))+k[1]+2240044497&4294967295,R=$+(P<<21&4294967295|P>>>11),P=T+($^(R|~N))+k[8]+1873313359&4294967295,T=R+(P<<6&4294967295|P>>>26),P=N+(R^(T|~$))+k[15]+4264355552&4294967295,N=T+(P<<10&4294967295|P>>>22),P=$+(T^(N|~R))+k[6]+2734768916&4294967295,$=N+(P<<15&4294967295|P>>>17),P=R+(N^($|~T))+k[13]+1309151649&4294967295,R=$+(P<<21&4294967295|P>>>11),P=T+($^(R|~N))+k[4]+4149444226&4294967295,T=R+(P<<6&4294967295|P>>>26),P=N+(R^(T|~$))+k[11]+3174756917&4294967295,N=T+(P<<10&4294967295|P>>>22),P=$+(T^(N|~R))+k[2]+718787259&4294967295,$=N+(P<<15&4294967295|P>>>17),P=R+(N^($|~T))+k[9]+3951481745&4294967295,S.g[0]=S.g[0]+T&4294967295,S.g[1]=S.g[1]+($+(P<<21&4294967295|P>>>11))&4294967295,S.g[2]=S.g[2]+$&4294967295,S.g[3]=S.g[3]+N&4294967295}r.prototype.u=function(S,T){T===void 0&&(T=S.length);for(var R=T-this.blockSize,k=this.B,$=this.h,N=0;N<T;){if($==0)for(;N<=R;)i(this,S,N),N+=this.blockSize;if(typeof S=="string"){for(;N<T;)if(k[$++]=S.charCodeAt(N++),$==this.blockSize){i(this,k),$=0;break}}else for(;N<T;)if(k[$++]=S[N++],$==this.blockSize){i(this,k),$=0;break}}this.h=$,this.o+=T},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var T=1;T<S.length-8;++T)S[T]=0;var R=8*this.o;for(T=S.length-8;T<S.length;++T)S[T]=R&255,R/=256;for(this.u(S),S=Array(16),T=R=0;4>T;++T)for(var k=0;32>k;k+=8)S[R++]=this.g[T]>>>k&255;return S};function o(S,T){var R=a;return Object.prototype.hasOwnProperty.call(R,S)?R[S]:R[S]=T(S)}function s(S,T){this.h=T;for(var R=[],k=!0,$=S.length-1;0<=$;$--){var N=S[$]|0;k&&N==T||(R[$]=N,k=!1)}this.g=R}var a={};function l(S){return-128<=S&&128>S?o(S,function(T){return new s([T|0],0>T?-1:0)}):new s([S|0],0>S?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return p;if(0>S)return A(u(-S));for(var T=[],R=1,k=0;S>=R;k++)T[k]=S/R|0,R*=4294967296;return new s(T,0)}function d(S,T){if(S.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(S.charAt(0)=="-")return A(d(S.substring(1),T));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=u(Math.pow(T,8)),k=p,$=0;$<S.length;$+=8){var N=Math.min(8,S.length-$),P=parseInt(S.substring($,$+N),T);8>N?(N=u(Math.pow(T,N)),k=k.j(N).add(u(P))):(k=k.j(R),k=k.add(u(P)))}return k}var p=l(0),f=l(1),g=l(16777216);t=s.prototype,t.m=function(){if(w(this))return-A(this).m();for(var S=0,T=1,R=0;R<this.g.length;R++){var k=this.i(R);S+=(0<=k?k:4294967296+k)*T,T*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(E(this))return"0";if(w(this))return"-"+A(this).toString(S);for(var T=u(Math.pow(S,6)),R=this,k="";;){var $=b(R,T).g;R=_(R,$.j(T));var N=((0<R.g.length?R.g[0]:R.h)>>>0).toString(S);if(R=$,E(R))return N+k;for(;6>N.length;)N="0"+N;k=N+k}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function E(S){if(S.h!=0)return!1;for(var T=0;T<S.g.length;T++)if(S.g[T]!=0)return!1;return!0}function w(S){return S.h==-1}t.l=function(S){return S=_(this,S),w(S)?-1:E(S)?0:1};function A(S){for(var T=S.g.length,R=[],k=0;k<T;k++)R[k]=~S.g[k];return new s(R,~S.h).add(f)}t.abs=function(){return w(this)?A(this):this},t.add=function(S){for(var T=Math.max(this.g.length,S.g.length),R=[],k=0,$=0;$<=T;$++){var N=k+(this.i($)&65535)+(S.i($)&65535),P=(N>>>16)+(this.i($)>>>16)+(S.i($)>>>16);k=P>>>16,N&=65535,P&=65535,R[$]=P<<16|N}return new s(R,R[R.length-1]&-2147483648?-1:0)};function _(S,T){return S.add(A(T))}t.j=function(S){if(E(this)||E(S))return p;if(w(this))return w(S)?A(this).j(A(S)):A(A(this).j(S));if(w(S))return A(this.j(A(S)));if(0>this.l(g)&&0>S.l(g))return u(this.m()*S.m());for(var T=this.g.length+S.g.length,R=[],k=0;k<2*T;k++)R[k]=0;for(k=0;k<this.g.length;k++)for(var $=0;$<S.g.length;$++){var N=this.i(k)>>>16,P=this.i(k)&65535,W=S.i($)>>>16,ie=S.i($)&65535;R[2*k+2*$]+=P*ie,y(R,2*k+2*$),R[2*k+2*$+1]+=N*ie,y(R,2*k+2*$+1),R[2*k+2*$+1]+=P*W,y(R,2*k+2*$+1),R[2*k+2*$+2]+=N*W,y(R,2*k+2*$+2)}for(k=0;k<T;k++)R[k]=R[2*k+1]<<16|R[2*k];for(k=T;k<2*T;k++)R[k]=0;return new s(R,0)};function y(S,T){for(;(S[T]&65535)!=S[T];)S[T+1]+=S[T]>>>16,S[T]&=65535,T++}function C(S,T){this.g=S,this.h=T}function b(S,T){if(E(T))throw Error("division by zero");if(E(S))return new C(p,p);if(w(S))return T=b(A(S),T),new C(A(T.g),A(T.h));if(w(T))return T=b(S,A(T)),new C(A(T.g),T.h);if(30<S.g.length){if(w(S)||w(T))throw Error("slowDivide_ only works with positive integers.");for(var R=f,k=T;0>=k.l(S);)R=F(R),k=F(k);var $=O(R,1),N=O(k,1);for(k=O(k,2),R=O(R,2);!E(k);){var P=N.add(k);0>=P.l(S)&&($=$.add(R),N=P),k=O(k,1),R=O(R,1)}return T=_(S,$.j(T)),new C($,T)}for($=p;0<=S.l(T);){for(R=Math.max(1,Math.floor(S.m()/T.m())),k=Math.ceil(Math.log(R)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),N=u(R),P=N.j(T);w(P)||0<P.l(S);)R-=k,N=u(R),P=N.j(T);E(N)&&(N=f),$=$.add(N),S=_(S,P)}return new C($,S)}t.A=function(S){return b(this,S).h},t.and=function(S){for(var T=Math.max(this.g.length,S.g.length),R=[],k=0;k<T;k++)R[k]=this.i(k)&S.i(k);return new s(R,this.h&S.h)},t.or=function(S){for(var T=Math.max(this.g.length,S.g.length),R=[],k=0;k<T;k++)R[k]=this.i(k)|S.i(k);return new s(R,this.h|S.h)},t.xor=function(S){for(var T=Math.max(this.g.length,S.g.length),R=[],k=0;k<T;k++)R[k]=this.i(k)^S.i(k);return new s(R,this.h^S.h)};function F(S){for(var T=S.g.length+1,R=[],k=0;k<T;k++)R[k]=S.i(k)<<1|S.i(k-1)>>>31;return new s(R,S.h)}function O(S,T){var R=T>>5;T%=32;for(var k=S.g.length-R,$=[],N=0;N<k;N++)$[N]=0<T?S.i(N+R)>>>T|S.i(N+R+1)<<32-T:S.i(N+R);return new s($,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,IE=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=d,Si=s}).apply(typeof Hv<"u"?Hv:typeof self<"u"?self:typeof window<"u"?window:{});var jl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var AE,Ws,RE,gc,Af,kE,PE,bE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,h,m){return c==Array.prototype||c==Object.prototype||(c[h]=m.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof jl=="object"&&jl];for(var h=0;h<c.length;++h){var m=c[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(c,h){if(h)e:{var m=r;c=c.split(".");for(var I=0;I<c.length-1;I++){var L=c[I];if(!(L in m))break e;m=m[L]}c=c[c.length-1],I=m[c],h=h(I),h!=I&&h!=null&&e(m,c,{configurable:!0,writable:!0,value:h})}}function o(c,h){c instanceof String&&(c+="");var m=0,I=!1,L={next:function(){if(!I&&m<c.length){var D=m++;return{value:h(D,c[D]),done:!1}}return I=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(c){return c||function(){return o(this,function(h,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function l(c){var h=typeof c;return h=h!="object"?h:c?Array.isArray(c)?"array":h:"null",h=="array"||h=="object"&&typeof c.length=="number"}function u(c){var h=typeof c;return h=="object"&&c!=null||h=="function"}function d(c,h,m){return c.call.apply(c.bind,arguments)}function p(c,h,m){if(!c)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,I),c.apply(h,L)}}return function(){return c.apply(h,arguments)}}function f(c,h,m){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,f.apply(null,arguments)}function g(c,h){var m=Array.prototype.slice.call(arguments,1);return function(){var I=m.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function E(c,h){function m(){}m.prototype=h.prototype,c.aa=h.prototype,c.prototype=new m,c.prototype.constructor=c,c.Qb=function(I,L,D){for(var B=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)B[Ee-2]=arguments[Ee];return h.prototype[L].apply(I,B)}}function w(c){const h=c.length;if(0<h){const m=Array(h);for(let I=0;I<h;I++)m[I]=c[I];return m}return[]}function A(c,h){for(let m=1;m<arguments.length;m++){const I=arguments[m];if(l(I)){const L=c.length||0,D=I.length||0;c.length=L+D;for(let B=0;B<D;B++)c[L+B]=I[B]}else c.push(I)}}class _{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function y(c){return/^[\s\xa0]*$/.test(c)}function C(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function b(c){return b[" "](c),c}b[" "]=function(){};var F=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function O(c,h,m){for(const I in c)h.call(m,c[I],I,c)}function S(c,h){for(const m in c)h.call(void 0,c[m],m,c)}function T(c){const h={};for(const m in c)h[m]=c[m];return h}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(c,h){let m,I;for(let L=1;L<arguments.length;L++){I=arguments[L];for(m in I)c[m]=I[m];for(let D=0;D<R.length;D++)m=R[D],Object.prototype.hasOwnProperty.call(I,m)&&(c[m]=I[m])}}function $(c){var h=1;c=c.split(":");const m=[];for(;0<h&&c.length;)m.push(c.shift()),h--;return c.length&&m.push(c.join(":")),m}function N(c){a.setTimeout(()=>{throw c},0)}function P(){var c=z;let h=null;return c.g&&(h=c.g,c.g=c.g.next,c.g||(c.h=null),h.next=null),h}class W{constructor(){this.h=this.g=null}add(h,m){const I=ie.get();I.set(h,m),this.h?this.h.next=I:this.g=I,this.h=I}}var ie=new _(()=>new K,c=>c.reset());class K{constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,M=!1,z=new W,Q=()=>{const c=a.Promise.resolve(void 0);Y=()=>{c.then(ee)}};var ee=()=>{for(var c;c=P();){try{c.h.call(c.g)}catch(m){N(m)}var h=ie;h.j(c),100>h.h&&(h.h++,c.next=h.g,h.g=c)}M=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function we(c,h){this.type=c,this.g=this.target=h,this.defaultPrevented=!1}we.prototype.h=function(){this.defaultPrevented=!0};var Qe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,h=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const m=()=>{};a.addEventListener("test",m,h),a.removeEventListener("test",m,h)}catch{}return c}();function ut(c,h){if(we.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var m=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=h,h=c.relatedTarget){if(F){e:{try{b(h.nodeName);var L=!0;break e}catch{}L=!1}L||(h=null)}}else m=="mouseover"?h=c.fromElement:m=="mouseout"&&(h=c.toElement);this.relatedTarget=h,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:et[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ut.aa.h.call(this)}}E(ut,we);var et={2:"touch",3:"pen",4:"mouse"};ut.prototype.h=function(){ut.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var X="closure_listenable_"+(1e6*Math.random()|0),xe=0;function Ye(c,h,m,I,L){this.listener=c,this.proxy=null,this.src=h,this.type=m,this.capture=!!I,this.ha=L,this.key=++xe,this.da=this.fa=!1}function ye(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function fe(c){this.src=c,this.g={},this.h=0}fe.prototype.add=function(c,h,m,I,L){var D=c.toString();c=this.g[D],c||(c=this.g[D]=[],this.h++);var B=tt(c,h,I,L);return-1<B?(h=c[B],m||(h.fa=!1)):(h=new Ye(h,this.src,D,!!I,L),h.fa=m,c.push(h)),h};function me(c,h){var m=h.type;if(m in c.g){var I=c.g[m],L=Array.prototype.indexOf.call(I,h,void 0),D;(D=0<=L)&&Array.prototype.splice.call(I,L,1),D&&(ye(h),c.g[m].length==0&&(delete c.g[m],c.h--))}}function tt(c,h,m,I){for(var L=0;L<c.length;++L){var D=c[L];if(!D.da&&D.listener==h&&D.capture==!!m&&D.ha==I)return L}return-1}var Rt="closure_lm_"+(1e6*Math.random()|0),Nn={};function hr(c,h,m,I,L){if(Array.isArray(h)){for(var D=0;D<h.length;D++)hr(c,h[D],m,I,L);return null}return m=sg(m),c&&c[X]?c.K(h,m,u(I)?!!I.capture:!!I,L):li(c,h,m,!1,I,L)}function li(c,h,m,I,L,D){if(!h)throw Error("Invalid event type");var B=u(L)?!!L.capture:!!L,Ee=ld(c);if(Ee||(c[Rt]=Ee=new fe(c)),m=Ee.add(h,m,I,B,D),m.proxy)return m;if(I=sd(),m.proxy=I,I.src=c,I.listener=m,c.addEventListener)Qe||(L=B),L===void 0&&(L=!1),c.addEventListener(h.toString(),I,L);else if(c.attachEvent)c.attachEvent(og(h.toString()),I);else if(c.addListener&&c.removeListener)c.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return m}function sd(){function c(m){return h.call(c.src,c.listener,m)}const h=MS;return c}function ci(c,h,m,I,L){if(Array.isArray(h))for(var D=0;D<h.length;D++)ci(c,h[D],m,I,L);else I=u(I)?!!I.capture:!!I,m=sg(m),c&&c[X]?(c=c.i,h=String(h).toString(),h in c.g&&(D=c.g[h],m=tt(D,m,I,L),-1<m&&(ye(D[m]),Array.prototype.splice.call(D,m,1),D.length==0&&(delete c.g[h],c.h--)))):c&&(c=ld(c))&&(h=c.g[h.toString()],c=-1,h&&(c=tt(h,m,I,L)),(m=-1<c?h[c]:null)&&ad(m))}function ad(c){if(typeof c!="number"&&c&&!c.da){var h=c.src;if(h&&h[X])me(h.i,c);else{var m=c.type,I=c.proxy;h.removeEventListener?h.removeEventListener(m,I,c.capture):h.detachEvent?h.detachEvent(og(m),I):h.addListener&&h.removeListener&&h.removeListener(I),(m=ld(h))?(me(m,c),m.h==0&&(m.src=null,h[Rt]=null)):ye(c)}}}function og(c){return c in Nn?Nn[c]:Nn[c]="on"+c}function MS(c,h){if(c.da)c=!0;else{h=new ut(h,this);var m=c.listener,I=c.ha||c.src;c.fa&&ad(c),c=m.call(I,h)}return c}function ld(c){return c=c[Rt],c instanceof fe?c:null}var cd="__closure_events_fn_"+(1e9*Math.random()>>>0);function sg(c){return typeof c=="function"?c:(c[cd]||(c[cd]=function(h){return c.handleEvent(h)}),c[cd])}function dt(){ue.call(this),this.i=new fe(this),this.M=this,this.F=null}E(dt,ue),dt.prototype[X]=!0,dt.prototype.removeEventListener=function(c,h,m,I){ci(this,c,h,m,I)};function Et(c,h){var m,I=c.F;if(I)for(m=[];I;I=I.F)m.push(I);if(c=c.M,I=h.type||h,typeof h=="string")h=new we(h,c);else if(h instanceof we)h.target=h.target||c;else{var L=h;h=new we(I,c),k(h,L)}if(L=!0,m)for(var D=m.length-1;0<=D;D--){var B=h.g=m[D];L=ol(B,I,!0,h)&&L}if(B=h.g=c,L=ol(B,I,!0,h)&&L,L=ol(B,I,!1,h)&&L,m)for(D=0;D<m.length;D++)B=h.g=m[D],L=ol(B,I,!1,h)&&L}dt.prototype.N=function(){if(dt.aa.N.call(this),this.i){var c=this.i,h;for(h in c.g){for(var m=c.g[h],I=0;I<m.length;I++)ye(m[I]);delete c.g[h],c.h--}}this.F=null},dt.prototype.K=function(c,h,m,I){return this.i.add(String(c),h,!1,m,I)},dt.prototype.L=function(c,h,m,I){return this.i.add(String(c),h,!0,m,I)};function ol(c,h,m,I){if(h=c.i.g[String(h)],!h)return!0;h=h.concat();for(var L=!0,D=0;D<h.length;++D){var B=h[D];if(B&&!B.da&&B.capture==m){var Ee=B.listener,nt=B.ha||B.src;B.fa&&me(c.i,B),L=Ee.call(nt,I)!==!1&&L}}return L&&!I.defaultPrevented}function ag(c,h,m){if(typeof c=="function")m&&(c=f(c,m));else if(c&&typeof c.handleEvent=="function")c=f(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(c,h||0)}function lg(c){c.g=ag(()=>{c.g=null,c.i&&(c.i=!1,lg(c))},c.l);const h=c.h;c.h=null,c.m.apply(null,h)}class VS extends ue{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:lg(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ps(c){ue.call(this),this.h=c,this.g={}}E(ps,ue);var cg=[];function ug(c){O(c.g,function(h,m){this.g.hasOwnProperty(m)&&ad(h)},c),c.g={}}ps.prototype.N=function(){ps.aa.N.call(this),ug(this)},ps.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ud=a.JSON.stringify,jS=a.JSON.parse,US=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function dd(){}dd.prototype.h=null;function dg(c){return c.h||(c.h=c.i())}function hg(){}var ms={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function hd(){we.call(this,"d")}E(hd,we);function fd(){we.call(this,"c")}E(fd,we);var ui={},fg=null;function sl(){return fg=fg||new dt}ui.La="serverreachability";function pg(c){we.call(this,ui.La,c)}E(pg,we);function gs(c){const h=sl();Et(h,new pg(h))}ui.STAT_EVENT="statevent";function mg(c,h){we.call(this,ui.STAT_EVENT,c),this.stat=h}E(mg,we);function Tt(c){const h=sl();Et(h,new mg(h,c))}ui.Ma="timingevent";function gg(c,h){we.call(this,ui.Ma,c),this.size=h}E(gg,we);function ys(c,h){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},h)}function vs(){this.g=!0}vs.prototype.xa=function(){this.g=!1};function BS(c,h,m,I,L,D){c.info(function(){if(c.g)if(D)for(var B="",Ee=D.split("&"),nt=0;nt<Ee.length;nt++){var ge=Ee[nt].split("=");if(1<ge.length){var ht=ge[0];ge=ge[1];var ft=ht.split("_");B=2<=ft.length&&ft[1]=="type"?B+(ht+"="+ge+"&"):B+(ht+"=redacted&")}}else B=null;else B=D;return"XMLHTTP REQ ("+I+") [attempt "+L+"]: "+h+`
`+m+`
`+B})}function zS(c,h,m,I,L,D,B){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+L+"]: "+h+`
`+m+`
`+D+" "+B})}function Gi(c,h,m,I){c.info(function(){return"XMLHTTP TEXT ("+h+"): "+HS(c,m)+(I?" "+I:"")})}function WS(c,h){c.info(function(){return"TIMEOUT: "+h})}vs.prototype.info=function(){};function HS(c,h){if(!c.g)return h;if(!h)return null;try{var m=JSON.parse(h);if(m){for(c=0;c<m.length;c++)if(Array.isArray(m[c])){var I=m[c];if(!(2>I.length)){var L=I[1];if(Array.isArray(L)&&!(1>L.length)){var D=L[0];if(D!="noop"&&D!="stop"&&D!="close")for(var B=1;B<L.length;B++)L[B]=""}}}}return ud(m)}catch{return h}}var al={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},yg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},pd;function ll(){}E(ll,dd),ll.prototype.g=function(){return new XMLHttpRequest},ll.prototype.i=function(){return{}},pd=new ll;function fr(c,h,m,I){this.j=c,this.i=h,this.l=m,this.R=I||1,this.U=new ps(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vg}function vg(){this.i=null,this.g="",this.h=!1}var wg={},md={};function gd(c,h,m){c.L=1,c.v=hl(Fn(h)),c.m=m,c.P=!0,_g(c,null)}function _g(c,h){c.F=Date.now(),cl(c),c.A=Fn(c.v);var m=c.A,I=c.R;Array.isArray(I)||(I=[String(I)]),Fg(m.i,"t",I),c.C=0,m=c.j.J,c.h=new vg,c.g=Jg(c.j,m?h:null,!c.m),0<c.O&&(c.M=new VS(f(c.Y,c,c.g),c.O)),h=c.U,m=c.g,I=c.ca;var L="readystatechange";Array.isArray(L)||(L&&(cg[0]=L.toString()),L=cg);for(var D=0;D<L.length;D++){var B=hr(m,L[D],I||h.handleEvent,!1,h.h||h);if(!B)break;h.g[B.key]=B}h=c.H?T(c.H):{},c.m?(c.u||(c.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,h)):(c.u="GET",c.g.ea(c.A,c.u,null,h)),gs(),BS(c.i,c.u,c.A,c.l,c.R,c.m)}fr.prototype.ca=function(c){c=c.target;const h=this.M;h&&Ln(c)==3?h.j():this.Y(c)},fr.prototype.Y=function(c){try{if(c==this.g)e:{const ft=Ln(this.g);var h=this.g.Ba();const Yi=this.g.Z();if(!(3>ft)&&(ft!=3||this.g&&(this.h.h||this.g.oa()||Ug(this.g)))){this.J||ft!=4||h==7||(h==8||0>=Yi?gs(3):gs(2)),yd(this);var m=this.g.Z();this.X=m;t:if(xg(this)){var I=Ug(this.g);c="";var L=I.length,D=Ln(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){di(this),ws(this);var B="";break t}this.h.i=new a.TextDecoder}for(h=0;h<L;h++)this.h.h=!0,c+=this.h.i.decode(I[h],{stream:!(D&&h==L-1)});I.length=0,this.h.g+=c,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=m==200,zS(this.i,this.u,this.A,this.l,this.R,ft,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ee,nt=this.g;if((Ee=nt.g?nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(Ee)){var ge=Ee;break t}}ge=null}if(m=ge)Gi(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vd(this,m);else{this.o=!1,this.s=3,Tt(12),di(this),ws(this);break e}}if(this.P){m=!0;let en;for(;!this.J&&this.C<B.length;)if(en=qS(this,B),en==md){ft==4&&(this.s=4,Tt(14),m=!1),Gi(this.i,this.l,null,"[Incomplete Response]");break}else if(en==wg){this.s=4,Tt(15),Gi(this.i,this.l,B,"[Invalid Chunk]"),m=!1;break}else Gi(this.i,this.l,en,null),vd(this,en);if(xg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ft!=4||B.length!=0||this.h.h||(this.s=1,Tt(16),m=!1),this.o=this.o&&m,!m)Gi(this.i,this.l,B,"[Invalid Chunked Response]"),di(this),ws(this);else if(0<B.length&&!this.W){this.W=!0;var ht=this.j;ht.g==this&&ht.ba&&!ht.M&&(ht.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),Cd(ht),ht.M=!0,Tt(11))}}else Gi(this.i,this.l,B,null),vd(this,B);ft==4&&di(this),this.o&&!this.J&&(ft==4?Kg(this.j,this):(this.o=!1,cl(this)))}else c1(this.g),m==400&&0<B.indexOf("Unknown SID")?(this.s=3,Tt(12)):(this.s=0,Tt(13)),di(this),ws(this)}}}catch{}finally{}};function xg(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function qS(c,h){var m=c.C,I=h.indexOf(`
`,m);return I==-1?md:(m=Number(h.substring(m,I)),isNaN(m)?wg:(I+=1,I+m>h.length?md:(h=h.slice(I,I+m),c.C=I+m,h)))}fr.prototype.cancel=function(){this.J=!0,di(this)};function cl(c){c.S=Date.now()+c.I,Eg(c,c.I)}function Eg(c,h){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ys(f(c.ba,c),h)}function yd(c){c.B&&(a.clearTimeout(c.B),c.B=null)}fr.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(WS(this.i,this.A),this.L!=2&&(gs(),Tt(17)),di(this),this.s=2,ws(this)):Eg(this,this.S-c)};function ws(c){c.j.G==0||c.J||Kg(c.j,c)}function di(c){yd(c);var h=c.M;h&&typeof h.ma=="function"&&h.ma(),c.M=null,ug(c.U),c.g&&(h=c.g,c.g=null,h.abort(),h.ma())}function vd(c,h){try{var m=c.j;if(m.G!=0&&(m.g==c||wd(m.h,c))){if(!c.K&&wd(m.h,c)&&m.G==3){try{var I=m.Da.g.parse(h)}catch{I=null}if(Array.isArray(I)&&I.length==3){var L=I;if(L[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<c.F)vl(m),gl(m);else break e;Td(m),Tt(18)}}else m.za=L[1],0<m.za-m.T&&37500>L[2]&&m.F&&m.v==0&&!m.C&&(m.C=ys(f(m.Za,m),6e3));if(1>=Sg(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else fi(m,11)}else if((c.K||m.g==c)&&vl(m),!y(h))for(L=m.Da.g.parse(h),h=0;h<L.length;h++){let ge=L[h];if(m.T=ge[0],ge=ge[1],m.G==2)if(ge[0]=="c"){m.K=ge[1],m.ia=ge[2];const ht=ge[3];ht!=null&&(m.la=ht,m.j.info("VER="+m.la));const ft=ge[4];ft!=null&&(m.Aa=ft,m.j.info("SVER="+m.Aa));const Yi=ge[5];Yi!=null&&typeof Yi=="number"&&0<Yi&&(I=1.5*Yi,m.L=I,m.j.info("backChannelRequestTimeoutMs_="+I)),I=m;const en=c.g;if(en){const _l=en.g?en.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_l){var D=I.h;D.g||_l.indexOf("spdy")==-1&&_l.indexOf("quic")==-1&&_l.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(_d(D,D.h),D.h=null))}if(I.D){const Sd=en.g?en.g.getResponseHeader("X-HTTP-Session-Id"):null;Sd&&(I.ya=Sd,Ce(I.I,I.D,Sd))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-c.F,m.j.info("Handshake RTT: "+m.R+"ms")),I=m;var B=c;if(I.qa=Xg(I,I.J?I.ia:null,I.W),B.K){Ig(I.h,B);var Ee=B,nt=I.L;nt&&(Ee.I=nt),Ee.B&&(yd(Ee),cl(Ee)),I.g=B}else qg(I);0<m.i.length&&yl(m)}else ge[0]!="stop"&&ge[0]!="close"||fi(m,7);else m.G==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?fi(m,7):Ed(m):ge[0]!="noop"&&m.l&&m.l.ta(ge),m.v=0)}}gs(4)}catch{}}var GS=class{constructor(c,h){this.g=c,this.map=h}};function Tg(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Cg(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Sg(c){return c.h?1:c.g?c.g.size:0}function wd(c,h){return c.h?c.h==h:c.g?c.g.has(h):!1}function _d(c,h){c.g?c.g.add(h):c.h=h}function Ig(c,h){c.h&&c.h==h?c.h=null:c.g&&c.g.has(h)&&c.g.delete(h)}Tg.prototype.cancel=function(){if(this.i=Ag(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Ag(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let h=c.i;for(const m of c.g.values())h=h.concat(m.D);return h}return w(c.i)}function KS(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var h=[],m=c.length,I=0;I<m;I++)h.push(c[I]);return h}h=[],m=0;for(I in c)h[m++]=c[I];return h}function QS(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var h=[];c=c.length;for(var m=0;m<c;m++)h.push(m);return h}h=[],m=0;for(const I in c)h[m++]=I;return h}}}function Rg(c,h){if(c.forEach&&typeof c.forEach=="function")c.forEach(h,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,h,void 0);else for(var m=QS(c),I=KS(c),L=I.length,D=0;D<L;D++)h.call(void 0,I[D],m&&m[D],c)}var kg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function YS(c,h){if(c){c=c.split("&");for(var m=0;m<c.length;m++){var I=c[m].indexOf("="),L=null;if(0<=I){var D=c[m].substring(0,I);L=c[m].substring(I+1)}else D=c[m];h(D,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function hi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof hi){this.h=c.h,ul(this,c.j),this.o=c.o,this.g=c.g,dl(this,c.s),this.l=c.l;var h=c.i,m=new Es;m.i=h.i,h.g&&(m.g=new Map(h.g),m.h=h.h),Pg(this,m),this.m=c.m}else c&&(h=String(c).match(kg))?(this.h=!1,ul(this,h[1]||"",!0),this.o=_s(h[2]||""),this.g=_s(h[3]||"",!0),dl(this,h[4]),this.l=_s(h[5]||"",!0),Pg(this,h[6]||"",!0),this.m=_s(h[7]||"")):(this.h=!1,this.i=new Es(null,this.h))}hi.prototype.toString=function(){var c=[],h=this.j;h&&c.push(xs(h,bg,!0),":");var m=this.g;return(m||h=="file")&&(c.push("//"),(h=this.o)&&c.push(xs(h,bg,!0),"@"),c.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&c.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&c.push("/"),c.push(xs(m,m.charAt(0)=="/"?ZS:JS,!0))),(m=this.i.toString())&&c.push("?",m),(m=this.m)&&c.push("#",xs(m,t1)),c.join("")};function Fn(c){return new hi(c)}function ul(c,h,m){c.j=m?_s(h,!0):h,c.j&&(c.j=c.j.replace(/:$/,""))}function dl(c,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);c.s=h}else c.s=null}function Pg(c,h,m){h instanceof Es?(c.i=h,n1(c.i,c.h)):(m||(h=xs(h,e1)),c.i=new Es(h,c.h))}function Ce(c,h,m){c.i.set(h,m)}function hl(c){return Ce(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function _s(c,h){return c?h?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function xs(c,h,m){return typeof c=="string"?(c=encodeURI(c).replace(h,XS),m&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function XS(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var bg=/[#\/\?@]/g,JS=/[#\?:]/g,ZS=/[#\?]/g,e1=/[#\?@]/g,t1=/#/g;function Es(c,h){this.h=this.g=null,this.i=c||null,this.j=!!h}function pr(c){c.g||(c.g=new Map,c.h=0,c.i&&YS(c.i,function(h,m){c.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}t=Es.prototype,t.add=function(c,h){pr(this),this.i=null,c=Ki(this,c);var m=this.g.get(c);return m||this.g.set(c,m=[]),m.push(h),this.h+=1,this};function $g(c,h){pr(c),h=Ki(c,h),c.g.has(h)&&(c.i=null,c.h-=c.g.get(h).length,c.g.delete(h))}function Ng(c,h){return pr(c),h=Ki(c,h),c.g.has(h)}t.forEach=function(c,h){pr(this),this.g.forEach(function(m,I){m.forEach(function(L){c.call(h,L,I,this)},this)},this)},t.na=function(){pr(this);const c=Array.from(this.g.values()),h=Array.from(this.g.keys()),m=[];for(let I=0;I<h.length;I++){const L=c[I];for(let D=0;D<L.length;D++)m.push(h[I])}return m},t.V=function(c){pr(this);let h=[];if(typeof c=="string")Ng(this,c)&&(h=h.concat(this.g.get(Ki(this,c))));else{c=Array.from(this.g.values());for(let m=0;m<c.length;m++)h=h.concat(c[m])}return h},t.set=function(c,h){return pr(this),this.i=null,c=Ki(this,c),Ng(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[h]),this.h+=1,this},t.get=function(c,h){return c?(c=this.V(c),0<c.length?String(c[0]):h):h};function Fg(c,h,m){$g(c,h),0<m.length&&(c.i=null,c.g.set(Ki(c,h),w(m)),c.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],h=Array.from(this.g.keys());for(var m=0;m<h.length;m++){var I=h[m];const D=encodeURIComponent(String(I)),B=this.V(I);for(I=0;I<B.length;I++){var L=D;B[I]!==""&&(L+="="+encodeURIComponent(String(B[I]))),c.push(L)}}return this.i=c.join("&")};function Ki(c,h){return h=String(h),c.j&&(h=h.toLowerCase()),h}function n1(c,h){h&&!c.j&&(pr(c),c.i=null,c.g.forEach(function(m,I){var L=I.toLowerCase();I!=L&&($g(this,I),Fg(this,L,m))},c)),c.j=h}function r1(c,h){const m=new vs;if(a.Image){const I=new Image;I.onload=g(mr,m,"TestLoadImage: loaded",!0,h,I),I.onerror=g(mr,m,"TestLoadImage: error",!1,h,I),I.onabort=g(mr,m,"TestLoadImage: abort",!1,h,I),I.ontimeout=g(mr,m,"TestLoadImage: timeout",!1,h,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else h(!1)}function i1(c,h){const m=new vs,I=new AbortController,L=setTimeout(()=>{I.abort(),mr(m,"TestPingServer: timeout",!1,h)},1e4);fetch(c,{signal:I.signal}).then(D=>{clearTimeout(L),D.ok?mr(m,"TestPingServer: ok",!0,h):mr(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(L),mr(m,"TestPingServer: error",!1,h)})}function mr(c,h,m,I,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),I(m)}catch{}}function o1(){this.g=new US}function s1(c,h,m){const I=m||"";try{Rg(c,function(L,D){let B=L;u(L)&&(B=ud(L)),h.push(I+D+"="+encodeURIComponent(B))})}catch(L){throw h.push(I+"type="+encodeURIComponent("_badmap")),L}}function fl(c){this.l=c.Ub||null,this.j=c.eb||!1}E(fl,dd),fl.prototype.g=function(){return new pl(this.l,this.j)},fl.prototype.i=function(c){return function(){return c}}({});function pl(c,h){dt.call(this),this.D=c,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(pl,dt),t=pl.prototype,t.open=function(c,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=h,this.readyState=1,Cs(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(h.body=c),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ts(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Cs(this)),this.g&&(this.readyState=3,Cs(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Lg(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Lg(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var h=c.value?c.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!c.done}))&&(this.response=this.responseText+=h)}c.done?Ts(this):Cs(this),this.readyState==3&&Lg(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Ts(this))},t.Qa=function(c){this.g&&(this.response=c,Ts(this))},t.ga=function(){this.g&&Ts(this)};function Ts(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Cs(c)}t.setRequestHeader=function(c,h){this.u.append(c,h)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,c.push(m[0]+": "+m[1]),m=h.next();return c.join(`\r
`)};function Cs(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(pl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Og(c){let h="";return O(c,function(m,I){h+=I,h+=":",h+=m,h+=`\r
`}),h}function xd(c,h,m){e:{for(I in m){var I=!1;break e}I=!0}I||(m=Og(m),typeof c=="string"?m!=null&&encodeURIComponent(String(m)):Ce(c,h,m))}function Le(c){dt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(Le,dt);var a1=/^https?$/i,l1=["POST","PUT"];t=Le.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,h,m,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);h=h?h.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():pd.g(),this.v=this.o?dg(this.o):dg(pd),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(h,String(c),!0),this.B=!1}catch(D){Dg(this,D);return}if(c=m||"",m=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var L in I)m.set(L,I[L]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const D of I.keys())m.set(D,I.get(D));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(m.keys()).find(D=>D.toLowerCase()=="content-type"),L=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(l1,h,void 0))||I||L||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,B]of m)this.g.setRequestHeader(D,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{jg(this),this.u=!0,this.g.send(c),this.u=!1}catch(D){Dg(this,D)}};function Dg(c,h){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=h,c.m=5,Mg(c),ml(c)}function Mg(c){c.A||(c.A=!0,Et(c,"complete"),Et(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Et(this,"complete"),Et(this,"abort"),ml(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ml(this,!0)),Le.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Vg(this):this.bb())},t.bb=function(){Vg(this)};function Vg(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Ln(c)!=4||c.Z()!=2)){if(c.u&&Ln(c)==4)ag(c.Ea,0,c);else if(Et(c,"readystatechange"),Ln(c)==4){c.h=!1;try{const B=c.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var I;if(I=B===0){var L=String(c.D).match(kg)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),I=!a1.test(L?L.toLowerCase():"")}m=I}if(m)Et(c,"complete"),Et(c,"success");else{c.m=6;try{var D=2<Ln(c)?c.g.statusText:""}catch{D=""}c.l=D+" ["+c.Z()+"]",Mg(c)}}finally{ml(c)}}}}function ml(c,h){if(c.g){jg(c);const m=c.g,I=c.v[0]?()=>{}:null;c.g=null,c.v=null,h||Et(c,"ready");try{m.onreadystatechange=I}catch{}}}function jg(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Ln(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Ln(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var h=this.g.responseText;return c&&h.indexOf(c)==0&&(h=h.substring(c.length)),jS(h)}};function Ug(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function c1(c){const h={};c=(c.g&&2<=Ln(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<c.length;I++){if(y(c[I]))continue;var m=$(c[I]);const L=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const D=h[L]||[];h[L]=D,D.push(m)}S(h,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ss(c,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[c]||h}function Bg(c){this.Aa=0,this.i=[],this.j=new vs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ss("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ss("baseRetryDelayMs",5e3,c),this.cb=Ss("retryDelaySeedMs",1e4,c),this.Wa=Ss("forwardChannelMaxRetries",2,c),this.wa=Ss("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Tg(c&&c.concurrentRequestLimit),this.Da=new o1,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Bg.prototype,t.la=8,t.G=1,t.connect=function(c,h,m,I){Tt(0),this.W=c,this.H=h||{},m&&I!==void 0&&(this.H.OSID=m,this.H.OAID=I),this.F=this.X,this.I=Xg(this,null,this.W),yl(this)};function Ed(c){if(zg(c),c.G==3){var h=c.U++,m=Fn(c.I);if(Ce(m,"SID",c.K),Ce(m,"RID",h),Ce(m,"TYPE","terminate"),Is(c,m),h=new fr(c,c.j,h),h.L=2,h.v=hl(Fn(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=h.v,m=!0),m||(h.g=Jg(h.j,null),h.g.ea(h.v)),h.F=Date.now(),cl(h)}Yg(c)}function gl(c){c.g&&(Cd(c),c.g.cancel(),c.g=null)}function zg(c){gl(c),c.u&&(a.clearTimeout(c.u),c.u=null),vl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function yl(c){if(!Cg(c.h)&&!c.s){c.s=!0;var h=c.Ga;Y||Q(),M||(Y(),M=!0),z.add(h,c),c.B=0}}function u1(c,h){return Sg(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=h.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ys(f(c.Ga,c,h),Qg(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const L=new fr(this,this.j,c);let D=this.o;if(this.S&&(D?(D=T(D),k(D,this.S)):D=this.S),this.m!==null||this.O||(L.H=D,D=null),this.P)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var I=this.i[m];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(h+=I,4096<h){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=Hg(this,L,h),m=Fn(this.I),Ce(m,"RID",c),Ce(m,"CVER",22),this.D&&Ce(m,"X-HTTP-Session-Id",this.D),Is(this,m),D&&(this.O?h="headers="+encodeURIComponent(String(Og(D)))+"&"+h:this.m&&xd(m,this.m,D)),_d(this.h,L),this.Ua&&Ce(m,"TYPE","init"),this.P?(Ce(m,"$req",h),Ce(m,"SID","null"),L.T=!0,gd(L,m,null)):gd(L,m,h),this.G=2}}else this.G==3&&(c?Wg(this,c):this.i.length==0||Cg(this.h)||Wg(this))};function Wg(c,h){var m;h?m=h.l:m=c.U++;const I=Fn(c.I);Ce(I,"SID",c.K),Ce(I,"RID",m),Ce(I,"AID",c.T),Is(c,I),c.m&&c.o&&xd(I,c.m,c.o),m=new fr(c,c.j,m,c.B+1),c.m===null&&(m.H=c.o),h&&(c.i=h.D.concat(c.i)),h=Hg(c,m,1e3),m.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),_d(c.h,m),gd(m,I,h)}function Is(c,h){c.H&&O(c.H,function(m,I){Ce(h,I,m)}),c.l&&Rg({},function(m,I){Ce(h,I,m)})}function Hg(c,h,m){m=Math.min(c.i.length,m);var I=c.l?f(c.l.Na,c.l,c):null;e:{var L=c.i;let D=-1;for(;;){const B=["count="+m];D==-1?0<m?(D=L[0].g,B.push("ofs="+D)):D=0:B.push("ofs="+D);let Ee=!0;for(let nt=0;nt<m;nt++){let ge=L[nt].g;const ht=L[nt].map;if(ge-=D,0>ge)D=Math.max(0,L[nt].g-100),Ee=!1;else try{s1(ht,B,"req"+ge+"_")}catch{I&&I(ht)}}if(Ee){I=B.join("&");break e}}}return c=c.i.splice(0,m),h.D=c,I}function qg(c){if(!c.g&&!c.u){c.Y=1;var h=c.Fa;Y||Q(),M||(Y(),M=!0),z.add(h,c),c.v=0}}function Td(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ys(f(c.Fa,c),Qg(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Gg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ys(f(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Tt(10),gl(this),Gg(this))};function Cd(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Gg(c){c.g=new fr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var h=Fn(c.qa);Ce(h,"RID","rpc"),Ce(h,"SID",c.K),Ce(h,"AID",c.T),Ce(h,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ce(h,"TO",c.ja),Ce(h,"TYPE","xmlhttp"),Is(c,h),c.m&&c.o&&xd(h,c.m,c.o),c.L&&(c.g.I=c.L);var m=c.g;c=c.ia,m.L=1,m.v=hl(Fn(h)),m.m=null,m.P=!0,_g(m,c)}t.Za=function(){this.C!=null&&(this.C=null,gl(this),Td(this),Tt(19))};function vl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Kg(c,h){var m=null;if(c.g==h){vl(c),Cd(c),c.g=null;var I=2}else if(wd(c.h,h))m=h.D,Ig(c.h,h),I=1;else return;if(c.G!=0){if(h.o)if(I==1){m=h.m?h.m.length:0,h=Date.now()-h.F;var L=c.B;I=sl(),Et(I,new gg(I,m)),yl(c)}else qg(c);else if(L=h.s,L==3||L==0&&0<h.X||!(I==1&&u1(c,h)||I==2&&Td(c)))switch(m&&0<m.length&&(h=c.h,h.i=h.i.concat(m)),L){case 1:fi(c,5);break;case 4:fi(c,10);break;case 3:fi(c,6);break;default:fi(c,2)}}}function Qg(c,h){let m=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(m*=2),m*h}function fi(c,h){if(c.j.info("Error code "+h),h==2){var m=f(c.fb,c),I=c.Xa;const L=!I;I=new hi(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ul(I,"https"),hl(I),L?r1(I.toString(),m):i1(I.toString(),m)}else Tt(2);c.G=0,c.l&&c.l.sa(h),Yg(c),zg(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function Yg(c){if(c.G=0,c.ka=[],c.l){const h=Ag(c.h);(h.length!=0||c.i.length!=0)&&(A(c.ka,h),A(c.ka,c.i),c.h.i.length=0,w(c.i),c.i.length=0),c.l.ra()}}function Xg(c,h,m){var I=m instanceof hi?Fn(m):new hi(m);if(I.g!="")h&&(I.g=h+"."+I.g),dl(I,I.s);else{var L=a.location;I=L.protocol,h=h?h+"."+L.hostname:L.hostname,L=+L.port;var D=new hi(null);I&&ul(D,I),h&&(D.g=h),L&&dl(D,L),m&&(D.l=m),I=D}return m=c.D,h=c.ya,m&&h&&Ce(I,m,h),Ce(I,"VER",c.la),Is(c,I),I}function Jg(c,h,m){if(h&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=c.Ca&&!c.pa?new Le(new fl({eb:m})):new Le(c.pa),h.Ha(c.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zg(){}t=Zg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function wl(){}wl.prototype.g=function(c,h){return new Lt(c,h)};function Lt(c,h){dt.call(this),this.g=new Bg(h),this.l=c,this.h=h&&h.messageUrlParams||null,c=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(c?c["X-WebChannel-Content-Type"]=h.messageContentType:c={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(c?c["X-WebChannel-Client-Profile"]=h.va:c={"X-WebChannel-Client-Profile":h.va}),this.g.S=c,(c=h&&h.Sb)&&!y(c)&&(this.g.m=c),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!y(h)&&(this.g.D=h,c=this.h,c!==null&&h in c&&(c=this.h,h in c&&delete c[h])),this.j=new Qi(this)}E(Lt,dt),Lt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Lt.prototype.close=function(){Ed(this.g)},Lt.prototype.o=function(c){var h=this.g;if(typeof c=="string"){var m={};m.__data__=c,c=m}else this.u&&(m={},m.__data__=ud(c),c=m);h.i.push(new GS(h.Ya++,c)),h.G==3&&yl(h)},Lt.prototype.N=function(){this.g.l=null,delete this.j,Ed(this.g),delete this.g,Lt.aa.N.call(this)};function ey(c){hd.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var h=c.__sm__;if(h){e:{for(const m in h){c=m;break e}c=void 0}(this.i=c)&&(c=this.i,h=h!==null&&c in h?h[c]:void 0),this.data=h}else this.data=c}E(ey,hd);function ty(){fd.call(this),this.status=1}E(ty,fd);function Qi(c){this.g=c}E(Qi,Zg),Qi.prototype.ua=function(){Et(this.g,"a")},Qi.prototype.ta=function(c){Et(this.g,new ey(c))},Qi.prototype.sa=function(c){Et(this.g,new ty)},Qi.prototype.ra=function(){Et(this.g,"b")},wl.prototype.createWebChannel=wl.prototype.g,Lt.prototype.send=Lt.prototype.o,Lt.prototype.open=Lt.prototype.m,Lt.prototype.close=Lt.prototype.close,bE=function(){return new wl},PE=function(){return sl()},kE=ui,Af={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},al.NO_ERROR=0,al.TIMEOUT=8,al.HTTP_ERROR=6,gc=al,yg.COMPLETE="complete",RE=yg,hg.EventType=ms,ms.OPEN="a",ms.CLOSE="b",ms.ERROR="c",ms.MESSAGE="d",dt.prototype.listen=dt.prototype.K,Ws=hg,Le.prototype.listenOnce=Le.prototype.L,Le.prototype.getLastError=Le.prototype.Ka,Le.prototype.getLastErrorCode=Le.prototype.Ba,Le.prototype.getStatus=Le.prototype.Z,Le.prototype.getResponseJson=Le.prototype.Oa,Le.prototype.getResponseText=Le.prototype.oa,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Ha,AE=Le}).apply(typeof jl<"u"?jl:typeof self<"u"?self:typeof window<"u"?window:{});const qv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let os="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni=new em("@firebase/firestore");function ro(){return Ni.logLevel}function q(t,...e){if(Ni.logLevel<=le.DEBUG){const n=e.map(fm);Ni.debug(`Firestore (${os}): ${t}`,...n)}}function nr(t,...e){if(Ni.logLevel<=le.ERROR){const n=e.map(fm);Ni.error(`Firestore (${os}): ${t}`,...n)}}function Bo(t,...e){if(Ni.logLevel<=le.WARN){const n=e.map(fm);Ni.warn(`Firestore (${os}): ${t}`,...n)}}function fm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t="Unexpected state"){const e=`FIRESTORE (${os}) INTERNAL ASSERTION FAILED: `+t;throw nr(e),new Error(e)}function ve(t,e){t||ne()}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends dr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Zb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(yt.UNAUTHENTICATED))}shutdown(){}}class e${constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class t${constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ve(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let o=new zr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new zr,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const l=o;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new zr)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string"),new $E(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string"),new yt(e)}}class n${constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class r${constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new n$(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class i${constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class o${constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ve(this.o===void 0);const r=o=>{o.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,q("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ve(typeof n.token=="string"),this.R=n.token,new i$(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s$(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=s$(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}}function de(t,e){return t<e?-1:t>e?1:0}function zo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{static now(){return Ge.fromMillis(Date.now())}static fromDate(e){return Ge.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ge(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new J(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?de(this.nanoseconds,e.nanoseconds):de(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{static fromTimestamp(e){return new re(e)}static min(){return new re(new Ge(0,0))}static max(){return new re(new Ge(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(),r===void 0?r=e.length-n:r>e.length-n&&ne(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ra.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ra?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ke extends Ra{construct(e,n,r){return new ke(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new J(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ke(n)}static emptyPath(){return new ke([])}}const a$=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ot extends Ra{construct(e,n,r){return new ot(e,n,r)}static isValidIdentifier(e){return a$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ot(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new J(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new J(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new J(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new J(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ot(n)}static emptyPath(){return new ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.path=e}static fromPath(e){return new Z(ke.fromString(e))}static fromName(e){return new Z(ke.fromString(e).popFirst(5))}static empty(){return new Z(ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ke.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Z(new ke(e.slice()))}}function l$(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=re.fromTimestamp(r===1e9?new Ge(n+1,0):new Ge(n,r));return new Kr(i,Z.empty(),e)}function c$(t){return new Kr(t.readTime,t.key,-1)}class Kr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Kr(re.min(),Z.empty(),-1)}static max(){return new Kr(re.max(),Z.empty(),-1)}}function u$(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Z.comparator(t.documentKey,e.documentKey),n!==0?n:de(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class h${constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ss(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==d$)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new V((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):V.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):V.reject(n)}static resolve(e){return new V((n,r)=>{n(e)})}static reject(e){return new V((n,r)=>{r(e)})}static waitFor(e){return new V((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},l=>r(l))}),s=!0,o===i&&n()})}static or(e){let n=V.resolve(!1);for(const r of e)n=n.next(i=>i?V.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new V((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let l=0;l<o;l++){const u=l;n(e[u]).next(d=>{s[u]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,n){return new V((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function f$(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function as(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Vu.oe=-1;function ju(t){return t==null}function ru(t){return t===0&&1/t==-1/0}function p$(t){return typeof t=="number"&&Number.isInteger(t)&&!ru(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m$(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Gv(e)),e=g$(t.get(n),e);return Gv(e)}function g$(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Gv(t){return t+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ui(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function FE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,n){this.comparator=e,this.root=n||it.EMPTY}insert(e,n){return new Fe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,it.BLACK,null,null))}remove(e){return new Fe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,it.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ul(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ul(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ul(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ul(this.root,e,this.comparator,!0)}}class Ul{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class it{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??it.RED,this.left=i??it.EMPTY,this.right=o??it.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new it(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return it.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return it.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,it.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,it.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ne();const e=this.left.check();if(e!==this.right.check())throw ne();return e+(this.isRed()?0:1)}}it.EMPTY=null,it.RED=!0,it.BLACK=!1;it.EMPTY=new class{constructor(){this.size=0}get key(){throw ne()}get value(){throw ne()}get color(){throw ne()}get left(){throw ne()}get right(){throw ne()}copy(e,n,r,i,o){return this}insert(e,n,r){return new it(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Qv(this.data.getIterator())}getIteratorFrom(e){return new Qv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ke)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ke(this.comparator);return n.data=e,n}}class Qv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.fields=e,e.sort(ot.comparator)}static empty(){return new an([])}unionWith(e){let n=new Ke(ot.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new an(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return zo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new LE("Invalid base64 string: "+o):o}}(e);return new lt(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new lt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return de(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}lt.EMPTY_BYTE_STRING=new lt("");const y$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qr(t){if(ve(!!t),typeof t=="string"){let e=0;const n=y$.exec(t);if(ve(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:De(t.seconds),nanos:De(t.nanos)}}function De(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Yr(t){return typeof t=="string"?lt.fromBase64String(t):lt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Uu(t){const e=t.mapValue.fields.__previous_value__;return pm(e)?Uu(e):e}function ka(t){const e=Qr(t.mapValue.fields.__local_write_time__.timestampValue);return new Ge(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v${constructor(e,n,r,i,o,s,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class Pa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Pa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Pa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Xr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?pm(t)?4:_$(t)?9007199254740991:w$(t)?10:11:ne()}function Rn(t,e){if(t===e)return!0;const n=Xr(t);if(n!==Xr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ka(t).isEqual(ka(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Qr(i.timestampValue),a=Qr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Yr(i.bytesValue).isEqual(Yr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return De(i.geoPointValue.latitude)===De(o.geoPointValue.latitude)&&De(i.geoPointValue.longitude)===De(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return De(i.integerValue)===De(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=De(i.doubleValue),a=De(o.doubleValue);return s===a?ru(s)===ru(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return zo(t.arrayValue.values||[],e.arrayValue.values||[],Rn);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(Kv(s)!==Kv(a))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!Rn(s[l],a[l])))return!1;return!0}(t,e);default:return ne()}}function ba(t,e){return(t.values||[]).find(n=>Rn(n,e))!==void 0}function Wo(t,e){if(t===e)return 0;const n=Xr(t),r=Xr(e);if(n!==r)return de(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return de(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=De(o.integerValue||o.doubleValue),l=De(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Yv(t.timestampValue,e.timestampValue);case 4:return Yv(ka(t),ka(e));case 5:return de(t.stringValue,e.stringValue);case 6:return function(o,s){const a=Yr(o),l=Yr(s);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),l=s.split("/");for(let u=0;u<a.length&&u<l.length;u++){const d=de(a[u],l[u]);if(d!==0)return d}return de(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=de(De(o.latitude),De(s.latitude));return a!==0?a:de(De(o.longitude),De(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Xv(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,l,u,d;const p=o.fields||{},f=s.fields||{},g=(a=p.value)===null||a===void 0?void 0:a.arrayValue,E=(l=f.value)===null||l===void 0?void 0:l.arrayValue,w=de(((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0,((d=E==null?void 0:E.values)===null||d===void 0?void 0:d.length)||0);return w!==0?w:Xv(g,E)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===Bl.mapValue&&s===Bl.mapValue)return 0;if(o===Bl.mapValue)return 1;if(s===Bl.mapValue)return-1;const a=o.fields||{},l=Object.keys(a),u=s.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let p=0;p<l.length&&p<d.length;++p){const f=de(l[p],d[p]);if(f!==0)return f;const g=Wo(a[l[p]],u[d[p]]);if(g!==0)return g}return de(l.length,d.length)}(t.mapValue,e.mapValue);default:throw ne()}}function Yv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return de(t,e);const n=Qr(t),r=Qr(e),i=de(n.seconds,r.seconds);return i!==0?i:de(n.nanos,r.nanos)}function Xv(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=Wo(n[i],r[i]);if(o)return o}return de(n.length,r.length)}function Ho(t){return Rf(t)}function Rf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Qr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Yr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Z.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=Rf(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${Rf(n.fields[s])}`;return i+"}"}(t.mapValue):ne()}function yc(t){switch(Xr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Uu(t);return e?16+yc(e):16;case 5:return 2*t.stringValue.length;case 6:return Yr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+yc(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Ui(r.fields,(o,s)=>{i+=o.length+yc(s)}),i}(t.mapValue);default:throw ne()}}function kf(t){return!!t&&"integerValue"in t}function mm(t){return!!t&&"arrayValue"in t}function Jv(t){return!!t&&"nullValue"in t}function Zv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function vc(t){return!!t&&"mapValue"in t}function w$(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ia(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ui(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ia(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ia(t.arrayValue.values[n]);return e}return Object.assign({},t)}function _$(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.value=e}static empty(){return new Qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!vc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ia(n)}setAll(e){let n=ot.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=ia(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());vc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Rn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];vc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ui(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Qt(ia(this.value))}}function OE(t){const e=[];return Ui(t.fields,(n,r)=>{const i=new ot([n]);if(vc(r)){const o=OE(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new an(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new wt(e,0,re.min(),re.min(),re.min(),Qt.empty(),0)}static newFoundDocument(e,n,r,i){return new wt(e,1,n,re.min(),r,i,0)}static newNoDocument(e,n){return new wt(e,2,n,re.min(),re.min(),Qt.empty(),0)}static newUnknownDocument(e,n){return new wt(e,3,n,re.min(),re.min(),Qt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,n){this.position=e,this.inclusive=n}}function e0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?r=Z.comparator(Z.fromName(s.referenceValue),n.key):r=Wo(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function t0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Rn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,n="asc"){this.field=e,this.dir=n}}function x$(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{}class He extends DE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new T$(e,n,r):n==="array-contains"?new I$(e,r):n==="in"?new A$(e,r):n==="not-in"?new R$(e,r):n==="array-contains-any"?new k$(e,r):new He(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new C$(e,r):new S$(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Wo(n,this.value)):n!==null&&Xr(this.value)===Xr(n)&&this.matchesComparison(Wo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class kn extends DE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new kn(e,n)}matches(e){return ME(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ME(t){return t.op==="and"}function VE(t){return E$(t)&&ME(t)}function E$(t){for(const e of t.filters)if(e instanceof kn)return!1;return!0}function Pf(t){if(t instanceof He)return t.field.canonicalString()+t.op.toString()+Ho(t.value);if(VE(t))return t.filters.map(e=>Pf(e)).join(",");{const e=t.filters.map(n=>Pf(n)).join(",");return`${t.op}(${e})`}}function jE(t,e){return t instanceof He?function(r,i){return i instanceof He&&r.op===i.op&&r.field.isEqual(i.field)&&Rn(r.value,i.value)}(t,e):t instanceof kn?function(r,i){return i instanceof kn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&jE(s,i.filters[a]),!0):!1}(t,e):void ne()}function UE(t){return t instanceof He?function(n){return`${n.field.canonicalString()} ${n.op} ${Ho(n.value)}`}(t):t instanceof kn?function(n){return n.op.toString()+" {"+n.getFilters().map(UE).join(" ,")+"}"}(t):"Filter"}class T$ extends He{constructor(e,n,r){super(e,n,r),this.key=Z.fromName(r.referenceValue)}matches(e){const n=Z.comparator(e.key,this.key);return this.matchesComparison(n)}}class C$ extends He{constructor(e,n){super(e,"in",n),this.keys=BE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class S$ extends He{constructor(e,n){super(e,"not-in",n),this.keys=BE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function BE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Z.fromName(r.referenceValue))}class I$ extends He{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return mm(n)&&ba(n.arrayValue,this.value)}}class A$ extends He{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ba(this.value.arrayValue,n)}}class R$ extends He{constructor(e,n){super(e,"not-in",n)}matches(e){if(ba(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ba(this.value.arrayValue,n)}}class k$ extends He{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!mm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ba(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P${constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}}function n0(t,e=null,n=[],r=[],i=null,o=null,s=null){return new P$(t,e,n,r,i,o,s)}function gm(t){const e=oe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Pf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),ju(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ho(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ho(r)).join(",")),e.ue=n}return e.ue}function ym(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!x$(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!jE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!t0(t.startAt,e.startAt)&&t0(t.endAt,e.endAt)}function bf(t){return Z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function b$(t,e,n,r,i,o,s,a){return new Bu(t,e,n,r,i,o,s,a)}function vm(t){return new Bu(t)}function r0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function $$(t){return t.collectionGroup!==null}function oa(t){const e=oe(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ke(ot.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new ou(o,r))}),n.has(ot.keyField().canonicalString())||e.ce.push(new ou(ot.keyField(),r))}return e.ce}function Tn(t){const e=oe(t);return e.le||(e.le=N$(e,oa(t))),e.le}function N$(t,e){if(t.limitType==="F")return n0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new ou(i.field,o)});const n=t.endAt?new iu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new iu(t.startAt.position,t.startAt.inclusive):null;return n0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function $f(t,e,n){return new Bu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function zu(t,e){return ym(Tn(t),Tn(e))&&t.limitType===e.limitType}function zE(t){return`${gm(Tn(t))}|lt:${t.limitType}`}function io(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>UE(i)).join(", ")}]`),ju(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ho(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ho(i)).join(",")),`Target(${r})`}(Tn(t))}; limitType=${t.limitType})`}function Wu(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Z.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of oa(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,l){const u=e0(s,a,l);return s.inclusive?u<=0:u<0}(r.startAt,oa(r),i)||r.endAt&&!function(s,a,l){const u=e0(s,a,l);return s.inclusive?u>=0:u>0}(r.endAt,oa(r),i))}(t,e)}function F$(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function WE(t){return(e,n)=>{let r=!1;for(const i of oa(t)){const o=L$(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function L$(t,e,n){const r=t.field.isKeyField()?Z.comparator(e.key,n.key):function(o,s,a){const l=s.data.field(o),u=a.data.field(o);return l!==null&&u!==null?Wo(l,u):ne()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ui(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return FE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O$=new Fe(Z.comparator);function rr(){return O$}const HE=new Fe(Z.comparator);function Hs(...t){let e=HE;for(const n of t)e=e.insert(n.key,n);return e}function qE(t){let e=HE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function xi(){return sa()}function GE(){return sa()}function sa(){return new Bi(t=>t.toString(),(t,e)=>t.isEqual(e))}const D$=new Fe(Z.comparator),M$=new Ke(Z.comparator);function ce(...t){let e=M$;for(const n of t)e=e.add(n);return e}const V$=new Ke(de);function j$(){return V$}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ru(e)?"-0":e}}function KE(t){return{integerValue:""+t}}function U$(t,e){return p$(e)?KE(e):wm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(){this._=void 0}}function B$(t,e,n){return t instanceof $a?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&pm(o)&&(o=Uu(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof Na?YE(t,e):t instanceof Fa?XE(t,e):function(i,o){const s=QE(i,o),a=i0(s)+i0(i.Pe);return kf(s)&&kf(i.Pe)?KE(a):wm(i.serializer,a)}(t,e)}function z$(t,e,n){return t instanceof Na?YE(t,e):t instanceof Fa?XE(t,e):n}function QE(t,e){return t instanceof su?function(r){return kf(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class $a extends Hu{}class Na extends Hu{constructor(e){super(),this.elements=e}}function YE(t,e){const n=JE(e);for(const r of t.elements)n.some(i=>Rn(i,r))||n.push(r);return{arrayValue:{values:n}}}class Fa extends Hu{constructor(e){super(),this.elements=e}}function XE(t,e){let n=JE(e);for(const r of t.elements)n=n.filter(i=>!Rn(i,r));return{arrayValue:{values:n}}}class su extends Hu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function i0(t){return De(t.integerValue||t.doubleValue)}function JE(t){return mm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W${constructor(e,n){this.field=e,this.transform=n}}function H$(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Na&&i instanceof Na||r instanceof Fa&&i instanceof Fa?zo(r.elements,i.elements,Rn):r instanceof su&&i instanceof su?Rn(r.Pe,i.Pe):r instanceof $a&&i instanceof $a}(t.transform,e.transform)}class q${constructor(e,n){this.version=e,this.transformResults=n}}class Cn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Cn}static exists(e){return new Cn(void 0,e)}static updateTime(e){return new Cn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class qu{}function ZE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new tT(t.key,Cn.none()):new Xa(t.key,t.data,Cn.none());{const n=t.data,r=Qt.empty();let i=new Ke(ot.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new zi(t.key,r,new an(i.toArray()),Cn.none())}}function G$(t,e,n){t instanceof Xa?function(i,o,s){const a=i.value.clone(),l=s0(i.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof zi?function(i,o,s){if(!wc(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=s0(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(eT(i)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function aa(t,e,n,r){return t instanceof Xa?function(o,s,a,l){if(!wc(o.precondition,s))return a;const u=o.value.clone(),d=a0(o.fieldTransforms,l,s);return u.setAll(d),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof zi?function(o,s,a,l){if(!wc(o.precondition,s))return a;const u=a0(o.fieldTransforms,l,s),d=s.data;return d.setAll(eT(o)),d.setAll(u),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,a){return wc(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function K$(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=QE(r.transform,i||null);o!=null&&(n===null&&(n=Qt.empty()),n.set(r.field,o))}return n||null}function o0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&zo(r,i,(o,s)=>H$(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Xa extends qu{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class zi extends qu{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function eT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function s0(t,e,n){const r=new Map;ve(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,z$(s,a,n[i]))}return r}function a0(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,B$(o,s,e))}return r}class tT extends qu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Q$ extends qu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y${constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&G$(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=aa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=aa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=GE();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const l=ZE(s,a);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&zo(this.mutations,e.mutations,(n,r)=>o0(n,r))&&zo(this.baseMutations,e.baseMutations,(n,r)=>o0(n,r))}}class _m{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ve(e.mutations.length===r.length);let i=function(){return D$}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new _m(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X${constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J${constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je,he;function Z$(t){switch(t){default:return ne();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function nT(t){if(t===void 0)return nr("GRPC error has no .code"),j.UNKNOWN;switch(t){case je.OK:return j.OK;case je.CANCELLED:return j.CANCELLED;case je.UNKNOWN:return j.UNKNOWN;case je.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case je.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case je.INTERNAL:return j.INTERNAL;case je.UNAVAILABLE:return j.UNAVAILABLE;case je.UNAUTHENTICATED:return j.UNAUTHENTICATED;case je.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case je.NOT_FOUND:return j.NOT_FOUND;case je.ALREADY_EXISTS:return j.ALREADY_EXISTS;case je.PERMISSION_DENIED:return j.PERMISSION_DENIED;case je.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case je.ABORTED:return j.ABORTED;case je.OUT_OF_RANGE:return j.OUT_OF_RANGE;case je.UNIMPLEMENTED:return j.UNIMPLEMENTED;case je.DATA_LOSS:return j.DATA_LOSS;default:return ne()}}(he=je||(je={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=new Si([4294967295,4294967295],0);function l0(t){const e=eN().encode(t),n=new IE;return n.update(e),new Uint8Array(n.digest())}function c0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Si([n,r],0),new Si([i,o],0)]}class xm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new qs(`Invalid padding: ${n}`);if(r<0)throw new qs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new qs(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new qs(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ie=Si.fromNumber(this.Te)}Ee(e,n,r){let i=e.add(n.multiply(Si.fromNumber(r)));return i.compare(tN)===1&&(i=new Si([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=l0(e),[r,i]=c0(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new xm(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Te===0)return;const n=l0(e),[r,i]=c0(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class qs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ja.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Gu(re.min(),i,new Fe(de),rr(),ce())}}class Ja{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ja(r,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class rT{constructor(e,n){this.targetId=e,this.me=n}}class iT{constructor(e,n,r=lt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class u0{constructor(){this.fe=0,this.ge=d0(),this.pe=lt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ce(),n=ce(),r=ce();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ne()}}),new Ja(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=d0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ve(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class nN{constructor(e){this.Le=e,this.Be=new Map,this.ke=rr(),this.qe=zl(),this.Qe=zl(),this.Ke=new Fe(de)}$e(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(n,e.Ve):this.We(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.We(n,e.key,e.Ve)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.je(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.De(e.resumeToken));break;default:ne()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.me.count,i=this.Ye(n);if(i){const o=i.target;if(bf(o))if(r===0){const s=new Z(o.path);this.We(n,s,wt.newNoDocument(s,re.min()))}else ve(r===1);else{const s=this.Ze(n);if(s!==r){const a=this.Xe(e),l=a?this.et(a,e,s):1;if(l!==0){this.He(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,u)}}}}}Xe(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=Yr(r).toUint8Array()}catch(l){if(l instanceof LE)return Bo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new xm(s,i,o)}catch(l){return Bo(l instanceof qs?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,r){return n.me.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Le.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(n,o,null),i++)}),i}it(e){const n=new Map;this.Be.forEach((o,s)=>{const a=this.Ye(s);if(a){if(o.current&&bf(a.target)){const l=new Z(a.target.path);this.st(l).has(s)||this.ot(s,l)||this.We(s,l,wt.newNoDocument(l,e))}o.be&&(n.set(s,o.ve()),o.Ce())}});let r=ce();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{const u=this.Ye(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));const i=new Gu(e,n,this.Ke,this.ke,r);return this.ke=rr(),this.qe=zl(),this.Qe=zl(),this.Ke=new Fe(de),i}Ue(e,n){if(!this.je(e))return;const r=this.ot(e,n.key)?2:0;this.ze(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.ot(e,n)?i.Fe(n,1):i.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(e)),this.Qe=this.Qe.insert(n,this._t(n).add(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let n=this.Be.get(e);return n||(n=new u0,this.Be.set(e,n)),n}_t(e){let n=this.Qe.get(e);return n||(n=new Ke(de),this.Qe=this.Qe.insert(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ke(de),this.qe=this.qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new u0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}ot(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function zl(){return new Fe(Z.comparator)}function d0(){return new Fe(Z.comparator)}const rN={asc:"ASCENDING",desc:"DESCENDING"},iN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oN={and:"AND",or:"OR"};class sN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Nf(t,e){return t.useProto3Json||ju(e)?e:{value:e}}function au(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function aN(t,e){return au(t,e.toTimestamp())}function Sn(t){return ve(!!t),re.fromTimestamp(function(n){const r=Qr(n);return new Ge(r.seconds,r.nanos)}(t))}function Em(t,e){return Ff(t,e).canonicalString()}function Ff(t,e){const n=function(i){return new ke(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function sT(t){const e=ke.fromString(t);return ve(dT(e)),e}function Lf(t,e){return Em(t.databaseId,e.path)}function ah(t,e){const n=sT(e);if(n.get(1)!==t.databaseId.projectId)throw new J(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new J(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Z(lT(n))}function aT(t,e){return Em(t.databaseId,e)}function lN(t){const e=sT(t);return e.length===4?ke.emptyPath():lT(e)}function Of(t){return new ke(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function lT(t){return ve(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function h0(t,e,n){return{name:Lf(t,e),fields:n.value.mapValue.fields}}function cN(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,d){return u.useProto3Json?(ve(d===void 0||typeof d=="string"),lt.fromBase64String(d||"")):(ve(d===void 0||d instanceof Buffer||d instanceof Uint8Array),lt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){const d=u.code===void 0?j.UNKNOWN:nT(u.code);return new J(d,u.message||"")}(s);n=new iT(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ah(t,r.document.name),o=Sn(r.document.updateTime),s=r.document.createTime?Sn(r.document.createTime):re.min(),a=new Qt({mapValue:{fields:r.document.fields}}),l=wt.newFoundDocument(i,o,s,a),u=r.targetIds||[],d=r.removedTargetIds||[];n=new _c(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ah(t,r.document),o=r.readTime?Sn(r.readTime):re.min(),s=wt.newNoDocument(i,o),a=r.removedTargetIds||[];n=new _c([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ah(t,r.document),o=r.removedTargetIds||[];n=new _c([],o,i,null)}else{if(!("filter"in e))return ne();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new J$(i,o),a=r.targetId;n=new rT(a,s)}}return n}function uN(t,e){let n;if(e instanceof Xa)n={update:h0(t,e.key,e.value)};else if(e instanceof tT)n={delete:Lf(t,e.key)};else if(e instanceof zi)n={update:h0(t,e.key,e.data),updateMask:wN(e.fieldMask)};else{if(!(e instanceof Q$))return ne();n={verify:Lf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof $a)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Na)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Fa)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof su)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw ne()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:aN(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ne()}(t,e.precondition)),n}function dN(t,e){return t&&t.length>0?(ve(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?Sn(i.updateTime):Sn(o);return s.isEqual(re.min())&&(s=Sn(o)),new q$(s,i.transformResults||[])}(n,e))):[]}function hN(t,e){return{documents:[aT(t,e.path)]}}function fN(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=aT(t,i);const o=function(u){if(u.length!==0)return uT(kn.create(u,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(u){if(u.length!==0)return u.map(d=>function(f){return{field:oo(f.field),direction:gN(f.dir)}}(d))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=Nf(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ct:n,parent:i}}function pN(t){let e=lN(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ve(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];n.where&&(o=function(p){const f=cT(p);return f instanceof kn&&VE(f)?f.getFilters():[f]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(f=>function(E){return new ou(so(E.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(p){let f;return f=typeof p=="object"?p.value:p,ju(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(p){const f=!!p.before,g=p.values||[];return new iu(g,f)}(n.startAt));let u=null;return n.endAt&&(u=function(p){const f=!p.before,g=p.values||[];return new iu(g,f)}(n.endAt)),b$(e,i,s,o,a,"F",l,u)}function mN(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function cT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=so(n.unaryFilter.field);return He.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=so(n.unaryFilter.field);return He.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=so(n.unaryFilter.field);return He.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=so(n.unaryFilter.field);return He.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ne()}}(t):t.fieldFilter!==void 0?function(n){return He.create(so(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ne()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return kn.create(n.compositeFilter.filters.map(r=>cT(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ne()}}(n.compositeFilter.op))}(t):ne()}function gN(t){return rN[t]}function yN(t){return iN[t]}function vN(t){return oN[t]}function oo(t){return{fieldPath:t.canonicalString()}}function so(t){return ot.fromServerFormat(t.fieldPath)}function uT(t){return t instanceof He?function(n){if(n.op==="=="){if(Zv(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NAN"}};if(Jv(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Zv(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NOT_NAN"}};if(Jv(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oo(n.field),op:yN(n.op),value:n.value}}}(t):t instanceof kn?function(n){const r=n.getFilters().map(i=>uT(i));return r.length===1?r[0]:{compositeFilter:{op:vN(n.op),filters:r}}}(t):ne()}function wN(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function dT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,n,r,i,o=re.min(),s=re.min(),a=lt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new br(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e){this.ht=e}}function xN(t){const e=pN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?$f(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(){this.ln=new TN}addToCollectionParentIndex(e,n){return this.ln.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this.ln.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(Kr.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(Kr.min())}updateCollectionGroup(e,n,r){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}}class TN{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ke(ke.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ke(ke.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class kt{static withCacheSize(e){return new kt(e,kt.DEFAULT_COLLECTION_PERCENTILE,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kt.DEFAULT_COLLECTION_PERCENTILE=10,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kt.DEFAULT=new kt(41943040,kt.DEFAULT_COLLECTION_PERCENTILE,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kt.DISABLED=new kt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new qo(0)}static Qn(){return new qo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0([t,e],[n,r]){const i=de(t,n);return i===0?de(e,r):i}class CN{constructor(e){this.Gn=e,this.buffer=new Ke(p0),this.zn=0}jn(){return++this.zn}Hn(e){const n=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();p0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class SN{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){q("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){as(n)?q("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await ss(n)}await this.Yn(3e5)})}}class IN{constructor(e,n){this.Zn=e,this.params=n}calculateTargetCount(e,n){return this.Zn.Xn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return V.resolve(Vu.oe);const r=new CN(n);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(f0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),f0):this.tr(e,n))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,n){let r,i,o,s,a,l,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(u=Date.now(),ro()<=le.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(l-a)+`ms
	Removed ${p} documents in `+(u-l)+`ms
Total Duration: ${u-d}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}}function AN(t,e){return new IN(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(){this.changes=new Bi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?V.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&aa(r.mutation,i,an.empty(),Ge.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ce()){const i=xi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Hs();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=xi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ce()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=rr();const s=sa(),a=function(){return sa()}();return n.forEach((l,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof zi)?o=o.insert(u.key,u):d!==void 0?(s.set(u.key,d.mutation.getFieldMask()),aa(d.mutation,u,d.mutation.getFieldMask(),Ge.now())):s.set(u.key,an.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((u,d)=>s.set(u,d)),n.forEach((u,d)=>{var p;return a.set(u,new kN(d,(p=s.get(u))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){const r=sa();let i=new Fe((s,a)=>s-a),o=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const a of s)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let d=r.get(l)||an.empty();d=a.applyToLocalView(u,d),r.set(l,d);const p=(i.get(a.batchId)||ce()).add(l);i=i.insert(a.batchId,p)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,d=l.value,p=GE();d.forEach(f=>{if(!o.has(f)){const g=ZE(n.get(f),r.get(f));g!==null&&p.set(f,g),o=o.add(f)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,p))}return V.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return Z.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):$$(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):V.resolve(xi());let a=-1,l=o;return s.next(u=>V.forEach(u,(d,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(d)?V.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{l=l.insert(d,f)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,l,u,ce())).next(d=>({batchId:a,changes:qE(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Z(n)).next(r=>{let i=Hs();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=Hs();return this.indexManager.getCollectionParents(e,o).next(a=>V.forEach(a,l=>{const u=function(p,f){return new Bu(f,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((p,f)=>{s=s.insert(p,f)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((l,u)=>{const d=u.getKey();s.get(d)===null&&(s=s.insert(d,wt.newInvalidDocument(d)))});let a=Hs();return s.forEach((l,u)=>{const d=o.get(l);d!==void 0&&aa(d.mutation,u,an.empty(),Ge.now()),Wu(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,n){return V.resolve(this.Tr.get(n))}saveBundleMetadata(e,n){return this.Tr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Sn(i.createTime)}}(n)),V.resolve()}getNamedQuery(e,n){return V.resolve(this.Ir.get(n))}saveNamedQuery(e,n){return this.Ir.set(n.name,function(i){return{name:i.name,query:xN(i.bundledQuery),readTime:Sn(i.readTime)}}(n)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(){this.overlays=new Fe(Z.comparator),this.Er=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){const r=xi();return V.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.Tt(e,n,o)}),V.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Er.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Er.delete(r)),V.resolve()}getOverlaysForCollection(e,n,r){const i=xi(),o=n.length+1,s=new Z(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return V.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Fe((u,d)=>u-d);const s=this.overlays.getIterator();for(;s.hasNext();){const u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=o.get(u.largestBatchId);d===null&&(d=xi(),o=o.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=xi(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return V.resolve(a)}Tt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.Er.get(i.largestBatchId).delete(r.key);this.Er.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new X$(n,r));let o=this.Er.get(n);o===void 0&&(o=ce(),this.Er.set(n,o)),this.Er.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(){this.sessionToken=lt.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,V.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(){this.dr=new Ke(Xe.Ar),this.Rr=new Ke(Xe.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,n){const r=new Xe(e,n);this.dr=this.dr.add(r),this.Rr=this.Rr.add(r)}mr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.gr(new Xe(e,n))}pr(e,n){e.forEach(r=>this.removeReference(r,n))}yr(e){const n=new Z(new ke([])),r=new Xe(n,e),i=new Xe(n,e+1),o=[];return this.Rr.forEachInRange([r,i],s=>{this.gr(s),o.push(s.key)}),o}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const n=new Z(new ke([])),r=new Xe(n,e),i=new Xe(n,e+1);let o=ce();return this.Rr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new Xe(e,0),r=this.dr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Xe{constructor(e,n){this.key=e,this.br=n}static Ar(e,n){return Z.comparator(e.key,n.key)||de(e.br,n.br)}static Vr(e,n){return de(e.br,n.br)||Z.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new Ke(Xe.Ar)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Y$(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.vr=this.vr.add(new Xe(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(s)}lookupMutationBatch(e,n){return V.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Fr(r),o=i<0?0:i;return V.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Xe(n,0),i=new Xe(n,Number.POSITIVE_INFINITY),o=[];return this.vr.forEachInRange([r,i],s=>{const a=this.Cr(s.br);o.push(a)}),V.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ke(de);return n.forEach(i=>{const o=new Xe(i,0),s=new Xe(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([o,s],a=>{r=r.add(a.br)})}),V.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;Z.isDocumentKey(o)||(o=o.child(""));const s=new Xe(new Z(o),0);let a=new Ke(de);return this.vr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.br)),!0)},s),V.resolve(this.Mr(a))}Mr(e){const n=[];return e.forEach(r=>{const i=this.Cr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ve(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return V.forEach(n.mutations,i=>{const o=new Xe(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Ln(e){}containsKey(e,n){const r=new Xe(n,0),i=this.vr.firstAfterOrEqual(r);return V.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}Or(e,n){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const n=this.Fr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e){this.Nr=e,this.docs=function(){return new Fe(Z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Nr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():wt.newInvalidDocument(n))}getEntries(e,n){let r=rr();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():wt.newInvalidDocument(i))}),V.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=rr();const s=n.path,a=new Z(s.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||u$(c$(d),r)<=0||(i.has(d.key)||Wu(n,d))&&(o=o.insert(d.key,d.mutableCopy()))}return V.resolve(o)}getAllFromCollectionGroup(e,n,r,i){ne()}Lr(e,n){return V.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new ON(this)}getSize(e){return V.resolve(this.size)}}class ON extends RN{constructor(e){super(),this.hr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),V.waitFor(n)}getFromCache(e,n){return this.hr.getEntry(e,n)}getAllFromCache(e,n){return this.hr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e){this.persistence=e,this.Br=new Bi(n=>gm(n),ym),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.kr=0,this.qr=new Tm,this.targetCount=0,this.Qr=qo.qn()}forEachTarget(e,n){return this.Br.forEach((r,i)=>n(i)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.kr&&(this.kr=n),V.resolve()}Un(e){this.Br.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Qr=new qo(n),this.highestTargetId=n),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,n){return this.Un(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.Un(n),V.resolve()}removeTargetData(e,n){return this.Br.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Br.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Br.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),V.waitFor(o).next(()=>i)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){const r=this.Br.get(n)||null;return V.resolve(r)}addMatchingKeys(e,n,r){return this.qr.mr(n,r),V.resolve()}removeMatchingKeys(e,n,r){this.qr.pr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),V.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.qr.yr(n),V.resolve()}getMatchingKeysForTargetId(e,n){const r=this.qr.Sr(n);return V.resolve(r)}containsKey(e,n){return V.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e,n){this.Kr={},this.overlays={},this.$r=new Vu(0),this.Ur=!1,this.Ur=!0,this.Wr=new NN,this.referenceDelegate=e(this),this.Gr=new DN(this),this.indexManager=new EN,this.remoteDocumentCache=function(i){return new LN(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new _N(n),this.jr=new bN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $N,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Kr[e.toKey()];return r||(r=new FN(n,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const i=new MN(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(o=>this.referenceDelegate.Jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Yr(e,n){return V.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,n)))}}class MN extends h${constructor(e){super(),this.currentSequenceNumber=e}}class Cm{constructor(e){this.persistence=e,this.Zr=new Tm,this.Xr=null}static ei(e){return new Cm(e)}get ti(){if(this.Xr)return this.Xr;throw ne()}addReference(e,n,r){return this.Zr.addReference(r,n),this.ti.delete(r.toString()),V.resolve()}removeReference(e,n,r){return this.Zr.removeReference(r,n),this.ti.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.ti.add(n.toString()),V.resolve()}removeTarget(e,n){this.Zr.yr(n.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.ti.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Hr(){this.Xr=new Set}Jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.ti,r=>{const i=Z.fromPath(r);return this.ni(e,i).next(o=>{o||n.removeEntry(i,re.min())})}).next(()=>(this.Xr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ni(e,n).next(r=>{r?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(e){return 0}ni(e,n){return V.or([()=>V.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Yr(e,n)])}}class lu{constructor(e,n){this.persistence=e,this.ri=new Bi(r=>m$(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=AN(this,n)}static ei(e,n){return new lu(e,n)}Hr(){}Jr(e){return V.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Xn(e){const n=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}nr(e){let n=0;return this.er(e,r=>{n++}).next(()=>n)}er(e,n){return V.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(o=>o?V.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.Lr(e,s=>this.ir(e,s,n).next(a=>{a||(r++,o.removeEntry(s,re.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.ri.set(n,e.currentSequenceNumber),V.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),V.resolve()}removeReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),V.resolve()}updateLimboDocument(e,n){return this.ri.set(n,e.currentSequenceNumber),V.resolve()}zr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=yc(e.data.value)),n}ir(e,n,r){return V.or([()=>this.persistence.Yr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.ri.get(n);return V.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Wi=r,this.Gi=i}static zi(e,n){let r=ce(),i=ce();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Sm(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return Nk()?8:f$(xt())>0?6:4}()}initialize(e,n){this.Zi=e,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.Xi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.es(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new VN;return this.ts(e,n,s).next(a=>{if(o.result=a,this.Hi)return this.ns(e,n,s,a.size)})}).next(()=>o.result)}ns(e,n,r,i){return r.documentReadCount<this.Ji?(ro()<=le.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",io(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),V.resolve()):(ro()<=le.DEBUG&&q("QueryEngine","Query:",io(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(ro()<=le.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",io(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tn(n))):V.resolve())}Xi(e,n){if(r0(n))return V.resolve(null);let r=Tn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=$f(n,null,"F"),r=Tn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=ce(...o);return this.Zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.rs(n,a);return this.ss(n,u,s,l.readTime)?this.Xi(e,$f(n,null,"F")):this.os(e,u,n,l)}))})))}es(e,n,r,i){return r0(n)||i.isEqual(re.min())?V.resolve(null):this.Zi.getDocuments(e,r).next(o=>{const s=this.rs(n,o);return this.ss(n,s,r,i)?V.resolve(null):(ro()<=le.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),io(n)),this.os(e,s,n,l$(i,-1)).next(a=>a))})}rs(e,n){let r=new Ke(WE(e));return n.forEach((i,o)=>{Wu(e,o)&&(r=r.add(o))}),r}ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ts(e,n,r){return ro()<=le.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",io(n)),this.Zi.getDocumentsMatchingQuery(e,n,Kr.min(),r)}os(e,n,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e,n,r,i){this.persistence=e,this._s=n,this.serializer=i,this.us=new Fe(de),this.cs=new Bi(o=>gm(o),ym),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new PN(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.us))}}function BN(t,e,n,r){return new UN(t,e,n,r)}async function fT(t,e){const n=oe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ps(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let l=ce();for(const u of i){s.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of o){a.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(u=>({Ts:u,removedBatchIds:s,addedBatchIds:a}))})})}function zN(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.hs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,d){const p=u.batch,f=p.keys();let g=V.resolve();return f.forEach(E=>{g=g.next(()=>d.getEntry(l,E)).next(w=>{const A=u.docVersions.get(E);ve(A!==null),w.version.compareTo(A)<0&&(p.applyToRemoteDocument(w,u),w.isValidDocument()&&(w.setReadTime(u.commitVersion),d.addEntry(w)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ce();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function pT(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Gr.getLastRemoteSnapshotVersion(n))}function WN(t,e){const n=oe(t),r=e.snapshotVersion;let i=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.hs.newChangeBuffer({trackRemovals:!0});i=n.us;const a=[];e.targetChanges.forEach((d,p)=>{const f=i.get(p);if(!f)return;a.push(n.Gr.removeMatchingKeys(o,d.removedDocuments,p).next(()=>n.Gr.addMatchingKeys(o,d.addedDocuments,p)));let g=f.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?g=g.withResumeToken(lt.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),i=i.insert(p,g),function(w,A,_){return w.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(f,g,d)&&a.push(n.Gr.updateTargetData(o,g))});let l=rr(),u=ce();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(HN(o,s,e.documentUpdates).next(d=>{l=d.Is,u=d.Es})),!r.isEqual(re.min())){const d=n.Gr.getLastRemoteSnapshotVersion(o).next(p=>n.Gr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return V.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,l,u)).next(()=>l)}).then(o=>(n.us=i,o))}function HN(t,e,n){let r=ce(),i=ce();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=rr();return n.forEach((a,l)=>{const u=o.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(re.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Is:s,Es:i}})}function qN(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function GN(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Gr.getTargetData(r,e).next(o=>o?(i=o,V.resolve(i)):n.Gr.allocateTargetId(r).next(s=>(i=new br(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.us=n.us.insert(r.targetId,r),n.cs.set(e,r.targetId)),r})}async function Df(t,e,n){const r=oe(t),i=r.us.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!as(s))throw s;q("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.us=r.us.remove(e),r.cs.delete(i.target)}function m0(t,e,n){const r=oe(t);let i=re.min(),o=ce();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,u,d){const p=oe(l),f=p.cs.get(d);return f!==void 0?V.resolve(p.us.get(f)):p.Gr.getTargetData(u,d)}(r,s,Tn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>r._s.getDocumentsMatchingQuery(s,e,n?i:re.min(),n?o:ce())).next(a=>(KN(r,F$(e),a),{documents:a,ds:o})))}function KN(t,e,n){let r=t.ls.get(e)||re.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.ls.set(e,r)}class g0{constructor(){this.activeTargetIds=j$()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class QN{constructor(){this._o=new g0,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,n,r){this.ao[e]=n}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new g0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wl=null;function lh(){return Wl===null?Wl=function(){return 268435456+Math.round(2147483648*Math.random())}():Wl++,"0x"+Wl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gt="WebChannelConnection";class ZN extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+n.host,this.Mo=`projects/${i}/databases/${o}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Oo(n,r,i,o,s){const a=lh(),l=this.No(n,r.toUriEncodedString());q("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(u,o,s),this.Bo(n,l,u,i).then(d=>(q("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Bo("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}ko(n,r,i,o,s,a){return this.Oo(n,r,i,o,s)}Lo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+os}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}No(n,r){const i=XN[n];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,n,r,i){const o=lh();return new Promise((s,a)=>{const l=new AE;l.setWithCredentials(!0),l.listenOnce(RE.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case gc.NO_ERROR:const d=l.getResponseJson();q(gt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),s(d);break;case gc.TIMEOUT:q(gt,`RPC '${e}' ${o} timed out`),a(new J(j.DEADLINE_EXCEEDED,"Request time out"));break;case gc.HTTP_ERROR:const p=l.getStatus();if(q(gt,`RPC '${e}' ${o} failed with status:`,p,"response text:",l.getResponseText()),p>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const g=f==null?void 0:f.error;if(g&&g.status&&g.message){const E=function(A){const _=A.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(_)>=0?_:j.UNKNOWN}(g.status);a(new J(E,g.message))}else a(new J(j.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new J(j.UNAVAILABLE,"Connection failed."));break;default:ne()}}finally{q(gt,`RPC '${e}' ${o} completed.`)}});const u=JSON.stringify(i);q(gt,`RPC '${e}' ${o} sending request:`,i),l.send(n,"POST",u,r,15)})}qo(e,n,r){const i=lh(),o=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=bE(),a=PE(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Lo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=o.join("");q(gt,`Creating RPC '${e}' stream ${i}: ${d}`,l);const p=s.createWebChannel(d,l);let f=!1,g=!1;const E=new JN({Eo:A=>{g?q(gt,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(f||(q(gt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),f=!0),q(gt,`RPC '${e}' stream ${i} sending:`,A),p.send(A))},Ao:()=>p.close()}),w=(A,_,y)=>{A.listen(_,C=>{try{y(C)}catch(b){setTimeout(()=>{throw b},0)}})};return w(p,Ws.EventType.OPEN,()=>{g||(q(gt,`RPC '${e}' stream ${i} transport opened.`),E.So())}),w(p,Ws.EventType.CLOSE,()=>{g||(g=!0,q(gt,`RPC '${e}' stream ${i} transport closed`),E.Do())}),w(p,Ws.EventType.ERROR,A=>{g||(g=!0,Bo(gt,`RPC '${e}' stream ${i} transport errored:`,A),E.Do(new J(j.UNAVAILABLE,"The operation could not be completed")))}),w(p,Ws.EventType.MESSAGE,A=>{var _;if(!g){const y=A.data[0];ve(!!y);const C=y,b=(C==null?void 0:C.error)||((_=C[0])===null||_===void 0?void 0:_.error);if(b){q(gt,`RPC '${e}' stream ${i} received error:`,b);const F=b.status;let O=function(R){const k=je[R];if(k!==void 0)return nT(k)}(F),S=b.message;O===void 0&&(O=j.INTERNAL,S="Unknown error status: "+F+" with message "+b.message),g=!0,E.Do(new J(O,S)),p.close()}else q(gt,`RPC '${e}' stream ${i} received:`,y),E.vo(y)}}),w(a,kE.STAT_EVENT,A=>{A.stat===Af.PROXY?q(gt,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===Af.NOPROXY&&q(gt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.bo()},0),E}}function ch(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ku(t){return new sN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e,n,r=1e3,i=1.5,o=6e4){this.li=e,this.timerId=n,this.Qo=r,this.Ko=i,this.$o=o,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const n=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,n-r);i>0&&q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e,n,r,i,o,s,a,l){this.li=e,this.Yo=r,this.Zo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new mT(e,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(nr(n.toString()),nr("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(n)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===n&&this.I_(r,i)},r=>{e(()=>{const i=new J(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.E_(i)})})}I_(e,n){const r=this.T_(this.Xo);this.stream=this.d_(e,n),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.E_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return n=>{this.li.enqueueAndForget(()=>this.Xo===e?n():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eF extends gT{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}d_(e,n){return this.connection.qo("Listen",e,n)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const n=cN(this.serializer,e),r=function(o){if(!("targetChange"in o))return re.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?re.min():s.readTime?Sn(s.readTime):re.min()}(e);return this.listener.R_(n,r)}V_(e){const n={};n.database=Of(this.serializer),n.addTarget=function(o,s){let a;const l=s.target;if(a=bf(l)?{documents:hN(o,l)}:{query:fN(o,l).ct},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=oT(o,s.resumeToken);const u=Nf(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(re.min())>0){a.readTime=au(o,s.snapshotVersion.toTimestamp());const u=Nf(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=mN(this.serializer,e);r&&(n.labels=r),this.c_(n)}m_(e){const n={};n.database=Of(this.serializer),n.removeTarget=e,this.c_(n)}}class tF extends gT{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,n){return this.connection.qo("Write",e,n)}A_(e){return ve(!!e.streamToken),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){ve(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const n=dN(e.writeResults,e.commitTime),r=Sn(e.commitTime);return this.listener.y_(r,n)}w_(){const e={};e.database=Of(this.serializer),this.c_(e)}g_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>uN(this.serializer,r))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nF extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new J(j.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,n,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Oo(e,Ff(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new J(j.UNKNOWN,o.toString())})}ko(e,n,r,i,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.ko(e,Ff(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new J(j.UNKNOWN,s.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class rF{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(nr(n),this.C_=!1):q("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iF{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=o,this.Q_.uo(s=>{r.enqueueAndForget(async()=>{Wi(this)&&(q("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=oe(l);u.k_.add(4),await Za(u),u.K_.set("Unknown"),u.k_.delete(4),await Qu(u)}(this))})}),this.K_=new rF(r,i)}}async function Qu(t){if(Wi(t))for(const e of t.q_)await e(!0)}async function Za(t){for(const e of t.q_)await e(!1)}function yT(t,e){const n=oe(t);n.B_.has(e.targetId)||(n.B_.set(e.targetId,e),km(n)?Rm(n):ls(n).s_()&&Am(n,e))}function Im(t,e){const n=oe(t),r=ls(n);n.B_.delete(e),r.s_()&&vT(n,e),n.B_.size===0&&(r.s_()?r.a_():Wi(n)&&n.K_.set("Unknown"))}function Am(t,e){if(t.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ls(t).V_(e)}function vT(t,e){t.U_.xe(e),ls(t).m_(e)}function Rm(t){t.U_=new nN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>t.B_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),ls(t).start(),t.K_.F_()}function km(t){return Wi(t)&&!ls(t).i_()&&t.B_.size>0}function Wi(t){return oe(t).k_.size===0}function wT(t){t.U_=void 0}async function oF(t){t.K_.set("Online")}async function sF(t){t.B_.forEach((e,n)=>{Am(t,e)})}async function aF(t,e){wT(t),km(t)?(t.K_.O_(e),Rm(t)):t.K_.set("Unknown")}async function lF(t,e,n){if(t.K_.set("Online"),e instanceof iT&&e.state===2&&e.cause)try{await async function(i,o){const s=o.cause;for(const a of o.targetIds)i.B_.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.B_.delete(a),i.U_.removeTarget(a))}(t,e)}catch(r){q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await cu(t,r)}else if(e instanceof _c?t.U_.$e(e):e instanceof rT?t.U_.Je(e):t.U_.Ge(e),!n.isEqual(re.min()))try{const r=await pT(t.localStore);n.compareTo(r)>=0&&await function(o,s){const a=o.U_.it(s);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=o.B_.get(u);d&&o.B_.set(u,d.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,u)=>{const d=o.B_.get(l);if(!d)return;o.B_.set(l,d.withResumeToken(lt.EMPTY_BYTE_STRING,d.snapshotVersion)),vT(o,l);const p=new br(d.target,l,u,d.sequenceNumber);Am(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){q("RemoteStore","Failed to raise snapshot:",r),await cu(t,r)}}async function cu(t,e,n){if(!as(e))throw e;t.k_.add(1),await Za(t),t.K_.set("Offline"),n||(n=()=>pT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q("RemoteStore","Retrying IndexedDB access"),await n(),t.k_.delete(1),await Qu(t)})}function _T(t,e){return e().catch(n=>cu(t,n,e))}async function Yu(t){const e=oe(t),n=Jr(e);let r=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;cF(e);)try{const i=await qN(e.localStore,r);if(i===null){e.L_.length===0&&n.a_();break}r=i.batchId,uF(e,i)}catch(i){await cu(e,i)}xT(e)&&ET(e)}function cF(t){return Wi(t)&&t.L_.length<10}function uF(t,e){t.L_.push(e);const n=Jr(t);n.s_()&&n.f_&&n.g_(e.mutations)}function xT(t){return Wi(t)&&!Jr(t).i_()&&t.L_.length>0}function ET(t){Jr(t).start()}async function dF(t){Jr(t).w_()}async function hF(t){const e=Jr(t);for(const n of t.L_)e.g_(n.mutations)}async function fF(t,e,n){const r=t.L_.shift(),i=_m.from(r,e,n);await _T(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Yu(t)}async function pF(t,e){e&&Jr(t).f_&&await async function(r,i){if(function(s){return Z$(s)&&s!==j.ABORTED}(i.code)){const o=r.L_.shift();Jr(r).__(),await _T(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Yu(r)}}(t,e),xT(t)&&ET(t)}async function v0(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");const r=Wi(n);n.k_.add(3),await Za(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.k_.delete(3),await Qu(n)}async function mF(t,e){const n=oe(t);e?(n.k_.delete(2),await Qu(n)):e||(n.k_.add(2),await Za(n),n.K_.set("Unknown"))}function ls(t){return t.W_||(t.W_=function(n,r,i){const o=oe(n);return o.b_(),new eF(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Ro:oF.bind(null,t),mo:sF.bind(null,t),po:aF.bind(null,t),R_:lF.bind(null,t)}),t.q_.push(async e=>{e?(t.W_.__(),km(t)?Rm(t):t.K_.set("Unknown")):(await t.W_.stop(),wT(t))})),t.W_}function Jr(t){return t.G_||(t.G_=function(n,r,i){const o=oe(n);return o.b_(),new tF(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Ro:()=>Promise.resolve(),mo:dF.bind(null,t),po:pF.bind(null,t),p_:hF.bind(null,t),y_:fF.bind(null,t)}),t.q_.push(async e=>{e?(t.G_.__(),await Yu(t)):(await t.G_.stop(),t.L_.length>0&&(q("RemoteStore",`Stopping write stream with ${t.L_.length} pending writes`),t.L_=[]))})),t.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,a=new Pm(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bm(t,e){if(nr("AsyncQueue",`${e}: ${t}`),as(t))return new J(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{static emptySet(e){return new ko(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Z.comparator(n.key,r.key):(n,r)=>Z.comparator(n.key,r.key),this.keyedMap=Hs(),this.sortedSet=new Fe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ko)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ko;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(){this.z_=new Fe(Z.comparator)}track(e){const n=e.doc.key,r=this.z_.get(n);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(n,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(n):e.type===1&&r.type===2?this.z_=this.z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):ne():this.z_=this.z_.insert(n,e)}j_(){const e=[];return this.z_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Go{constructor(e,n,r,i,o,s,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new Go(e,n,ko.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class yF{constructor(){this.queries=_0(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,r){const i=oe(n),o=i.queries;i.queries=_0(),o.forEach((s,a)=>{for(const l of a.J_)l.onError(r)})})(this,new J(j.ABORTED,"Firestore shutting down"))}}function _0(){return new Bi(t=>zE(t),zu)}async function vF(t,e){const n=oe(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.Y_()&&e.Z_()&&(r=2):(o=new gF,r=e.Z_()?0:1);try{switch(r){case 0:o.H_=await n.onListen(i,!0);break;case 1:o.H_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const a=bm(s,`Initialization of query '${io(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.J_.push(e),e.ea(n.onlineState),o.H_&&e.ta(o.H_)&&$m(n)}async function wF(t,e){const n=oe(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.J_.indexOf(e);s>=0&&(o.J_.splice(s,1),o.J_.length===0?i=e.Z_()?0:1:!o.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function _F(t,e){const n=oe(t);let r=!1;for(const i of e){const o=i.query,s=n.queries.get(o);if(s){for(const a of s.J_)a.ta(i)&&(r=!0);s.H_=i}}r&&$m(n)}function xF(t,e,n){const r=oe(t),i=r.queries.get(e);if(i)for(const o of i.J_)o.onError(n);r.queries.delete(e)}function $m(t){t.X_.forEach(e=>{e.next()})}var Mf,x0;(x0=Mf||(Mf={})).na="default",x0.Cache="cache";class EF{constructor(e,n,r){this.query=e,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Go(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ia?this.oa(e)&&(this.ra.next(e),n=!0):this._a(e,this.onlineState)&&(this.aa(e),n=!0),this.sa=e,n}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),n=!0),n}_a(e,n){if(!e.fromCache||!this.Z_())return!0;const r=n!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(e){e=Go.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==Mf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e){this.key=e}}class CT{constructor(e){this.key=e}}class TF{constructor(e,n){this.query=e,this.da=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=ce(),this.mutatedKeys=ce(),this.Va=WE(e),this.ma=new ko(this.Va)}get fa(){return this.da}ga(e,n){const r=n?n.pa:new w0,i=n?n.ma:this.ma;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,p)=>{const f=i.get(d),g=Wu(this.query,p)?p:null,E=!!f&&this.mutatedKeys.has(f.key),w=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let A=!1;f&&g?f.data.isEqual(g.data)?E!==w&&(r.track({type:3,doc:g}),A=!0):this.ya(f,g)||(r.track({type:2,doc:g}),A=!0,(l&&this.Va(g,l)>0||u&&this.Va(g,u)<0)&&(a=!0)):!f&&g?(r.track({type:0,doc:g}),A=!0):f&&!g&&(r.track({type:1,doc:f}),A=!0,(l||u)&&(a=!0)),A&&(g?(s=s.add(g),o=w?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{ma:s,pa:r,ss:a,mutatedKeys:o}}ya(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const s=e.pa.j_();s.sort((d,p)=>function(g,E){const w=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne()}};return w(g)-w(E)}(d.type,p.type)||this.Va(d.doc,p.doc)),this.wa(r),i=i!=null&&i;const a=n&&!i?this.Sa():[],l=this.Ra.size===0&&this.current&&!i?1:0,u=l!==this.Aa;return this.Aa=l,s.length!==0||u?{snapshot:new Go(this.query,e.ma,o,s,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new w0,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(n=>this.da=this.da.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.da=this.da.delete(n)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=ce(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const n=[];return e.forEach(r=>{this.Ra.has(r)||n.push(new CT(r))}),this.Ra.forEach(r=>{e.has(r)||n.push(new TT(r))}),n}va(e){this.da=e.ds,this.Ra=ce();const n=this.ga(e.documents);return this.applyChanges(n,!0)}Ca(){return Go.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class CF{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class SF{constructor(e){this.key=e,this.Fa=!1}}class IF{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ma={},this.xa=new Bi(a=>zE(a),zu),this.Oa=new Map,this.Na=new Set,this.La=new Fe(Z.comparator),this.Ba=new Map,this.ka=new Tm,this.qa={},this.Qa=new Map,this.Ka=qo.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function AF(t,e,n=!0){const r=PT(t);let i;const o=r.xa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Ca()):i=await ST(r,e,n,!0),i}async function RF(t,e){const n=PT(t);await ST(n,e,!0,!1)}async function ST(t,e,n,r){const i=await GN(t.localStore,Tn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=await kF(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&yT(t.remoteStore,i),a}async function kF(t,e,n,r,i){t.Ua=(p,f,g)=>async function(w,A,_,y){let C=A.view.ga(_);C.ss&&(C=await m0(w.localStore,A.query,!1).then(({documents:S})=>A.view.ga(S,C)));const b=y&&y.targetChanges.get(A.targetId),F=y&&y.targetMismatches.get(A.targetId)!=null,O=A.view.applyChanges(C,w.isPrimaryClient,b,F);return T0(w,A.targetId,O.ba),O.snapshot}(t,p,f,g);const o=await m0(t.localStore,e,!0),s=new TF(e,o.ds),a=s.ga(o.documents),l=Ja.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=s.applyChanges(a,t.isPrimaryClient,l);T0(t,n,u.ba);const d=new CF(e,n,s);return t.xa.set(e,d),t.Oa.has(n)?t.Oa.get(n).push(e):t.Oa.set(n,[e]),u.snapshot}async function PF(t,e,n){const r=oe(t),i=r.xa.get(e),o=r.Oa.get(i.targetId);if(o.length>1)return r.Oa.set(i.targetId,o.filter(s=>!zu(s,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Df(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Im(r.remoteStore,i.targetId),Vf(r,i.targetId)}).catch(ss)):(Vf(r,i.targetId),await Df(r.localStore,i.targetId,!0))}async function bF(t,e){const n=oe(t),r=n.xa.get(e),i=n.Oa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Im(n.remoteStore,r.targetId))}async function $F(t,e,n){const r=VF(t);try{const i=await function(s,a){const l=oe(s),u=Ge.now(),d=a.reduce((g,E)=>g.add(E.key),ce());let p,f;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let E=rr(),w=ce();return l.hs.getEntries(g,d).next(A=>{E=A,E.forEach((_,y)=>{y.isValidDocument()||(w=w.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,E)).next(A=>{p=A;const _=[];for(const y of a){const C=K$(y,p.get(y.key).overlayedDocument);C!=null&&_.push(new zi(y.key,C,OE(C.value.mapValue),Cn.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,_,a)}).next(A=>{f=A;const _=A.applyToLocalDocumentSet(p,w);return l.documentOverlayCache.saveOverlays(g,A.batchId,_)})}).then(()=>({batchId:f.batchId,changes:qE(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,l){let u=s.qa[s.currentUser.toKey()];u||(u=new Fe(de)),u=u.insert(a,l),s.qa[s.currentUser.toKey()]=u}(r,i.batchId,n),await el(r,i.changes),await Yu(r.remoteStore)}catch(i){const o=bm(i,"Failed to persist write");n.reject(o)}}async function IT(t,e){const n=oe(t);try{const r=await WN(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Ba.get(o);s&&(ve(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Fa=!0:i.modifiedDocuments.size>0?ve(s.Fa):i.removedDocuments.size>0&&(ve(s.Fa),s.Fa=!1))}),await el(n,r,e)}catch(r){await ss(r)}}function E0(t,e,n){const r=oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.xa.forEach((o,s)=>{const a=s.view.ea(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const l=oe(s);l.onlineState=a;let u=!1;l.queries.forEach((d,p)=>{for(const f of p.J_)f.ea(a)&&(u=!0)}),u&&$m(l)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function NF(t,e,n){const r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Ba.get(e),o=i&&i.key;if(o){let s=new Fe(Z.comparator);s=s.insert(o,wt.newNoDocument(o,re.min()));const a=ce().add(o),l=new Gu(re.min(),new Map,new Fe(de),s,a);await IT(r,l),r.La=r.La.remove(o),r.Ba.delete(e),Nm(r)}else await Df(r.localStore,e,!1).then(()=>Vf(r,e,n)).catch(ss)}async function FF(t,e){const n=oe(t),r=e.batch.batchId;try{const i=await zN(n.localStore,e);RT(n,r,null),AT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await el(n,i)}catch(i){await ss(i)}}async function LF(t,e,n){const r=oe(t);try{const i=await function(s,a){const l=oe(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,a).next(p=>(ve(p!==null),d=p.keys(),l.mutationQueue.removeMutationBatch(u,p))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(r.localStore,e);RT(r,e,n),AT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await el(r,i)}catch(i){await ss(i)}}function AT(t,e){(t.Qa.get(e)||[]).forEach(n=>{n.resolve()}),t.Qa.delete(e)}function RT(t,e,n){const r=oe(t);let i=r.qa[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.qa[r.currentUser.toKey()]=i}}function Vf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Oa.get(e))t.xa.delete(r),n&&t.Ma.Wa(r,n);t.Oa.delete(e),t.isPrimaryClient&&t.ka.yr(e).forEach(r=>{t.ka.containsKey(r)||kT(t,r)})}function kT(t,e){t.Na.delete(e.path.canonicalString());const n=t.La.get(e);n!==null&&(Im(t.remoteStore,n),t.La=t.La.remove(e),t.Ba.delete(n),Nm(t))}function T0(t,e,n){for(const r of n)r instanceof TT?(t.ka.addReference(r.key,e),OF(t,r)):r instanceof CT?(q("SyncEngine","Document no longer in limbo: "+r.key),t.ka.removeReference(r.key,e),t.ka.containsKey(r.key)||kT(t,r.key)):ne()}function OF(t,e){const n=e.key,r=n.path.canonicalString();t.La.get(n)||t.Na.has(r)||(q("SyncEngine","New document in limbo: "+n),t.Na.add(r),Nm(t))}function Nm(t){for(;t.Na.size>0&&t.La.size<t.maxConcurrentLimboResolutions;){const e=t.Na.values().next().value;t.Na.delete(e);const n=new Z(ke.fromString(e)),r=t.Ka.next();t.Ba.set(r,new SF(n)),t.La=t.La.insert(n,r),yT(t.remoteStore,new br(Tn(vm(n.path)),r,"TargetPurposeLimboResolution",Vu.oe))}}async function el(t,e,n){const r=oe(t),i=[],o=[],s=[];r.xa.isEmpty()||(r.xa.forEach((a,l)=>{s.push(r.Ua(l,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const p=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(u){i.push(u);const p=Sm.zi(l.targetId,u);o.push(p)}}))}),await Promise.all(s),r.Ma.R_(i),await async function(l,u){const d=oe(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>V.forEach(u,f=>V.forEach(f.Wi,g=>d.persistence.referenceDelegate.addReference(p,f.targetId,g)).next(()=>V.forEach(f.Gi,g=>d.persistence.referenceDelegate.removeReference(p,f.targetId,g)))))}catch(p){if(!as(p))throw p;q("LocalStore","Failed to update sequence numbers: "+p)}for(const p of u){const f=p.targetId;if(!p.fromCache){const g=d.us.get(f),E=g.snapshotVersion,w=g.withLastLimboFreeSnapshotVersion(E);d.us=d.us.insert(f,w)}}}(r.localStore,o))}async function DF(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){q("SyncEngine","User change. New user:",e.toKey());const r=await fT(n.localStore,e);n.currentUser=e,function(o,s){o.Qa.forEach(a=>{a.forEach(l=>{l.reject(new J(j.CANCELLED,s))})}),o.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await el(n,r.Ts)}}function MF(t,e){const n=oe(t),r=n.Ba.get(e);if(r&&r.Fa)return ce().add(r.key);{let i=ce();const o=n.Oa.get(e);if(!o)return i;for(const s of o){const a=n.xa.get(s);i=i.unionWith(a.view.fa)}return i}}function PT(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=IT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=NF.bind(null,e),e.Ma.R_=_F.bind(null,e.eventManager),e.Ma.Wa=xF.bind(null,e.eventManager),e}function VF(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LF.bind(null,e),e}class uu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ku(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,n){return null}Ya(e,n){return null}Ha(e){return BN(this.persistence,new jN,e.initialUser,this.serializer)}ja(e){return new hT(Cm.ei,this.serializer)}za(e){return new QN}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}uu.provider={build:()=>new uu};class jF extends uu{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,n){ve(this.persistence.referenceDelegate instanceof lu);const r=this.persistence.referenceDelegate.garbageCollector;return new SN(r,e.asyncQueue,n)}ja(e){const n=this.cacheSizeBytes!==void 0?kt.withCacheSize(this.cacheSizeBytes):kt.DEFAULT;return new hT(r=>lu.ei(r,n),this.serializer)}}class jf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>E0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=DF.bind(null,this.syncEngine),await mF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new yF}()}createDatastore(e){const n=Ku(e.databaseInfo.databaseId),r=function(o){return new ZN(o)}(e.databaseInfo);return function(o,s,a,l){return new nF(o,s,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new iF(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>E0(this.syncEngine,n,0),function(){return y0.p()?new y0:new YN}())}createSyncEngine(e,n){return function(i,o,s,a,l,u,d){const p=new IF(i,o,s,a,l,u);return d&&(p.$a=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=oe(i);q("RemoteStore","RemoteStore shutting down."),o.k_.add(5),await Za(o),o.Q_.shutdown(),o.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}jf.provider={build:()=>new jf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):nr("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=yt.UNAUTHENTICATED,this.clientId=NE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{q("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(q("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=bm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function uh(t,e){t.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await fT(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function C0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await zF(t);q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>v0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>v0(e.remoteStore,i)),t._onlineComponents=e}async function zF(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q("FirestoreClient","Using user provided OfflineComponentProvider");try{await uh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===j.FAILED_PRECONDITION||i.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Bo("Error using user provided cache. Falling back to memory cache: "+n),await uh(t,new uu)}}else q("FirestoreClient","Using default OfflineComponentProvider"),await uh(t,new jF(void 0));return t._offlineComponents}async function bT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q("FirestoreClient","Using user provided OnlineComponentProvider"),await C0(t,t._uninitializedComponentsProvider._online)):(q("FirestoreClient","Using default OnlineComponentProvider"),await C0(t,new jf))),t._onlineComponents}function WF(t){return bT(t).then(e=>e.syncEngine)}async function HF(t){const e=await bT(t),n=e.eventManager;return n.onListen=AF.bind(null,e.syncEngine),n.onUnlisten=PF.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=RF.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=bF.bind(null,e.syncEngine),n}function qF(t,e,n={}){const r=new zr;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,a,l,u){const d=new UF({next:f=>{d.eu(),s.enqueueAndForget(()=>wF(o,p));const g=f.docs.has(a);!g&&f.fromCache?u.reject(new J(j.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&l&&l.source==="server"?u.reject(new J(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),p=new EF(vm(a.path),d,{includeMetadataChanges:!0,ua:!0});return vF(o,p)}(await HF(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(t,e,n){if(!n)throw new J(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function GF(t,e,n,r){if(e===!0&&r===!0)throw new J(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function I0(t){if(!Z.isDocumentKey(t))throw new J(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function A0(t){if(Z.isDocumentKey(t))throw new J(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Fm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne()}function Ko(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Fm(t);throw new J(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new J(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new J(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$T((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new J(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new J(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new J(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xu{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new R0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new J(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new J(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new R0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Zb;switch(r.type){case"firstParty":return new r$(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=S0.get(n);r&&(q("ComponentProvider","Removing Datastore"),S0.delete(n),r.terminate())}(this),Promise.resolve()}}function KF(t,e,n,r={}){var i;const o=(t=Ko(t,Xu))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Bo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=yt.MOCK_USER;else{a=Ik(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new J(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new yt(u)}t._authCredentials=new e$(new $E(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Lm(this.firestore,e,this._query)}}class jt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jt(this.firestore,e,this._key)}}class Wr extends Lm{constructor(e,n,r){super(e,n,vm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jt(this.firestore,null,new Z(e))}withConverter(e){return new Wr(this.firestore,e,this._path)}}function QF(t,e,...n){if(t=zt(t),NT("collection","path",e),t instanceof Xu){const r=ke.fromString(e,...n);return A0(r),new Wr(t,null,r)}{if(!(t instanceof jt||t instanceof Wr))throw new J(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ke.fromString(e,...n));return A0(r),new Wr(t.firestore,null,r)}}function Om(t,e,...n){if(t=zt(t),arguments.length===1&&(e=NE.newId()),NT("doc","path",e),t instanceof Xu){const r=ke.fromString(e,...n);return I0(r),new jt(t,null,new Z(r))}{if(!(t instanceof jt||t instanceof Wr))throw new J(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ke.fromString(e,...n));return I0(r),new jt(t.firestore,t instanceof Wr?t.converter:null,new Z(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new mT(this,"async_queue_retry"),this.fu=()=>{const r=ch();r&&q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const n=ch();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const n=ch();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const n=new zr;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!as(e))throw e;q("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const n=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw nr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=n,n}enqueueAfterDelay(e,n,r){this.pu(),this.mu.indexOf(e)>-1&&(n=0);const i=Pm.createAndSchedule(this,e,n,r,o=>this.Su(o));return this.du.push(i),i}pu(){this.Au&&ne()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const n of this.du)if(n.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.du)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const n=this.du.indexOf(e);this.du.splice(n,1)}}class Ju extends Xu{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new k0,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new k0(e),this._firestoreClient=void 0,await e}}}function YF(t,e){const n=typeof t=="object"?t:qx(),r=typeof t=="string"?t:"(default)",i=nm(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=Ck("firestore");o&&KF(i,...o)}return i}function FT(t){if(t._terminated)throw new J(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||XF(t),t._firestoreClient}function XF(t){var e,n,r;const i=t._freezeSettings(),o=function(a,l,u,d){return new v$(a,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,$T(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new BF(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qo(lt.fromBase64String(e))}catch(n){throw new J(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Qo(lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new J(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return de(this._lat,e._lat)||de(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JF=/^__.*__$/;class ZF{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new zi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Xa(e,this.data,n,this.fieldTransforms)}}function LT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne()}}class Um{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Fu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new Um(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Lu(e),i}Bu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return du(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(LT(this.Mu)&&JF.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class eL{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ku(e)}$u(e,n,r,i=!1){return new Um({Mu:e,methodName:n,Ku:r,path:ot.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function OT(t){const e=t._freezeSettings(),n=Ku(t._databaseId);return new eL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function DT(t,e,n,r,i,o={}){const s=t.$u(o.merge||o.mergeFields?2:0,e,n,i);UT("Data must be an object, but it was:",s,r);const a=VT(r,s);let l,u;if(o.merge)l=new an(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){const d=[];for(const p of o.mergeFields){const f=tL(e,p,n);if(!s.contains(f))throw new J(j.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);rL(d,f)||d.push(f)}l=new an(d),u=s.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,u=s.fieldTransforms;return new ZF(new Qt(a),l,u)}class Bm extends Mm{_toFieldTransform(e){return new W$(e.path,new $a)}isEqual(e){return e instanceof Bm}}function MT(t,e){if(jT(t=zt(t)))return UT("Unsupported field value:",e,t),VT(t,e);if(t instanceof Mm)return function(r,i){if(!LT(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let l=MT(a,i.ku(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=zt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return U$(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Ge.fromDate(r);return{timestampValue:au(i.serializer,o)}}if(r instanceof Ge){const o=new Ge(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:au(i.serializer,o)}}if(r instanceof Vm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qo)return{bytesValue:oT(i.serializer,r._byteString)};if(r instanceof jt){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.qu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Em(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof jm)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.qu("VectorValues must only contain numeric values.");return wm(a.serializer,l)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${Fm(r)}`)}(t,e)}function VT(t,e){const n={};return FE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ui(t,(r,i)=>{const o=MT(i,e.Ou(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function jT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ge||t instanceof Vm||t instanceof Qo||t instanceof jt||t instanceof Mm||t instanceof jm)}function UT(t,e,n){if(!jT(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Fm(n);throw r==="an object"?e.qu(t+" a custom object"):e.qu(t+" "+r)}}function tL(t,e,n){if((e=zt(e))instanceof Dm)return e._internalPath;if(typeof e=="string")return BT(t,e);throw du("Field path arguments must be of type string or ",t,!1,void 0,n)}const nL=new RegExp("[~\\*/\\[\\]]");function BT(t,e,n){if(e.search(nL)>=0)throw du(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Dm(...e.split("."))._internalPath}catch{throw du(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function du(t,e,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new J(j.INVALID_ARGUMENT,a+t+l)}function rL(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new iL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(WT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class iL extends zT{data(){return super.data()}}function WT(t,e){return typeof e=="string"?BT(t,e):e instanceof Dm?e._internalPath:e._delegate._internalPath}class oL{convertValue(e,n="none"){switch(Xr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return De(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Yr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ne()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ui(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>De(s.doubleValue));return new jm(o)}convertGeoPoint(e){return new Vm(De(e.latitude),De(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Uu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ka(e));default:return null}}convertTimestamp(e){const n=Qr(e);return new Ge(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ke.fromString(e);ve(dT(r));const i=new Pa(r.get(1),r.get(3)),o=new Z(r.popFirst(5));return i.isEqual(n)||nr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qT extends zT{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new aL(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(WT("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class aL extends qT{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(t){t=Ko(t,jt);const e=Ko(t.firestore,Ju);return qF(FT(e),t._key).then(n=>dL(e,t,n))}class lL extends oL{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,n)}}function cL(t,e,n){t=Ko(t,jt);const r=Ko(t.firestore,Ju),i=HT(t.converter,e);return KT(r,[DT(OT(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Cn.none())])}function uL(t,e){const n=Ko(t.firestore,Ju),r=Om(t),i=HT(t.converter,e);return KT(n,[DT(OT(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Cn.exists(!1))]).then(()=>r)}function KT(t,e){return function(r,i){const o=new zr;return r.asyncQueue.enqueueAndForget(async()=>$F(await WF(r),i,o)),o.promise}(FT(t),e)}function dL(t,e,n){const r=n.docs.get(e._key),i=new lL(t);return new qT(t,i,e._key,r,new sL(n.hasPendingWrites,n.fromCache),e.converter)}function hL(){return new Bm("serverTimestamp")}(function(e,n=!0){(function(i){os=i})(rs),jo(new bi("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new Ju(new t$(r.getProvider("auth-internal")),new o$(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new J(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pa(u.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Br(qv,"4.7.5",e),Br(qv,"4.7.5","esm2017")})();console.log("Current mode:","production");const Uf={apiKey:"AIzaSyBKI6MDjPopM298T9QnhnqHQhg_xF3gEEQ",authDomain:"optionsquiz.firebaseapp.com",projectId:"optionsquiz",storageBucket:"optionsquiz.firebasestorage.app",messagingSenderId:"163287932453",appId:"1:163287932453:web:a00cde77ac0cc01884a9cc"},QT=Hx(Uf),dh=Xb(QT),zm=YF(QT);console.log("Using Firebase config for:","production",{projectId:Uf.projectId,authDomain:Uf.authDomain});const YT=x.createContext(),cs=()=>x.useContext(YT),fL=({children:t})=>{const[e,n]=x.useState(null),[r,i]=x.useState(!0),o=async()=>{const l=new Un;try{await sb(dh,l)}catch(u){console.error("Error signing in with Google:",u)}},s=async()=>{try{await j2(dh)}catch(l){console.error("Error signing out:",l)}};x.useEffect(()=>V2(dh,u=>{n(u),i(!1)}),[]);const a={user:e,signInWithGoogle:o,logout:s};return v.jsx(YT.Provider,{value:a,children:!r&&t})},pL=async t=>{console.log("Checking subscription status for userId:",t);try{const e=await GT(Om(zm,"subscriptions",t));if(console.log("Firestore subscription data:",e.data()),!e.exists())return console.log("No subscription document found"),{isPremium:!1};const n=e.data(),r=n.status==="active";return console.log("Subscription status:",{isActive:r,status:n.status}),{isPremium:r}}catch(e){throw console.error("Error checking subscription:",e),e}},mL=async(t,e)=>{console.log("Updating subscription status:",{userId:t,status:e});try{const n=Om(zm,"subscriptions",t),r={status:e,updatedAt:hL()};await cL(n,r),console.log("Successfully updated subscription in Firestore");const i=await GT(n);return console.log("Verified Firestore data:",i.data()),!0}catch(n){throw console.error("Error updating subscription status:",n),n}},XT=x.createContext(),Wm=()=>x.useContext(XT),gL=({children:t})=>{const{user:e}=cs(),[n,r]=x.useState(!1),[i,o]=x.useState(!0);x.useEffect(()=>{(async()=>{if(console.log("PaymentContext: Checking status, current user:",e==null?void 0:e.uid),e)try{const u=`premium_status_${e.uid}`;console.log("Checking localStorage with key:",u);const d=localStorage.getItem(u);if(console.log("Cached status found:",d),d){const g=JSON.parse(d);if(console.log("Parsed cached status:",g),Date.now()-g.timestamp<36e5){console.log("Using cached premium status:",g.isPremium),r(g.isPremium),o(!1);return}else console.log("Cache expired, checking Firestore")}const p=await pL(e.uid);console.log("Firestore status result:",p),r(p.isPremium),console.log("Updated isPremium state to:",p.isPremium);const f={isPremium:p.isPremium,timestamp:Date.now()};localStorage.setItem(u,JSON.stringify(f)),console.log("Updated localStorage cache:",f)}catch(u){console.error("Error in PaymentContext:",u)}else console.log("No user found, setting isPremium to false"),r(!1);o(!1)})()},[e]);const s=async l=>{if(console.log("Updating premium status to:",l),r(l),e){const u={isPremium:l,timestamp:Date.now()},d=`premium_status_${e.uid}`;localStorage.setItem(d,JSON.stringify(u)),console.log("Updated cache in updatePremiumStatus:",u)}};console.log("PaymentContext current state:",{isPremium:n,loading:i});const a={isPremium:n,setIsPremium:s,loading:i};return v.jsx(XT.Provider,{value:a,children:!i&&t})};function P0(t,[e,n]){return Math.min(n,Math.max(e,t))}function Ue(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function Hm(t,e=[]){let n=[];function r(o,s){const a=x.createContext(s),l=n.length;n=[...n,s];const u=p=>{var _;const{scope:f,children:g,...E}=p,w=((_=f==null?void 0:f[t])==null?void 0:_[l])||a,A=x.useMemo(()=>E,Object.values(E));return v.jsx(w.Provider,{value:A,children:g})};u.displayName=o+"Provider";function d(p,f){var w;const g=((w=f==null?void 0:f[t])==null?void 0:w[l])||a,E=x.useContext(g);if(E)return E;if(s!==void 0)return s;throw new Error(`\`${p}\` must be used within \`${o}\``)}return[u,d]}const i=()=>{const o=n.map(s=>x.createContext(s));return function(a){const l=(a==null?void 0:a[t])||o;return x.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,yL(i,...e)]}function yL(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const s=r.reduce((a,{useScope:l,scopeName:u})=>{const p=l(o)[`__scope${u}`];return{...a,...p}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return n.scopeName=e.scopeName,n}function b0(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function JT(...t){return e=>{let n=!1;const r=t.map(i=>{const o=b0(i,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():b0(t[i],null)}}}}function ct(...t){return x.useCallback(JT(...t),t)}var Yo=x.forwardRef((t,e)=>{const{children:n,...r}=t,i=x.Children.toArray(n),o=i.find(wL);if(o){const s=o.props.children,a=i.map(l=>l===o?x.Children.count(s)>1?x.Children.only(null):x.isValidElement(s)?s.props.children:null:l);return v.jsx(Bf,{...r,ref:e,children:x.isValidElement(s)?x.cloneElement(s,void 0,a):null})}return v.jsx(Bf,{...r,ref:e,children:n})});Yo.displayName="Slot";var Bf=x.forwardRef((t,e)=>{const{children:n,...r}=t;if(x.isValidElement(n)){const i=xL(n);return x.cloneElement(n,{..._L(r,n.props),ref:e?JT(e,i):i})}return x.Children.count(n)>1?x.Children.only(null):null});Bf.displayName="SlotClone";var vL=({children:t})=>v.jsx(v.Fragment,{children:t});function wL(t){return x.isValidElement(t)&&t.type===vL}function _L(t,e){const n={...e};for(const r in e){const i=t[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...a)=>{o(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...t,...n}}function xL(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function EL(t){const e=t+"CollectionProvider",[n,r]=Hm(e),[i,o]=n(e,{collectionRef:{current:null},itemMap:new Map}),s=g=>{const{scope:E,children:w}=g,A=Mn.useRef(null),_=Mn.useRef(new Map).current;return v.jsx(i,{scope:E,itemMap:_,collectionRef:A,children:w})};s.displayName=e;const a=t+"CollectionSlot",l=Mn.forwardRef((g,E)=>{const{scope:w,children:A}=g,_=o(a,w),y=ct(E,_.collectionRef);return v.jsx(Yo,{ref:y,children:A})});l.displayName=a;const u=t+"CollectionItemSlot",d="data-radix-collection-item",p=Mn.forwardRef((g,E)=>{const{scope:w,children:A,..._}=g,y=Mn.useRef(null),C=ct(E,y),b=o(u,w);return Mn.useEffect(()=>(b.itemMap.set(y,{ref:y,..._}),()=>void b.itemMap.delete(y))),v.jsx(Yo,{[d]:"",ref:C,children:A})});p.displayName=u;function f(g){const E=o(t+"CollectionConsumer",g);return Mn.useCallback(()=>{const A=E.collectionRef.current;if(!A)return[];const _=Array.from(A.querySelectorAll(`[${d}]`));return Array.from(E.itemMap.values()).sort((b,F)=>_.indexOf(b.ref.current)-_.indexOf(F.ref.current))},[E.collectionRef,E.itemMap])}return[{Provider:s,Slot:l,ItemSlot:p},f,r]}var TL=x.createContext(void 0);function CL(t){const e=x.useContext(TL);return t||e||"ltr"}var SL=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ve=SL.reduce((t,e)=>{const n=x.forwardRef((r,i)=>{const{asChild:o,...s}=r,a=o?Yo:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),v.jsx(a,{...s,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function IL(t,e){t&&ts.flushSync(()=>t.dispatchEvent(e))}function ir(t){const e=x.useRef(t);return x.useEffect(()=>{e.current=t}),x.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function AL(t,e=globalThis==null?void 0:globalThis.document){const n=ir(t);x.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var RL="DismissableLayer",zf="dismissableLayer.update",kL="dismissableLayer.pointerDownOutside",PL="dismissableLayer.focusOutside",$0,ZT=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),eC=x.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:s,onDismiss:a,...l}=t,u=x.useContext(ZT),[d,p]=x.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=x.useState({}),E=ct(e,S=>p(S)),w=Array.from(u.layers),[A]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),_=w.indexOf(A),y=d?w.indexOf(d):-1,C=u.layersWithOutsidePointerEventsDisabled.size>0,b=y>=_,F=NL(S=>{const T=S.target,R=[...u.branches].some(k=>k.contains(T));!b||R||(i==null||i(S),s==null||s(S),S.defaultPrevented||a==null||a())},f),O=FL(S=>{const T=S.target;[...u.branches].some(k=>k.contains(T))||(o==null||o(S),s==null||s(S),S.defaultPrevented||a==null||a())},f);return AL(S=>{y===u.layers.size-1&&(r==null||r(S),!S.defaultPrevented&&a&&(S.preventDefault(),a()))},f),x.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&($0=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),N0(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=$0)}},[d,f,n,u]),x.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),N0())},[d,u]),x.useEffect(()=>{const S=()=>g({});return document.addEventListener(zf,S),()=>document.removeEventListener(zf,S)},[]),v.jsx(Ve.div,{...l,ref:E,style:{pointerEvents:C?b?"auto":"none":void 0,...t.style},onFocusCapture:Ue(t.onFocusCapture,O.onFocusCapture),onBlurCapture:Ue(t.onBlurCapture,O.onBlurCapture),onPointerDownCapture:Ue(t.onPointerDownCapture,F.onPointerDownCapture)})});eC.displayName=RL;var bL="DismissableLayerBranch",$L=x.forwardRef((t,e)=>{const n=x.useContext(ZT),r=x.useRef(null),i=ct(e,r);return x.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),v.jsx(Ve.div,{...t,ref:i})});$L.displayName=bL;function NL(t,e=globalThis==null?void 0:globalThis.document){const n=ir(t),r=x.useRef(!1),i=x.useRef(()=>{});return x.useEffect(()=>{const o=a=>{if(a.target&&!r.current){let l=function(){tC(kL,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},s=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(s),e.removeEventListener("pointerdown",o),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function FL(t,e=globalThis==null?void 0:globalThis.document){const n=ir(t),r=x.useRef(!1);return x.useEffect(()=>{const i=o=>{o.target&&!r.current&&tC(PL,n,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function N0(){const t=new CustomEvent(zf);document.dispatchEvent(t)}function tC(t,e,n,{discrete:r}){const i=n.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?IL(i,o):i.dispatchEvent(o)}var hh=0;function LL(){x.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??F0()),document.body.insertAdjacentElement("beforeend",t[1]??F0()),hh++,()=>{hh===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),hh--}},[])}function F0(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var fh="focusScope.autoFocusOnMount",ph="focusScope.autoFocusOnUnmount",L0={bubbles:!1,cancelable:!0},OL="FocusScope",nC=x.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...s}=t,[a,l]=x.useState(null),u=ir(i),d=ir(o),p=x.useRef(null),f=ct(e,w=>l(w)),g=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(r){let w=function(C){if(g.paused||!a)return;const b=C.target;a.contains(b)?p.current=b:xr(p.current,{select:!0})},A=function(C){if(g.paused||!a)return;const b=C.relatedTarget;b!==null&&(a.contains(b)||xr(p.current,{select:!0}))},_=function(C){if(document.activeElement===document.body)for(const F of C)F.removedNodes.length>0&&xr(a)};document.addEventListener("focusin",w),document.addEventListener("focusout",A);const y=new MutationObserver(_);return a&&y.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",A),y.disconnect()}}},[r,a,g.paused]),x.useEffect(()=>{if(a){D0.add(g);const w=document.activeElement;if(!a.contains(w)){const _=new CustomEvent(fh,L0);a.addEventListener(fh,u),a.dispatchEvent(_),_.defaultPrevented||(DL(BL(rC(a)),{select:!0}),document.activeElement===w&&xr(a))}return()=>{a.removeEventListener(fh,u),setTimeout(()=>{const _=new CustomEvent(ph,L0);a.addEventListener(ph,d),a.dispatchEvent(_),_.defaultPrevented||xr(w??document.body,{select:!0}),a.removeEventListener(ph,d),D0.remove(g)},0)}}},[a,u,d,g]);const E=x.useCallback(w=>{if(!n&&!r||g.paused)return;const A=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,_=document.activeElement;if(A&&_){const y=w.currentTarget,[C,b]=ML(y);C&&b?!w.shiftKey&&_===b?(w.preventDefault(),n&&xr(C,{select:!0})):w.shiftKey&&_===C&&(w.preventDefault(),n&&xr(b,{select:!0})):_===y&&w.preventDefault()}},[n,r,g.paused]);return v.jsx(Ve.div,{tabIndex:-1,...s,ref:f,onKeyDown:E})});nC.displayName=OL;function DL(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(xr(r,{select:e}),document.activeElement!==n)return}function ML(t){const e=rC(t),n=O0(e,t),r=O0(e.reverse(),t);return[n,r]}function rC(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function O0(t,e){for(const n of t)if(!VL(n,{upTo:e}))return n}function VL(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function jL(t){return t instanceof HTMLInputElement&&"select"in t}function xr(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&jL(t)&&e&&t.select()}}var D0=UL();function UL(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=M0(t,e),t.unshift(e)},remove(e){var n;t=M0(t,e),(n=t[0])==null||n.resume()}}}function M0(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function BL(t){return t.filter(e=>e.tagName!=="A")}var Wt=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},zL=A1.useId||(()=>{}),WL=0;function qm(t){const[e,n]=x.useState(zL());return Wt(()=>{n(r=>r??String(WL++))},[t]),e?`radix-${e}`:""}const HL=["top","right","bottom","left"],Zr=Math.min,Dt=Math.max,hu=Math.round,Hl=Math.floor,In=t=>({x:t,y:t}),qL={left:"right",right:"left",bottom:"top",top:"bottom"},GL={start:"end",end:"start"};function Wf(t,e,n){return Dt(t,Zr(e,n))}function or(t,e){return typeof t=="function"?t(e):t}function sr(t){return t.split("-")[0]}function us(t){return t.split("-")[1]}function Gm(t){return t==="x"?"y":"x"}function Km(t){return t==="y"?"height":"width"}function ei(t){return["top","bottom"].includes(sr(t))?"y":"x"}function Qm(t){return Gm(ei(t))}function KL(t,e,n){n===void 0&&(n=!1);const r=us(t),i=Qm(t),o=Km(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(s=fu(s)),[s,fu(s)]}function QL(t){const e=fu(t);return[Hf(t),e,Hf(e)]}function Hf(t){return t.replace(/start|end/g,e=>GL[e])}function YL(t,e,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?o:s;default:return[]}}function XL(t,e,n,r){const i=us(t);let o=YL(sr(t),n==="start",r);return i&&(o=o.map(s=>s+"-"+i),e&&(o=o.concat(o.map(Hf)))),o}function fu(t){return t.replace(/left|right|bottom|top/g,e=>qL[e])}function JL(t){return{top:0,right:0,bottom:0,left:0,...t}}function iC(t){return typeof t!="number"?JL(t):{top:t,right:t,bottom:t,left:t}}function pu(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function V0(t,e,n){let{reference:r,floating:i}=t;const o=ei(e),s=Qm(e),a=Km(s),l=sr(e),u=o==="y",d=r.x+r.width/2-i.width/2,p=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let g;switch(l){case"top":g={x:d,y:r.y-i.height};break;case"bottom":g={x:d,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:p};break;case"left":g={x:r.x-i.width,y:p};break;default:g={x:r.x,y:r.y}}switch(us(e)){case"start":g[s]-=f*(n&&u?-1:1);break;case"end":g[s]+=f*(n&&u?-1:1);break}return g}const ZL=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(e));let u=await s.getElementRects({reference:t,floating:e,strategy:i}),{x:d,y:p}=V0(u,r,l),f=r,g={},E=0;for(let w=0;w<a.length;w++){const{name:A,fn:_}=a[w],{x:y,y:C,data:b,reset:F}=await _({x:d,y:p,initialPlacement:r,placement:f,strategy:i,middlewareData:g,rects:u,platform:s,elements:{reference:t,floating:e}});d=y??d,p=C??p,g={...g,[A]:{...g[A],...b}},F&&E<=50&&(E++,typeof F=="object"&&(F.placement&&(f=F.placement),F.rects&&(u=F.rects===!0?await s.getElementRects({reference:t,floating:e,strategy:i}):F.rects),{x:d,y:p}=V0(u,f,l)),w=-1)}return{x:d,y:p,placement:f,strategy:i,middlewareData:g}};async function La(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:o,rects:s,elements:a,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:p="floating",altBoundary:f=!1,padding:g=0}=or(e,t),E=iC(g),A=a[f?p==="floating"?"reference":"floating":p],_=pu(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(A)))==null||n?A:A.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:u,rootBoundary:d,strategy:l})),y=p==="floating"?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),b=await(o.isElement==null?void 0:o.isElement(C))?await(o.getScale==null?void 0:o.getScale(C))||{x:1,y:1}:{x:1,y:1},F=pu(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:C,strategy:l}):y);return{top:(_.top-F.top+E.top)/b.y,bottom:(F.bottom-_.bottom+E.bottom)/b.y,left:(_.left-F.left+E.left)/b.x,right:(F.right-_.right+E.right)/b.x}}const eO=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:o,platform:s,elements:a,middlewareData:l}=e,{element:u,padding:d=0}=or(t,e)||{};if(u==null)return{};const p=iC(d),f={x:n,y:r},g=Qm(i),E=Km(g),w=await s.getDimensions(u),A=g==="y",_=A?"top":"left",y=A?"bottom":"right",C=A?"clientHeight":"clientWidth",b=o.reference[E]+o.reference[g]-f[g]-o.floating[E],F=f[g]-o.reference[g],O=await(s.getOffsetParent==null?void 0:s.getOffsetParent(u));let S=O?O[C]:0;(!S||!await(s.isElement==null?void 0:s.isElement(O)))&&(S=a.floating[C]||o.floating[E]);const T=b/2-F/2,R=S/2-w[E]/2-1,k=Zr(p[_],R),$=Zr(p[y],R),N=k,P=S-w[E]-$,W=S/2-w[E]/2+T,ie=Wf(N,W,P),K=!l.arrow&&us(i)!=null&&W!==ie&&o.reference[E]/2-(W<N?k:$)-w[E]/2<0,Y=K?W<N?W-N:W-P:0;return{[g]:f[g]+Y,data:{[g]:ie,centerOffset:W-ie-Y,...K&&{alignmentOffset:Y}},reset:K}}}),tO=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:d=!0,crossAxis:p=!0,fallbackPlacements:f,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:E="none",flipAlignment:w=!0,...A}=or(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const _=sr(i),y=ei(a),C=sr(a)===a,b=await(l.isRTL==null?void 0:l.isRTL(u.floating)),F=f||(C||!w?[fu(a)]:QL(a)),O=E!=="none";!f&&O&&F.push(...XL(a,w,E,b));const S=[a,...F],T=await La(e,A),R=[];let k=((r=o.flip)==null?void 0:r.overflows)||[];if(d&&R.push(T[_]),p){const W=KL(i,s,b);R.push(T[W[0]],T[W[1]])}if(k=[...k,{placement:i,overflows:R}],!R.every(W=>W<=0)){var $,N;const W=((($=o.flip)==null?void 0:$.index)||0)+1,ie=S[W];if(ie)return{data:{index:W,overflows:k},reset:{placement:ie}};let K=(N=k.filter(Y=>Y.overflows[0]<=0).sort((Y,M)=>Y.overflows[1]-M.overflows[1])[0])==null?void 0:N.placement;if(!K)switch(g){case"bestFit":{var P;const Y=(P=k.filter(M=>{if(O){const z=ei(M.placement);return z===y||z==="y"}return!0}).map(M=>[M.placement,M.overflows.filter(z=>z>0).reduce((z,Q)=>z+Q,0)]).sort((M,z)=>M[1]-z[1])[0])==null?void 0:P[0];Y&&(K=Y);break}case"initialPlacement":K=a;break}if(i!==K)return{reset:{placement:K}}}return{}}}};function j0(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function U0(t){return HL.some(e=>t[e]>=0)}const nO=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=or(t,e);switch(r){case"referenceHidden":{const o=await La(e,{...i,elementContext:"reference"}),s=j0(o,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:U0(s)}}}case"escaped":{const o=await La(e,{...i,altBoundary:!0}),s=j0(o,n.floating);return{data:{escapedOffsets:s,escaped:U0(s)}}}default:return{}}}}};async function rO(t,e){const{placement:n,platform:r,elements:i}=t,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=sr(n),a=us(n),l=ei(n)==="y",u=["left","top"].includes(s)?-1:1,d=o&&l?-1:1,p=or(e,t);let{mainAxis:f,crossAxis:g,alignmentAxis:E}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return a&&typeof E=="number"&&(g=a==="end"?E*-1:E),l?{x:g*d,y:f*u}:{x:f*u,y:g*d}}const iO=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:o,placement:s,middlewareData:a}=e,l=await rO(e,t);return s===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:o+l.y,data:{...l,placement:s}}}}},oO=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:A=>{let{x:_,y}=A;return{x:_,y}}},...l}=or(t,e),u={x:n,y:r},d=await La(e,l),p=ei(sr(i)),f=Gm(p);let g=u[f],E=u[p];if(o){const A=f==="y"?"top":"left",_=f==="y"?"bottom":"right",y=g+d[A],C=g-d[_];g=Wf(y,g,C)}if(s){const A=p==="y"?"top":"left",_=p==="y"?"bottom":"right",y=E+d[A],C=E-d[_];E=Wf(y,E,C)}const w=a.fn({...e,[f]:g,[p]:E});return{...w,data:{x:w.x-n,y:w.y-r,enabled:{[f]:o,[p]:s}}}}}},sO=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:o,middlewareData:s}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=or(t,e),d={x:n,y:r},p=ei(i),f=Gm(p);let g=d[f],E=d[p];const w=or(a,e),A=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(l){const C=f==="y"?"height":"width",b=o.reference[f]-o.floating[C]+A.mainAxis,F=o.reference[f]+o.reference[C]-A.mainAxis;g<b?g=b:g>F&&(g=F)}if(u){var _,y;const C=f==="y"?"width":"height",b=["top","left"].includes(sr(i)),F=o.reference[p]-o.floating[C]+(b&&((_=s.offset)==null?void 0:_[p])||0)+(b?0:A.crossAxis),O=o.reference[p]+o.reference[C]+(b?0:((y=s.offset)==null?void 0:y[p])||0)-(b?A.crossAxis:0);E<F?E=F:E>O&&(E=O)}return{[f]:g,[p]:E}}}},aO=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:o,platform:s,elements:a}=e,{apply:l=()=>{},...u}=or(t,e),d=await La(e,u),p=sr(i),f=us(i),g=ei(i)==="y",{width:E,height:w}=o.floating;let A,_;p==="top"||p==="bottom"?(A=p,_=f===(await(s.isRTL==null?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(_=p,A=f==="end"?"top":"bottom");const y=w-d.top-d.bottom,C=E-d.left-d.right,b=Zr(w-d[A],y),F=Zr(E-d[_],C),O=!e.middlewareData.shift;let S=b,T=F;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(T=C),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(S=y),O&&!f){const k=Dt(d.left,0),$=Dt(d.right,0),N=Dt(d.top,0),P=Dt(d.bottom,0);g?T=E-2*(k!==0||$!==0?k+$:Dt(d.left,d.right)):S=w-2*(N!==0||P!==0?N+P:Dt(d.top,d.bottom))}await l({...e,availableWidth:T,availableHeight:S});const R=await s.getDimensions(a.floating);return E!==R.width||w!==R.height?{reset:{rects:!0}}:{}}}};function Zu(){return typeof window<"u"}function ds(t){return oC(t)?(t.nodeName||"").toLowerCase():"#document"}function Ut(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function $n(t){var e;return(e=(oC(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function oC(t){return Zu()?t instanceof Node||t instanceof Ut(t).Node:!1}function fn(t){return Zu()?t instanceof Element||t instanceof Ut(t).Element:!1}function Pn(t){return Zu()?t instanceof HTMLElement||t instanceof Ut(t).HTMLElement:!1}function B0(t){return!Zu()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ut(t).ShadowRoot}function tl(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=pn(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function lO(t){return["table","td","th"].includes(ds(t))}function ed(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Ym(t){const e=Xm(),n=fn(t)?pn(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function cO(t){let e=ti(t);for(;Pn(e)&&!Xo(e);){if(Ym(e))return e;if(ed(e))return null;e=ti(e)}return null}function Xm(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Xo(t){return["html","body","#document"].includes(ds(t))}function pn(t){return Ut(t).getComputedStyle(t)}function td(t){return fn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ti(t){if(ds(t)==="html")return t;const e=t.assignedSlot||t.parentNode||B0(t)&&t.host||$n(t);return B0(e)?e.host:e}function sC(t){const e=ti(t);return Xo(e)?t.ownerDocument?t.ownerDocument.body:t.body:Pn(e)&&tl(e)?e:sC(e)}function Oa(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=sC(t),o=i===((r=t.ownerDocument)==null?void 0:r.body),s=Ut(i);if(o){const a=qf(s);return e.concat(s,s.visualViewport||[],tl(i)?i:[],a&&n?Oa(a):[])}return e.concat(i,Oa(i,[],n))}function qf(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function aC(t){const e=pn(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Pn(t),o=i?t.offsetWidth:n,s=i?t.offsetHeight:r,a=hu(n)!==o||hu(r)!==s;return a&&(n=o,r=s),{width:n,height:r,$:a}}function Jm(t){return fn(t)?t:t.contextElement}function Po(t){const e=Jm(t);if(!Pn(e))return In(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:o}=aC(e);let s=(o?hu(n.width):n.width)/r,a=(o?hu(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const uO=In(0);function lC(t){const e=Ut(t);return!Xm()||!e.visualViewport?uO:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function dO(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Ut(t)?!1:e}function Fi(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),o=Jm(t);let s=In(1);e&&(r?fn(r)&&(s=Po(r)):s=Po(t));const a=dO(o,n,r)?lC(o):In(0);let l=(i.left+a.x)/s.x,u=(i.top+a.y)/s.y,d=i.width/s.x,p=i.height/s.y;if(o){const f=Ut(o),g=r&&fn(r)?Ut(r):r;let E=f,w=qf(E);for(;w&&r&&g!==E;){const A=Po(w),_=w.getBoundingClientRect(),y=pn(w),C=_.left+(w.clientLeft+parseFloat(y.paddingLeft))*A.x,b=_.top+(w.clientTop+parseFloat(y.paddingTop))*A.y;l*=A.x,u*=A.y,d*=A.x,p*=A.y,l+=C,u+=b,E=Ut(w),w=qf(E)}}return pu({width:d,height:p,x:l,y:u})}function Zm(t,e){const n=td(t).scrollLeft;return e?e.left+n:Fi($n(t)).left+n}function cC(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:Zm(t,r)),o=r.top+e.scrollTop;return{x:i,y:o}}function hO(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const o=i==="fixed",s=$n(r),a=e?ed(e.floating):!1;if(r===s||a&&o)return n;let l={scrollLeft:0,scrollTop:0},u=In(1);const d=In(0),p=Pn(r);if((p||!p&&!o)&&((ds(r)!=="body"||tl(s))&&(l=td(r)),Pn(r))){const g=Fi(r);u=Po(r),d.x=g.x+r.clientLeft,d.y=g.y+r.clientTop}const f=s&&!p&&!o?cC(s,l,!0):In(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+d.x+f.x,y:n.y*u.y-l.scrollTop*u.y+d.y+f.y}}function fO(t){return Array.from(t.getClientRects())}function pO(t){const e=$n(t),n=td(t),r=t.ownerDocument.body,i=Dt(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=Dt(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+Zm(t);const a=-n.scrollTop;return pn(r).direction==="rtl"&&(s+=Dt(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}function mO(t,e){const n=Ut(t),r=$n(t),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;const u=Xm();(!u||u&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a,y:l}}function gO(t,e){const n=Fi(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,o=Pn(t)?Po(t):In(1),s=t.clientWidth*o.x,a=t.clientHeight*o.y,l=i*o.x,u=r*o.y;return{width:s,height:a,x:l,y:u}}function z0(t,e,n){let r;if(e==="viewport")r=mO(t,n);else if(e==="document")r=pO($n(t));else if(fn(e))r=gO(e,n);else{const i=lC(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return pu(r)}function uC(t,e){const n=ti(t);return n===e||!fn(n)||Xo(n)?!1:pn(n).position==="fixed"||uC(n,e)}function yO(t,e){const n=e.get(t);if(n)return n;let r=Oa(t,[],!1).filter(a=>fn(a)&&ds(a)!=="body"),i=null;const o=pn(t).position==="fixed";let s=o?ti(t):t;for(;fn(s)&&!Xo(s);){const a=pn(s),l=Ym(s);!l&&a.position==="fixed"&&(i=null),(o?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||tl(s)&&!l&&uC(t,s))?r=r.filter(d=>d!==s):i=a,s=ti(s)}return e.set(t,r),r}function vO(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const s=[...n==="clippingAncestors"?ed(e)?[]:yO(e,this._c):[].concat(n),r],a=s[0],l=s.reduce((u,d)=>{const p=z0(e,d,i);return u.top=Dt(p.top,u.top),u.right=Zr(p.right,u.right),u.bottom=Zr(p.bottom,u.bottom),u.left=Dt(p.left,u.left),u},z0(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function wO(t){const{width:e,height:n}=aC(t);return{width:e,height:n}}function _O(t,e,n){const r=Pn(e),i=$n(e),o=n==="fixed",s=Fi(t,!0,o,e);let a={scrollLeft:0,scrollTop:0};const l=In(0);if(r||!r&&!o)if((ds(e)!=="body"||tl(i))&&(a=td(e)),r){const f=Fi(e,!0,o,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else i&&(l.x=Zm(i));const u=i&&!r&&!o?cC(i,a):In(0),d=s.left+a.scrollLeft-l.x-u.x,p=s.top+a.scrollTop-l.y-u.y;return{x:d,y:p,width:s.width,height:s.height}}function mh(t){return pn(t).position==="static"}function W0(t,e){if(!Pn(t)||pn(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return $n(t)===n&&(n=n.ownerDocument.body),n}function dC(t,e){const n=Ut(t);if(ed(t))return n;if(!Pn(t)){let i=ti(t);for(;i&&!Xo(i);){if(fn(i)&&!mh(i))return i;i=ti(i)}return n}let r=W0(t,e);for(;r&&lO(r)&&mh(r);)r=W0(r,e);return r&&Xo(r)&&mh(r)&&!Ym(r)?n:r||cO(t)||n}const xO=async function(t){const e=this.getOffsetParent||dC,n=this.getDimensions,r=await n(t.floating);return{reference:_O(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function EO(t){return pn(t).direction==="rtl"}const TO={convertOffsetParentRelativeRectToViewportRelativeRect:hO,getDocumentElement:$n,getClippingRect:vO,getOffsetParent:dC,getElementRects:xO,getClientRects:fO,getDimensions:wO,getScale:Po,isElement:fn,isRTL:EO};function CO(t,e){let n=null,r;const i=$n(t);function o(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function s(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();const{left:u,top:d,width:p,height:f}=t.getBoundingClientRect();if(a||e(),!p||!f)return;const g=Hl(d),E=Hl(i.clientWidth-(u+p)),w=Hl(i.clientHeight-(d+f)),A=Hl(u),y={rootMargin:-g+"px "+-E+"px "+-w+"px "+-A+"px",threshold:Dt(0,Zr(1,l))||1};let C=!0;function b(F){const O=F[0].intersectionRatio;if(O!==l){if(!C)return s();O?s(!1,O):r=setTimeout(()=>{s(!1,1e-7)},1e3)}C=!1}try{n=new IntersectionObserver(b,{...y,root:i.ownerDocument})}catch{n=new IntersectionObserver(b,y)}n.observe(t)}return s(!0),o}function SO(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=Jm(t),d=i||o?[...u?Oa(u):[],...Oa(e)]:[];d.forEach(_=>{i&&_.addEventListener("scroll",n,{passive:!0}),o&&_.addEventListener("resize",n)});const p=u&&a?CO(u,n):null;let f=-1,g=null;s&&(g=new ResizeObserver(_=>{let[y]=_;y&&y.target===u&&g&&(g.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var C;(C=g)==null||C.observe(e)})),n()}),u&&!l&&g.observe(u),g.observe(e));let E,w=l?Fi(t):null;l&&A();function A(){const _=Fi(t);w&&(_.x!==w.x||_.y!==w.y||_.width!==w.width||_.height!==w.height)&&n(),w=_,E=requestAnimationFrame(A)}return n(),()=>{var _;d.forEach(y=>{i&&y.removeEventListener("scroll",n),o&&y.removeEventListener("resize",n)}),p==null||p(),(_=g)==null||_.disconnect(),g=null,l&&cancelAnimationFrame(E)}}const IO=iO,AO=oO,RO=tO,kO=aO,PO=nO,H0=eO,bO=sO,$O=(t,e,n)=>{const r=new Map,i={platform:TO,...n},o={...i.platform,_c:r};return ZL(t,e,{...i,platform:o})};var xc=typeof document<"u"?x.useLayoutEffect:x.useEffect;function mu(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!mu(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&t.$$typeof)&&!mu(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function hC(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function q0(t,e){const n=hC(t);return Math.round(e*n)/n}function gh(t){const e=x.useRef(t);return xc(()=>{e.current=t}),e}function NO(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:s}={},transform:a=!0,whileElementsMounted:l,open:u}=t,[d,p]=x.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,g]=x.useState(r);mu(f,r)||g(r);const[E,w]=x.useState(null),[A,_]=x.useState(null),y=x.useCallback(M=>{M!==O.current&&(O.current=M,w(M))},[]),C=x.useCallback(M=>{M!==S.current&&(S.current=M,_(M))},[]),b=o||E,F=s||A,O=x.useRef(null),S=x.useRef(null),T=x.useRef(d),R=l!=null,k=gh(l),$=gh(i),N=gh(u),P=x.useCallback(()=>{if(!O.current||!S.current)return;const M={placement:e,strategy:n,middleware:f};$.current&&(M.platform=$.current),$O(O.current,S.current,M).then(z=>{const Q={...z,isPositioned:N.current!==!1};W.current&&!mu(T.current,Q)&&(T.current=Q,ts.flushSync(()=>{p(Q)}))})},[f,e,n,$,N]);xc(()=>{u===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,p(M=>({...M,isPositioned:!1})))},[u]);const W=x.useRef(!1);xc(()=>(W.current=!0,()=>{W.current=!1}),[]),xc(()=>{if(b&&(O.current=b),F&&(S.current=F),b&&F){if(k.current)return k.current(b,F,P);P()}},[b,F,P,k,R]);const ie=x.useMemo(()=>({reference:O,floating:S,setReference:y,setFloating:C}),[y,C]),K=x.useMemo(()=>({reference:b,floating:F}),[b,F]),Y=x.useMemo(()=>{const M={position:n,left:0,top:0};if(!K.floating)return M;const z=q0(K.floating,d.x),Q=q0(K.floating,d.y);return a?{...M,transform:"translate("+z+"px, "+Q+"px)",...hC(K.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:z,top:Q}},[n,a,K.floating,d.x,d.y]);return x.useMemo(()=>({...d,update:P,refs:ie,elements:K,floatingStyles:Y}),[d,P,ie,K,Y])}const FO=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?H0({element:r.current,padding:i}).fn(n):{}:r?H0({element:r,padding:i}).fn(n):{}}}},LO=(t,e)=>({...IO(t),options:[t,e]}),OO=(t,e)=>({...AO(t),options:[t,e]}),DO=(t,e)=>({...bO(t),options:[t,e]}),MO=(t,e)=>({...RO(t),options:[t,e]}),VO=(t,e)=>({...kO(t),options:[t,e]}),jO=(t,e)=>({...PO(t),options:[t,e]}),UO=(t,e)=>({...FO(t),options:[t,e]});var BO="Arrow",fC=x.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...o}=t;return v.jsx(Ve.svg,{...o,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:v.jsx("polygon",{points:"0,0 30,0 15,10"})})});fC.displayName=BO;var zO=fC;function WO(t){const[e,n]=x.useState(void 0);return Wt(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let s,a;if("borderBoxSize"in o){const l=o.borderBoxSize,u=Array.isArray(l)?l[0]:l;s=u.inlineSize,a=u.blockSize}else s=t.offsetWidth,a=t.offsetHeight;n({width:s,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var eg="Popper",[pC,mC]=Hm(eg),[HO,gC]=pC(eg),yC=t=>{const{__scopePopper:e,children:n}=t,[r,i]=x.useState(null);return v.jsx(HO,{scope:e,anchor:r,onAnchorChange:i,children:n})};yC.displayName=eg;var vC="PopperAnchor",wC=x.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,o=gC(vC,n),s=x.useRef(null),a=ct(e,s);return x.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||s.current)}),r?null:v.jsx(Ve.div,{...i,ref:a})});wC.displayName=vC;var tg="PopperContent",[qO,GO]=pC(tg),_C=x.forwardRef((t,e)=>{var X,xe,Ye,ye,fe,me;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:o="center",alignOffset:s=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:p="partial",hideWhenDetached:f=!1,updatePositionStrategy:g="optimized",onPlaced:E,...w}=t,A=gC(tg,n),[_,y]=x.useState(null),C=ct(e,tt=>y(tt)),[b,F]=x.useState(null),O=WO(b),S=(O==null?void 0:O.width)??0,T=(O==null?void 0:O.height)??0,R=r+(o!=="center"?"-"+o:""),k=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},$=Array.isArray(u)?u:[u],N=$.length>0,P={padding:k,boundary:$.filter(QO),altBoundary:N},{refs:W,floatingStyles:ie,placement:K,isPositioned:Y,middlewareData:M}=NO({strategy:"fixed",placement:R,whileElementsMounted:(...tt)=>SO(...tt,{animationFrame:g==="always"}),elements:{reference:A.anchor},middleware:[LO({mainAxis:i+T,alignmentAxis:s}),l&&OO({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?DO():void 0,...P}),l&&MO({...P}),VO({...P,apply:({elements:tt,rects:Rt,availableWidth:Nn,availableHeight:hr})=>{const{width:li,height:sd}=Rt.reference,ci=tt.floating.style;ci.setProperty("--radix-popper-available-width",`${Nn}px`),ci.setProperty("--radix-popper-available-height",`${hr}px`),ci.setProperty("--radix-popper-anchor-width",`${li}px`),ci.setProperty("--radix-popper-anchor-height",`${sd}px`)}}),b&&UO({element:b,padding:a}),YO({arrowWidth:S,arrowHeight:T}),f&&jO({strategy:"referenceHidden",...P})]}),[z,Q]=TC(K),ee=ir(E);Wt(()=>{Y&&(ee==null||ee())},[Y,ee]);const ue=(X=M.arrow)==null?void 0:X.x,we=(xe=M.arrow)==null?void 0:xe.y,Qe=((Ye=M.arrow)==null?void 0:Ye.centerOffset)!==0,[ut,et]=x.useState();return Wt(()=>{_&&et(window.getComputedStyle(_).zIndex)},[_]),v.jsx("div",{ref:W.setFloating,"data-radix-popper-content-wrapper":"",style:{...ie,transform:Y?ie.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ut,"--radix-popper-transform-origin":[(ye=M.transformOrigin)==null?void 0:ye.x,(fe=M.transformOrigin)==null?void 0:fe.y].join(" "),...((me=M.hide)==null?void 0:me.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:v.jsx(qO,{scope:n,placedSide:z,onArrowChange:F,arrowX:ue,arrowY:we,shouldHideArrow:Qe,children:v.jsx(Ve.div,{"data-side":z,"data-align":Q,...w,ref:C,style:{...w.style,animation:Y?void 0:"none"}})})})});_C.displayName=tg;var xC="PopperArrow",KO={top:"bottom",right:"left",bottom:"top",left:"right"},EC=x.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,o=GO(xC,r),s=KO[o.placedSide];return v.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:v.jsx(zO,{...i,ref:n,style:{...i.style,display:"block"}})})});EC.displayName=xC;function QO(t){return t!==null}var YO=t=>({name:"transformOrigin",options:t,fn(e){var A,_,y;const{placement:n,rects:r,middlewareData:i}=e,s=((A=i.arrow)==null?void 0:A.centerOffset)!==0,a=s?0:t.arrowWidth,l=s?0:t.arrowHeight,[u,d]=TC(n),p={start:"0%",center:"50%",end:"100%"}[d],f=(((_=i.arrow)==null?void 0:_.x)??0)+a/2,g=(((y=i.arrow)==null?void 0:y.y)??0)+l/2;let E="",w="";return u==="bottom"?(E=s?p:`${f}px`,w=`${-l}px`):u==="top"?(E=s?p:`${f}px`,w=`${r.floating.height+l}px`):u==="right"?(E=`${-l}px`,w=s?p:`${g}px`):u==="left"&&(E=`${r.floating.width+l}px`,w=s?p:`${g}px`),{data:{x:E,y:w}}}});function TC(t){const[e,n="center"]=t.split("-");return[e,n]}var XO=yC,JO=wC,ZO=_C,eD=EC,tD="Portal",CC=x.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,o]=x.useState(!1);Wt(()=>o(!0),[]);const s=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return s?MA.createPortal(v.jsx(Ve.div,{...r,ref:e}),s):null});CC.displayName=tD;function G0({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=nD({defaultProp:e,onChange:n}),o=t!==void 0,s=o?t:r,a=ir(n),l=x.useCallback(u=>{if(o){const p=typeof u=="function"?u(t):u;p!==t&&a(p)}else i(u)},[o,t,i,a]);return[s,l]}function nD({defaultProp:t,onChange:e}){const n=x.useState(t),[r]=n,i=x.useRef(r),o=ir(e);return x.useEffect(()=>{i.current!==r&&(o(r),i.current=r)},[r,i,o]),n}function rD(t){const e=x.useRef({value:t,previous:t});return x.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var iD="VisuallyHidden",SC=x.forwardRef((t,e)=>v.jsx(Ve.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));SC.displayName=iD;var oD=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Ji=new WeakMap,ql=new WeakMap,Gl={},yh=0,IC=function(t){return t&&(t.host||IC(t.parentNode))},sD=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=IC(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},aD=function(t,e,n,r){var i=sD(e,Array.isArray(t)?t:[t]);Gl[n]||(Gl[n]=new WeakMap);var o=Gl[n],s=[],a=new Set,l=new Set(i),u=function(p){!p||a.has(p)||(a.add(p),u(p.parentNode))};i.forEach(u);var d=function(p){!p||l.has(p)||Array.prototype.forEach.call(p.children,function(f){if(a.has(f))d(f);else try{var g=f.getAttribute(r),E=g!==null&&g!=="false",w=(Ji.get(f)||0)+1,A=(o.get(f)||0)+1;Ji.set(f,w),o.set(f,A),s.push(f),w===1&&E&&ql.set(f,!0),A===1&&f.setAttribute(n,"true"),E||f.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",f,_)}})};return d(e),a.clear(),yh++,function(){s.forEach(function(p){var f=Ji.get(p)-1,g=o.get(p)-1;Ji.set(p,f),o.set(p,g),f||(ql.has(p)||p.removeAttribute(r),ql.delete(p)),g||p.removeAttribute(n)}),yh--,yh||(Ji=new WeakMap,Ji=new WeakMap,ql=new WeakMap,Gl={})}},lD=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=oD(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),aD(r,i,n,"aria-hidden")):function(){return null}},Ec="right-scroll-bar-position",Tc="width-before-scroll-bar",cD="with-scroll-bars-hidden",uD="--removed-body-scroll-bar-size";function vh(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function dD(t,e){var n=x.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var hD=typeof window<"u"?x.useLayoutEffect:x.useEffect,K0=new WeakMap;function fD(t,e){var n=dD(null,function(r){return t.forEach(function(i){return vh(i,r)})});return hD(function(){var r=K0.get(n);if(r){var i=new Set(r),o=new Set(t),s=n.current;i.forEach(function(a){o.has(a)||vh(a,null)}),o.forEach(function(a){i.has(a)||vh(a,s)})}K0.set(n,t)},[t]),n}function pD(t){return t}function mD(t,e){e===void 0&&(e=pD);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(o){var s=e(o,r);return n.push(s),function(){n=n.filter(function(a){return a!==s})}},assignSyncMedium:function(o){for(r=!0;n.length;){var s=n;n=[],s.forEach(o)}n={push:function(a){return o(a)},filter:function(){return n}}},assignMedium:function(o){r=!0;var s=[];if(n.length){var a=n;n=[],a.forEach(o),s=n}var l=function(){var d=s;s=[],d.forEach(o)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(d){s.push(d),u()},filter:function(d){return s=s.filter(d),n}}}};return i}function gD(t){t===void 0&&(t={});var e=mD(null);return e.options=wn({async:!0,ssr:!1},t),e}var AC=function(t){var e=t.sideCar,n=Ga(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return x.createElement(r,wn({},n))};AC.isSideCarExport=!0;function yD(t,e){return t.useMedium(e),AC}var RC=gD(),wh=function(){},nd=x.forwardRef(function(t,e){var n=x.useRef(null),r=x.useState({onScrollCapture:wh,onWheelCapture:wh,onTouchMoveCapture:wh}),i=r[0],o=r[1],s=t.forwardProps,a=t.children,l=t.className,u=t.removeScrollBar,d=t.enabled,p=t.shards,f=t.sideCar,g=t.noIsolation,E=t.inert,w=t.allowPinchZoom,A=t.as,_=A===void 0?"div":A,y=t.gapMode,C=Ga(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),b=f,F=fD([n,e]),O=wn(wn({},C),i);return x.createElement(x.Fragment,null,d&&x.createElement(b,{sideCar:RC,removeScrollBar:u,shards:p,noIsolation:g,inert:E,setCallbacks:o,allowPinchZoom:!!w,lockRef:n,gapMode:y}),s?x.cloneElement(x.Children.only(a),wn(wn({},O),{ref:F})):x.createElement(_,wn({},O,{className:l,ref:F}),a))});nd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};nd.classNames={fullWidth:Tc,zeroRight:Ec};var vD=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function wD(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=vD();return e&&t.setAttribute("nonce",e),t}function _D(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function xD(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var ED=function(){var t=0,e=null;return{add:function(n){t==0&&(e=wD())&&(_D(e,n),xD(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},TD=function(){var t=ED();return function(e,n){x.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},kC=function(){var t=TD(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},CD={left:0,top:0,right:0,gap:0},_h=function(t){return parseInt(t||"",10)||0},SD=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[_h(n),_h(r),_h(i)]},ID=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return CD;var e=SD(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},AD=kC(),bo="data-scroll-locked",RD=function(t,e,n,r){var i=t.left,o=t.top,s=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(cD,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(bo,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ec,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Tc,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Ec," .").concat(Ec,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Tc," .").concat(Tc,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(bo,`] {
    `).concat(uD,": ").concat(a,`px;
  }
`)},Q0=function(){var t=parseInt(document.body.getAttribute(bo)||"0",10);return isFinite(t)?t:0},kD=function(){x.useEffect(function(){return document.body.setAttribute(bo,(Q0()+1).toString()),function(){var t=Q0()-1;t<=0?document.body.removeAttribute(bo):document.body.setAttribute(bo,t.toString())}},[])},PD=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;kD();var o=x.useMemo(function(){return ID(i)},[i]);return x.createElement(AD,{styles:RD(o,!e,i,n?"":"!important")})},Gf=!1;if(typeof window<"u")try{var Kl=Object.defineProperty({},"passive",{get:function(){return Gf=!0,!0}});window.addEventListener("test",Kl,Kl),window.removeEventListener("test",Kl,Kl)}catch{Gf=!1}var Zi=Gf?{passive:!1}:!1,bD=function(t){return t.tagName==="TEXTAREA"},PC=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!bD(t)&&n[e]==="visible")},$D=function(t){return PC(t,"overflowY")},ND=function(t){return PC(t,"overflowX")},Y0=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=bC(t,r);if(i){var o=$C(t,r),s=o[1],a=o[2];if(s>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},FD=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},LD=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},bC=function(t,e){return t==="v"?$D(e):ND(e)},$C=function(t,e){return t==="v"?FD(e):LD(e)},OD=function(t,e){return t==="h"&&e==="rtl"?-1:1},DD=function(t,e,n,r,i){var o=OD(t,window.getComputedStyle(e).direction),s=o*r,a=n.target,l=e.contains(a),u=!1,d=s>0,p=0,f=0;do{var g=$C(t,a),E=g[0],w=g[1],A=g[2],_=w-A-o*E;(E||_)&&bC(t,a)&&(p+=_,f+=E),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&(Math.abs(p)<1||!i)||!d&&(Math.abs(f)<1||!i))&&(u=!0),u},Ql=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},X0=function(t){return[t.deltaX,t.deltaY]},J0=function(t){return t&&"current"in t?t.current:t},MD=function(t,e){return t[0]===e[0]&&t[1]===e[1]},VD=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},jD=0,eo=[];function UD(t){var e=x.useRef([]),n=x.useRef([0,0]),r=x.useRef(),i=x.useState(jD++)[0],o=x.useState(kC)[0],s=x.useRef(t);x.useEffect(function(){s.current=t},[t]),x.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var w=JP([t.lockRef.current],(t.shards||[]).map(J0),!0).filter(Boolean);return w.forEach(function(A){return A.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),w.forEach(function(A){return A.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=x.useCallback(function(w,A){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!s.current.allowPinchZoom;var _=Ql(w),y=n.current,C="deltaX"in w?w.deltaX:y[0]-_[0],b="deltaY"in w?w.deltaY:y[1]-_[1],F,O=w.target,S=Math.abs(C)>Math.abs(b)?"h":"v";if("touches"in w&&S==="h"&&O.type==="range")return!1;var T=Y0(S,O);if(!T)return!0;if(T?F=S:(F=S==="v"?"h":"v",T=Y0(S,O)),!T)return!1;if(!r.current&&"changedTouches"in w&&(C||b)&&(r.current=F),!F)return!0;var R=r.current||F;return DD(R,A,w,R==="h"?C:b,!0)},[]),l=x.useCallback(function(w){var A=w;if(!(!eo.length||eo[eo.length-1]!==o)){var _="deltaY"in A?X0(A):Ql(A),y=e.current.filter(function(F){return F.name===A.type&&(F.target===A.target||A.target===F.shadowParent)&&MD(F.delta,_)})[0];if(y&&y.should){A.cancelable&&A.preventDefault();return}if(!y){var C=(s.current.shards||[]).map(J0).filter(Boolean).filter(function(F){return F.contains(A.target)}),b=C.length>0?a(A,C[0]):!s.current.noIsolation;b&&A.cancelable&&A.preventDefault()}}},[]),u=x.useCallback(function(w,A,_,y){var C={name:w,delta:A,target:_,should:y,shadowParent:BD(_)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(b){return b!==C})},1)},[]),d=x.useCallback(function(w){n.current=Ql(w),r.current=void 0},[]),p=x.useCallback(function(w){u(w.type,X0(w),w.target,a(w,t.lockRef.current))},[]),f=x.useCallback(function(w){u(w.type,Ql(w),w.target,a(w,t.lockRef.current))},[]);x.useEffect(function(){return eo.push(o),t.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Zi),document.addEventListener("touchmove",l,Zi),document.addEventListener("touchstart",d,Zi),function(){eo=eo.filter(function(w){return w!==o}),document.removeEventListener("wheel",l,Zi),document.removeEventListener("touchmove",l,Zi),document.removeEventListener("touchstart",d,Zi)}},[]);var g=t.removeScrollBar,E=t.inert;return x.createElement(x.Fragment,null,E?x.createElement(o,{styles:VD(i)}):null,g?x.createElement(PD,{gapMode:t.gapMode}):null)}function BD(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const zD=yD(RC,UD);var NC=x.forwardRef(function(t,e){return x.createElement(nd,wn({},t,{ref:e,sideCar:zD}))});NC.classNames=nd.classNames;var WD=[" ","Enter","ArrowUp","ArrowDown"],HD=[" ","Enter"],nl="Select",[rd,id,qD]=EL(nl),[hs,tj]=Hm(nl,[qD,mC]),od=mC(),[GD,oi]=hs(nl),[KD,QD]=hs(nl),FC=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:o,value:s,defaultValue:a,onValueChange:l,dir:u,name:d,autoComplete:p,disabled:f,required:g,form:E}=t,w=od(e),[A,_]=x.useState(null),[y,C]=x.useState(null),[b,F]=x.useState(!1),O=CL(u),[S=!1,T]=G0({prop:r,defaultProp:i,onChange:o}),[R,k]=G0({prop:s,defaultProp:a,onChange:l}),$=x.useRef(null),N=A?E||!!A.closest("form"):!0,[P,W]=x.useState(new Set),ie=Array.from(P).map(K=>K.props.value).join(";");return v.jsx(XO,{...w,children:v.jsxs(GD,{required:g,scope:e,trigger:A,onTriggerChange:_,valueNode:y,onValueNodeChange:C,valueNodeHasChildren:b,onValueNodeHasChildrenChange:F,contentId:qm(),value:R,onValueChange:k,open:S,onOpenChange:T,dir:O,triggerPointerDownPosRef:$,disabled:f,children:[v.jsx(rd.Provider,{scope:e,children:v.jsx(KD,{scope:t.__scopeSelect,onNativeOptionAdd:x.useCallback(K=>{W(Y=>new Set(Y).add(K))},[]),onNativeOptionRemove:x.useCallback(K=>{W(Y=>{const M=new Set(Y);return M.delete(K),M})},[]),children:n})}),N?v.jsxs(oS,{"aria-hidden":!0,required:g,tabIndex:-1,name:d,autoComplete:p,value:R,onChange:K=>k(K.target.value),disabled:f,form:E,children:[R===void 0?v.jsx("option",{value:""}):null,Array.from(P)]},ie):null]})})};FC.displayName=nl;var LC="SelectTrigger",OC=x.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,o=od(n),s=oi(LC,n),a=s.disabled||r,l=ct(e,s.onTriggerChange),u=id(n),d=x.useRef("touch"),[p,f,g]=sS(w=>{const A=u().filter(C=>!C.disabled),_=A.find(C=>C.value===s.value),y=aS(A,w,_);y!==void 0&&s.onValueChange(y.value)}),E=w=>{a||(s.onOpenChange(!0),g()),w&&(s.triggerPointerDownPosRef.current={x:Math.round(w.pageX),y:Math.round(w.pageY)})};return v.jsx(JO,{asChild:!0,...o,children:v.jsx(Ve.button,{type:"button",role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":iS(s.value)?"":void 0,...i,ref:l,onClick:Ue(i.onClick,w=>{w.currentTarget.focus(),d.current!=="mouse"&&E(w)}),onPointerDown:Ue(i.onPointerDown,w=>{d.current=w.pointerType;const A=w.target;A.hasPointerCapture(w.pointerId)&&A.releasePointerCapture(w.pointerId),w.button===0&&w.ctrlKey===!1&&w.pointerType==="mouse"&&(E(w),w.preventDefault())}),onKeyDown:Ue(i.onKeyDown,w=>{const A=p.current!=="";!(w.ctrlKey||w.altKey||w.metaKey)&&w.key.length===1&&f(w.key),!(A&&w.key===" ")&&WD.includes(w.key)&&(E(),w.preventDefault())})})})});OC.displayName=LC;var DC="SelectValue",MC=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:o,placeholder:s="",...a}=t,l=oi(DC,n),{onValueNodeHasChildrenChange:u}=l,d=o!==void 0,p=ct(e,l.onValueNodeChange);return Wt(()=>{u(d)},[u,d]),v.jsx(Ve.span,{...a,ref:p,style:{pointerEvents:"none"},children:iS(l.value)?v.jsx(v.Fragment,{children:s}):o})});MC.displayName=DC;var YD="SelectIcon",VC=x.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return v.jsx(Ve.span,{"aria-hidden":!0,...i,ref:e,children:r||""})});VC.displayName=YD;var XD="SelectPortal",jC=t=>v.jsx(CC,{asChild:!0,...t});jC.displayName=XD;var Li="SelectContent",UC=x.forwardRef((t,e)=>{const n=oi(Li,t.__scopeSelect),[r,i]=x.useState();if(Wt(()=>{i(new DocumentFragment)},[]),!n.open){const o=r;return o?ts.createPortal(v.jsx(BC,{scope:t.__scopeSelect,children:v.jsx(rd.Slot,{scope:t.__scopeSelect,children:v.jsx("div",{children:t.children})})}),o):null}return v.jsx(zC,{...t,ref:e})});UC.displayName=Li;var nn=10,[BC,si]=hs(Li),JD="SelectContentImpl",zC=x.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:o,onPointerDownOutside:s,side:a,sideOffset:l,align:u,alignOffset:d,arrowPadding:p,collisionBoundary:f,collisionPadding:g,sticky:E,hideWhenDetached:w,avoidCollisions:A,..._}=t,y=oi(Li,n),[C,b]=x.useState(null),[F,O]=x.useState(null),S=ct(e,X=>b(X)),[T,R]=x.useState(null),[k,$]=x.useState(null),N=id(n),[P,W]=x.useState(!1),ie=x.useRef(!1);x.useEffect(()=>{if(C)return lD(C)},[C]),LL();const K=x.useCallback(X=>{const[xe,...Ye]=N().map(me=>me.ref.current),[ye]=Ye.slice(-1),fe=document.activeElement;for(const me of X)if(me===fe||(me==null||me.scrollIntoView({block:"nearest"}),me===xe&&F&&(F.scrollTop=0),me===ye&&F&&(F.scrollTop=F.scrollHeight),me==null||me.focus(),document.activeElement!==fe))return},[N,F]),Y=x.useCallback(()=>K([T,C]),[K,T,C]);x.useEffect(()=>{P&&Y()},[P,Y]);const{onOpenChange:M,triggerPointerDownPosRef:z}=y;x.useEffect(()=>{if(C){let X={x:0,y:0};const xe=ye=>{var fe,me;X={x:Math.abs(Math.round(ye.pageX)-(((fe=z.current)==null?void 0:fe.x)??0)),y:Math.abs(Math.round(ye.pageY)-(((me=z.current)==null?void 0:me.y)??0))}},Ye=ye=>{X.x<=10&&X.y<=10?ye.preventDefault():C.contains(ye.target)||M(!1),document.removeEventListener("pointermove",xe),z.current=null};return z.current!==null&&(document.addEventListener("pointermove",xe),document.addEventListener("pointerup",Ye,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",xe),document.removeEventListener("pointerup",Ye,{capture:!0})}}},[C,M,z]),x.useEffect(()=>{const X=()=>M(!1);return window.addEventListener("blur",X),window.addEventListener("resize",X),()=>{window.removeEventListener("blur",X),window.removeEventListener("resize",X)}},[M]);const[Q,ee]=sS(X=>{const xe=N().filter(fe=>!fe.disabled),Ye=xe.find(fe=>fe.ref.current===document.activeElement),ye=aS(xe,X,Ye);ye&&setTimeout(()=>ye.ref.current.focus())}),ue=x.useCallback((X,xe,Ye)=>{const ye=!ie.current&&!Ye;(y.value!==void 0&&y.value===xe||ye)&&(R(X),ye&&(ie.current=!0))},[y.value]),we=x.useCallback(()=>C==null?void 0:C.focus(),[C]),Qe=x.useCallback((X,xe,Ye)=>{const ye=!ie.current&&!Ye;(y.value!==void 0&&y.value===xe||ye)&&$(X)},[y.value]),ut=r==="popper"?Kf:WC,et=ut===Kf?{side:a,sideOffset:l,align:u,alignOffset:d,arrowPadding:p,collisionBoundary:f,collisionPadding:g,sticky:E,hideWhenDetached:w,avoidCollisions:A}:{};return v.jsx(BC,{scope:n,content:C,viewport:F,onViewportChange:O,itemRefCallback:ue,selectedItem:T,onItemLeave:we,itemTextRefCallback:Qe,focusSelectedItem:Y,selectedItemText:k,position:r,isPositioned:P,searchRef:Q,children:v.jsx(NC,{as:Yo,allowPinchZoom:!0,children:v.jsx(nC,{asChild:!0,trapped:y.open,onMountAutoFocus:X=>{X.preventDefault()},onUnmountAutoFocus:Ue(i,X=>{var xe;(xe=y.trigger)==null||xe.focus({preventScroll:!0}),X.preventDefault()}),children:v.jsx(eC,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:s,onFocusOutside:X=>X.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:v.jsx(ut,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:X=>X.preventDefault(),..._,...et,onPlaced:()=>W(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:Ue(_.onKeyDown,X=>{const xe=X.ctrlKey||X.altKey||X.metaKey;if(X.key==="Tab"&&X.preventDefault(),!xe&&X.key.length===1&&ee(X.key),["ArrowUp","ArrowDown","Home","End"].includes(X.key)){let ye=N().filter(fe=>!fe.disabled).map(fe=>fe.ref.current);if(["ArrowUp","End"].includes(X.key)&&(ye=ye.slice().reverse()),["ArrowUp","ArrowDown"].includes(X.key)){const fe=X.target,me=ye.indexOf(fe);ye=ye.slice(me+1)}setTimeout(()=>K(ye)),X.preventDefault()}})})})})})})});zC.displayName=JD;var ZD="SelectItemAlignedPosition",WC=x.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,o=oi(Li,n),s=si(Li,n),[a,l]=x.useState(null),[u,d]=x.useState(null),p=ct(e,S=>d(S)),f=id(n),g=x.useRef(!1),E=x.useRef(!0),{viewport:w,selectedItem:A,selectedItemText:_,focusSelectedItem:y}=s,C=x.useCallback(()=>{if(o.trigger&&o.valueNode&&a&&u&&w&&A&&_){const S=o.trigger.getBoundingClientRect(),T=u.getBoundingClientRect(),R=o.valueNode.getBoundingClientRect(),k=_.getBoundingClientRect();if(o.dir!=="rtl"){const fe=k.left-T.left,me=R.left-fe,tt=S.left-me,Rt=S.width+tt,Nn=Math.max(Rt,T.width),hr=window.innerWidth-nn,li=P0(me,[nn,Math.max(nn,hr-Nn)]);a.style.minWidth=Rt+"px",a.style.left=li+"px"}else{const fe=T.right-k.right,me=window.innerWidth-R.right-fe,tt=window.innerWidth-S.right-me,Rt=S.width+tt,Nn=Math.max(Rt,T.width),hr=window.innerWidth-nn,li=P0(me,[nn,Math.max(nn,hr-Nn)]);a.style.minWidth=Rt+"px",a.style.right=li+"px"}const $=f(),N=window.innerHeight-nn*2,P=w.scrollHeight,W=window.getComputedStyle(u),ie=parseInt(W.borderTopWidth,10),K=parseInt(W.paddingTop,10),Y=parseInt(W.borderBottomWidth,10),M=parseInt(W.paddingBottom,10),z=ie+K+P+M+Y,Q=Math.min(A.offsetHeight*5,z),ee=window.getComputedStyle(w),ue=parseInt(ee.paddingTop,10),we=parseInt(ee.paddingBottom,10),Qe=S.top+S.height/2-nn,ut=N-Qe,et=A.offsetHeight/2,X=A.offsetTop+et,xe=ie+K+X,Ye=z-xe;if(xe<=Qe){const fe=$.length>0&&A===$[$.length-1].ref.current;a.style.bottom="0px";const me=u.clientHeight-w.offsetTop-w.offsetHeight,tt=Math.max(ut,et+(fe?we:0)+me+Y),Rt=xe+tt;a.style.height=Rt+"px"}else{const fe=$.length>0&&A===$[0].ref.current;a.style.top="0px";const tt=Math.max(Qe,ie+w.offsetTop+(fe?ue:0)+et)+Ye;a.style.height=tt+"px",w.scrollTop=xe-Qe+w.offsetTop}a.style.margin=`${nn}px 0`,a.style.minHeight=Q+"px",a.style.maxHeight=N+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[f,o.trigger,o.valueNode,a,u,w,A,_,o.dir,r]);Wt(()=>C(),[C]);const[b,F]=x.useState();Wt(()=>{u&&F(window.getComputedStyle(u).zIndex)},[u]);const O=x.useCallback(S=>{S&&E.current===!0&&(C(),y==null||y(),E.current=!1)},[C,y]);return v.jsx(tM,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:g,onScrollButtonChange:O,children:v.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:b},children:v.jsx(Ve.div,{...i,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});WC.displayName=ZD;var eM="SelectPopperPosition",Kf=x.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=nn,...o}=t,s=od(n);return v.jsx(ZO,{...s,...o,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Kf.displayName=eM;var[tM,ng]=hs(Li,{}),Qf="SelectViewport",HC=x.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,o=si(Qf,n),s=ng(Qf,n),a=ct(e,o.onViewportChange),l=x.useRef(0);return v.jsxs(v.Fragment,{children:[v.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),v.jsx(rd.Slot,{scope:n,children:v.jsx(Ve.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Ue(i.onScroll,u=>{const d=u.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:f}=s;if(f!=null&&f.current&&p){const g=Math.abs(l.current-d.scrollTop);if(g>0){const E=window.innerHeight-nn*2,w=parseFloat(p.style.minHeight),A=parseFloat(p.style.height),_=Math.max(w,A);if(_<E){const y=_+g,C=Math.min(E,y),b=y-C;p.style.height=C+"px",p.style.bottom==="0px"&&(d.scrollTop=b>0?b:0,p.style.justifyContent="flex-end")}}}l.current=d.scrollTop})})})]})});HC.displayName=Qf;var qC="SelectGroup",[nM,rM]=hs(qC),iM=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=qm();return v.jsx(nM,{scope:n,id:i,children:v.jsx(Ve.div,{role:"group","aria-labelledby":i,...r,ref:e})})});iM.displayName=qC;var GC="SelectLabel",KC=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=rM(GC,n);return v.jsx(Ve.div,{id:i.id,...r,ref:e})});KC.displayName=GC;var gu="SelectItem",[oM,QC]=hs(gu),YC=x.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:o,...s}=t,a=oi(gu,n),l=si(gu,n),u=a.value===r,[d,p]=x.useState(o??""),[f,g]=x.useState(!1),E=ct(e,y=>{var C;return(C=l.itemRefCallback)==null?void 0:C.call(l,y,r,i)}),w=qm(),A=x.useRef("touch"),_=()=>{i||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return v.jsx(oM,{scope:n,value:r,disabled:i,textId:w,isSelected:u,onItemTextChange:x.useCallback(y=>{p(C=>C||((y==null?void 0:y.textContent)??"").trim())},[]),children:v.jsx(rd.ItemSlot,{scope:n,value:r,disabled:i,textValue:d,children:v.jsx(Ve.div,{role:"option","aria-labelledby":w,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...s,ref:E,onFocus:Ue(s.onFocus,()=>g(!0)),onBlur:Ue(s.onBlur,()=>g(!1)),onClick:Ue(s.onClick,()=>{A.current!=="mouse"&&_()}),onPointerUp:Ue(s.onPointerUp,()=>{A.current==="mouse"&&_()}),onPointerDown:Ue(s.onPointerDown,y=>{A.current=y.pointerType}),onPointerMove:Ue(s.onPointerMove,y=>{var C;A.current=y.pointerType,i?(C=l.onItemLeave)==null||C.call(l):A.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ue(s.onPointerLeave,y=>{var C;y.currentTarget===document.activeElement&&((C=l.onItemLeave)==null||C.call(l))}),onKeyDown:Ue(s.onKeyDown,y=>{var b;((b=l.searchRef)==null?void 0:b.current)!==""&&y.key===" "||(HD.includes(y.key)&&_(),y.key===" "&&y.preventDefault())})})})})});YC.displayName=gu;var Gs="SelectItemText",XC=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...o}=t,s=oi(Gs,n),a=si(Gs,n),l=QC(Gs,n),u=QD(Gs,n),[d,p]=x.useState(null),f=ct(e,_=>p(_),l.onItemTextChange,_=>{var y;return(y=a.itemTextRefCallback)==null?void 0:y.call(a,_,l.value,l.disabled)}),g=d==null?void 0:d.textContent,E=x.useMemo(()=>v.jsx("option",{value:l.value,disabled:l.disabled,children:g},l.value),[l.disabled,l.value,g]),{onNativeOptionAdd:w,onNativeOptionRemove:A}=u;return Wt(()=>(w(E),()=>A(E)),[w,A,E]),v.jsxs(v.Fragment,{children:[v.jsx(Ve.span,{id:l.textId,...o,ref:f}),l.isSelected&&s.valueNode&&!s.valueNodeHasChildren?ts.createPortal(o.children,s.valueNode):null]})});XC.displayName=Gs;var JC="SelectItemIndicator",ZC=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return QC(JC,n).isSelected?v.jsx(Ve.span,{"aria-hidden":!0,...r,ref:e}):null});ZC.displayName=JC;var Yf="SelectScrollUpButton",eS=x.forwardRef((t,e)=>{const n=si(Yf,t.__scopeSelect),r=ng(Yf,t.__scopeSelect),[i,o]=x.useState(!1),s=ct(e,r.onScrollButtonChange);return Wt(()=>{if(n.viewport&&n.isPositioned){let a=function(){const u=l.scrollTop>0;o(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?v.jsx(nS,{...t,ref:s,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});eS.displayName=Yf;var Xf="SelectScrollDownButton",tS=x.forwardRef((t,e)=>{const n=si(Xf,t.__scopeSelect),r=ng(Xf,t.__scopeSelect),[i,o]=x.useState(!1),s=ct(e,r.onScrollButtonChange);return Wt(()=>{if(n.viewport&&n.isPositioned){let a=function(){const u=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<u;o(d)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?v.jsx(nS,{...t,ref:s,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});tS.displayName=Xf;var nS=x.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,o=si("SelectScrollButton",n),s=x.useRef(null),a=id(n),l=x.useCallback(()=>{s.current!==null&&(window.clearInterval(s.current),s.current=null)},[]);return x.useEffect(()=>()=>l(),[l]),Wt(()=>{var d;const u=a().find(p=>p.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[a]),v.jsx(Ve.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:Ue(i.onPointerDown,()=>{s.current===null&&(s.current=window.setInterval(r,50))}),onPointerMove:Ue(i.onPointerMove,()=>{var u;(u=o.onItemLeave)==null||u.call(o),s.current===null&&(s.current=window.setInterval(r,50))}),onPointerLeave:Ue(i.onPointerLeave,()=>{l()})})}),sM="SelectSeparator",rS=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return v.jsx(Ve.div,{"aria-hidden":!0,...r,ref:e})});rS.displayName=sM;var Jf="SelectArrow",aM=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=od(n),o=oi(Jf,n),s=si(Jf,n);return o.open&&s.position==="popper"?v.jsx(eD,{...i,...r,ref:e}):null});aM.displayName=Jf;function iS(t){return t===""||t===void 0}var oS=x.forwardRef((t,e)=>{const{value:n,...r}=t,i=x.useRef(null),o=ct(e,i),s=rD(n);return x.useEffect(()=>{const a=i.current,l=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==n&&d){const p=new Event("change",{bubbles:!0});d.call(a,n),a.dispatchEvent(p)}},[s,n]),v.jsx(SC,{asChild:!0,children:v.jsx("select",{...r,ref:o,defaultValue:n})})});oS.displayName="BubbleSelect";function sS(t){const e=ir(t),n=x.useRef(""),r=x.useRef(0),i=x.useCallback(s=>{const a=n.current+s;e(a),function l(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),o=x.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,o]}function aS(t,e,n){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,o=n?t.indexOf(n):-1;let s=lM(t,Math.max(o,0));i.length===1&&(s=s.filter(u=>u!==n));const l=s.find(u=>u.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function lM(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var cM=FC,lS=OC,uM=MC,dM=VC,hM=jC,cS=UC,fM=HC,uS=KC,dS=YC,pM=XC,mM=ZC,hS=eS,fS=tS,pS=rS;/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var gM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),mn=(t,e)=>{const n=x.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:s,className:a="",children:l,...u},d)=>x.createElement("svg",{ref:d,...gM,width:i,height:i,stroke:r,strokeWidth:s?Number(o)*24/Number(i):o,className:["lucide",`lucide-${yM(t)}`,a].join(" "),...u},[...e.map(([p,f])=>x.createElement(p,f)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mS=mn("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=mn("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=mn("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=mn("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=mn("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EM=mn("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=mn("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gS=mn("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=mn("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=mn("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yS=mn("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);function vS(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=vS(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function wS(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=vS(t))&&(r&&(r+=" "),r+=e);return r}const rg="-",IM=t=>{const e=RM(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:s=>{const a=s.split(rg);return a[0]===""&&a.length!==1&&a.shift(),_S(a,e)||AM(s)},getConflictingClassGroupIds:(s,a)=>{const l=n[s]||[];return a&&r[s]?[...l,...r[s]]:l}}},_S=(t,e)=>{var s;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?_S(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const o=t.join(rg);return(s=e.validators.find(({validator:a})=>a(o)))==null?void 0:s.classGroupId},Z0=/^\[(.+)\]$/,AM=t=>{if(Z0.test(t)){const e=Z0.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},RM=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return PM(Object.entries(t.classGroups),n).forEach(([o,s])=>{Zf(s,r,o,e)}),r},Zf=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const o=i===""?e:ew(e,i);o.classGroupId=n;return}if(typeof i=="function"){if(kM(i)){Zf(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([o,s])=>{Zf(s,ew(e,o),n,r)})})},ew=(t,e)=>{let n=t;return e.split(rg).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},kM=t=>t.isThemeGetter,PM=(t,e)=>e?t.map(([n,r])=>{const i=r.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([s,a])=>[e+s,a])):o);return[n,i]}):t,bM=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(o,s)=>{n.set(o,s),e++,e>t&&(e=0,r=n,n=new Map)};return{get(o){let s=n.get(o);if(s!==void 0)return s;if((s=r.get(o))!==void 0)return i(o,s),s},set(o,s){n.has(o)?n.set(o,s):i(o,s)}}},xS="!",$M=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],o=e.length,s=a=>{const l=[];let u=0,d=0,p;for(let A=0;A<a.length;A++){let _=a[A];if(u===0){if(_===i&&(r||a.slice(A,A+o)===e)){l.push(a.slice(d,A)),d=A+o;continue}if(_==="/"){p=A;continue}}_==="["?u++:_==="]"&&u--}const f=l.length===0?a:a.substring(d),g=f.startsWith(xS),E=g?f.substring(1):f,w=p&&p>d?p-d:void 0;return{modifiers:l,hasImportantModifier:g,baseClassName:E,maybePostfixModifierPosition:w}};return n?a=>n({className:a,parseClassName:s}):s},NM=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},FM=t=>({cache:bM(t.cacheSize),parseClassName:$M(t),...IM(t)}),LM=/\s+/,OM=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,o=[],s=t.trim().split(LM);let a="";for(let l=s.length-1;l>=0;l-=1){const u=s[l],{modifiers:d,hasImportantModifier:p,baseClassName:f,maybePostfixModifierPosition:g}=n(u);let E=!!g,w=r(E?f.substring(0,g):f);if(!w){if(!E){a=u+(a.length>0?" "+a:a);continue}if(w=r(f),!w){a=u+(a.length>0?" "+a:a);continue}E=!1}const A=NM(d).join(":"),_=p?A+xS:A,y=_+w;if(o.includes(y))continue;o.push(y);const C=i(w,E);for(let b=0;b<C.length;++b){const F=C[b];o.push(_+F)}a=u+(a.length>0?" "+a:a)}return a};function DM(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=ES(e))&&(r&&(r+=" "),r+=n);return r}const ES=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=ES(t[r]))&&(n&&(n+=" "),n+=e);return n};function MM(t,...e){let n,r,i,o=s;function s(l){const u=e.reduce((d,p)=>p(d),t());return n=FM(u),r=n.cache.get,i=n.cache.set,o=a,a(l)}function a(l){const u=r(l);if(u)return u;const d=OM(l,n);return i(l,d),d}return function(){return o(DM.apply(null,arguments))}}const Se=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},TS=/^\[(?:([a-z-]+):)?(.+)\]$/i,VM=/^\d+\/\d+$/,jM=new Set(["px","full","screen"]),UM=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,BM=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,zM=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,WM=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,HM=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,On=t=>$o(t)||jM.has(t)||VM.test(t),vr=t=>fs(t,"length",ZM),$o=t=>!!t&&!Number.isNaN(Number(t)),xh=t=>fs(t,"number",$o),Os=t=>!!t&&Number.isInteger(Number(t)),qM=t=>t.endsWith("%")&&$o(t.slice(0,-1)),se=t=>TS.test(t),wr=t=>UM.test(t),GM=new Set(["length","size","percentage"]),KM=t=>fs(t,GM,CS),QM=t=>fs(t,"position",CS),YM=new Set(["image","url"]),XM=t=>fs(t,YM,tV),JM=t=>fs(t,"",eV),Ds=()=>!0,fs=(t,e,n)=>{const r=TS.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},ZM=t=>BM.test(t)&&!zM.test(t),CS=()=>!1,eV=t=>WM.test(t),tV=t=>HM.test(t),nV=()=>{const t=Se("colors"),e=Se("spacing"),n=Se("blur"),r=Se("brightness"),i=Se("borderColor"),o=Se("borderRadius"),s=Se("borderSpacing"),a=Se("borderWidth"),l=Se("contrast"),u=Se("grayscale"),d=Se("hueRotate"),p=Se("invert"),f=Se("gap"),g=Se("gradientColorStops"),E=Se("gradientColorStopPositions"),w=Se("inset"),A=Se("margin"),_=Se("opacity"),y=Se("padding"),C=Se("saturate"),b=Se("scale"),F=Se("sepia"),O=Se("skew"),S=Se("space"),T=Se("translate"),R=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],$=()=>["auto",se,e],N=()=>[se,e],P=()=>["",On,vr],W=()=>["auto",$o,se],ie=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],K=()=>["solid","dashed","dotted","double","none"],Y=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],M=()=>["start","end","center","between","around","evenly","stretch"],z=()=>["","0",se],Q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ee=()=>[$o,se];return{cacheSize:500,separator:":",theme:{colors:[Ds],spacing:[On,vr],blur:["none","",wr,se],brightness:ee(),borderColor:[t],borderRadius:["none","","full",wr,se],borderSpacing:N(),borderWidth:P(),contrast:ee(),grayscale:z(),hueRotate:ee(),invert:z(),gap:N(),gradientColorStops:[t],gradientColorStopPositions:[qM,vr],inset:$(),margin:$(),opacity:ee(),padding:N(),saturate:ee(),scale:ee(),sepia:z(),skew:ee(),space:N(),translate:N()},classGroups:{aspect:[{aspect:["auto","square","video",se]}],container:["container"],columns:[{columns:[wr]}],"break-after":[{"break-after":Q()}],"break-before":[{"break-before":Q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ie(),se]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[w]}],"inset-x":[{"inset-x":[w]}],"inset-y":[{"inset-y":[w]}],start:[{start:[w]}],end:[{end:[w]}],top:[{top:[w]}],right:[{right:[w]}],bottom:[{bottom:[w]}],left:[{left:[w]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Os,se]}],basis:[{basis:$()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",se]}],grow:[{grow:z()}],shrink:[{shrink:z()}],order:[{order:["first","last","none",Os,se]}],"grid-cols":[{"grid-cols":[Ds]}],"col-start-end":[{col:["auto",{span:["full",Os,se]},se]}],"col-start":[{"col-start":W()}],"col-end":[{"col-end":W()}],"grid-rows":[{"grid-rows":[Ds]}],"row-start-end":[{row:["auto",{span:[Os,se]},se]}],"row-start":[{"row-start":W()}],"row-end":[{"row-end":W()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",se]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",se]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...M()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...M(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...M(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[A]}],mx:[{mx:[A]}],my:[{my:[A]}],ms:[{ms:[A]}],me:[{me:[A]}],mt:[{mt:[A]}],mr:[{mr:[A]}],mb:[{mb:[A]}],ml:[{ml:[A]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",se,e]}],"min-w":[{"min-w":[se,e,"min","max","fit"]}],"max-w":[{"max-w":[se,e,"none","full","min","max","fit","prose",{screen:[wr]},wr]}],h:[{h:[se,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[se,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[se,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[se,e,"auto","min","max","fit"]}],"font-size":[{text:["base",wr,vr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",xh]}],"font-family":[{font:[Ds]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",se]}],"line-clamp":[{"line-clamp":["none",$o,xh]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",On,se]}],"list-image":[{"list-image":["none",se]}],"list-style-type":[{list:["none","disc","decimal",se]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...K(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",On,vr]}],"underline-offset":[{"underline-offset":["auto",On,se]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",se]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",se]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ie(),QM]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",KM]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},XM]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[E]}],"gradient-via-pos":[{via:[E]}],"gradient-to-pos":[{to:[E]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...K(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:K()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...K()]}],"outline-offset":[{"outline-offset":[On,se]}],"outline-w":[{outline:[On,vr]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[On,vr]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",wr,JM]}],"shadow-color":[{shadow:[Ds]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...Y(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Y()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",wr,se]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[p]}],saturate:[{saturate:[C]}],sepia:[{sepia:[F]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[F]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",se]}],duration:[{duration:ee()}],ease:[{ease:["linear","in","out","in-out",se]}],delay:[{delay:ee()}],animate:[{animate:["none","spin","ping","pulse","bounce",se]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[Os,se]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[O]}],"skew-y":[{"skew-y":[O]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",se]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",se]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",se]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[On,vr,xh]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},rV=MM(nV);function ze(...t){return rV(wS(t))}const iV=cM,oV=uM,SS=x.forwardRef(({className:t,children:e,...n},r)=>v.jsxs(lS,{ref:r,className:ze("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,v.jsx(dM,{asChild:!0,children:v.jsx(gS,{className:"h-4 w-4 opacity-50"})})]}));SS.displayName=lS.displayName;const IS=x.forwardRef(({className:t,...e},n)=>v.jsx(hS,{ref:n,className:ze("flex cursor-default items-center justify-center py-1",t),...e,children:v.jsx(CM,{className:"h-4 w-4"})}));IS.displayName=hS.displayName;const AS=x.forwardRef(({className:t,...e},n)=>v.jsx(fS,{ref:n,className:ze("flex cursor-default items-center justify-center py-1",t),...e,children:v.jsx(gS,{className:"h-4 w-4"})}));AS.displayName=fS.displayName;const RS=x.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>v.jsx(hM,{children:v.jsxs(cS,{ref:i,className:ze("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-white text-gray-900 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[v.jsx(IS,{}),v.jsx(fM,{className:ze("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),v.jsx(AS,{})]})}));RS.displayName=cS.displayName;const sV=x.forwardRef(({className:t,...e},n)=>v.jsx(uS,{ref:n,className:ze("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));sV.displayName=uS.displayName;const Dn=x.forwardRef(({className:t,children:e,...n},r)=>v.jsxs(dS,{ref:r,className:ze("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[v.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:v.jsx(mM,{children:v.jsx(TM,{className:"h-4 w-4"})})}),v.jsx(pM,{children:e})]}));Dn.displayName=dS.displayName;const aV=x.forwardRef(({className:t,...e},n)=>v.jsx(pS,{ref:n,className:ze("-mx-1 my-1 h-px bg-muted",t),...e}));aV.displayName=pS.displayName;const H={LONG_CALL:"LONG_CALL",COVERED_CALL:"COVERED_CALL",CASH_SECURED_PUT:"CASH_SECURED_PUT",COLLAR_STRATEGY:"COLLAR_STRATEGY",OPTIONS_THEORY:"OPTIONS_THEORY",PROTECTIVE_PUT:"PROTECTIVE_PUT",LONG_PUT:"LONG_PUT",LONG_CALL_SPREAD:"LONG_CALL_SPREAD"},_r={[H.LONG_CALL]:"Long Call",[H.COVERED_CALL]:"Covered Call",[H.CASH_SECURED_PUT]:"Cash Secured Put",[H.COLLAR_STRATEGY]:"Collar Strategy",[H.OPTIONS_THEORY]:"Options Theory",[H.PROTECTIVE_PUT]:"Protective Put",[H.LONG_PUT]:"Long Put",[H.LONG_CALL_SPREAD]:"Long Call Spread"},lV={[H.LONG_CALL]:"Learn how to profit from stock price increases with limited risk using long call options.",[H.COVERED_CALL]:"Learn how to generate income by selling call options against stock you own.",[H.CASH_SECURED_PUT]:"Selling the Cash Secured Put obligates you to buy stock at strike price if the option is assigned.",[H.COLLAR_STRATEGY]:"Protect stock positions while generating income through a combined put and call strategy.",[H.OPTIONS_THEORY]:"Learn Stock Options",[H.PROTECTIVE_PUT]:"Purchasing a protective put gives you the right to sell stock you already own at strike price.",[H.LONG_PUT]:"Purchasing a put option, typically in anticipation of a decline in the underlying asset.",[H.LONG_CALL_SPREAD]:"Bullish strategy: Buy lower-strike call, sell higher-strike call. Limited risk and reward, cheaper than buying calls."},cV=({selectedStrategy:t,onStrategyChange:e})=>{const{isPremium:n}=Wm();return v.jsxs("div",{className:"space-y-4",children:[v.jsx("div",{className:"flex flex-col space-y-2",children:v.jsxs(iV,{value:t,onValueChange:r=>e(r),children:[v.jsx(SS,{className:"w-[280px]",children:v.jsx(oV,{placeholder:"Select a strategy"})}),v.jsxs(RS,{children:[v.jsx(Dn,{value:H.OPTIONS_THEORY,children:_r[H.OPTIONS_THEORY]}),v.jsx(Dn,{value:H.COVERED_CALL,children:_r[H.COVERED_CALL]}),v.jsxs(Dn,{value:H.CASH_SECURED_PUT,children:[_r[H.CASH_SECURED_PUT]," ",!n&&"(Premium)"]}),v.jsxs(Dn,{value:H.PROTECTIVE_PUT,children:[_r[H.PROTECTIVE_PUT]," ",!n&&"(Premium)"]}),v.jsxs(Dn,{value:H.LONG_CALL,children:[_r[H.LONG_CALL]," ",!n&&"(Premium)"]}),v.jsxs(Dn,{value:H.LONG_PUT,children:[_r[H.LONG_PUT]," ",!n&&"(Premium)"]}),v.jsxs(Dn,{value:H.COLLAR_STRATEGY,children:[_r[H.COLLAR_STRATEGY]," ",!n&&"(Premium)"]}),v.jsxs(Dn,{value:H.LONG_CALL_SPREAD,children:[_r[H.LONG_CALL_SPREAD]," ",!n&&"(Premium)"]})]})]})}),t&&v.jsx("p",{className:"text-sm text-gray-600",children:lV[t]})]})},tw=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,nw=wS,kS=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return nw(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:o}=e,s=Object.keys(i).map(u=>{const d=n==null?void 0:n[u],p=o==null?void 0:o[u];if(d===null)return null;const f=tw(d)||tw(p);return i[u][f]}),a=n&&Object.entries(n).reduce((u,d)=>{let[p,f]=d;return f===void 0||(u[p]=f),u},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:p,className:f,...g}=d;return Object.entries(g).every(E=>{let[w,A]=E;return Array.isArray(A)?A.includes({...o,...a}[w]):{...o,...a}[w]===A})?[...u,p,f]:u},[]);return nw(t,s,l,n==null?void 0:n.class,n==null?void 0:n.className)},uV=kS("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Oi=x.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},o)=>{const s=r?Yo:"button";return v.jsx(s,{className:ze(uV({variant:e,size:n,className:t})),ref:o,...i})});Oi.displayName="Button";const dV=()=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",className:"w-4 h-4 mr-2",children:[v.jsx("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),v.jsx("path",{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"}),v.jsx("path",{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}),v.jsx("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"}),v.jsx("path",{fill:"none",d:"M0 0h48v48H0z"})]}),hV=()=>{const{user:t,signInWithGoogle:e,logout:n}=cs();return v.jsx("div",{className:"flex items-center gap-4",children:t?v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("img",{src:t.photoURL,alt:t.displayName,className:"w-8 h-8 rounded-full"}),v.jsx("span",{className:"text-sm text-gray-700",children:t.displayName}),v.jsx(Oi,{onClick:n,variant:"outline",className:"text-sm",children:"Logout"})]}):v.jsxs(Oi,{onClick:e,className:"bg-white text-gray-600 border border-gray-300 hover:bg-gray-50",children:[v.jsx(dV,{}),"Sign in with Google"]})})};var PS="https://js.stripe.com/v3",fV=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,rw="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",pV=function(){for(var e=document.querySelectorAll('script[src^="'.concat(PS,'"]')),n=0;n<e.length;n++){var r=e[n];if(fV.test(r.src))return r}return null},iw=function(e){var n="",r=document.createElement("script");r.src="".concat(PS).concat(n);var i=document.head||document.body;if(!i)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(r),r},mV=function(e,n){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"5.4.0",startTime:n})},Ms=null,Yl=null,Xl=null,gV=function(e){return function(){e(new Error("Failed to load Stripe.js"))}},yV=function(e,n){return function(){window.Stripe?e(window.Stripe):n(new Error("Stripe.js not available"))}},vV=function(e){return Ms!==null?Ms:(Ms=new Promise(function(n,r){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe&&e&&console.warn(rw),window.Stripe){n(window.Stripe);return}try{var i=pV();if(i&&e)console.warn(rw);else if(!i)i=iw(e);else if(i&&Xl!==null&&Yl!==null){var o;i.removeEventListener("load",Xl),i.removeEventListener("error",Yl),(o=i.parentNode)===null||o===void 0||o.removeChild(i),i=iw(e)}Xl=yV(n,r),Yl=gV(r),i.addEventListener("load",Xl),i.addEventListener("error",Yl)}catch(s){r(s);return}}),Ms.catch(function(n){return Ms=null,Promise.reject(n)}))},wV=function(e,n,r){if(e===null)return null;var i=e.apply(void 0,n);return mV(i,r),i},Vs,bS=!1,$S=function(){return Vs||(Vs=vV(null).catch(function(e){return Vs=null,Promise.reject(e)}),Vs)};Promise.resolve().then(function(){return $S()}).catch(function(t){bS||console.warn(t)});var _V=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];bS=!0;var i=Date.now();return $S().then(function(o){return wV(o,n,i)})};const xV=_V("pk_test_51QZ41vGVXFEMO3WwuM00yaX8i8d24tRljolK8cEn9M2WMYlLx2flC6qCy2Qyido3Mr4re7ukhTmQ6OoyFDyxMQAk002uz5HTuW"),EV=async(t,e)=>{try{const n=await xV,{error:r}=await n.redirectToCheckout({lineItems:[{price:"price_1QZiAlGVXFEMO3Ww8XH3vqNS",quantity:1}],mode:"payment",successUrl:`${window.location.origin}/#/success?userId=${t}`,cancelUrl:`${window.location.origin}/`,customerEmail:e});if(r)throw console.error("Stripe error:",r),r}catch(n){throw console.error("Error initiating checkout:",n),n}},ar=x.forwardRef(({className:t,...e},n)=>v.jsx("div",{ref:n,className:ze("rounded-xl border bg-card text-card-foreground shadow",t),...e}));ar.displayName="Card";const Hi=x.forwardRef(({className:t,...e},n)=>v.jsx("div",{ref:n,className:ze("flex flex-col space-y-1.5 p-6",t),...e}));Hi.displayName="CardHeader";const qi=x.forwardRef(({className:t,...e},n)=>v.jsx("h3",{ref:n,className:ze("font-semibold leading-none tracking-tight",t),...e}));qi.displayName="CardTitle";const ig=x.forwardRef(({className:t,...e},n)=>v.jsx("p",{ref:n,className:ze("text-sm text-muted-foreground",t),...e}));ig.displayName="CardDescription";const lr=x.forwardRef(({className:t,...e},n)=>v.jsx("div",{ref:n,className:ze("p-6 pt-0",t),...e}));lr.displayName="CardContent";const TV=x.forwardRef(({className:t,...e},n)=>v.jsx("div",{ref:n,className:ze("flex items-center p-6 pt-0",t),...e}));TV.displayName="CardFooter";const CV=kS("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),rl=x.forwardRef(({className:t,variant:e,...n},r)=>v.jsx("div",{ref:r,role:"alert",className:ze(CV({variant:e}),t),...n}));rl.displayName="Alert";const NS=x.forwardRef(({className:t,...e},n)=>v.jsx("h5",{ref:n,className:ze("mb-1 font-medium leading-none tracking-tight",t),...e}));NS.displayName="AlertTitle";const il=x.forwardRef(({className:t,...e},n)=>v.jsx("div",{ref:n,className:ze("text-sm [&_p]:leading-relaxed",t),...e}));il.displayName="AlertDescription";const SV=()=>{const{user:t}=cs(),[e,n]=x.useState(!1),[r,i]=x.useState(null),o=async()=>{if(!t){i("Please sign in to continue");return}n(!0),i(null);try{console.log("Price ID:","price_1QZiAlGVXFEMO3Ww8XH3vqNS"),await EV(t.uid,t.email)}catch(s){console.error("Payment error:",s),i(s.message||"Unable to initiate checkout. Please try again."),n(!1)}};return v.jsxs(ar,{className:"max-w-md mx-auto",children:[v.jsx(Hi,{children:v.jsx(qi,{children:"Upgrade to Premium Access"})}),v.jsx(lr,{className:"space-y-6",children:v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx("h3",{className:"font-medium",children:"Premium Features Include:"}),v.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[v.jsx("li",{children:"Access to Advanced Options Strategies"}),v.jsx("li",{children:"Long Call Strategy"}),v.jsx("li",{children:"Cash Secured Put Strategy"}),v.jsx("li",{children:"Protective Put Strategy"}),v.jsx("li",{children:"Collar Strategy"}),v.jsx("li",{children:"Detailed Strategy-Specific Practice Scenarios"})]})]}),v.jsxs("div",{className:"text-center py-4",children:[v.jsx("span",{className:"text-3xl font-bold",children:"$4.99"}),v.jsx("span",{className:"text-gray-500 ml-2",children:"one-time payment"})]}),r&&v.jsx(rl,{variant:"destructive",className:"bg-red-50",children:v.jsx(il,{children:r})}),v.jsx(Oi,{onClick:o,className:"w-full bg-blue-600 hover:bg-blue-700 text-white",disabled:e,children:e?v.jsxs(v.Fragment,{children:[v.jsx(yS,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):"Upgrade Now"}),v.jsx("p",{className:"text-sm text-gray-500 text-center",children:"Secure payment powered by Stripe"})]})})]})},FS=x.forwardRef(({className:t,type:e,...n},r)=>v.jsx("input",{type:e,className:ze("flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));FS.displayName="Input";var IV="Label",LS=x.forwardRef((t,e)=>v.jsx(Ve.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));LS.displayName=IV;var OS=LS;const DS=x.forwardRef(({className:t,...e},n)=>v.jsx(OS,{ref:n,className:ze("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",t),...e}));DS.displayName=OS.displayName;const AV=async(t,e,n,r,i)=>{try{const o=QF(zm,"scores");await uL(o,{userId:t,score:e,totalQuestions:n,symbol:r,date:new Date,tradeDate:i})}catch(o){throw console.error("Error saving score:",o),o}},ai=t=>{const e=[...t];for(let n=e.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[e[n],e[r]]=[e[r],e[n]]}return e},RV=(t,e,n,r,i,o,s)=>{const a=parseFloat(t),l=parseFloat(e),u=parseFloat(n),d=parseFloat(i),p=l+u,f=u*100,g=a*1.1,E=a*.9;return[{id:1,question:`If ${r} rises to $${g.toFixed(2)} (10% increase) before expiration, what would be your profit?`,options:[{text:`$${((g-l)*100-f).toFixed(2)}`,isCorrect:!0},{text:`$${f.toFixed(2)}`,isCorrect:!1},{text:`$${((g-l)*100).toFixed(2)}`,isCorrect:!1},{text:`$${((g-a)*100).toFixed(2)}`,isCorrect:!1}],explanation:`At $${g.toFixed(2)}, the profit is: (Stock Price - Strike Price)  100 shares - Premium Paid = ($${g.toFixed(2)} - $${l.toFixed(2)})  100 - $${f.toFixed(2)} = $${((g-l)*100-f).toFixed(2)}`},{id:2,question:`If ${r} drops to $${E.toFixed(2)} (10% decrease), what is your maximum loss?`,options:[{text:`$${((a-E)*100).toFixed(2)}`,isCorrect:!1},{text:`$${f.toFixed(2)}`,isCorrect:!0},{text:`$${(a*100).toFixed(2)}`,isCorrect:!1},{text:`$${((l-E)*100).toFixed(2)}`,isCorrect:!1}],explanation:`With a long call option, your maximum loss is limited to the premium paid ($${f.toFixed(2)}), no matter how low the stock price goes.`},{id:3,question:`For your ${r} call option, what is the break-even stock price at expiration?`,options:[{text:`$${a.toFixed(2)} (Current Price)`,isCorrect:!1},{text:`$${l.toFixed(2)} (Strike Price)`,isCorrect:!1},{text:`$${p.toFixed(2)} (Strike + Premium)`,isCorrect:!0},{text:`$${(l-u).toFixed(2)}`,isCorrect:!1}],explanation:`Break-even price at expiration = Strike Price + Premium per share = $${l.toFixed(2)} + $${u.toFixed(2)} = $${p.toFixed(2)}`},{id:4,question:`With ${r} currently at $${a.toFixed(2)}, what happens if the stock expires exactly at the strike price of $${l.toFixed(2)}?`,options:[{text:"You break even",isCorrect:!1},{text:`You lose $${f.toFixed(2)} (the premium paid)`,isCorrect:!0},{text:`You lose $${(f/2).toFixed(2)}`,isCorrect:!1},{text:"You make a small profit",isCorrect:!1}],explanation:`At expiration, if the stock price equals the strike price, the option expires at-the-money and worthless. You lose the entire premium paid ($${f.toFixed(2)}).`},{id:5,question:`On ${o}, ${r} closed at $${i}. What was your actual profit/loss on this trade?`,options:[{text:d>l?`Profit of $${((d-l)*100-f).toFixed(2)}`:`Loss of $${f.toFixed(2)}`,isCorrect:!0},{text:d>a?`Profit of $${((d-a)*100).toFixed(2)}`:`Loss of $${((a-d)*100).toFixed(2)}`,isCorrect:!1},{text:d>l?`Profit of $${((d-l)*100).toFixed(2)}`:`Loss of $${((l-d)*100).toFixed(2)}`,isCorrect:!1},{text:`Profit of $${f.toFixed(2)}`,isCorrect:!1}],explanation:d>l?`The stock closed above the strike price ($${l.toFixed(2)}), so your call option was in-the-money. Your profit calculation is:
           1. Option value at expiration = (Final Price - Strike Price)  100 shares
           2. Option value = ($${d.toFixed(2)} - $${l.toFixed(2)})  100 = $${((d-l)*100).toFixed(2)}
           3. Final P/L = Option value - Premium paid
           4. P/L = $${((d-l)*100).toFixed(2)} - $${f.toFixed(2)} = $${((d-l)*100-f).toFixed(2)}`:`The stock closed below the strike price ($${l.toFixed(2)}), so your call option expired worthless (out-of-the-money). In this case, you lose the entire premium paid: -$${f.toFixed(2)}. This is the maximum loss possible on a long call option.`},{id:6,question:`Between ${s} and ${o}, ${r} moved from $${a} to $${i}. What was your return on investment (ROI) for this call option trade?`,options:[{text:d>l?`Gain of ${(((d-l)*100-f)/f*100).toFixed(2)}% (based on premium invested)`:"Loss of 100% (total premium lost)",isCorrect:!0},{text:`${((d-a)/a*100).toFixed(2)}% (stock price return)`,isCorrect:!1},{text:d>l?`Gain of ${((d-l)/l*100).toFixed(2)}% (from strike price)`:`Loss of ${((l-d)/l*100).toFixed(2)}% (from strike price)`,isCorrect:!1},{text:d>l?`Gain of ${((d-a)/f*100).toFixed(2)}% (price change / premium)`:`Loss of ${((a-d)/f*100).toFixed(2)}% (price change / premium)`,isCorrect:!1}],explanation:d>l?`ROI = (Profit / Premium Paid)  100. With final value of $${((d-l)*100).toFixed(2)} and premium paid of $${f.toFixed(2)}, your ROI is ${(((d-l)*100-f)/f*100).toFixed(2)}%.`:`Since the option expired worthless, you lost your entire premium of $${f.toFixed(2)}, resulting in an ROI of -100%.`},{id:7,question:`Your ${r} long call with strike $${l.toFixed(2)} has gained value. The stock is at $${(l*1.15).toFixed(2)}, and your option can be sold for $${(l*.18).toFixed(2)} (original premium paid: $${u.toFixed(2)}). Should you close early?`,options:[{text:`Yes, lock in a profit of $${((l*.18-u)*100).toFixed(2)} now rather than risk time decay`,isCorrect:!0},{text:"No, hold until expiration for maximum profit potential",isCorrect:!1},{text:`No, wait for the stock to reach $${(l*1.25).toFixed(2)} first`,isCorrect:!1},{text:"Exercise the option immediately to own the shares",isCorrect:!1}],explanation:`With the option showing a profit of $${((l*.18-u)*100).toFixed(2)} (($${(l*.18).toFixed(2)} - $${u.toFixed(2)})  100), it's often wise to close early. This locks in gains and avoids theta decay, especially if implied volatility is high. Remember: you don't need to hold options to expiration to profit.`},{id:8,question:`Your ${r} call option has lost value, with the stock dropping to $${E.toFixed(2)}. The option now trades at $${(u*.4).toFixed(2)} (original premium: $${u.toFixed(2)}). What's the best action?`,options:[{text:`Sell the option to salvage $${(u*.4*100).toFixed(2)} of your initial investment`,isCorrect:!0},{text:"Hold until expiration hoping for recovery",isCorrect:!1},{text:"Buy another call to average down your cost",isCorrect:!1},{text:`Exercise the option to buy shares at $${l.toFixed(2)}`,isCorrect:!1}],explanation:`When a long call moves significantly out-of-the-money, selling to salvage remaining value ($${(u*.4*100).toFixed(2)}) can be prudent. This reduces your maximum loss from $${(u*100).toFixed(2)} to $${((u-u*.4)*100).toFixed(2)} and frees up capital for other opportunities.`},{id:9,question:`Your ${r} call has doubled in value due to increased volatility, trading at $${(u*2).toFixed(2)} (cost basis: $${u.toFixed(2)}). The stock price is still near $${(a*1.02).toFixed(2)}. What should you consider?`,options:[{text:`Sell the call to profit from the volatility spike, potential gain: $${(u*100).toFixed(2)}`,isCorrect:!0},{text:"Hold the position since the stock hasn't moved much",isCorrect:!1},{text:"Buy more calls at the higher premium",isCorrect:!1},{text:"Exercise the option early",isCorrect:!1}],explanation:`When implied volatility causes your option to double in value without significant stock movement, it's often profitable to sell. You're capturing $${(u*100).toFixed(2)} profit from volatility expansion alone, which could decrease even if the stock moves favorably later.`},{id:10,question:`You bought a ${r} $${l.toFixed(2)} call for $${u.toFixed(2)}. Now the stock is at $${(l*1.1).toFixed(2)}, and a major earnings report is coming. The call is worth $${(u*1.8).toFixed(2)}. What's the strategic consideration?`,options:[{text:`Sell before earnings to lock in $${((u*1.8-u)*100).toFixed(2)} profit and avoid earnings volatility risk`,isCorrect:!0},{text:"Hold through earnings for potentially larger gains",isCorrect:!1},{text:"Exercise the option before earnings",isCorrect:!1},{text:"Buy more calls to increase potential earnings gains",isCorrect:!1}],explanation:`With a profit of $${((u*1.8-u)*100).toFixed(2)} before earnings, selling is often prudent. Earnings events can cause dramatic moves in both stock price and volatility. Even if the stock rises, your option could lose value if implied volatility drops post-earnings (volatility crush).`}]},kV=(t,e,n,r,i,o,s)=>(console.log("Generating questions with:",{stockPrice:t,strikePrice:e,premium:n,symbol:r,futurePrice:i,expirationDate:o,selectedDate:s}),RV(t,e,n,r,i,o,s).map(l=>{const u=ai(l.options),d=u.findIndex(p=>p.isCorrect);return{id:l.id,question:l.question,options:u.map(p=>p.text),correctAnswer:d,explanation:l.explanation}})),PV=(t,e,n,r,i,o,s)=>{const a=parseFloat(t),l=parseFloat(e),u=parseFloat(n),d=parseFloat(i),p=a*1.1,f=a*.9,g=u*.3,E=(u-g)*100;return[{id:1,question:`For a covered call on ${r}, you own 100 shares at $${a} and sell a $${l} call for $${u} premium. What's your maximum profit if the stock is called away?`,options:[{text:`$${((l-a)*100+u*100).toFixed(2)}`,isCorrect:!0},{text:`$${(u*100).toFixed(2)}`,isCorrect:!1},{text:`$${((l-a)*100).toFixed(2)}`,isCorrect:!1},{text:`$${(l*100).toFixed(2)}`,isCorrect:!1}],explanation:`Maximum profit = (Strike Price - Purchase Price)  100 + Premium = ($${l} - $${a})  100 + $${(u*100).toFixed(2)} = $${((l-a)*100+u*100).toFixed(2)}`},{id:2,question:`You bought ${r} at $${a} and sold a $${l} call for $${u} premium. If ${r} drops to $${(a*.8).toFixed(2)} at expiration, what's your actual loss per share compared to just holding the stock?`,options:[{text:`$${(a*.8-(a-u)).toFixed(2)} loss with covered call vs $${(a*.8-a).toFixed(2)} loss with stock only`,isCorrect:!0},{text:`$${(a*.8-a).toFixed(2)} loss for both strategies`,isCorrect:!1},{text:`$${u.toFixed(2)} profit with covered call vs $${(a*.8-a).toFixed(2)} loss with stock only`,isCorrect:!1},{text:`$${(a-a*.8).toFixed(2)} loss for both strategies`,isCorrect:!1}],explanation:`With a covered call, your cost basis is reduced from $${a} to $${(a-u).toFixed(2)} due to the premium received. At $${(a*.8).toFixed(2)}, your actual loss is $${(a*.8-(a-u)).toFixed(2)} per share. Without the covered call, you would lose $${(a*.8-a).toFixed(2)} per share. The premium received ($${u}) provides this much downside protection.`},{id:3,question:`If ${r} rises to $${d.toFixed(2)} by ${o}, what happens to your covered call position?`,options:[{text:`Your shares will be called away at $${l.toFixed(2)}, and you'll keep the $${(u*100).toFixed(2)} premium`,isCorrect:d>l},{text:`The option expires worthless, and you keep your shares and the $${(u*100).toFixed(2)} premium`,isCorrect:d<=l},{text:"You must buy back the option at a loss",isCorrect:!1},{text:"You can exercise your option",isCorrect:!1}],explanation:d>l?`Since the stock price ($${d.toFixed(2)}) is above the strike price ($${l.toFixed(2)}), your shares will be called away, but you keep the premium.`:`Since the stock price ($${d.toFixed(2)}) is below the strike price ($${l.toFixed(2)}), the option expires worthless and you keep both shares and premium.`},{id:4,question:`On ${s}, what's your break-even price point for this covered call position in ${r}?`,options:[{text:`$${(a-u).toFixed(2)}`,isCorrect:!0},{text:`$${a.toFixed(2)}`,isCorrect:!1},{text:`$${l.toFixed(2)}`,isCorrect:!1},{text:`$${(l+u).toFixed(2)}`,isCorrect:!1}],explanation:`Break-even = Stock Purchase Price - Premium Received = $${a.toFixed(2)} - $${u.toFixed(2)} = $${(a-u).toFixed(2)}`},{id:5,question:`What's your maximum potential loss on this ${r} covered call position?`,options:[{text:`$${((a-u)*100).toFixed(2)}`,isCorrect:!0},{text:`$${(u*100).toFixed(2)}`,isCorrect:!1},{text:`$${(a*100).toFixed(2)}`,isCorrect:!1},{text:"Unlimited loss",isCorrect:!1}],explanation:`Maximum loss occurs if stock goes to zero: (Stock price - Premium)  100 = ($${a.toFixed(2)} - $${u.toFixed(2)})  100 = $${((a-u)*100).toFixed(2)}. The premium received reduces your potential loss.`},{id:6,question:`If ${r} changes from $${a.toFixed(2)} to $${Math.min(l-.01,p).toFixed(2)} (below the $${l} strike price), compare your returns: holding 100 shares versus a covered call strategy that collects $${(u*100).toFixed(2)} premium.`,options:[{text:`Stock only: $${((Math.min(l-.01,p)-a)*100).toFixed(2)} profit vs. Covered Call: $${((Math.min(l-.01,p)-a)*100+u*100).toFixed(2)} profit`,isCorrect:!0},{text:`Both strategies would earn $${((Math.min(l-.01,p)-a)*100).toFixed(2)}`,isCorrect:!1},{text:`Stock only: $${((Math.min(l-.01,p)-a)*100).toFixed(2)} profit vs. Covered Call: $${(u*100).toFixed(2)} profit`,isCorrect:!1},{text:`Stock only: $${(Math.min(l-.01,p)*100).toFixed(2)} profit vs. Covered Call: $${(l*100+u*100).toFixed(2)} profit`,isCorrect:!1}],explanation:`With stock only, your profit is the price increase: ($${Math.min(l-.01,p).toFixed(2)} - $${a.toFixed(2)})  100 = $${((Math.min(l-.01,p)-a)*100).toFixed(2)}. With a covered call, you keep both this stock appreciation AND the premium collected: $${((Math.min(l-.01,p)-a)*100).toFixed(2)} + $${(u*100).toFixed(2)} = $${((Math.min(l-.01,p)-a)*100+u*100).toFixed(2)}. This shows how covered calls can enhance returns when the stock price rises but stays below the strike price.`},{id:7,question:`${r} drops to $${f.toFixed(2)} halfway to expiration, and your sold call is now worth $${g.toFixed(2)}. Should you consider buying back the call?`,options:[{text:`Yes, buy it back and save $${E.toFixed(2)} in premium, potentially reselling a new call later`,isCorrect:!0},{text:"No, keep the original position as the stock might recover",isCorrect:!1},{text:"No, the loss on the stock negates any benefit from the call",isCorrect:!1},{text:"Yes, buy it back and sell the stock immediately",isCorrect:!1}],explanation:`With the stock down significantly, the call option's value has decreased to $${g.toFixed(2)}. Buying it back saves $${E.toFixed(2)} of the original premium, and you could potentially sell another call at a lower strike price to generate new premium income.`},{id:8,question:`In the scenario where ${r} drops to $${f.toFixed(2)}, let's analyze the covered call management. You originally sold the call for $${u.toFixed(2)} (premium received = $${(u*100).toFixed(2)}) and can now buy it back for $${g.toFixed(2)} (cost = $${(g*100).toFixed(2)}). What's the return on investment (ROI) if you buy back the call?`,options:[{text:`${(E/(u*100)*100).toFixed(2)}% on the option component ($${E.toFixed(2)} profit / $${(u*100).toFixed(2)} initial premium)`,isCorrect:!0},{text:`${((f-a)/a*100).toFixed(2)}% (stock loss only: $${((f-a)*100).toFixed(2)})`,isCorrect:!1},{text:`${((f-a+u)/a*100).toFixed(2)}% (stock loss plus original premium: $${((f-a)*100+u*100).toFixed(2)})`,isCorrect:!1},{text:"0% as the loss on stock offsets option gains",isCorrect:!1}],explanation:`Let's break down the ROI calculation:
1. Original premium received: $${(u*100).toFixed(2)}
2. Buy-back cost: $${(g*100).toFixed(2)}
3. Premium saved/profit: $${E.toFixed(2)}
4. ROI = (Premium Saved / Original Premium)  100
   = ($${E.toFixed(2)} / $${(u*100).toFixed(2)})  100
   = ${(E/(u*100)*100).toFixed(2)}%

While the stock position shows a loss of ${((f-a)/a*100).toFixed(2)}%, managing the option position independently has resulted in a profit on the option component.`},{id:9,question:`If you buy back the ${r} call for $${g.toFixed(2)} when the stock is at $${f.toFixed(2)}, and you believe the stock will remain range-bound between $${(f*.95).toFixed(2)} and $${(f*1.05).toFixed(2)} for the next month, what's the most appropriate action to maximize income while holding the stock?`,options:[{text:`Sell a new covered call at a lower strike price (around $${(f*1.02).toFixed(2)}) to generate additional premium while the stock trades sideways`,isCorrect:!0},{text:`Wait for the stock to recover to $${a.toFixed(2)} before selling another call, missing out on potential premium in the meantime`,isCorrect:!1},{text:`Sell the stock immediately at $${f.toFixed(2)} and take the loss`,isCorrect:!1},{text:"Buy another call option, which would increase your risk and cost basis",isCorrect:!1}],explanation:`Given the expectation of range-bound trading, selling a new covered call at a lower strike price (around $${(f*1.02).toFixed(2)}) is optimal because: 1. It generates immediate premium income to help offset the stock decline. 2. With sideways trading expected, the new premium has a high probability of being retained. 3. The lower strike price reflects the new trading range while still allowing for some upside. 4. If the stock does recover sharply, you can manage the position again by rolling up. This strategy maximizes income potential while maintaining the position in a sideways market.`},{id:10,question:`For ${r}, you bought shares at $${a.toFixed(2)} and sold a call at strike $${l.toFixed(2)} for $${u.toFixed(2)} premium. The stock rises sharply to $${(l*1.2).toFixed(2)} (20% above strike), and the call now costs $${(l*.22).toFixed(2)} to buy back. What should you do?`,options:[{text:`Buy back the call despite a $${((l*.22-u)*100).toFixed(2)} loss to capture the stock's upside potential`,isCorrect:!0},{text:`Let the shares be called away at $${l.toFixed(2)}, limiting your profit to $${((l-a+u)*100).toFixed(2)}`,isCorrect:!1},{text:`Sell the stock at $${(l*1.2).toFixed(2)} while keeping the short call open`,isCorrect:!1},{text:"Wait until expiration, since the premium received offsets any lost stock gains",isCorrect:!1}],explanation:`When a stock shows strong upward momentum, it may be worth buying back the call even at a loss. Here, letting the stock be called away limits your profit to $${((l-a+u)*100).toFixed(2)}, while buying back the call for a $${((l*.22-u)*100).toFixed(2)} loss allows you to capture all future gains above $${(l*1.2).toFixed(2)}. The loss on the call could be recovered by just a small additional move higher in the stock.`}]},bV=(t,e,n,r,i,o,s)=>(console.log("Generating questions with:",{stockPrice:t,strikePrice:e,premium:n,symbol:r,futurePrice:i,expirationDate:o,selectedDate:s}),PV(t,e,n,r,i,o,s).map(l=>{const u=ai(l.options),d=u.findIndex(p=>p.isCorrect);return{id:l.id,question:l.question,options:u.map(p=>p.text),correctAnswer:d,explanation:l.explanation}})),$V=(t,e,n,r,i,o,s)=>{const a=parseFloat(t),l=parseFloat(e),u=parseFloat(n),d=parseFloat(i),p=l+u,f=100,g=u*f;return[{id:1,question:`For ${r} trading at $${a}, which best describes your rights if you buy a call option with strike price $${l}?`,options:[{text:`Right to buy ${r} at $${l} regardless of how high the stock price goes`,isCorrect:!0},{text:`Obligation to buy ${r} at $${l} if the stock goes up`,isCorrect:!1},{text:`Right to sell ${r} at $${l} if the stock goes down`,isCorrect:!1},{text:`Right to buy ${r} at $${a} anytime before expiration`,isCorrect:!1}],explanation:`When buying a call option on ${r}, you have the right (but not obligation) to buy the stock at the strike price of $${l}, even if the stock price rises significantly above this level. Your maximum loss is limited to the premium paid of $${g.toFixed(2)}.`},{id:2,question:`If ${r} is trading at $${a} now, when would the $${l} call option be considered in-the-money (ITM)?`,options:[{text:`When ${r} trades above $${l}`,isCorrect:!0},{text:`When ${r} trades below $${l}`,isCorrect:!1},{text:`When ${r} trades exactly at $${l}`,isCorrect:!1},{text:`When ${r} trades above $${p.toFixed(2)}`,isCorrect:!1}],explanation:`A call option is in-the-money when the stock price is above the strike price. For this ${r} option, any price above $${l} means the option has intrinsic value, though you need the price above $${p.toFixed(2)} to be profitable after considering the premium paid.`},{id:3,question:`Given the $${n} premium for this ${r} option, what's the break-even price at expiration?`,options:[{text:`$${p.toFixed(2)}`,isCorrect:!0},{text:`$${l}`,isCorrect:!1},{text:`$${a}`,isCorrect:!1},{text:`$${(l-u).toFixed(2)}`,isCorrect:!1}],explanation:`The break-even price for a call option at expiration is the strike price ($${l}) plus the premium paid per share ($${n}), which equals $${p.toFixed(2)}. At this price, the intrinsic value exactly equals the premium paid.`},{id:4,question:`If you sell a put option on ${r} with a $${l} strike price, what is your obligation?`,options:[{text:`To buy ${r} at $${l} if assigned, requiring $${(l*f).toFixed(2)} in cash`,isCorrect:!0},{text:`To sell ${r} at $${l} if the stock price rises`,isCorrect:!1},{text:`To pay the difference if ${r} falls below $${l}`,isCorrect:!1},{text:`To buy ${r} at the market price if assigned`,isCorrect:!1}],explanation:`When selling a put option on ${r}, you are obligated to buy 100 shares at the strike price ($${l}) if assigned, requiring $${(l*f).toFixed(2)} in cash. This is true regardless of how low the stock price might fall.`},{id:5,question:`For the ${r} option expiring on ${o}, what happens to the time value portion of the $${n} premium as we approach expiration?`,options:[{text:"Time value consistently decreases as expiration approaches",isCorrect:!0},{text:"Time value increases as expiration approaches",isCorrect:!1},{text:"Time value stays constant until expiration day",isCorrect:!1},{text:"Time value fluctuates randomly until expiration",isCorrect:!1}],explanation:`The time value portion of your $${n} premium will decay (decrease) as we approach the ${o} expiration, with the decay accelerating in the final weeks. At expiration, only intrinsic value (if any) remains.`},{id:6,question:`If implied volatility increases after you buy the ${r} $${l} call option for $${n}, what typically happens to the option's price?`,options:[{text:"The option's price typically increases",isCorrect:!0},{text:"The option's price typically decreases",isCorrect:!1},{text:"The option's price remains unchanged",isCorrect:!1},{text:"The option's intrinsic value changes",isCorrect:!1}],explanation:`An increase in implied volatility typically increases the option's price, assuming all other factors remain constant. This would increase the time value portion of your ${r} option above the initial $${n} premium paid.`},{id:7,question:`What is the maximum possible loss when buying this ${r} call option with $${l} strike price?`,options:[{text:`$${g.toFixed(2)} (the total premium paid)`,isCorrect:!0},{text:`$${(l*f).toFixed(2)} (the strike price value)`,isCorrect:!1},{text:`$${(a*f).toFixed(2)} (the current stock value)`,isCorrect:!1},{text:"Unlimited loss potential",isCorrect:!1}],explanation:`When buying this call option on ${r}, your maximum loss is limited to the total premium paid of $${g.toFixed(2)} ($${n}  100 shares). This occurs if the stock is below $${l} at expiration.`},{id:8,question:`On ${o}, ${r} closed at $${i}. What term describes the $${l} call option's status?`,options:[{text:d>l?"In-the-money (ITM)":d<l?"Out-of-the-money (OTM)":"At-the-money (ATM)",isCorrect:!0},{text:d>l?"Out-of-the-money (OTM)":"In-the-money (ITM)",isCorrect:!1},{text:"Equal-to-the-money",isCorrect:!1},{text:d>p?"Profitable":"Unprofitable",isCorrect:!1}],explanation:`With ${r} closing at $${i} and the strike at $${l}, the option was ${d>l?"in-the-money by $"+(d-l).toFixed(2)+" per share":d<l?"out-of-the-money by $"+(l-d).toFixed(2)+" per share":"exactly at-the-money"}.`},{id:9,question:`From ${s} to ${o}, ${r} moved from $${a} to $${i}. What was the better choice?`,options:[{text:(()=>{const E=(d-a)*f,w=d>l?(d-l-u)*f:-g;return Math.abs(E)<Math.abs(w)||E>w?`Buying the stock directly (${E>=0?"profit":"loss"}: $${Math.abs(E).toFixed(2)})`:`Buying the call option (${w>=0?"profit":"loss"}: $${Math.abs(w).toFixed(2)})`})(),isCorrect:!0},{text:(()=>{const E=(d-a)*f,w=d>l?(d-l-u)*f:-g;return Math.abs(E)<Math.abs(w)||E>w?`Buying the call option (${w>=0?"profit":"loss"}: $${Math.abs(w).toFixed(2)})`:`Buying the stock directly (${E>=0?"profit":"loss"}: $${Math.abs(E).toFixed(2)})`})(),isCorrect:!1},{text:"Neither - staying in cash",isCorrect:!1},{text:"Both would have the same profit",isCorrect:!1}],explanation:`With ${r} moving from $${a} to $${i}:
    Stock P/L: ${(d-a)*f>=0?"Profit":"Loss"} of $${Math.abs((d-a)*f).toFixed(2)}
    Option P/L: ${d>l?`Profit of $${((d-l-u)*f).toFixed(2)}`:`Loss of $${g.toFixed(2)}`}
    
    In this case, ${Math.abs((d-a)*f)<Math.abs(d>l?(d-l-u)*f:-g)?"the stock position":"the options position"} had a smaller loss, making it the better choice.`},{id:10,question:`For your ${r} $${l} call option trading at $${u}, which statement best describes the impact of time value?`,options:[{text:l>a?`Since the option is out-of-the-money by $${(l-a).toFixed(2)}, time value represents 100% of the premium`:`With the option in-the-money by $${(a-l).toFixed(2)}, part of the premium is intrinsic value`,isCorrect:!0},{text:l>a?`The option has equal parts of time value and intrinsic value at $${(u/2).toFixed(2)} each`:"Time value and intrinsic value are always equal for in-the-money options",isCorrect:!1},{text:`Time value doesn't matter since expiration is ${Math.round((new Date(o)-new Date(s))/(1e3*60*60*24))} days away`,isCorrect:!1},{text:`Time value is only relevant if the stock price exceeds $${(a*1.1).toFixed(2)}`,isCorrect:!1}],explanation:l>a?`With ${r} at $${a} and the strike at $${l}, this call option is out-of-the-money. The entire premium of $${u} is time value, which will decay as expiration approaches. If the stock doesn't rise above $${l} by expiration, all time value will be lost.`:`With ${r} at $${a} and the strike at $${l}, this call has intrinsic value of $${(a-l).toFixed(2)} and time value of $${(u-(a-l)).toFixed(2)}. While intrinsic value remains as long as the stock stays above the strike, time value will decay to zero by expiration.`}]},NV=(t,e,n,r,i,o,s)=>(console.log("Generating questions with:",{stockPrice:t,strikePrice:e,premium:n,symbol:r,futurePrice:i,expirationDate:o,selectedDate:s}),$V(t,e,n,r,i,o,s).map(l=>{const u=ai(l.options),d=u.findIndex(p=>p.isCorrect);return{id:l.id,question:l.question,options:u.map(p=>p.text),correctAnswer:d,explanation:l.explanation}})),FV=(t,e,n,r,i,o,s)=>{const a=parseFloat(t),l=parseFloat(e),u=a*.9,d=parseFloat(n),p=parseFloat(n)*.8,f=parseFloat(i),g=p-d,E=l-a-g,w=a-u+g;return[{id:1,question:`You establish a collar on ${r} at $${a.toFixed(2)} by buying a put at $${u.toFixed(2)} and selling a call at $${l.toFixed(2)}. What's your maximum possible profit?`,options:[{text:`$${E.toFixed(2)}`,isCorrect:!0},{text:`$${(l-a).toFixed(2)}`,isCorrect:!1},{text:"Unlimited profit",isCorrect:!1},{text:`$${(u-a).toFixed(2)}`,isCorrect:!1}],explanation:`The maximum profit is limited to the call strike ($${l.toFixed(2)}) minus current stock price ($${a.toFixed(2)}) minus the net debit ($${g.toFixed(2)}) = $${E.toFixed(2)}`},{id:2,question:`For your ${r} collar, what is your maximum potential loss?`,options:[{text:`$${w.toFixed(2)}`,isCorrect:!0},{text:"Unlimited loss",isCorrect:!1},{text:`$${(a-u).toFixed(2)}`,isCorrect:!1},{text:`$${p.toFixed(2)}`,isCorrect:!1}],explanation:`The maximum loss is limited to the current stock price ($${a.toFixed(2)}) minus put strike ($${u.toFixed(2)}) plus the net debit ($${g.toFixed(2)}) = $${w.toFixed(2)}`},{id:3,question:`On ${r}, you paid $${p.toFixed(2)} for the put and received $${d.toFixed(2)} for the call. What was the net cost of establishing this collar?`,options:[{text:`Net debit of $${g.toFixed(2)}`,isCorrect:!0},{text:`Net credit of $${(d-p).toFixed(2)}`,isCorrect:!1},{text:`$${(p+d).toFixed(2)}`,isCorrect:!1},{text:"$0 (Zero-cost collar)",isCorrect:!1}],explanation:`The net cost is the put premium paid ($${p.toFixed(2)}) minus the call premium received ($${d.toFixed(2)}) = Net debit of $${g.toFixed(2)}`},{id:4,question:`At expiration, ${r} is at $${f.toFixed(2)}. What happened to your position?`,options:[{text:f>l?`Stock was called away at $${l.toFixed(2)}`:f<u?`Put protection kicked in at $${u.toFixed(2)}`:"Stock was retained, both options expired worthless",isCorrect:!0},{text:"You must sell the stock at market price",isCorrect:!1},{text:"You must buy more stock",isCorrect:!1},{text:"You lost both the stock and the premium",isCorrect:!1}],explanation:f>l?`Since the stock price ($${f.toFixed(2)}) exceeded the call strike ($${l.toFixed(2)}), your stock was called away at the strike price`:f<u?`Since the stock price ($${f.toFixed(2)}) fell below the put strike ($${u.toFixed(2)}), your put protection limited your losses`:`The stock price ($${f.toFixed(2)}) stayed between your put strike ($${u.toFixed(2)}) and call strike ($${l.toFixed(2)}), so both options expired worthless`},{id:5,question:`What is your profit/loss on ${r} at the current price of $${f.toFixed(2)}?`,options:[{text:`$${(f>l?E:f<u?-w:f-a-g).toFixed(2)}`,isCorrect:!0},{text:`$${(f-a).toFixed(2)}`,isCorrect:!1},{text:`$${(u-a).toFixed(2)}`,isCorrect:!1},{text:`$${g.toFixed(2)}`,isCorrect:!1}],explanation:f>l?`Stock was called away, resulting in maximum profit of $${E.toFixed(2)}`:f<u?`Put protection limited your loss to $${w.toFixed(2)}`:`Stock price movement ($${(f-a).toFixed(2)}) minus net debit ($${g.toFixed(2)}) = $${(f-a-g).toFixed(2)}`},{id:6,question:`If ${r} drops by 15% to $${(a*.85).toFixed(2)}, how does your collar compare to just owning the stock?`,options:[{text:`Collar limits loss to $${w.toFixed(2)} vs stock loss of $${(a*.15).toFixed(2)}`,isCorrect:!0},{text:"Both strategies lose the same amount",isCorrect:!1},{text:"Collar loses more due to premium paid",isCorrect:!1},{text:"Cannot be determined",isCorrect:!1}],explanation:`With just stock ownership, a 15% drop means a loss of $${(a*.15).toFixed(2)}. The collar's put strike at $${u.toFixed(2)} limits your loss to $${w.toFixed(2)}`}]},LV=(t,e,n,r,i,o,s)=>(console.log("Generating Collar Strategy questions with:",{stockPrice:t,strikePrice:e,premium:n,symbol:r,futurePrice:i,expirationDate:o,selectedDate:s}),FV(t,e,n,r,i).map(l=>{const u=ai(l.options),d=u.findIndex(p=>p.isCorrect);return{id:l.id,question:l.question,options:u.map(p=>p.text),correctAnswer:d,explanation:l.explanation}})),OV=(t,e,n,r,i,o,s)=>{const a=parseFloat(t),l=parseFloat(e),u=parseFloat(n),d=parseFloat(i),p=l-u,f=u*100,g=a*.9,E=l*100;return[{id:1,question:`You sold a cash secured put on ${r} with strike $${l} for $${u} premium. What is your break-even price?`,options:[{text:`$${p.toFixed(2)}`,isCorrect:!0},{text:`$${l.toFixed(2)}`,isCorrect:!1},{text:`$${(l+u).toFixed(2)}`,isCorrect:!1},{text:`$${a.toFixed(2)}`,isCorrect:!1}],explanation:`Break-even = Strike Price - Premium = $${l.toFixed(2)} - $${u.toFixed(2)} = $${p.toFixed(2)}. This is the price below which you start losing money if assigned.`},{id:2,question:`How much cash must you have secured for this ${r} put option?`,options:[{text:`$${E.toFixed(2)}`,isCorrect:!0},{text:`$${(E-f).toFixed(2)}`,isCorrect:!1},{text:`$${(a*100).toFixed(2)}`,isCorrect:!1},{text:`$${f.toFixed(2)}`,isCorrect:!1}],explanation:`You must secure $${E.toFixed(2)} (Strike Price  100 shares) to cover potential assignment, regardless of the premium received.`},{id:3,question:`If ${r} drops to $${g.toFixed(2)} halfway to expiration, what's your unrealized loss if assigned?`,options:[{text:`$${((l-g-u)*100).toFixed(2)}`,isCorrect:!0},{text:`$${((l-g)*100).toFixed(2)}`,isCorrect:!1},{text:`$${f.toFixed(2)}`,isCorrect:!1},{text:`$${((a-g)*100).toFixed(2)}`,isCorrect:!1}],explanation:`Your loss would be: (Strike Price - Current Price - Premium)  100 = ($${l.toFixed(2)} - $${g.toFixed(2)} - $${u.toFixed(2)})  100 = $${((l-g-u)*100).toFixed(2)}.`},{id:4,question:`${r} is now at $${g.toFixed(2)}. Should you consider closing the position early?`,options:[{text:"Yes, to avoid potential further losses if stock continues dropping",isCorrect:!0},{text:"No, always hold until expiration to keep full premium",isCorrect:!1},{text:"No, the loss is just on paper",isCorrect:!1},{text:"Yes, and sell another put at a lower strike",isCorrect:!1}],explanation:"With the stock below your strike price, closing early can prevent larger losses if the stock continues to fall. Managing risk is often more important than maximizing premium."},{id:5,question:`What's your maximum potential gain on this ${r} cash secured put?`,options:[{text:`$${f.toFixed(2)}`,isCorrect:!0},{text:`$${E.toFixed(2)}`,isCorrect:!1},{text:`$${(l*100).toFixed(2)}`,isCorrect:!1},{text:"Unlimited gain",isCorrect:!1}],explanation:`Maximum gain is limited to the premium received: $${u.toFixed(2)}  100 shares = $${f.toFixed(2)}. This occurs if the stock stays above the strike price.`},{id:6,question:`If ${r} expires at $${d.toFixed(2)}, will you be assigned shares?`,options:[{text:`Yes, you'll buy 100 shares at $${l.toFixed(2)} per share`,isCorrect:d<l},{text:"No, you keep the premium and avoid assignment",isCorrect:d>=l},{text:"Maybe, it depends on the buyer's decision",isCorrect:!1},{text:"No, you can choose to decline assignment",isCorrect:!1}],explanation:d<l?`Since $${d.toFixed(2)} is below the strike price of $${l.toFixed(2)}, you'll be assigned and must buy 100 shares at the strike price.`:`Since $${d.toFixed(2)} is above the strike price of $${l.toFixed(2)}, the put expires worthless and you keep the full premium.`},{id:7,question:`What's your return on investment (ROI) if ${r} stays above $${l.toFixed(2)} until expiration?`,options:[{text:`${(f/E*100).toFixed(2)}%`,isCorrect:!0},{text:`${(f/(a*100)*100).toFixed(2)}%`,isCorrect:!1},{text:`${(u/l*100).toFixed(2)}%`,isCorrect:!1},{text:"100%",isCorrect:!1}],explanation:`ROI = (Premium / Cash Secured)  100 = ($${f.toFixed(2)} / $${E.toFixed(2)})  100 = ${(f/E*100).toFixed(2)}%. This represents return on the cash you must set aside.`},{id:8,question:`If ${r} drops significantly below your put strike of $${l.toFixed(2)}, which action might be best?`,options:[{text:"Close the position and preserve capital",isCorrect:!0},{text:"Wait for assignment no matter what",isCorrect:!1},{text:"Sell another put at a lower strike",isCorrect:!1},{text:"Buy shares at market price",isCorrect:!1}],explanation:"When a stock drops significantly below your put strike, closing the position can prevent larger losses and free up capital for better opportunities. The premium received doesn't justify holding a losing position indefinitely."},{id:9,question:`How does your cost basis compare to the current market price if ${r} gets assigned at $${l.toFixed(2)}?`,options:[{text:`$${p.toFixed(2)} vs market price of $${d.toFixed(2)}`,isCorrect:!0},{text:`$${l.toFixed(2)} vs market price of $${d.toFixed(2)}`,isCorrect:!1},{text:`$${a.toFixed(2)} vs market price of $${d.toFixed(2)}`,isCorrect:!1},{text:`$${(l+u).toFixed(2)} vs market price of $${d.toFixed(2)}`,isCorrect:!1}],explanation:`Your effective cost basis is the strike price minus the premium received ($${p.toFixed(2)}). This is what you compare to the market price to determine your position's profit or loss.`},{id:10,question:`What percentage of your cash secured amount ($${E.toFixed(2)}) are you risking if ${r} goes to zero?`,options:[{text:`${((l-u)/l*100).toFixed(2)}%`,isCorrect:!0},{text:"100%",isCorrect:!1},{text:`${(u/l*100).toFixed(2)}%`,isCorrect:!1},{text:"0%",isCorrect:!1}],explanation:`Maximum risk is strike price minus premium ($${(l-u).toFixed(2)} per share or $${((l-u)*100).toFixed(2)} total), which is ${((l-u)/l*100).toFixed(2)}% of your secured cash. The premium received slightly reduces your total risk.`}]},DV=(t,e,n,r,i,o,s)=>(console.log("Generating Cash Secured Put questions with:",{stockPrice:t,strikePrice:e,premium:n,symbol:r,futurePrice:i,expirationDate:o,selectedDate:s}),OV(t,e,n,r,i).map(l=>{const u=ai(l.options),d=u.findIndex(p=>p.isCorrect);return{id:l.id,question:l.question,options:u.map(p=>p.text),correctAnswer:d,explanation:l.explanation}})),MV=(t,e,n,r,i,o,s)=>{const a=parseFloat(t),l=parseFloat(e),u=parseFloat(n),d=parseFloat(i),p=(a-l+u)*100,f=a*.8,g=a*1.1;return[{id:1,question:`You own 100 shares of ${r} at $${a.toFixed(2)} and buy a protective put at strike $${l.toFixed(2)} for $${u.toFixed(2)}. What's your maximum possible loss per share?`,options:[{text:`$${(a-l+u).toFixed(2)}`,isCorrect:!0},{text:`$${a.toFixed(2)}`,isCorrect:!1},{text:`$${u.toFixed(2)}`,isCorrect:!1},{text:`$${l.toFixed(2)}`,isCorrect:!1}],explanation:`Your maximum loss is limited to the difference between your stock purchase price ($${a.toFixed(2)}) and the put strike price ($${l.toFixed(2)}), plus the premium paid ($${u.toFixed(2)}). This equals $${(a-l+u).toFixed(2)} per share.`},{id:2,question:`If ${r} crashes to $${f.toFixed(2)} (20% drop), how much protection does your protective put provide?`,options:[{text:`$${((l-f)*100).toFixed(2)}`,isCorrect:!0},{text:`$${((a-f)*100).toFixed(2)}`,isCorrect:!1},{text:`$${(u*100).toFixed(2)}`,isCorrect:!1},{text:"$0.00",isCorrect:!1}],explanation:`The protective put allows you to sell at $${l.toFixed(2)} even though the market price is $${f.toFixed(2)}. This provides protection of $${((l-f)*100).toFixed(2)} for your 100 shares, offsetting much of the stock's decline.`},{id:3,question:`If ${r} rises to $${g.toFixed(2)} (10% increase), what's your net profit considering the cost of protection?`,options:[{text:`$${((g-a)*100-u*100).toFixed(2)}`,isCorrect:!0},{text:`$${((g-a)*100).toFixed(2)}`,isCorrect:!1},{text:`$${((g-l)*100).toFixed(2)}`,isCorrect:!1},{text:`$${(u*100).toFixed(2)}`,isCorrect:!1}],explanation:`Your profit is the stock's gain ($${((g-a)*100).toFixed(2)}) minus the cost of the put protection ($${(u*100).toFixed(2)}), resulting in a net profit of $${((g-a)*100-u*100).toFixed(2)}.`},{id:4,question:`When would be the most cost-effective time to buy this protective put for ${r}?`,options:[{text:"After the stock has had a significant rally and you want to protect gains",isCorrect:!0},{text:"When the stock is at its lowest point",isCorrect:!1},{text:"Right before earnings announcement",isCorrect:!1},{text:"When the stock is trending downward",isCorrect:!1}],explanation:"It's often most psychologically and financially optimal to buy protective puts after a stock has rallied. This way, you're using some of your paper profits to protect against a downturn, rather than spending additional capital when the stock is already down."},{id:5,question:`Comparing a protective put to a stop-loss order for ${r}, which statement is most accurate?`,options:[{text:"A protective put provides guaranteed protection at a specific price but costs a premium",isCorrect:!0},{text:"A stop-loss order is always more effective in a crash",isCorrect:!1},{text:"A protective put and stop-loss provide identical protection",isCorrect:!1},{text:"A stop-loss is more expensive but more reliable",isCorrect:!1}],explanation:"While a stop-loss order is free, it might execute at a much lower price if the stock gaps down overnight. A protective put guarantees your exit price regardless of how quickly the stock falls, though you pay a premium for this insurance."},{id:6,question:`What happens to your protective put strategy on ${r} if implied volatility increases significantly?`,options:[{text:"The put option becomes more valuable, offsetting some of its time decay",isCorrect:!0},{text:"The strategy becomes less effective",isCorrect:!1},{text:"There is no effect on the protective put",isCorrect:!1},{text:"The maximum loss increases",isCorrect:!1}],explanation:"An increase in implied volatility will increase the value of your put option. This is beneficial as it can help offset the negative effect of time decay and potentially allow you to sell the put for a profit if you no longer need the protection."},{id:7,question:`By ${o}, ${r} is at $${i}. What was the outcome of your protective put strategy?`,options:[{text:d>a?`Profit of $${((d-a)*100-u*100).toFixed(2)}`:d<l?`Loss limited to $${p.toFixed(2)}`:`Loss of $${((a-d)*100+u*100).toFixed(2)}`,isCorrect:!0},{text:"Loss of entire investment",isCorrect:!1},{text:"Profit equal to put premium",isCorrect:!1},{text:"Break-even regardless of stock price",isCorrect:!1}],explanation:d>a?`The stock rose, giving you a profit of $${((d-a)*100).toFixed(2)} minus the put cost of $${(u*100).toFixed(2)}.`:d<l?`The stock fell below the put strike, but your loss was limited to $${p.toFixed(2)} thanks to the protective put.`:"The stock fell but not below the put strike. Your loss is the stock decline plus the put premium."},{id:8,question:`In what market conditions would this protective put strategy on ${r} be most valuable?`,options:[{text:"During high market uncertainty or ahead of major events",isCorrect:!0},{text:"In a steadily rising market",isCorrect:!1},{text:"During low volatility periods",isCorrect:!1},{text:"When the stock is trending downward",isCorrect:!1}],explanation:"Protective puts are most valuable during periods of high uncertainty or before major events (earnings, FDA decisions, etc.) where the stock could gap down significantly. They provide insurance against sudden, sharp declines that might bypass stop-loss orders."},{id:9,question:`What's the break-even point for your ${r} position including the protective put?`,options:[{text:`$${(a+u).toFixed(2)}`,isCorrect:!0},{text:`$${a.toFixed(2)}`,isCorrect:!1},{text:`$${l.toFixed(2)}`,isCorrect:!1},{text:`$${(l+u).toFixed(2)}`,isCorrect:!1}],explanation:`Your break-even point is your stock purchase price ($${a.toFixed(2)}) plus the cost of the put protection ($${u.toFixed(2)}), or $${(a+u).toFixed(2)}. The stock needs to rise by at least the cost of the put for you to profit.`},{id:10,question:`If you're worried about a potential market correction, which strike price selection would provide the best protection for ${r}?`,options:[{text:`At-the-money strike near $${a.toFixed(2)}`,isCorrect:!0},{text:`Deep out-of-the-money strike at $${(a*.7).toFixed(2)}`,isCorrect:!1},{text:`Deep in-the-money strike at $${(a*1.3).toFixed(2)}`,isCorrect:!1},{text:"Multiple strikes at different prices",isCorrect:!1}],explanation:"An at-the-money protective put provides the best balance of cost and protection. While it's more expensive than an OTM put, it starts protecting your position immediately if the stock falls. ITM puts provide immediate protection but are unnecessarily expensive."}]},VV=(t,e,n,r,i,o,s)=>(console.log("Generating Protective Put questions with:",{stockPrice:t,strikePrice:e,premium:n,symbol:r,futurePrice:i,expirationDate:o,selectedDate:s}),MV(t,e,n,r,i,o).map(l=>{const u=ai(l.options),d=u.findIndex(p=>p.isCorrect);return{id:l.id,question:l.question,options:u.map(p=>p.text),correctAnswer:d,explanation:l.explanation}})),jV=(t,e,n,r,i,o,s)=>{const a=parseFloat(t),l=parseFloat(e),u=parseFloat(n),d=parseFloat(i),p=l-u,f=u*100,g=a*1.1,E=a*.9;return[{id:1,question:`If ${r} falls to $${E.toFixed(2)} (10% decrease) before expiration, what would be your profit?`,options:[{text:`$${((l-E)*100-f).toFixed(2)}`,isCorrect:!0},{text:`$${f.toFixed(2)}`,isCorrect:!1},{text:`$${((l-E)*100).toFixed(2)}`,isCorrect:!1},{text:`$${((a-E)*100).toFixed(2)}`,isCorrect:!1}],explanation:`At $${E.toFixed(2)}, the profit is: (Strike Price - Stock Price)  100 shares - Premium Paid = ($${l.toFixed(2)} - $${E.toFixed(2)})  100 - $${f.toFixed(2)} = $${((l-E)*100-f).toFixed(2)}`},{id:2,question:`If ${r} rises to $${g.toFixed(2)} (10% increase), what is your maximum loss?`,options:[{text:`$${((g-a)*100).toFixed(2)}`,isCorrect:!1},{text:`$${f.toFixed(2)}`,isCorrect:!0},{text:`$${(a*100).toFixed(2)}`,isCorrect:!1},{text:`$${((g-l)*100).toFixed(2)}`,isCorrect:!1}],explanation:`With a long put option, your maximum loss is limited to the premium paid ($${f.toFixed(2)}), no matter how high the stock price goes.`},{id:3,question:`For your ${r} put option, what is the break-even stock price at expiration?`,options:[{text:`$${a.toFixed(2)} (Current Price)`,isCorrect:!1},{text:`$${l.toFixed(2)} (Strike Price)`,isCorrect:!1},{text:`$${p.toFixed(2)} (Strike - Premium)`,isCorrect:!0},{text:`$${(l+u).toFixed(2)}`,isCorrect:!1}],explanation:`Break-even price at expiration = Strike Price - Premium per share = $${l.toFixed(2)} - $${u.toFixed(2)} = $${p.toFixed(2)}`},{id:4,question:`How does time decay (theta) affect your long put position in ${r}?`,options:[{text:"Time decay helps the position by increasing the put's value",isCorrect:!1},{text:"Time decay hurts the position by reducing the put's value",isCorrect:!0},{text:"Time decay has no effect on the position",isCorrect:!1},{text:"Time decay only affects in-the-money puts",isCorrect:!1}],explanation:"Time decay (theta) is your enemy when buying options. Each day that passes, your put option loses some time value, assuming all other factors remain constant."},{id:5,question:`On ${o}, ${r} closed at $${i}. What was your actual profit/loss on this trade?`,options:[{text:`$${((d<l?(l-d)*100:0)-f).toFixed(2)}`,isCorrect:!0},{text:`$${((a-d)*100).toFixed(2)}`,isCorrect:!1},{text:`$${((l-d)*100).toFixed(2)}`,isCorrect:!1},{text:`$${f.toFixed(2)}`,isCorrect:!1}],explanation:d<l?`The stock closed below the strike price, so your profit is: (Strike Price - Final Price)  100 - Premium = ($${l.toFixed(2)} - $${d.toFixed(2)})  100 - $${f.toFixed(2)} = $${((l-d)*100-f).toFixed(2)}`:`The stock closed above the strike price, so the option expired worthless. Your loss is the premium paid: $${f.toFixed(2)}`},{id:6,question:`What's the maximum profit potential for your ${r} long put position?`,options:[{text:`$${f.toFixed(2)}`,isCorrect:!1},{text:`$${(l*100).toFixed(2)}`,isCorrect:!1},{text:`$${(l*100-f).toFixed(2)}`,isCorrect:!0},{text:"Unlimited profit potential",isCorrect:!1}],explanation:`The maximum profit occurs if the stock goes to $0. At that point, you can sell shares at the strike price ($${l.toFixed(2)}) that cost $0, for a profit of (Strike Price  100) - Premium = $${(l*100-f).toFixed(2)}`},{id:7,question:`How would an increase in implied volatility affect your ${r} put option?`,options:[{text:"It would increase the put's value",isCorrect:!0},{text:"It would decrease the put's value",isCorrect:!1},{text:"It would have no effect on the put's value",isCorrect:!1},{text:"It only affects call options",isCorrect:!1}],explanation:"Higher implied volatility increases option premiums for both calls and puts. As a put buyer, you benefit from increased volatility as it raises the value of your option."},{id:8,question:`If ${r} trades sideways and stays at $${a.toFixed(2)} until expiration, what happens to your put option?`,options:[{text:"You break even",isCorrect:!1},{text:`You lose the entire premium of $${f.toFixed(2)}`,isCorrect:a>=l},{text:"You make a partial profit",isCorrect:a<l},{text:"The option extends to the next expiration",isCorrect:!1}],explanation:a>=l?`If the stock stays at $${a.toFixed(2)}, which is above the strike price of $${l.toFixed(2)}, your put expires worthless and you lose the entire premium paid ($${f.toFixed(2)})`:`If the stock stays at $${a.toFixed(2)}, which is below the strike price of $${l.toFixed(2)}, you'll make a partial profit of $${((l-a)*100-f).toFixed(2)}`},{id:9,question:`How does your ${r} put compare to shorting 100 shares at $${a.toFixed(2)}?`,options:[{text:"The put has limited risk while shorting has unlimited risk",isCorrect:!0},{text:"Shorting has limited risk while the put has unlimited risk",isCorrect:!1},{text:"Both strategies have the same risk profile",isCorrect:!1},{text:"Both strategies have unlimited risk",isCorrect:!1}],explanation:`A long put limits your risk to the premium paid ($${f.toFixed(2)}), while shorting stock exposes you to unlimited risk if the stock price rises.`},{id:10,question:`What's the best scenario for your ${r} put option?`,options:[{text:"Stock price rises significantly",isCorrect:!1},{text:"Stock price stays at current level",isCorrect:!1},{text:"Stock price falls significantly below break-even",isCorrect:!0},{text:"Stock price stays above strike price",isCorrect:!1}],explanation:`The best scenario is a significant drop in stock price below your break-even of $${p.toFixed(2)}. This maximizes your profit potential while your risk remains limited to the premium paid.`}]},UV=(t,e,n,r,i,o,s)=>(console.log("Generating Long Put questions with:",{stockPrice:t,strikePrice:e,premium:n,symbol:r,futurePrice:i,expirationDate:o,selectedDate:s}),jV(t,e,n,r,i,o).map(l=>{const u=ai(l.options),d=u.findIndex(p=>p.isCorrect);return{id:l.id,question:l.question,options:u.map(p=>p.text),correctAnswer:d,explanation:l.explanation}})),BV=(t,e,n,r,i,o,s)=>{const a=parseFloat(t),l=parseFloat(e)*.95,u=parseFloat(e)*1.05,d=parseFloat(n)*1.2,p=parseFloat(n)*.8,f=parseFloat(i),g=d-p,E=u-l-g,w=l+g;return[{id:1,question:`You set up a call spread on ${r} by buying a call at strike $${l.toFixed(2)} for $${d.toFixed(2)} and selling a call at strike $${u.toFixed(2)} for $${p.toFixed(2)}. What's your net debit?`,options:[{text:`$${g.toFixed(2)}`,isCorrect:!0},{text:`$${(d+p).toFixed(2)}`,isCorrect:!1},{text:`$${p.toFixed(2)}`,isCorrect:!1},{text:`$${(u-l).toFixed(2)}`,isCorrect:!1}],explanation:`The net debit is the long call premium paid ($${d.toFixed(2)}) minus the short call premium received ($${p.toFixed(2)}) = $${g.toFixed(2)}`},{id:2,question:`What's your maximum potential profit on this ${r} call spread?`,options:[{text:`$${E.toFixed(2)}`,isCorrect:!0},{text:`$${(u-l).toFixed(2)}`,isCorrect:!1},{text:"Unlimited profit",isCorrect:!1},{text:`$${(u-a).toFixed(2)}`,isCorrect:!1}],explanation:`Maximum profit is the difference between strikes ($${u.toFixed(2)} - $${l.toFixed(2)} = $${(u-l).toFixed(2)}) minus the net debit ($${g.toFixed(2)}) = $${E.toFixed(2)}`},{id:3,question:`What's your maximum potential loss on this ${r} call spread?`,options:[{text:`$${g.toFixed(2)}`,isCorrect:!0},{text:`$${d.toFixed(2)}`,isCorrect:!1},{text:`$${(u-l).toFixed(2)}`,isCorrect:!1},{text:"Unlimited loss",isCorrect:!1}],explanation:`The maximum loss is limited to the net debit paid ($${g.toFixed(2)}), which occurs if ${r} stays below the lower strike price of $${l.toFixed(2)}`},{id:4,question:`What's your break-even point at expiration for this ${r} call spread?`,options:[{text:`$${w.toFixed(2)}`,isCorrect:!0},{text:`$${l.toFixed(2)}`,isCorrect:!1},{text:`$${u.toFixed(2)}`,isCorrect:!1},{text:`$${a.toFixed(2)}`,isCorrect:!1}],explanation:`Break-even = Lower strike ($${l.toFixed(2)}) + Net debit ($${g.toFixed(2)}) = $${w.toFixed(2)}`},{id:5,question:`At expiration, ${r} is at $${f.toFixed(2)}. What is your profit/loss?`,options:[{text:`$${(f>=u?E:f<=l?-g:f-l-g).toFixed(2)}`,isCorrect:!0},{text:`$${(f-a).toFixed(2)}`,isCorrect:!1},{text:`$${(f-w).toFixed(2)}`,isCorrect:!1},{text:`$${(u-l).toFixed(2)}`,isCorrect:!1}],explanation:f>=u?`Stock is above upper strike ($${u.toFixed(2)}), resulting in maximum profit of $${E.toFixed(2)}`:f<=l?`Stock is below lower strike ($${l.toFixed(2)}), resulting in maximum loss of $${g.toFixed(2)}`:`Stock is between strikes, profit = Stock price - Lower strike - Net debit = $${(f-l-g).toFixed(2)}`},{id:6,question:`How does implied volatility affect your ${r} call spread when the stock is near the upper strike of $${u.toFixed(2)}?`,options:[{text:"A decrease in implied volatility is beneficial",isCorrect:!0},{text:"An increase in implied volatility is beneficial",isCorrect:!1},{text:"Implied volatility has no effect",isCorrect:!1},{text:"The effect depends on time to expiration",isCorrect:!1}],explanation:"When the stock is near the upper strike, a decrease in implied volatility helps because it decreases the value of the near-the-money option you sold faster than the in-the-money option you bought"},{id:7,question:`If ${r} rises to $${(u*1.2).toFixed(2)}, well above your upper strike, what's your regret cost compared to just buying a call?`,options:[{text:`$${((u*1.2-u)*100).toFixed(2)}`,isCorrect:!0},{text:"No regret cost, maximum profit achieved",isCorrect:!1},{text:`$${E.toFixed(2)}`,isCorrect:!1},{text:`$${g.toFixed(2)}`,isCorrect:!1}],explanation:`You missed out on $${((u*1.2-u)*100).toFixed(2)} of potential profit above your short strike, but remember you accepted this limited profit in exchange for reduced risk`},{id:8,question:`What happens to your ${r} position if the stock price stays flat at $${a.toFixed(2)} as time decay increases?`,options:[{text:"Both options lose value, net effect is minimal",isCorrect:!0},{text:"Position becomes more valuable",isCorrect:!1},{text:"You lose the entire net debit immediately",isCorrect:!1},{text:"Only the short call loses value",isCorrect:!1}],explanation:"Time decay affects both options, the one you bought and the one you sold, making the net effect relatively neutral when the stock price doesn't move significantly"},{id:9,question:`What's the ideal price target for your ${r} call spread at expiration?`,options:[{text:`$${u.toFixed(2)} or slightly higher`,isCorrect:!0},{text:`$${l.toFixed(2)}`,isCorrect:!1},{text:`$${w.toFixed(2)}`,isCorrect:!1},{text:`$${(u*1.2).toFixed(2)}`,isCorrect:!1}],explanation:`The ideal target is the upper strike ($${u.toFixed(2)}) or slightly above, as this gives you the maximum profit of $${E.toFixed(2)}`},{id:10,question:`For your ${r} call spread, how much capital is at risk compared to buying 100 shares?`,options:[{text:`$${g.toFixed(2)} vs $${(a*100).toFixed(2)}`,isCorrect:!0},{text:`$${d.toFixed(2)} vs $${(a*100).toFixed(2)}`,isCorrect:!1},{text:`$${(u-l).toFixed(2)} vs $${(a*100).toFixed(2)}`,isCorrect:!1},{text:"Same risk for both strategies",isCorrect:!1}],explanation:`The call spread risks only the net debit ($${g.toFixed(2)}), while buying 100 shares would risk $${(a*100).toFixed(2)}, showing the spread's capital efficiency`}]},zV=(t,e,n,r,i,o,s)=>(console.log("Generating Call Spread questions with:",{stockPrice:t,strikePrice:e,premium:n,symbol:r,futurePrice:i,expirationDate:o,selectedDate:s}),BV(t,e,n,r,i).map(l=>{const u=ai(l.options),d=u.findIndex(p=>p.isCorrect);return{id:l.id,question:l.question,options:u.map(p=>p.text),correctAnswer:d,explanation:l.explanation}})),WV=({stockPrice:t,strikePrice:e,premium:n,symbol:r,futurePrice:i,expirationDate:o,selectedDate:s,strategy:a})=>{const{user:l}=cs(),[u,d]=x.useState(0),[p,f]=x.useState(!1),[g,E]=x.useState(null),[w,A]=x.useState(0);x.useEffect(()=>{console.log("ConceptQuiz received props:",{stockPrice:t,strikePrice:e,premium:n,symbol:r,futurePrice:i,expirationDate:o,selectedDate:s})},[t,e,n,r,i,o,s]);const _=x.useMemo(()=>{console.log("Generating questions with props:",{stockPrice:t,strikePrice:e,premium:n,symbol:r,futurePrice:i,expirationDate:o,selectedDate:s});const S=!!(t&&e&&n&&r&&i&&o&&s);if(console.log("All props available:",S),S)switch(console.log("All props available: ",S),a){case H.LONG_CALL:return console.log("Selecting generate Long Call"),kV(t,e,n,r,i,o,s);case H.COVERED_CALL:return console.log("Selecting Covered Call"),bV(t,e,n,r,i,o,s);case H.OPTIONS_THEORY:return console.log("Selecting Options Theory"),NV(t,e,n,r,i,o,s);case H.COLLAR_STRATEGY:return console.log("Selecting Collar Strategy"),LV(t,e,n,r,i,o,s);case H.CASH_SECURED_PUT:return console.log("Selecting Cash Secured Put"),DV(t,e,n,r,i,o,s);case H.PROTECTIVE_PUT:return console.log("Selecting Protectivated Put"),VV(t,e,n,r,i,o,s);case H.LONG_PUT:return console.log("Selecting Long Put"),UV(t,e,n,r,i,o,s);case H.LONG_CALL_SPREAD:return console.log("Selecting Long Call Spread"),zV(t,e,n,r,i,o,s);default:return[]}return[]},[t,e,n,r,i,o,s,a]);x.useEffect(()=>{console.log("Questions array updated:",_)},[_]);const y=S=>{E(S),f(!0),S===_[u].correctAnswer&&A(w+1)},C=()=>{u<_.length-1&&(d(u+1),E(null),f(!1))},b=async()=>{if(l)try{await AV(l.uid,w,_.length,r,s)}catch(S){console.error("Error saving score:",S)}},F=()=>{d(0),E(null),f(!1),A(0)};if(x.useEffect(()=>{u===_.length-1&&p&&b()},[u,p,_.length]),_.length===0)return console.log("Rendering empty state - no questions available"),v.jsx("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:v.jsx("p",{children:"Generate a question to see practical scenarios based on real market data."})});console.log("Rendering question:",u);const O=_[u];return v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("h3",{className:"text-lg font-semibold",children:"Practice Scenarios"}),v.jsxs("span",{className:"text-sm text-blue-600",children:["Score: ",w,"/",_.length]})]}),v.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[v.jsx("p",{className:"font-medium mb-4",children:O.question}),v.jsx("div",{className:"space-y-2",children:O.options.map((S,T)=>v.jsx("button",{onClick:()=>y(T),disabled:p,className:`w-full p-3 text-left rounded ${p?T===O.correctAnswer?"bg-green-100 border-green-500":T===g?"bg-red-100 border-red-500":"bg-gray-50":"bg-gray-50 hover:bg-blue-50"} border transition-colors`,children:S},T))}),p&&v.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded",children:v.jsx("p",{className:"text-sm",children:O.explanation})}),p&&v.jsx("div",{className:"mt-4 flex justify-end",children:u<_.length-1?v.jsx(Oi,{onClick:C,className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Next Question"}):v.jsx(Oi,{onClick:F,className:"bg-green-600 hover:bg-green-700 text-white",children:"Try New Scenarios"})})]})]})},ow=["MMM","AOS","ABT","ABBV","ACN","ATVI","ADM","ADBE","ADP","AAP","AES","AFL","A","APD","AKAM","ALK","ALB","ARE","ALGN","ALLE","LNT","ALL","GOOGL","GOOG","MO","AMZN","AMCR","AMD","AEE","AAL","AEP","AXP","AIG","AMT","AWK","AMP","ABC","AME","AMGN","APH","ADI","ANSS","AON","APA","AAPL","AMAT","APTV","ACGL","ANET","AJG","AIZ","T","ATO","ADSK","AZO","AVB","AVY","AXON","BKR","BALL","BAC","BBWI","BAX","BDX","WRB","BRK.B","BBY","BIO","TECH","BIIB","BLK","BK","BA","BKNG","BWA","BXP","BSX","BMY","AVGO","BR","BRO","BF.B","BG","CHRW","CDNS","CZR","CPT","CPB","COF","CAH","KMX","CCL","CARR","CTLT","CAT","CBOE","CBRE","CDW","CE","CNC","CNP","CDAY","CF","CRL","SCHW","CHTR","CVX","CMG","CB","CHD","CI","CINF","CTAS","CSCO","C","CFG","CLX","CME","CMS","KO","CTSH","CL","CMCSA","CMA","CAG","COP","ED","STZ","CEG","COO","CPRT","GLW","CTVA","CSGP","COST","CTRA","CCI","CSX","CMI","CVS","DHI","DHR","DRI","DVA","DE","DAL","XRAY","DVN","DXCM","FANG","DLR","DFS","DISH","DIS","DG","DLTR","D","DPZ","DOV","DOW","DTE","DUK","DD","DXC","EMN","ETN","EBAY","ECL","EIX","EW","EA","ELV","LLY","EMR","ENPH","ETR","EOG","EPAM","EQT","EFX","EQIX","EQR","ESS","EL","ETSY","RE","EVRG","ES","EXC","EXPE","EXPD","EXR","XOM","FFIV","FDS","FICO","FAST","FRT","FDX","FITB","FRC","FE","FIS","FISV","FLT","FMC","F","FTNT","FTV","FOXA","FOX","BEN","FCX","GRMN","IT","GEHC","GEN","GNRC","GD","GE","GIS","GM","GPC","GILD","GL","GPN","GS","HAL","HIG","HAS","HCA","PEAK","HSIC","HSY","HES","HPE","HLT","HOLX","HD","HON","HRL","HST","HWM","HPQ","HUM","HBAN","HII","IBM","IEX","IDXX","ITW","ILMN","INCY","IR","PODD","INTC","ICE","IFF","IP","IPG","INTU","ISRG","IVZ","INVH","IQV","IRM","JBHT","JKHY","J","JNJ","JCI","JPM","JNPR","K","KDP","KEY","KEYS","KMB","KIM","KMI","KLAC","KHC","KR","LHX","LH","LRCX","LW","LVS","LDOS","LEN","LNC","LIN","LYV","LKQ","LMT","L","LOW","LYB","MTB","MRO","MPC","MKTX","MAR","MMC","MLM","MAS","MA","MTCH","MKC","MCD","MCK","MDT","MRK","META","MET","MTD","MGM","MCHP","MU","MSFT","MAA","MRNA","MHK","MOH","TAP","MDLZ","MPWR","MNST","MCO","MS","MOS","MSI","MSCI","NDAQ","NTAP","NFLX","NWL","NEM","NWSA","NWS","NEE","NKE","NI","NDSN","NSC","NTRS","NOC","NCLH","NRG","NUE","NVDA","NVR","NXPI","ORLY","OXY","ODFL","OMC","ON","OKE","ORCL","OGN","OTIS","PCAR","PKG","PARA","PH","PAYX","PAYC","PYPL","PNR","PEP","PKI","PFE","PCG","PM","PSX","PNW","PXD","PNC","POOL","PPG","PPL","PFG","PG","PGR","PLD","PRU","PEG","PTC","PSA","PHM","QRVO","PWR","QCOM","DGX","RL","RJF","RTX","O","REG","REGN","RF","RSG","RMD","RHI","ROK","ROL","ROP","ROST","RCL","SPGI","CRM","SBAC","SLB","STX","SEE","SRE","NOW","SHW","SPG","SWKS","SJM","SNA","SEDG","SO","LUV","SWK","SBUX","STT","STLD","STE","SYK","SYF","SNPS","SYY","TMUS","TROW","TTWO","TPR","TRGP","TGT","TEL","TDY","TFX","TER","TSLA","TXN","TXT","TMO","TJX","TSCO","TT","TDG","TRV","TRMB","TFC","TYL","TSN","USB","UDR","ULTA","UNP","UAL","UPS","URI","UNH","UHS","VLO","VTR","VRSN","VRSK","VZ","VRTX","VFC","VTRS","VICI","V","VMC","WAB","WBA","WMT","WBD","WM","WAT","WEC","WFC","WELL","WST","WDC","WRK","WY","WHR","WMB","WTW","GWW","WYNN","XEL","XYL","YUM","ZBRA","ZBH","ZION","ZTS"],HV=()=>{const t=kx(),{user:e}=cs(),{setIsPremium:n}=Wm(),[r,i]=x.useState(null),[o,s]=x.useState(!1);return x.useEffect(()=>{(async()=>{if(console.log("SuccessPage: Starting payment success handling"),console.log("Current user:",e==null?void 0:e.uid),!e){console.error("No user found in SuccessPage"),i("User not found. Please try logging in again.");return}try{console.log("Updating subscription status in Firestore..."),await mL(e.uid,"active"),console.log("Setting premium status in context..."),await n(!0),console.log("Updating localStorage..."),localStorage.setItem(`premium_status_${e.uid}`,JSON.stringify({isPremium:!0,timestamp:Date.now()})),s(!0),console.log("All updates completed successfully"),setTimeout(()=>{console.log("Redirecting to home page..."),t("/")},3e3)}catch(l){console.error("Error in SuccessPage:",l),i(l.message||"Failed to update subscription status")}})()},[t,n,e]),v.jsx("div",{className:"min-h-screen bg-blue-50 flex items-center justify-center p-4",children:v.jsxs(ar,{className:"max-w-md w-full",children:[v.jsxs(Hi,{children:[v.jsx("div",{className:"flex items-center justify-center mb-4",children:r?v.jsx(vM,{className:"h-12 w-12 text-red-500"}):v.jsx(EM,{className:"h-12 w-12 text-green-500"})}),v.jsx(qi,{className:"text-center",children:r?"Update Failed":"Payment Successful!"})]}),v.jsx(lr,{className:"space-y-4",children:r?v.jsx(rl,{variant:"destructive",children:v.jsx(il,{children:r})}):v.jsxs(v.Fragment,{children:[v.jsx("p",{className:"text-center text-gray-600",children:"Thank you for upgrading to premium access. You now have access to all advanced options trading strategies."}),v.jsxs("p",{className:"text-sm text-center text-gray-500",children:[o?"Premium status updated successfully! ":"","Redirecting you back to the application in a few seconds..."]})]})})]})})},qV=({companyName:t})=>{var a;const[e,n]=x.useState(null),[r,i]=x.useState(!1),[o,s]=x.useState(null);return x.useEffect(()=>{(async()=>{if(t){i(!0),s(null);try{const u=`https://en.wikipedia.org/w/api.php?action=query&list=search&srsearch=${t} company&format=json&origin=*`,p=await(await fetch(u)).json();if(p.query.search.length===0)throw new Error("No Wikipedia page found for this company");const f=p.query.search[0].pageid,g=`https://en.wikipedia.org/w/api.php?action=query&prop=extracts&exintro&explaintext&pageids=${f}&format=json&origin=*`,A=(await(await fetch(g)).json()).query.pages[f];n({title:A.title,extract:A.extract})}catch(u){s(u.message)}finally{i(!1)}}})()},[t]),v.jsxs(ar,{className:"mt-4",children:[v.jsxs(Hi,{children:[v.jsx(qi,{children:"Company Information"}),v.jsx(ig,{children:"Data from Wikipedia"})]}),v.jsxs(lr,{children:[r&&v.jsx("div",{className:"text-gray-600",children:"Loading company information..."}),o&&v.jsxs(rl,{variant:"destructive",children:[v.jsx(mS,{className:"h-4 w-4"}),v.jsx(il,{children:o})]}),e&&v.jsxs("div",{className:"space-y-2",children:[v.jsx("h3",{className:"font-semibold text-lg",children:e.title}),v.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:(a=e.extract)==null?void 0:a.split(`
`)[0]}),v.jsx("a",{href:`https://en.wikipedia.org/wiki/${encodeURIComponent(e.title)}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-sm",children:"Read more on Wikipedia"})]})]})]})},GV=({symbol:t})=>{const e=x.useRef(null),n=x.useRef(null);if(x.useEffect(()=>{if(!t)return;n.current&&n.current.remove();const i=document.createElement("script");return i.src="https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js",i.type="text/javascript",i.async=!0,i.innerHTML=JSON.stringify({interval:"1W",width:"100%",isTransparent:!1,height:"400",symbol:`${t}`,showIntervalTabs:!0,displayMode:"single",locale:"en",colorTheme:"light"}),n.current=i,e.current&&e.current.appendChild(i),()=>{n.current&&n.current.remove()}},[t]),!t)return null;const r=`https://www.tradingview.com/symbols/${t}/`;return v.jsxs(ar,{className:"mt-4",children:[v.jsxs(Hi,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[v.jsx(qi,{className:"text-sm font-medium",children:"Technical Analysis"}),v.jsxs("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-800 flex items-center gap-1",children:["View on TradingView",v.jsx(SM,{className:"h-4 w-4"})]})]}),v.jsx(lr,{children:v.jsx("div",{className:"tradingview-widget-container",ref:e,children:v.jsx("div",{className:"tradingview-widget-container__widget"})})})]})},KV=({stockPrice:t,strikePrice:e,premium:n,companyDetails:r})=>{const i=s=>s?s>=1e6?`$${(s/1e6).toFixed(2)}T`:s>=1e3?`$${(s/1e3).toFixed(2)}B`:`$${s.toFixed(2)}M`:"N/A",o=s=>s?s>=1e3?`${(s/1e3).toFixed(2)}B shares`:`${s.toFixed(2)}M shares`:"N/A";return v.jsxs("div",{className:"space-y-4",children:[r&&v.jsx(ar,{className:"bg-white",children:v.jsxs(lr,{className:"pt-6",children:[v.jsxs("div",{className:"flex items-start space-x-4",children:[r.logo&&v.jsx("img",{src:r.logo,alt:`${r.name} logo`,className:"w-16 h-16 object-contain"}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-semibold",children:r.name}),v.jsx("p",{className:"text-sm text-gray-500",children:r.finnhubIndustry})]})]}),v.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mt-4",children:[v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx(xM,{className:"w-4 h-4 text-gray-500"}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Market Cap"}),v.jsx("p",{className:"font-medium",children:i(r.marketCapitalization)})]})]}),v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx(wM,{className:"w-4 h-4 text-gray-500"}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Shares Outstanding"}),v.jsx("p",{className:"font-medium",children:o(r.shareOutstanding)})]})]}),v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx(_M,{className:"w-4 h-4 text-gray-500"}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500",children:"IPO Date"}),v.jsx("p",{className:"font-medium",children:r.ipo||"N/A"})]})]})]})]})}),(r==null?void 0:r.name)&&v.jsx(qV,{companyName:r.name}),(r==null?void 0:r.ticker)&&v.jsx(GV,{symbol:r.ticker})]})},to=(t,e,n,r)=>{const i=parseFloat(e),o=parseFloat(n),s=parseFloat(r),a=s*1.2,l=s*.8,u=a-l;switch(t){case H.COVERED_CALL:return{amount:(i*100).toFixed(2),description:"(100 shares)"};case H.CASH_SECURED_PUT:return{amount:(o*100).toFixed(2),description:"(cash to buy 100 shares)"};case H.LONG_CALL:return{amount:(s*100).toFixed(2),description:"(premium for 1 contract)"};case H.PROTECTIVE_PUT:return{amount:(i*100+s*100).toFixed(2),description:"(100 shares + put premium)"};case H.COLLAR_STRATEGY:return{amount:(i*100).toFixed(2),description:"(100 shares)"};case H.LONG_PUT:return{amount:(s*100).toFixed(2),description:"(premium for 1 contract)"};case H.LONG_CALL_SPREAD:return{amount:(u*100).toFixed(2),description:"(net debit for long call spread)"};default:return{amount:"0.00",description:""}}},no=(t,e,n,r)=>{const i=parseFloat(r),o=i*.8,s=i*1.2,a=i*.8,l=s-a;switch(t){case H.COVERED_CALL:return{amount:(i*100).toFixed(2),description:"premium received"};case H.CASH_SECURED_PUT:return{amount:(i*100).toFixed(2),description:"premium received"};case H.LONG_CALL:return{amount:(i*100).toFixed(2),description:"premium paid"};case H.PROTECTIVE_PUT:return{amount:(i*100).toFixed(2),description:"premium paid"};case H.COLLAR_STRATEGY:const u=o-i;return{amount:Math.abs(u*100).toFixed(2),description:u>0?"net debit paid":"net credit received"};case H.LONG_PUT:return{amount:(i*100).toFixed(2),description:"premium paid"};case H.LONG_CALL_SPREAD:return{amount:(l*100).toFixed(2),description:"net debit paid"};default:return{amount:"0.00",description:""}}},QV=({symbol:t})=>{const e=x.useRef(null),n=x.useRef(null);return x.useEffect(()=>{if(!t)return;n.current&&(n.current.remove(),n.current=null);const r=document.createElement("script");return r.type="text/javascript",r.src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js",r.async=!0,r.innerHTML=JSON.stringify({autosize:!0,symbol:`${t}`,timezone:"Etc/UTC",theme:"light",style:"2",locale:"en",hide_legend:!0,range:"1M",allow_symbol_change:!1,save_image:!1,calendar:!1,support_host:"https://www.tradingview.com"}),n.current=r,e.current&&e.current.appendChild(r),()=>{n.current&&(n.current.remove(),n.current=null)}},[t]),t?v.jsxs(ar,{className:"mt-4",children:[v.jsx(Hi,{children:v.jsxs(qi,{className:"text-sm font-medium",children:[t," Price Chart"]})}),v.jsx(lr,{children:v.jsx("div",{className:"w-full h-96",children:v.jsxs("div",{ref:e,className:"tradingview-widget-container w-full h-full",children:[v.jsx("div",{className:"tradingview-widget-container__widget",style:{height:"calc(100% - 32px)",width:"100%"}}),v.jsx("div",{className:"tradingview-widget-copyright",children:v.jsx("a",{href:"https://www.tradingview.com/",rel:"noopener nofollow",target:"_blank",className:"text-xs text-blue-600 hover:text-blue-800",children:"Track all markets on TradingView"})})]})})})]}):null},sw="ctff27hr01qi0nfd3lugctff27hr01qi0nfd3lv0",YV=()=>{cs();const{isPremium:t}=Wm(),e=()=>{const W=Math.floor(Math.random()*ow.length);return ow[W]},[n,r]=x.useState(H.OPTIONS_THEORY),[i,o]=x.useState(()=>e()),[s,a]=x.useState(!1),[l,u]=x.useState(""),[d,p]=x.useState(""),[f,g]=x.useState(""),[E,w]=x.useState({show:!1,correct:!1,message:""}),[A,_]=x.useState(""),[y,C]=x.useState(""),[b,F]=x.useState(null);x.useState("");const O=async W=>{try{const K=await(await fetch(`https://finnhub.io/api/v1/stock/profile2?symbol=${W}&token=${sw}`)).json();K&&F(K)}catch(ie){console.error("Error fetching company details:",ie)}},S=W=>![H.OPTIONS_THEORY,H.COVERED_CALL].includes(W),T=(W,ie)=>{let K=new Date(W),Y=0;for(;Y<ie;)K.setDate(K.getDate()+1),K.getDay()!==0&&K.getDay()!==6&&Y++;return K},R=(W,ie)=>{switch(ie){case H.LONG_CALL:return W*1.05;case H.COVERED_CALL:return W*1.08;case H.CASH_SECURED_PUT:return W*.92;case H.PROTECTIVE_PUT:return W*.9;case H.COLLAR_STRATEGY:return W*1.1;default:return W*1.1}},k=W=>{switch(W){case H.COVERED_CALL:return .004;case H.LONG_CALL:return .015;case H.CASH_SECURED_PUT:return .008;case H.PROTECTIVE_PUT:return .012;case H.COLLAR_STRATEGY:return .006;default:return .01}},$=async()=>{a(!0);try{console.log("Starting fetchStockData with:",{symbol:i}),await O(i);const W=T(new Date,10),K=await(await fetch(`https://finnhub.io/api/v1/quote?symbol=${i}&token=${sw}`)).json();if(console.log("Quote data:",K),K.c){const Y=K.c,M=-.05,Q=Math.random()*(.15-M)+M,ee=Y*(1+Q);console.log("Setting data with values:",{startingPrice:Y,randomChange:`${(Q*100).toFixed(2)}%`,futurePrice:ee}),u(Y.toFixed(2));const ue=R(Y,n);p(ue.toFixed(2));const we=k(n);return g((Y*we).toFixed(2)),C(ee.toFixed(2)),_(W.toISOString().split("T")[0]),console.log("Data set successfully:",{stockPrice:Y.toFixed(2),strikePrice:(Y*1.05).toFixed(2),premium:(Y*.03).toFixed(2),futurePrice:ee.toFixed(2),expirationDate:W.toISOString().split("T")[0]}),!0}else return console.log("Missing required data:",{hasCurrentPrice:!!K.c}),w({show:!0,correct:!1,message:"No data available for this symbol"}),!1}catch(W){return console.error("Error fetching data:",W),w({show:!0,correct:!1,message:"Error fetching stock data"}),!1}finally{a(!1)}},N=async()=>{if(!i){w({show:!0,correct:!1,message:"Please enter both symbol and date"});return}await $()&&w({show:!0,correct:!0,message:""})},P=()=>{if(S(n)&&!t)return v.jsx("div",{className:"mt-8",children:v.jsx(SV,{})});const W=l&&d&&f&&y&&A;return v.jsx("div",{className:"space-y-8",children:W&&v.jsx("div",{className:"border-t pt-8",children:v.jsx(WV,{stockPrice:l,strikePrice:d,premium:f,symbol:i,expirationDate:A,futurePrice:y,selectedDate:new Date().toISOString().split("T")[0],strategy:n})})})};return v.jsx("div",{className:"min-h-screen bg-blue-50 p-8",children:v.jsxs(ar,{className:"max-w-4xl mx-auto bg-white mb-8",children:[v.jsx(Hi,{children:v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsxs("div",{children:[v.jsx(qi,{className:"text-2xl font-bold text-blue-900",children:"Options Trading Guide"}),v.jsx(ig,{children:"Learn options trading concepts with interactive examples"})]}),v.jsx(hV,{})]})}),v.jsxs(lr,{className:"space-y-8",children:[v.jsx(cV,{selectedStrategy:n,onStrategyChange:r}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Options Analysis Tool"}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx(DS,{htmlFor:"symbol",children:"Stock Symbol"}),v.jsx(FS,{id:"symbol",placeholder:`Enter symbol (e.g., ${e()})`,value:i,onChange:W=>o(W.target.value.toUpperCase()),className:"bg-blue-50"})]}),v.jsx(Oi,{onClick:N,className:"w-full bg-blue-600 hover:bg-blue-700 text-white",disabled:s,children:s?v.jsxs("span",{className:"flex items-center",children:[v.jsx(yS,{className:"animate-spin mr-2"}),"Loading..."]}):"Analyze Stock"}),l&&d&&f&&(!S(n)||t)?v.jsx(KV,{stockPrice:l,strikePrice:d,premium:f,companyDetails:b}):null,E.show&&!E.correct&&v.jsxs(rl,{className:"bg-red-50",children:[v.jsx(mS,{className:"text-red-600"}),v.jsx(NS,{className:"text-red-800",children:"Error"}),v.jsx(il,{className:"whitespace-pre-line",children:E.message})]})]}),v.jsx("div",{className:"space-y-4",children:v.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[v.jsx("h4",{className:"font-medium mb-2",children:"Analysis"}),l&&d&&(!S(n)||t)?v.jsxs(v.Fragment,{children:[v.jsx(QV,{symbol:i}),v.jsx("div",{className:"mt-6",children:v.jsx(ar,{className:"bg-white",children:v.jsxs(lr,{className:"pt-6",children:[v.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Options Details"}),(()=>{const W=parseFloat(f)*1.2,ie=parseFloat(f)*.8,K=W-ie,Y=parseFloat(d)*.95,M=parseFloat(d)*1.05,z=M-Y-K,Q=K;switch(n){case H.LONG_CALL_SPREAD:return v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Current Stock Price"}),v.jsxs("p",{className:"font-medium",children:["$",l]})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Long Call Strike"}),v.jsxs("p",{className:"font-medium",children:["$",Y.toFixed(2)]})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Short Call Strike"}),v.jsxs("p",{className:"font-medium",children:["$",M.toFixed(2)]})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Long Call Premium (Paid)"}),v.jsxs("p",{className:"font-medium text-red-600",children:["-$",W.toFixed(2)," per share"]})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Short Call Premium (Received)"}),v.jsxs("p",{className:"font-medium text-green-600",children:["+$",ie.toFixed(2)," per share"]})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Net Debit"}),v.jsxs("p",{className:"font-medium text-red-600",children:["$",K.toFixed(2)," per share"]})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Maximum Profit"}),v.jsxs("p",{className:"font-medium",children:["$",z.toFixed(2)," per share"]})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Maximum Loss"}),v.jsxs("p",{className:"font-medium",children:["$",Q.toFixed(2)," per share"]})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Break-even Price"}),v.jsxs("p",{className:"font-medium",children:["$",(Y+K).toFixed(2)]})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Required Collateral"}),v.jsxs("p",{className:"font-medium",children:["$",to(n,l,d,f).amount,v.jsx("span",{className:"text-sm text-gray-500 ml-1",children:to(n,l,d,f).description})]})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Initial Investment"}),v.jsxs("p",{className:"font-medium text-red-600",children:["$",no(n,l,d,f).amount,v.jsx("span",{className:"text-sm text-gray-500 ml-1",children:no(n,l,d,f).description})]})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Trade Date"}),v.jsx("p",{className:"font-medium",children:new Date().toISOString().split("T")[0]})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Expiration Date"}),v.jsx("p",{className:"font-medium",children:A})]})]});case H.COLLAR_STRATEGY:return v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Current Stock Price"}),v.jsxs("p",{className:"font-medium",children:["$",l]})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Call Strike (Short)"}),v.jsxs("p",{className:"font-medium",children:["$",d]})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Put Strike (Long)"}),v.jsxs("p",{className:"font-medium",children:["$",(parseFloat(l)*.9).toFixed(2)]})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Call Premium (Received)"}),v.jsxs("p",{className:"font-medium text-green-600",children:["+$",f," per share"]})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Put Premium (Paid)"}),v.jsxs("p",{className:"font-medium text-red-600",children:["-$",(parseFloat(f)*.8).toFixed(2)," per share"]})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Net Debit/Credit"}),v.jsxs("p",{className:`font-medium ${parseFloat(f)*.2>0?"text-green-600":"text-red-600"}`,children:["$",(parseFloat(f)*.2).toFixed(2)," per share"]})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Maximum Profit"}),v.jsxs("p",{className:"font-medium",children:["$",(parseFloat(d)-parseFloat(l)+parseFloat(f)*.2).toFixed(2)," per share"]})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Maximum Loss"}),v.jsxs("p",{className:"font-medium",children:["$",(parseFloat(l)-parseFloat(l)*.9-parseFloat(f)*.2).toFixed(2)," per share"]})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Required Collateral"}),v.jsxs("p",{className:"font-medium",children:["$",to(n,l,d,f).amount,v.jsx("span",{className:"text-sm text-gray-500 ml-1",children:to(n,l,d,f).description})]})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Initial Cash Flow"}),v.jsxs("p",{className:`font-medium ${parseFloat(f)*.2>0?"text-green-600":"text-red-600"}`,children:["$",no(n,l,d,f).amount,v.jsx("span",{className:"text-sm text-gray-500 ml-1",children:no(n,l,d,f).description})]})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Trade Date"}),v.jsx("p",{className:"font-medium",children:new Date().toISOString().split("T")[0]})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Expiration Date"}),v.jsxs("p",{className:"font-medium",children:["$",A]})]})]});default:return v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Current Stock Price"}),v.jsxs("p",{className:"font-medium",children:["$",l]})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Strike Price"}),v.jsxs("p",{className:"font-medium",children:["$",d]})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Option Premium"}),v.jsxs("p",{className:"font-medium",children:["$",f," per share"]})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Total Cost"}),v.jsxs("p",{className:"font-medium",children:["$",(parseFloat(f)*100).toFixed(2)]})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Required Collateral"}),v.jsxs("p",{className:"font-medium",children:["$",to(n,l,d,f).amount,v.jsx("span",{className:"text-sm text-gray-500 ml-1",children:to(n,l,d,f).description})]})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Initial Cash Flow"}),v.jsxs("p",{className:`font-medium ${n===H.COVERED_CALL||n===H.CASH_SECURED_PUT?"text-green-600":"text-red-600"}`,children:[n===H.COVERED_CALL||n===H.CASH_SECURED_PUT?"+":"-","$",no(n,l,d,f).amount,v.jsx("span",{className:"text-sm text-gray-500 ml-1",children:no(n,l,d,f).description})]})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Trade Date"}),v.jsx("p",{className:"font-medium",children:new Date().toISOString().split("T")[0]})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Expiration Date"}),v.jsxs("p",{className:"font-medium",children:["$",A]})]})]})}})()]})})})]}):v.jsx("p",{className:"text-gray-500",children:"Select a stock symbol and date to see analysis"})]})})]})]}),P()]})]})})},XV=()=>v.jsx(fL,{children:v.jsx(gL,{children:v.jsxs(DR,{children:[v.jsx(yf,{path:"/",element:v.jsx(YV,{})}),v.jsx(yf,{path:"/success",element:v.jsx(HV,{})})]})})});Eh.createRoot(document.getElementById("root")).render(v.jsx(Mn.StrictMode,{children:v.jsx(ak,{children:v.jsx(XV,{})})}));
