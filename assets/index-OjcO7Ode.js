function h1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function ax(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var lx={exports:{}},yu={},cx={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Da=Symbol.for("react.element"),f1=Symbol.for("react.portal"),p1=Symbol.for("react.fragment"),m1=Symbol.for("react.strict_mode"),g1=Symbol.for("react.profiler"),y1=Symbol.for("react.provider"),v1=Symbol.for("react.context"),x1=Symbol.for("react.forward_ref"),w1=Symbol.for("react.suspense"),_1=Symbol.for("react.memo"),E1=Symbol.for("react.lazy"),ny=Symbol.iterator;function C1(t){return t===null||typeof t!="object"?null:(t=ny&&t[ny]||t["@@iterator"],typeof t=="function"?t:null)}var ux={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dx=Object.assign,hx={};function Jo(t,e,n){this.props=t,this.context=e,this.refs=hx,this.updater=n||ux}Jo.prototype.isReactComponent={};Jo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Jo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function fx(){}fx.prototype=Jo.prototype;function ep(t,e,n){this.props=t,this.context=e,this.refs=hx,this.updater=n||ux}var tp=ep.prototype=new fx;tp.constructor=ep;dx(tp,Jo.prototype);tp.isPureReactComponent=!0;var ry=Array.isArray,px=Object.prototype.hasOwnProperty,np={current:null},mx={key:!0,ref:!0,__self:!0,__source:!0};function gx(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)px.call(e,r)&&!mx.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Da,type:t,key:o,ref:s,props:i,_owner:np.current}}function S1(t,e){return{$$typeof:Da,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function rp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Da}function T1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var iy=/\/+/g;function Id(t,e){return typeof t=="object"&&t!==null&&t.key!=null?T1(""+t.key):e.toString(36)}function Jl(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Da:case f1:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+Id(s,0):r,ry(i)?(n="",t!=null&&(n=t.replace(iy,"$&/")+"/"),Jl(i,e,n,"",function(u){return u})):i!=null&&(rp(i)&&(i=S1(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(iy,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",ry(t))for(var a=0;a<t.length;a++){o=t[a];var l=r+Id(o,a);s+=Jl(o,e,n,l,i)}else if(l=C1(t),typeof l=="function")for(t=l.call(t),a=0;!(o=t.next()).done;)o=o.value,l=r+Id(o,a++),s+=Jl(o,e,n,l,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function _l(t,e,n){if(t==null)return t;var r=[],i=0;return Jl(t,r,"","",function(o){return e.call(n,o,i++)}),r}function I1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var It={current:null},Zl={transition:null},A1={ReactCurrentDispatcher:It,ReactCurrentBatchConfig:Zl,ReactCurrentOwner:np};function yx(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:_l,forEach:function(t,e,n){_l(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return _l(t,function(){e++}),e},toArray:function(t){return _l(t,function(e){return e})||[]},only:function(t){if(!rp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};le.Component=Jo;le.Fragment=p1;le.Profiler=g1;le.PureComponent=ep;le.StrictMode=m1;le.Suspense=w1;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A1;le.act=yx;le.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=dx({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=np.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)px.call(e,l)&&!mx.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Da,type:t.type,key:i,ref:o,props:r,_owner:s}};le.createContext=function(t){return t={$$typeof:v1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:y1,_context:t},t.Consumer=t};le.createElement=gx;le.createFactory=function(t){var e=gx.bind(null,t);return e.type=t,e};le.createRef=function(){return{current:null}};le.forwardRef=function(t){return{$$typeof:x1,render:t}};le.isValidElement=rp;le.lazy=function(t){return{$$typeof:E1,_payload:{_status:-1,_result:t},_init:I1}};le.memo=function(t,e){return{$$typeof:_1,type:t,compare:e===void 0?null:e}};le.startTransition=function(t){var e=Zl.transition;Zl.transition={};try{t()}finally{Zl.transition=e}};le.unstable_act=yx;le.useCallback=function(t,e){return It.current.useCallback(t,e)};le.useContext=function(t){return It.current.useContext(t)};le.useDebugValue=function(){};le.useDeferredValue=function(t){return It.current.useDeferredValue(t)};le.useEffect=function(t,e){return It.current.useEffect(t,e)};le.useId=function(){return It.current.useId()};le.useImperativeHandle=function(t,e,n){return It.current.useImperativeHandle(t,e,n)};le.useInsertionEffect=function(t,e){return It.current.useInsertionEffect(t,e)};le.useLayoutEffect=function(t,e){return It.current.useLayoutEffect(t,e)};le.useMemo=function(t,e){return It.current.useMemo(t,e)};le.useReducer=function(t,e,n){return It.current.useReducer(t,e,n)};le.useRef=function(t){return It.current.useRef(t)};le.useState=function(t){return It.current.useState(t)};le.useSyncExternalStore=function(t,e,n){return It.current.useSyncExternalStore(t,e,n)};le.useTransition=function(){return It.current.useTransition()};le.version="18.3.1";cx.exports=le;var _=cx.exports;const Bn=ax(_),k1=h1({__proto__:null,default:Bn},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P1=_,R1=Symbol.for("react.element"),$1=Symbol.for("react.fragment"),b1=Object.prototype.hasOwnProperty,N1=P1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,F1={key:!0,ref:!0,__self:!0,__source:!0};function vx(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)b1.call(e,r)&&!F1.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:R1,type:t,key:o,ref:s,props:i,_owner:N1.current}}yu.Fragment=$1;yu.jsx=vx;yu.jsxs=vx;lx.exports=yu;var m=lx.exports,Eh={},xx={exports:{}},Ht={},wx={exports:{}},_x={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,H){var Q=M.length;M.push(H);e:for(;0<Q;){var ee=Q-1>>>1,ae=M[ee];if(0<i(ae,H))M[ee]=H,M[Q]=ae,Q=ee;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var H=M[0],Q=M.pop();if(Q!==H){M[0]=Q;e:for(var ee=0,ae=M.length,fe=ae>>>1;ee<fe;){var Qe=2*(ee+1)-1,ut=M[Qe],et=Qe+1,X=M[et];if(0>i(ut,Q))et<ae&&0>i(X,ut)?(M[ee]=X,M[et]=Q,ee=et):(M[ee]=ut,M[Qe]=Q,ee=Qe);else if(et<ae&&0>i(X,Q))M[ee]=X,M[et]=Q,ee=et;else break e}}return H}function i(M,H){var Q=M.sortIndex-H.sortIndex;return Q!==0?Q:M.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],u=[],d=1,f=null,h=3,y=!1,E=!1,x=!1,T=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(M){for(var H=n(u);H!==null;){if(H.callback===null)r(u);else if(H.startTime<=M)r(u),H.sortIndex=H.expirationTime,e(l,H);else break;H=n(u)}}function $(M){if(x=!1,S(M),!E)if(n(l)!==null)E=!0,K(F);else{var H=n(u);H!==null&&Y($,H.startTime-M)}}function F(M,H){E=!1,x&&(x=!1,w(C),C=-1),y=!0;var Q=h;try{for(S(H),f=n(l);f!==null&&(!(f.expirationTime>H)||M&&!b());){var ee=f.callback;if(typeof ee=="function"){f.callback=null,h=f.priorityLevel;var ae=ee(f.expirationTime<=H);H=t.unstable_now(),typeof ae=="function"?f.callback=ae:f===n(l)&&r(l),S(H)}else r(l);f=n(l)}if(f!==null)var fe=!0;else{var Qe=n(u);Qe!==null&&Y($,Qe.startTime-H),fe=!1}return fe}finally{f=null,h=Q,y=!1}}var O=!1,I=null,C=-1,k=5,P=-1;function b(){return!(t.unstable_now()-P<k)}function N(){if(I!==null){var M=t.unstable_now();P=M;var H=!0;try{H=I(!0,M)}finally{H?R():(O=!1,I=null)}}else O=!1}var R;if(typeof v=="function")R=function(){v(N)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,ie=W.port2;W.port1.onmessage=N,R=function(){ie.postMessage(null)}}else R=function(){T(N,0)};function K(M){I=M,O||(O=!0,R())}function Y(M,H){C=T(function(){M(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){E||y||(E=!0,K(F))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(M){switch(h){case 1:case 2:case 3:var H=3;break;default:H=h}var Q=h;h=H;try{return M()}finally{h=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,H){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var Q=h;h=M;try{return H()}finally{h=Q}},t.unstable_scheduleCallback=function(M,H,Q){var ee=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ee+Q:ee):Q=ee,M){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=Q+ae,M={id:d++,callback:H,priorityLevel:M,startTime:Q,expirationTime:ae,sortIndex:-1},Q>ee?(M.sortIndex=Q,e(u,M),n(l)===null&&M===n(u)&&(x?(w(C),C=-1):x=!0,Y($,Q-ee))):(M.sortIndex=ae,e(l,M),E||y||(E=!0,K(F))),M},t.unstable_shouldYield=b,t.unstable_wrapCallback=function(M){var H=h;return function(){var Q=h;h=H;try{return M.apply(this,arguments)}finally{h=Q}}}})(_x);wx.exports=_x;var L1=wx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O1=_,Bt=L1;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ex=new Set,la={};function Vi(t,e){No(t,e),No(t+"Capture",e)}function No(t,e){for(la[t]=e,t=0;t<e.length;t++)Ex.add(e[t])}var er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ch=Object.prototype.hasOwnProperty,D1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,oy={},sy={};function M1(t){return Ch.call(sy,t)?!0:Ch.call(oy,t)?!1:D1.test(t)?sy[t]=!0:(oy[t]=!0,!1)}function V1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function j1(t,e,n,r){if(e===null||typeof e>"u"||V1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function At(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var at={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){at[t]=new At(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];at[e]=new At(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){at[t]=new At(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){at[t]=new At(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){at[t]=new At(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){at[t]=new At(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){at[t]=new At(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){at[t]=new At(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){at[t]=new At(t,5,!1,t.toLowerCase(),null,!1,!1)});var ip=/[\-:]([a-z])/g;function op(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ip,op);at[e]=new At(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ip,op);at[e]=new At(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ip,op);at[e]=new At(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){at[t]=new At(t,1,!1,t.toLowerCase(),null,!1,!1)});at.xlinkHref=new At("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){at[t]=new At(t,1,!1,t.toLowerCase(),null,!0,!0)});function sp(t,e,n,r){var i=at.hasOwnProperty(e)?at[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(j1(e,n,i,r)&&(n=null),r||i===null?M1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var fr=O1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,El=Symbol.for("react.element"),ao=Symbol.for("react.portal"),lo=Symbol.for("react.fragment"),ap=Symbol.for("react.strict_mode"),Sh=Symbol.for("react.profiler"),Cx=Symbol.for("react.provider"),Sx=Symbol.for("react.context"),lp=Symbol.for("react.forward_ref"),Th=Symbol.for("react.suspense"),Ih=Symbol.for("react.suspense_list"),cp=Symbol.for("react.memo"),Tr=Symbol.for("react.lazy"),Tx=Symbol.for("react.offscreen"),ay=Symbol.iterator;function As(t){return t===null||typeof t!="object"?null:(t=ay&&t[ay]||t["@@iterator"],typeof t=="function"?t:null)}var Ne=Object.assign,Ad;function js(t){if(Ad===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ad=e&&e[1]||""}return`
`+Ad+t}var kd=!1;function Pd(t,e){if(!t||kd)return"";kd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=a);break}}}finally{kd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?js(t):""}function U1(t){switch(t.tag){case 5:return js(t.type);case 16:return js("Lazy");case 13:return js("Suspense");case 19:return js("SuspenseList");case 0:case 2:case 15:return t=Pd(t.type,!1),t;case 11:return t=Pd(t.type.render,!1),t;case 1:return t=Pd(t.type,!0),t;default:return""}}function Ah(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case lo:return"Fragment";case ao:return"Portal";case Sh:return"Profiler";case ap:return"StrictMode";case Th:return"Suspense";case Ih:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Sx:return(t.displayName||"Context")+".Consumer";case Cx:return(t._context.displayName||"Context")+".Provider";case lp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case cp:return e=t.displayName||null,e!==null?e:Ah(t.type)||"Memo";case Tr:e=t._payload,t=t._init;try{return Ah(t(e))}catch{}}return null}function B1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ah(e);case 8:return e===ap?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Kr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ix(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function z1(t){var e=Ix(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Cl(t){t._valueTracker||(t._valueTracker=z1(t))}function Ax(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ix(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Sc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function kh(t,e){var n=e.checked;return Ne({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ly(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Kr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function kx(t,e){e=e.checked,e!=null&&sp(t,"checked",e,!1)}function Ph(t,e){kx(t,e);var n=Kr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Rh(t,e.type,n):e.hasOwnProperty("defaultValue")&&Rh(t,e.type,Kr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function cy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Rh(t,e,n){(e!=="number"||Sc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Us=Array.isArray;function wo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Kr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function $h(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Ne({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function uy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Us(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Kr(n)}}function Px(t,e){var n=Kr(e.value),r=Kr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function dy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Rx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Rx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Sl,$x=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Sl=Sl||document.createElement("div"),Sl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Sl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ca(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ks={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},W1=["Webkit","ms","Moz","O"];Object.keys(Ks).forEach(function(t){W1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ks[e]=Ks[t]})});function bx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ks.hasOwnProperty(t)&&Ks[t]?(""+e).trim():e+"px"}function Nx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=bx(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var H1=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nh(t,e){if(e){if(H1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Fh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lh=null;function up(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Oh=null,_o=null,Eo=null;function hy(t){if(t=ja(t)){if(typeof Oh!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Eu(e),Oh(t.stateNode,t.type,e))}}function Fx(t){_o?Eo?Eo.push(t):Eo=[t]:_o=t}function Lx(){if(_o){var t=_o,e=Eo;if(Eo=_o=null,hy(t),e)for(t=0;t<e.length;t++)hy(e[t])}}function Ox(t,e){return t(e)}function Dx(){}var Rd=!1;function Mx(t,e,n){if(Rd)return t(e,n);Rd=!0;try{return Ox(t,e,n)}finally{Rd=!1,(_o!==null||Eo!==null)&&(Dx(),Lx())}}function ua(t,e){var n=t.stateNode;if(n===null)return null;var r=Eu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var Dh=!1;if(er)try{var ks={};Object.defineProperty(ks,"passive",{get:function(){Dh=!0}}),window.addEventListener("test",ks,ks),window.removeEventListener("test",ks,ks)}catch{Dh=!1}function q1(t,e,n,r,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Qs=!1,Tc=null,Ic=!1,Mh=null,G1={onError:function(t){Qs=!0,Tc=t}};function K1(t,e,n,r,i,o,s,a,l){Qs=!1,Tc=null,q1.apply(G1,arguments)}function Q1(t,e,n,r,i,o,s,a,l){if(K1.apply(this,arguments),Qs){if(Qs){var u=Tc;Qs=!1,Tc=null}else throw Error(U(198));Ic||(Ic=!0,Mh=u)}}function ji(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Vx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function fy(t){if(ji(t)!==t)throw Error(U(188))}function Y1(t){var e=t.alternate;if(!e){if(e=ji(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return fy(i),t;if(o===r)return fy(i),e;o=o.sibling}throw Error(U(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function jx(t){return t=Y1(t),t!==null?Ux(t):null}function Ux(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ux(t);if(e!==null)return e;t=t.sibling}return null}var Bx=Bt.unstable_scheduleCallback,py=Bt.unstable_cancelCallback,X1=Bt.unstable_shouldYield,J1=Bt.unstable_requestPaint,Me=Bt.unstable_now,Z1=Bt.unstable_getCurrentPriorityLevel,dp=Bt.unstable_ImmediatePriority,zx=Bt.unstable_UserBlockingPriority,Ac=Bt.unstable_NormalPriority,eI=Bt.unstable_LowPriority,Wx=Bt.unstable_IdlePriority,vu=null,Sn=null;function tI(t){if(Sn&&typeof Sn.onCommitFiberRoot=="function")try{Sn.onCommitFiberRoot(vu,t,void 0,(t.current.flags&128)===128)}catch{}}var cn=Math.clz32?Math.clz32:iI,nI=Math.log,rI=Math.LN2;function iI(t){return t>>>=0,t===0?32:31-(nI(t)/rI|0)|0}var Tl=64,Il=4194304;function Bs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function kc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=Bs(a):(o&=s,o!==0&&(r=Bs(o)))}else s=n&~i,s!==0?r=Bs(s):o!==0&&(r=Bs(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-cn(e),i=1<<n,r|=t[n],e&=~i;return r}function oI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-cn(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=oI(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}function Vh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Hx(){var t=Tl;return Tl<<=1,!(Tl&4194240)&&(Tl=64),t}function $d(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ma(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-cn(e),t[e]=n}function aI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-cn(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function hp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-cn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var we=0;function qx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Gx,fp,Kx,Qx,Yx,jh=!1,Al=[],Lr=null,Or=null,Dr=null,da=new Map,ha=new Map,Ar=[],lI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function my(t,e){switch(t){case"focusin":case"focusout":Lr=null;break;case"dragenter":case"dragleave":Or=null;break;case"mouseover":case"mouseout":Dr=null;break;case"pointerover":case"pointerout":da.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ha.delete(e.pointerId)}}function Ps(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=ja(e),e!==null&&fp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function cI(t,e,n,r,i){switch(e){case"focusin":return Lr=Ps(Lr,t,e,n,r,i),!0;case"dragenter":return Or=Ps(Or,t,e,n,r,i),!0;case"mouseover":return Dr=Ps(Dr,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return da.set(o,Ps(da.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,ha.set(o,Ps(ha.get(o)||null,t,e,n,r,i)),!0}return!1}function Xx(t){var e=xi(t.target);if(e!==null){var n=ji(e);if(n!==null){if(e=n.tag,e===13){if(e=Vx(n),e!==null){t.blockedOn=e,Yx(t.priority,function(){Kx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ec(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Uh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Lh=r,n.target.dispatchEvent(r),Lh=null}else return e=ja(n),e!==null&&fp(e),t.blockedOn=n,!1;e.shift()}return!0}function gy(t,e,n){ec(t)&&n.delete(e)}function uI(){jh=!1,Lr!==null&&ec(Lr)&&(Lr=null),Or!==null&&ec(Or)&&(Or=null),Dr!==null&&ec(Dr)&&(Dr=null),da.forEach(gy),ha.forEach(gy)}function Rs(t,e){t.blockedOn===e&&(t.blockedOn=null,jh||(jh=!0,Bt.unstable_scheduleCallback(Bt.unstable_NormalPriority,uI)))}function fa(t){function e(i){return Rs(i,t)}if(0<Al.length){Rs(Al[0],t);for(var n=1;n<Al.length;n++){var r=Al[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Lr!==null&&Rs(Lr,t),Or!==null&&Rs(Or,t),Dr!==null&&Rs(Dr,t),da.forEach(e),ha.forEach(e),n=0;n<Ar.length;n++)r=Ar[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ar.length&&(n=Ar[0],n.blockedOn===null);)Xx(n),n.blockedOn===null&&Ar.shift()}var Co=fr.ReactCurrentBatchConfig,Pc=!0;function dI(t,e,n,r){var i=we,o=Co.transition;Co.transition=null;try{we=1,pp(t,e,n,r)}finally{we=i,Co.transition=o}}function hI(t,e,n,r){var i=we,o=Co.transition;Co.transition=null;try{we=4,pp(t,e,n,r)}finally{we=i,Co.transition=o}}function pp(t,e,n,r){if(Pc){var i=Uh(t,e,n,r);if(i===null)Ud(t,e,r,Rc,n),my(t,r);else if(cI(i,t,e,n,r))r.stopPropagation();else if(my(t,r),e&4&&-1<lI.indexOf(t)){for(;i!==null;){var o=ja(i);if(o!==null&&Gx(o),o=Uh(t,e,n,r),o===null&&Ud(t,e,r,Rc,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Ud(t,e,r,null,n)}}var Rc=null;function Uh(t,e,n,r){if(Rc=null,t=up(r),t=xi(t),t!==null)if(e=ji(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Vx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Rc=t,null}function Jx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Z1()){case dp:return 1;case zx:return 4;case Ac:case eI:return 16;case Wx:return 536870912;default:return 16}default:return 16}}var br=null,mp=null,tc=null;function Zx(){if(tc)return tc;var t,e=mp,n=e.length,r,i="value"in br?br.value:br.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return tc=i.slice(t,1<r?1-r:void 0)}function nc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function kl(){return!0}function yy(){return!1}function qt(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?kl:yy,this.isPropagationStopped=yy,this}return Ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=kl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=kl)},persist:function(){},isPersistent:kl}),e}var Zo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gp=qt(Zo),Va=Ne({},Zo,{view:0,detail:0}),fI=qt(Va),bd,Nd,$s,xu=Ne({},Va,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==$s&&($s&&t.type==="mousemove"?(bd=t.screenX-$s.screenX,Nd=t.screenY-$s.screenY):Nd=bd=0,$s=t),bd)},movementY:function(t){return"movementY"in t?t.movementY:Nd}}),vy=qt(xu),pI=Ne({},xu,{dataTransfer:0}),mI=qt(pI),gI=Ne({},Va,{relatedTarget:0}),Fd=qt(gI),yI=Ne({},Zo,{animationName:0,elapsedTime:0,pseudoElement:0}),vI=qt(yI),xI=Ne({},Zo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),wI=qt(xI),_I=Ne({},Zo,{data:0}),xy=qt(_I),EI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},CI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},SI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function TI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=SI[t])?!!e[t]:!1}function yp(){return TI}var II=Ne({},Va,{key:function(t){if(t.key){var e=EI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=nc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?CI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yp,charCode:function(t){return t.type==="keypress"?nc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?nc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),AI=qt(II),kI=Ne({},xu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wy=qt(kI),PI=Ne({},Va,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yp}),RI=qt(PI),$I=Ne({},Zo,{propertyName:0,elapsedTime:0,pseudoElement:0}),bI=qt($I),NI=Ne({},xu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),FI=qt(NI),LI=[9,13,27,32],vp=er&&"CompositionEvent"in window,Ys=null;er&&"documentMode"in document&&(Ys=document.documentMode);var OI=er&&"TextEvent"in window&&!Ys,ew=er&&(!vp||Ys&&8<Ys&&11>=Ys),_y=" ",Ey=!1;function tw(t,e){switch(t){case"keyup":return LI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var co=!1;function DI(t,e){switch(t){case"compositionend":return nw(e);case"keypress":return e.which!==32?null:(Ey=!0,_y);case"textInput":return t=e.data,t===_y&&Ey?null:t;default:return null}}function MI(t,e){if(co)return t==="compositionend"||!vp&&tw(t,e)?(t=Zx(),tc=mp=br=null,co=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ew&&e.locale!=="ko"?null:e.data;default:return null}}var VI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!VI[t.type]:e==="textarea"}function rw(t,e,n,r){Fx(r),e=$c(e,"onChange"),0<e.length&&(n=new gp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Xs=null,pa=null;function jI(t){pw(t,0)}function wu(t){var e=fo(t);if(Ax(e))return t}function UI(t,e){if(t==="change")return e}var iw=!1;if(er){var Ld;if(er){var Od="oninput"in document;if(!Od){var Sy=document.createElement("div");Sy.setAttribute("oninput","return;"),Od=typeof Sy.oninput=="function"}Ld=Od}else Ld=!1;iw=Ld&&(!document.documentMode||9<document.documentMode)}function Ty(){Xs&&(Xs.detachEvent("onpropertychange",ow),pa=Xs=null)}function ow(t){if(t.propertyName==="value"&&wu(pa)){var e=[];rw(e,pa,t,up(t)),Mx(jI,e)}}function BI(t,e,n){t==="focusin"?(Ty(),Xs=e,pa=n,Xs.attachEvent("onpropertychange",ow)):t==="focusout"&&Ty()}function zI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wu(pa)}function WI(t,e){if(t==="click")return wu(e)}function HI(t,e){if(t==="input"||t==="change")return wu(e)}function qI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var hn=typeof Object.is=="function"?Object.is:qI;function ma(t,e){if(hn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ch.call(e,i)||!hn(t[i],e[i]))return!1}return!0}function Iy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ay(t,e){var n=Iy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Iy(n)}}function sw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?sw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function aw(){for(var t=window,e=Sc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Sc(t.document)}return e}function xp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function GI(t){var e=aw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&sw(n.ownerDocument.documentElement,n)){if(r!==null&&xp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=Ay(n,o);var s=Ay(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var KI=er&&"documentMode"in document&&11>=document.documentMode,uo=null,Bh=null,Js=null,zh=!1;function ky(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;zh||uo==null||uo!==Sc(r)||(r=uo,"selectionStart"in r&&xp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Js&&ma(Js,r)||(Js=r,r=$c(Bh,"onSelect"),0<r.length&&(e=new gp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=uo)))}function Pl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ho={animationend:Pl("Animation","AnimationEnd"),animationiteration:Pl("Animation","AnimationIteration"),animationstart:Pl("Animation","AnimationStart"),transitionend:Pl("Transition","TransitionEnd")},Dd={},lw={};er&&(lw=document.createElement("div").style,"AnimationEvent"in window||(delete ho.animationend.animation,delete ho.animationiteration.animation,delete ho.animationstart.animation),"TransitionEvent"in window||delete ho.transitionend.transition);function _u(t){if(Dd[t])return Dd[t];if(!ho[t])return t;var e=ho[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in lw)return Dd[t]=e[n];return t}var cw=_u("animationend"),uw=_u("animationiteration"),dw=_u("animationstart"),hw=_u("transitionend"),fw=new Map,Py="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function oi(t,e){fw.set(t,e),Vi(e,[t])}for(var Md=0;Md<Py.length;Md++){var Vd=Py[Md],QI=Vd.toLowerCase(),YI=Vd[0].toUpperCase()+Vd.slice(1);oi(QI,"on"+YI)}oi(cw,"onAnimationEnd");oi(uw,"onAnimationIteration");oi(dw,"onAnimationStart");oi("dblclick","onDoubleClick");oi("focusin","onFocus");oi("focusout","onBlur");oi(hw,"onTransitionEnd");No("onMouseEnter",["mouseout","mouseover"]);No("onMouseLeave",["mouseout","mouseover"]);No("onPointerEnter",["pointerout","pointerover"]);No("onPointerLeave",["pointerout","pointerover"]);Vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XI=new Set("cancel close invalid load scroll toggle".split(" ").concat(zs));function Ry(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Q1(r,e,void 0,t),t.currentTarget=null}function pw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;Ry(i,a,u),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,u=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;Ry(i,a,u),o=l}}}if(Ic)throw t=Mh,Ic=!1,Mh=null,t}function Ie(t,e){var n=e[Kh];n===void 0&&(n=e[Kh]=new Set);var r=t+"__bubble";n.has(r)||(mw(e,t,2,!1),n.add(r))}function jd(t,e,n){var r=0;e&&(r|=4),mw(n,t,r,e)}var Rl="_reactListening"+Math.random().toString(36).slice(2);function ga(t){if(!t[Rl]){t[Rl]=!0,Ex.forEach(function(n){n!=="selectionchange"&&(XI.has(n)||jd(n,!1,t),jd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Rl]||(e[Rl]=!0,jd("selectionchange",!1,e))}}function mw(t,e,n,r){switch(Jx(e)){case 1:var i=dI;break;case 4:i=hI;break;default:i=pp}n=i.bind(null,e,n,t),i=void 0,!Dh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Ud(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=xi(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}Mx(function(){var u=o,d=up(n),f=[];e:{var h=fw.get(t);if(h!==void 0){var y=gp,E=t;switch(t){case"keypress":if(nc(n)===0)break e;case"keydown":case"keyup":y=AI;break;case"focusin":E="focus",y=Fd;break;case"focusout":E="blur",y=Fd;break;case"beforeblur":case"afterblur":y=Fd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=vy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=mI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=RI;break;case cw:case uw:case dw:y=vI;break;case hw:y=bI;break;case"scroll":y=fI;break;case"wheel":y=FI;break;case"copy":case"cut":case"paste":y=wI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=wy}var x=(e&4)!==0,T=!x&&t==="scroll",w=x?h!==null?h+"Capture":null:h;x=[];for(var v=u,S;v!==null;){S=v;var $=S.stateNode;if(S.tag===5&&$!==null&&(S=$,w!==null&&($=ua(v,w),$!=null&&x.push(ya(v,$,S)))),T)break;v=v.return}0<x.length&&(h=new y(h,E,null,n,d),f.push({event:h,listeners:x}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",h&&n!==Lh&&(E=n.relatedTarget||n.fromElement)&&(xi(E)||E[tr]))break e;if((y||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,y?(E=n.relatedTarget||n.toElement,y=u,E=E?xi(E):null,E!==null&&(T=ji(E),E!==T||E.tag!==5&&E.tag!==6)&&(E=null)):(y=null,E=u),y!==E)){if(x=vy,$="onMouseLeave",w="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(x=wy,$="onPointerLeave",w="onPointerEnter",v="pointer"),T=y==null?h:fo(y),S=E==null?h:fo(E),h=new x($,v+"leave",y,n,d),h.target=T,h.relatedTarget=S,$=null,xi(d)===u&&(x=new x(w,v+"enter",E,n,d),x.target=S,x.relatedTarget=T,$=x),T=$,y&&E)t:{for(x=y,w=E,v=0,S=x;S;S=Zi(S))v++;for(S=0,$=w;$;$=Zi($))S++;for(;0<v-S;)x=Zi(x),v--;for(;0<S-v;)w=Zi(w),S--;for(;v--;){if(x===w||w!==null&&x===w.alternate)break t;x=Zi(x),w=Zi(w)}x=null}else x=null;y!==null&&$y(f,h,y,x,!1),E!==null&&T!==null&&$y(f,T,E,x,!0)}}e:{if(h=u?fo(u):window,y=h.nodeName&&h.nodeName.toLowerCase(),y==="select"||y==="input"&&h.type==="file")var F=UI;else if(Cy(h))if(iw)F=HI;else{F=zI;var O=BI}else(y=h.nodeName)&&y.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(F=WI);if(F&&(F=F(t,u))){rw(f,F,n,d);break e}O&&O(t,h,u),t==="focusout"&&(O=h._wrapperState)&&O.controlled&&h.type==="number"&&Rh(h,"number",h.value)}switch(O=u?fo(u):window,t){case"focusin":(Cy(O)||O.contentEditable==="true")&&(uo=O,Bh=u,Js=null);break;case"focusout":Js=Bh=uo=null;break;case"mousedown":zh=!0;break;case"contextmenu":case"mouseup":case"dragend":zh=!1,ky(f,n,d);break;case"selectionchange":if(KI)break;case"keydown":case"keyup":ky(f,n,d)}var I;if(vp)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else co?tw(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(ew&&n.locale!=="ko"&&(co||C!=="onCompositionStart"?C==="onCompositionEnd"&&co&&(I=Zx()):(br=d,mp="value"in br?br.value:br.textContent,co=!0)),O=$c(u,C),0<O.length&&(C=new xy(C,t,null,n,d),f.push({event:C,listeners:O}),I?C.data=I:(I=nw(n),I!==null&&(C.data=I)))),(I=OI?DI(t,n):MI(t,n))&&(u=$c(u,"onBeforeInput"),0<u.length&&(d=new xy("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=I))}pw(f,e)})}function ya(t,e,n){return{instance:t,listener:e,currentTarget:n}}function $c(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=ua(t,n),o!=null&&r.unshift(ya(t,o,i)),o=ua(t,e),o!=null&&r.push(ya(t,o,i))),t=t.return}return r}function Zi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function $y(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=ua(n,o),l!=null&&s.unshift(ya(n,l,a))):i||(l=ua(n,o),l!=null&&s.push(ya(n,l,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var JI=/\r\n?/g,ZI=/\u0000|\uFFFD/g;function by(t){return(typeof t=="string"?t:""+t).replace(JI,`
`).replace(ZI,"")}function $l(t,e,n){if(e=by(e),by(t)!==e&&n)throw Error(U(425))}function bc(){}var Wh=null,Hh=null;function qh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Gh=typeof setTimeout=="function"?setTimeout:void 0,eA=typeof clearTimeout=="function"?clearTimeout:void 0,Ny=typeof Promise=="function"?Promise:void 0,tA=typeof queueMicrotask=="function"?queueMicrotask:typeof Ny<"u"?function(t){return Ny.resolve(null).then(t).catch(nA)}:Gh;function nA(t){setTimeout(function(){throw t})}function Bd(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),fa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);fa(e)}function Mr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Fy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var es=Math.random().toString(36).slice(2),En="__reactFiber$"+es,va="__reactProps$"+es,tr="__reactContainer$"+es,Kh="__reactEvents$"+es,rA="__reactListeners$"+es,iA="__reactHandles$"+es;function xi(t){var e=t[En];if(e)return e;for(var n=t.parentNode;n;){if(e=n[tr]||n[En]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Fy(t);t!==null;){if(n=t[En])return n;t=Fy(t)}return e}t=n,n=t.parentNode}return null}function ja(t){return t=t[En]||t[tr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function fo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Eu(t){return t[va]||null}var Qh=[],po=-1;function si(t){return{current:t}}function Ae(t){0>po||(t.current=Qh[po],Qh[po]=null,po--)}function Ce(t,e){po++,Qh[po]=t.current,t.current=e}var Qr={},wt=si(Qr),bt=si(!1),ki=Qr;function Fo(t,e){var n=t.type.contextTypes;if(!n)return Qr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Nt(t){return t=t.childContextTypes,t!=null}function Nc(){Ae(bt),Ae(wt)}function Ly(t,e,n){if(wt.current!==Qr)throw Error(U(168));Ce(wt,e),Ce(bt,n)}function gw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(U(108,B1(t)||"Unknown",i));return Ne({},n,r)}function Fc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Qr,ki=wt.current,Ce(wt,t),Ce(bt,bt.current),!0}function Oy(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=gw(t,e,ki),r.__reactInternalMemoizedMergedChildContext=t,Ae(bt),Ae(wt),Ce(wt,t)):Ae(bt),Ce(bt,n)}var Wn=null,Cu=!1,zd=!1;function yw(t){Wn===null?Wn=[t]:Wn.push(t)}function oA(t){Cu=!0,yw(t)}function ai(){if(!zd&&Wn!==null){zd=!0;var t=0,e=we;try{var n=Wn;for(we=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Wn=null,Cu=!1}catch(i){throw Wn!==null&&(Wn=Wn.slice(t+1)),Bx(dp,ai),i}finally{we=e,zd=!1}}return null}var mo=[],go=0,Lc=null,Oc=0,Gt=[],Kt=0,Pi=null,qn=1,Gn="";function gi(t,e){mo[go++]=Oc,mo[go++]=Lc,Lc=t,Oc=e}function vw(t,e,n){Gt[Kt++]=qn,Gt[Kt++]=Gn,Gt[Kt++]=Pi,Pi=t;var r=qn;t=Gn;var i=32-cn(r)-1;r&=~(1<<i),n+=1;var o=32-cn(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,qn=1<<32-cn(e)+i|n<<i|r,Gn=o+t}else qn=1<<o|n<<i|r,Gn=t}function wp(t){t.return!==null&&(gi(t,1),vw(t,1,0))}function _p(t){for(;t===Lc;)Lc=mo[--go],mo[go]=null,Oc=mo[--go],mo[go]=null;for(;t===Pi;)Pi=Gt[--Kt],Gt[Kt]=null,Gn=Gt[--Kt],Gt[Kt]=null,qn=Gt[--Kt],Gt[Kt]=null}var Vt=null,Mt=null,ke=!1,an=null;function xw(t,e){var n=Yt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Dy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Vt=t,Mt=Mr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Vt=t,Mt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Pi!==null?{id:qn,overflow:Gn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Yt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Vt=t,Mt=null,!0):!1;default:return!1}}function Yh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Xh(t){if(ke){var e=Mt;if(e){var n=e;if(!Dy(t,e)){if(Yh(t))throw Error(U(418));e=Mr(n.nextSibling);var r=Vt;e&&Dy(t,e)?xw(r,n):(t.flags=t.flags&-4097|2,ke=!1,Vt=t)}}else{if(Yh(t))throw Error(U(418));t.flags=t.flags&-4097|2,ke=!1,Vt=t}}}function My(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Vt=t}function bl(t){if(t!==Vt)return!1;if(!ke)return My(t),ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!qh(t.type,t.memoizedProps)),e&&(e=Mt)){if(Yh(t))throw ww(),Error(U(418));for(;e;)xw(t,e),e=Mr(e.nextSibling)}if(My(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Mt=Mr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Mt=null}}else Mt=Vt?Mr(t.stateNode.nextSibling):null;return!0}function ww(){for(var t=Mt;t;)t=Mr(t.nextSibling)}function Lo(){Mt=Vt=null,ke=!1}function Ep(t){an===null?an=[t]:an.push(t)}var sA=fr.ReactCurrentBatchConfig;function bs(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Nl(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Vy(t){var e=t._init;return e(t._payload)}function _w(t){function e(w,v){if(t){var S=w.deletions;S===null?(w.deletions=[v],w.flags|=16):S.push(v)}}function n(w,v){if(!t)return null;for(;v!==null;)e(w,v),v=v.sibling;return null}function r(w,v){for(w=new Map;v!==null;)v.key!==null?w.set(v.key,v):w.set(v.index,v),v=v.sibling;return w}function i(w,v){return w=Br(w,v),w.index=0,w.sibling=null,w}function o(w,v,S){return w.index=S,t?(S=w.alternate,S!==null?(S=S.index,S<v?(w.flags|=2,v):S):(w.flags|=2,v)):(w.flags|=1048576,v)}function s(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,v,S,$){return v===null||v.tag!==6?(v=Yd(S,w.mode,$),v.return=w,v):(v=i(v,S),v.return=w,v)}function l(w,v,S,$){var F=S.type;return F===lo?d(w,v,S.props.children,$,S.key):v!==null&&(v.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Tr&&Vy(F)===v.type)?($=i(v,S.props),$.ref=bs(w,v,S),$.return=w,$):($=cc(S.type,S.key,S.props,null,w.mode,$),$.ref=bs(w,v,S),$.return=w,$)}function u(w,v,S,$){return v===null||v.tag!==4||v.stateNode.containerInfo!==S.containerInfo||v.stateNode.implementation!==S.implementation?(v=Xd(S,w.mode,$),v.return=w,v):(v=i(v,S.children||[]),v.return=w,v)}function d(w,v,S,$,F){return v===null||v.tag!==7?(v=Ti(S,w.mode,$,F),v.return=w,v):(v=i(v,S),v.return=w,v)}function f(w,v,S){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Yd(""+v,w.mode,S),v.return=w,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case El:return S=cc(v.type,v.key,v.props,null,w.mode,S),S.ref=bs(w,null,v),S.return=w,S;case ao:return v=Xd(v,w.mode,S),v.return=w,v;case Tr:var $=v._init;return f(w,$(v._payload),S)}if(Us(v)||As(v))return v=Ti(v,w.mode,S,null),v.return=w,v;Nl(w,v)}return null}function h(w,v,S,$){var F=v!==null?v.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return F!==null?null:a(w,v,""+S,$);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case El:return S.key===F?l(w,v,S,$):null;case ao:return S.key===F?u(w,v,S,$):null;case Tr:return F=S._init,h(w,v,F(S._payload),$)}if(Us(S)||As(S))return F!==null?null:d(w,v,S,$,null);Nl(w,S)}return null}function y(w,v,S,$,F){if(typeof $=="string"&&$!==""||typeof $=="number")return w=w.get(S)||null,a(v,w,""+$,F);if(typeof $=="object"&&$!==null){switch($.$$typeof){case El:return w=w.get($.key===null?S:$.key)||null,l(v,w,$,F);case ao:return w=w.get($.key===null?S:$.key)||null,u(v,w,$,F);case Tr:var O=$._init;return y(w,v,S,O($._payload),F)}if(Us($)||As($))return w=w.get(S)||null,d(v,w,$,F,null);Nl(v,$)}return null}function E(w,v,S,$){for(var F=null,O=null,I=v,C=v=0,k=null;I!==null&&C<S.length;C++){I.index>C?(k=I,I=null):k=I.sibling;var P=h(w,I,S[C],$);if(P===null){I===null&&(I=k);break}t&&I&&P.alternate===null&&e(w,I),v=o(P,v,C),O===null?F=P:O.sibling=P,O=P,I=k}if(C===S.length)return n(w,I),ke&&gi(w,C),F;if(I===null){for(;C<S.length;C++)I=f(w,S[C],$),I!==null&&(v=o(I,v,C),O===null?F=I:O.sibling=I,O=I);return ke&&gi(w,C),F}for(I=r(w,I);C<S.length;C++)k=y(I,w,C,S[C],$),k!==null&&(t&&k.alternate!==null&&I.delete(k.key===null?C:k.key),v=o(k,v,C),O===null?F=k:O.sibling=k,O=k);return t&&I.forEach(function(b){return e(w,b)}),ke&&gi(w,C),F}function x(w,v,S,$){var F=As(S);if(typeof F!="function")throw Error(U(150));if(S=F.call(S),S==null)throw Error(U(151));for(var O=F=null,I=v,C=v=0,k=null,P=S.next();I!==null&&!P.done;C++,P=S.next()){I.index>C?(k=I,I=null):k=I.sibling;var b=h(w,I,P.value,$);if(b===null){I===null&&(I=k);break}t&&I&&b.alternate===null&&e(w,I),v=o(b,v,C),O===null?F=b:O.sibling=b,O=b,I=k}if(P.done)return n(w,I),ke&&gi(w,C),F;if(I===null){for(;!P.done;C++,P=S.next())P=f(w,P.value,$),P!==null&&(v=o(P,v,C),O===null?F=P:O.sibling=P,O=P);return ke&&gi(w,C),F}for(I=r(w,I);!P.done;C++,P=S.next())P=y(I,w,C,P.value,$),P!==null&&(t&&P.alternate!==null&&I.delete(P.key===null?C:P.key),v=o(P,v,C),O===null?F=P:O.sibling=P,O=P);return t&&I.forEach(function(N){return e(w,N)}),ke&&gi(w,C),F}function T(w,v,S,$){if(typeof S=="object"&&S!==null&&S.type===lo&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case El:e:{for(var F=S.key,O=v;O!==null;){if(O.key===F){if(F=S.type,F===lo){if(O.tag===7){n(w,O.sibling),v=i(O,S.props.children),v.return=w,w=v;break e}}else if(O.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Tr&&Vy(F)===O.type){n(w,O.sibling),v=i(O,S.props),v.ref=bs(w,O,S),v.return=w,w=v;break e}n(w,O);break}else e(w,O);O=O.sibling}S.type===lo?(v=Ti(S.props.children,w.mode,$,S.key),v.return=w,w=v):($=cc(S.type,S.key,S.props,null,w.mode,$),$.ref=bs(w,v,S),$.return=w,w=$)}return s(w);case ao:e:{for(O=S.key;v!==null;){if(v.key===O)if(v.tag===4&&v.stateNode.containerInfo===S.containerInfo&&v.stateNode.implementation===S.implementation){n(w,v.sibling),v=i(v,S.children||[]),v.return=w,w=v;break e}else{n(w,v);break}else e(w,v);v=v.sibling}v=Xd(S,w.mode,$),v.return=w,w=v}return s(w);case Tr:return O=S._init,T(w,v,O(S._payload),$)}if(Us(S))return E(w,v,S,$);if(As(S))return x(w,v,S,$);Nl(w,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,v!==null&&v.tag===6?(n(w,v.sibling),v=i(v,S),v.return=w,w=v):(n(w,v),v=Yd(S,w.mode,$),v.return=w,w=v),s(w)):n(w,v)}return T}var Oo=_w(!0),Ew=_w(!1),Dc=si(null),Mc=null,yo=null,Cp=null;function Sp(){Cp=yo=Mc=null}function Tp(t){var e=Dc.current;Ae(Dc),t._currentValue=e}function Jh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function So(t,e){Mc=t,Cp=yo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&($t=!0),t.firstContext=null)}function Jt(t){var e=t._currentValue;if(Cp!==t)if(t={context:t,memoizedValue:e,next:null},yo===null){if(Mc===null)throw Error(U(308));yo=t,Mc.dependencies={lanes:0,firstContext:t}}else yo=yo.next=t;return e}var wi=null;function Ip(t){wi===null?wi=[t]:wi.push(t)}function Cw(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Ip(e)):(n.next=i.next,i.next=n),e.interleaved=n,nr(t,r)}function nr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ir=!1;function Ap(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Jn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Vr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,me&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,nr(t,n)}return i=r.interleaved,i===null?(e.next=e,Ip(r)):(e.next=i.next,i.next=e),r.interleaved=e,nr(t,n)}function rc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hp(t,n)}}function jy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Vc(t,e,n,r){var i=t.updateQueue;Ir=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,s===null?o=u:s.next=u,s=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==s&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(o!==null){var f=i.baseState;s=0,d=u=l=null,a=o;do{var h=a.lane,y=a.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var E=t,x=a;switch(h=e,y=n,x.tag){case 1:if(E=x.payload,typeof E=="function"){f=E.call(y,f,h);break e}f=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=x.payload,h=typeof E=="function"?E.call(y,f,h):E,h==null)break e;f=Ne({},f,h);break e;case 2:Ir=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else y={eventTime:y,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=y,l=f):d=d.next=y,s|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(d===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);$i|=s,t.lanes=s,t.memoizedState=f}}function Uy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(U(191,i));i.call(r)}}}var Ua={},Tn=si(Ua),xa=si(Ua),wa=si(Ua);function _i(t){if(t===Ua)throw Error(U(174));return t}function kp(t,e){switch(Ce(wa,e),Ce(xa,t),Ce(Tn,Ua),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:bh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=bh(e,t)}Ae(Tn),Ce(Tn,e)}function Do(){Ae(Tn),Ae(xa),Ae(wa)}function Tw(t){_i(wa.current);var e=_i(Tn.current),n=bh(e,t.type);e!==n&&(Ce(xa,t),Ce(Tn,n))}function Pp(t){xa.current===t&&(Ae(Tn),Ae(xa))}var Re=si(0);function jc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Wd=[];function Rp(){for(var t=0;t<Wd.length;t++)Wd[t]._workInProgressVersionPrimary=null;Wd.length=0}var ic=fr.ReactCurrentDispatcher,Hd=fr.ReactCurrentBatchConfig,Ri=0,$e=null,We=null,Je=null,Uc=!1,Zs=!1,_a=0,aA=0;function pt(){throw Error(U(321))}function $p(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!hn(t[n],e[n]))return!1;return!0}function bp(t,e,n,r,i,o){if(Ri=o,$e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ic.current=t===null||t.memoizedState===null?dA:hA,t=n(r,i),Zs){o=0;do{if(Zs=!1,_a=0,25<=o)throw Error(U(301));o+=1,Je=We=null,e.updateQueue=null,ic.current=fA,t=n(r,i)}while(Zs)}if(ic.current=Bc,e=We!==null&&We.next!==null,Ri=0,Je=We=$e=null,Uc=!1,e)throw Error(U(300));return t}function Np(){var t=_a!==0;return _a=0,t}function _n(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?$e.memoizedState=Je=t:Je=Je.next=t,Je}function Zt(){if(We===null){var t=$e.alternate;t=t!==null?t.memoizedState:null}else t=We.next;var e=Je===null?$e.memoizedState:Je.next;if(e!==null)Je=e,We=t;else{if(t===null)throw Error(U(310));We=t,t={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Je===null?$e.memoizedState=Je=t:Je=Je.next=t}return Je}function Ea(t,e){return typeof e=="function"?e(t):e}function qd(t){var e=Zt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=We,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,u=o;do{var d=u.lane;if((Ri&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,s=r):l=l.next=f,$e.lanes|=d,$i|=d}u=u.next}while(u!==null&&u!==o);l===null?s=r:l.next=a,hn(r,e.memoizedState)||($t=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,$e.lanes|=o,$i|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Gd(t){var e=Zt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);hn(o,e.memoizedState)||($t=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function Iw(){}function Aw(t,e){var n=$e,r=Zt(),i=e(),o=!hn(r.memoizedState,i);if(o&&(r.memoizedState=i,$t=!0),r=r.queue,Fp(Rw.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Je!==null&&Je.memoizedState.tag&1){if(n.flags|=2048,Ca(9,Pw.bind(null,n,r,i,e),void 0,null),Ze===null)throw Error(U(349));Ri&30||kw(n,e,i)}return i}function kw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Pw(t,e,n,r){e.value=n,e.getSnapshot=r,$w(e)&&bw(t)}function Rw(t,e,n){return n(function(){$w(e)&&bw(t)})}function $w(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!hn(t,n)}catch{return!0}}function bw(t){var e=nr(t,1);e!==null&&un(e,t,1,-1)}function By(t){var e=_n();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ea,lastRenderedState:t},e.queue=t,t=t.dispatch=uA.bind(null,$e,t),[e.memoizedState,t]}function Ca(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Nw(){return Zt().memoizedState}function oc(t,e,n,r){var i=_n();$e.flags|=t,i.memoizedState=Ca(1|e,n,void 0,r===void 0?null:r)}function Su(t,e,n,r){var i=Zt();r=r===void 0?null:r;var o=void 0;if(We!==null){var s=We.memoizedState;if(o=s.destroy,r!==null&&$p(r,s.deps)){i.memoizedState=Ca(e,n,o,r);return}}$e.flags|=t,i.memoizedState=Ca(1|e,n,o,r)}function zy(t,e){return oc(8390656,8,t,e)}function Fp(t,e){return Su(2048,8,t,e)}function Fw(t,e){return Su(4,2,t,e)}function Lw(t,e){return Su(4,4,t,e)}function Ow(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Dw(t,e,n){return n=n!=null?n.concat([t]):null,Su(4,4,Ow.bind(null,e,t),n)}function Lp(){}function Mw(t,e){var n=Zt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&$p(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Vw(t,e){var n=Zt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&$p(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function jw(t,e,n){return Ri&21?(hn(n,e)||(n=Hx(),$e.lanes|=n,$i|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,$t=!0),t.memoizedState=n)}function lA(t,e){var n=we;we=n!==0&&4>n?n:4,t(!0);var r=Hd.transition;Hd.transition={};try{t(!1),e()}finally{we=n,Hd.transition=r}}function Uw(){return Zt().memoizedState}function cA(t,e,n){var r=Ur(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Bw(t))zw(e,n);else if(n=Cw(t,e,n,r),n!==null){var i=Tt();un(n,t,r,i),Ww(n,e,r)}}function uA(t,e,n){var r=Ur(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Bw(t))zw(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,hn(a,s)){var l=e.interleaved;l===null?(i.next=i,Ip(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=Cw(t,e,i,r),n!==null&&(i=Tt(),un(n,t,r,i),Ww(n,e,r))}}function Bw(t){var e=t.alternate;return t===$e||e!==null&&e===$e}function zw(t,e){Zs=Uc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ww(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hp(t,n)}}var Bc={readContext:Jt,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useInsertionEffect:pt,useLayoutEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useMutableSource:pt,useSyncExternalStore:pt,useId:pt,unstable_isNewReconciler:!1},dA={readContext:Jt,useCallback:function(t,e){return _n().memoizedState=[t,e===void 0?null:e],t},useContext:Jt,useEffect:zy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,oc(4194308,4,Ow.bind(null,e,t),n)},useLayoutEffect:function(t,e){return oc(4194308,4,t,e)},useInsertionEffect:function(t,e){return oc(4,2,t,e)},useMemo:function(t,e){var n=_n();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=_n();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=cA.bind(null,$e,t),[r.memoizedState,t]},useRef:function(t){var e=_n();return t={current:t},e.memoizedState=t},useState:By,useDebugValue:Lp,useDeferredValue:function(t){return _n().memoizedState=t},useTransition:function(){var t=By(!1),e=t[0];return t=lA.bind(null,t[1]),_n().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=$e,i=_n();if(ke){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Ze===null)throw Error(U(349));Ri&30||kw(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,zy(Rw.bind(null,r,o,t),[t]),r.flags|=2048,Ca(9,Pw.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=_n(),e=Ze.identifierPrefix;if(ke){var n=Gn,r=qn;n=(r&~(1<<32-cn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=_a++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=aA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},hA={readContext:Jt,useCallback:Mw,useContext:Jt,useEffect:Fp,useImperativeHandle:Dw,useInsertionEffect:Fw,useLayoutEffect:Lw,useMemo:Vw,useReducer:qd,useRef:Nw,useState:function(){return qd(Ea)},useDebugValue:Lp,useDeferredValue:function(t){var e=Zt();return jw(e,We.memoizedState,t)},useTransition:function(){var t=qd(Ea)[0],e=Zt().memoizedState;return[t,e]},useMutableSource:Iw,useSyncExternalStore:Aw,useId:Uw,unstable_isNewReconciler:!1},fA={readContext:Jt,useCallback:Mw,useContext:Jt,useEffect:Fp,useImperativeHandle:Dw,useInsertionEffect:Fw,useLayoutEffect:Lw,useMemo:Vw,useReducer:Gd,useRef:Nw,useState:function(){return Gd(Ea)},useDebugValue:Lp,useDeferredValue:function(t){var e=Zt();return We===null?e.memoizedState=t:jw(e,We.memoizedState,t)},useTransition:function(){var t=Gd(Ea)[0],e=Zt().memoizedState;return[t,e]},useMutableSource:Iw,useSyncExternalStore:Aw,useId:Uw,unstable_isNewReconciler:!1};function on(t,e){if(t&&t.defaultProps){e=Ne({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Zh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ne({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Tu={isMounted:function(t){return(t=t._reactInternals)?ji(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Tt(),i=Ur(t),o=Jn(r,i);o.payload=e,n!=null&&(o.callback=n),e=Vr(t,o,i),e!==null&&(un(e,t,i,r),rc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Tt(),i=Ur(t),o=Jn(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Vr(t,o,i),e!==null&&(un(e,t,i,r),rc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Tt(),r=Ur(t),i=Jn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Vr(t,i,r),e!==null&&(un(e,t,r,n),rc(e,t,r))}};function Wy(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!ma(n,r)||!ma(i,o):!0}function Hw(t,e,n){var r=!1,i=Qr,o=e.contextType;return typeof o=="object"&&o!==null?o=Jt(o):(i=Nt(e)?ki:wt.current,r=e.contextTypes,o=(r=r!=null)?Fo(t,i):Qr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Tu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Hy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Tu.enqueueReplaceState(e,e.state,null)}function ef(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Ap(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Jt(o):(o=Nt(e)?ki:wt.current,i.context=Fo(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Zh(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Tu.enqueueReplaceState(i,i.state,null),Vc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Mo(t,e){try{var n="",r=e;do n+=U1(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Kd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function tf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var pA=typeof WeakMap=="function"?WeakMap:Map;function qw(t,e,n){n=Jn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Wc||(Wc=!0,hf=r),tf(t,e)},n}function Gw(t,e,n){n=Jn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){tf(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){tf(t,e),typeof r!="function"&&(jr===null?jr=new Set([this]):jr.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function qy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new pA;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=kA.bind(null,t,e,n),e.then(t,t))}function Gy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ky(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Jn(-1,1),e.tag=2,Vr(n,e,1))),n.lanes|=1),t)}var mA=fr.ReactCurrentOwner,$t=!1;function St(t,e,n,r){e.child=t===null?Ew(e,null,n,r):Oo(e,t.child,n,r)}function Qy(t,e,n,r,i){n=n.render;var o=e.ref;return So(e,i),r=bp(t,e,n,r,o,i),n=Np(),t!==null&&!$t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,rr(t,e,i)):(ke&&n&&wp(e),e.flags|=1,St(t,e,r,i),e.child)}function Yy(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!zp(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Kw(t,e,o,r,i)):(t=cc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:ma,n(s,r)&&t.ref===e.ref)return rr(t,e,i)}return e.flags|=1,t=Br(o,r),t.ref=e.ref,t.return=e,e.child=t}function Kw(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(ma(o,r)&&t.ref===e.ref)if($t=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&($t=!0);else return e.lanes=t.lanes,rr(t,e,i)}return nf(t,e,n,r,i)}function Qw(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(xo,Ot),Ot|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ce(xo,Ot),Ot|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Ce(xo,Ot),Ot|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Ce(xo,Ot),Ot|=r;return St(t,e,i,n),e.child}function Yw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function nf(t,e,n,r,i){var o=Nt(n)?ki:wt.current;return o=Fo(e,o),So(e,i),n=bp(t,e,n,r,o,i),r=Np(),t!==null&&!$t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,rr(t,e,i)):(ke&&r&&wp(e),e.flags|=1,St(t,e,n,i),e.child)}function Xy(t,e,n,r,i){if(Nt(n)){var o=!0;Fc(e)}else o=!1;if(So(e,i),e.stateNode===null)sc(t,e),Hw(e,n,r),ef(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=Jt(u):(u=Nt(n)?ki:wt.current,u=Fo(e,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Hy(e,s,r,u),Ir=!1;var h=e.memoizedState;s.state=h,Vc(e,r,s,i),l=e.memoizedState,a!==r||h!==l||bt.current||Ir?(typeof d=="function"&&(Zh(e,n,d,r),l=e.memoizedState),(a=Ir||Wy(e,n,a,r,h,l,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,Sw(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:on(e.type,a),s.props=u,f=e.pendingProps,h=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=Jt(l):(l=Nt(n)?ki:wt.current,l=Fo(e,l));var y=n.getDerivedStateFromProps;(d=typeof y=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==f||h!==l)&&Hy(e,s,r,l),Ir=!1,h=e.memoizedState,s.state=h,Vc(e,r,s,i);var E=e.memoizedState;a!==f||h!==E||bt.current||Ir?(typeof y=="function"&&(Zh(e,n,y,r),E=e.memoizedState),(u=Ir||Wy(e,n,u,r,h,E,l)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,E,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,E,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),s.props=r,s.state=E,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return rf(t,e,n,r,o,i)}function rf(t,e,n,r,i,o){Yw(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&Oy(e,n,!1),rr(t,e,o);r=e.stateNode,mA.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Oo(e,t.child,null,o),e.child=Oo(e,null,a,o)):St(t,e,a,o),e.memoizedState=r.state,i&&Oy(e,n,!0),e.child}function Xw(t){var e=t.stateNode;e.pendingContext?Ly(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ly(t,e.context,!1),kp(t,e.containerInfo)}function Jy(t,e,n,r,i){return Lo(),Ep(i),e.flags|=256,St(t,e,n,r),e.child}var of={dehydrated:null,treeContext:null,retryLane:0};function sf(t){return{baseLanes:t,cachePool:null,transitions:null}}function Jw(t,e,n){var r=e.pendingProps,i=Re.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ce(Re,i&1),t===null)return Xh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=ku(s,r,0,null),t=Ti(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=sf(n),e.memoizedState=of,t):Op(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return gA(t,e,s,r,a,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Br(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=Br(a,o):(o=Ti(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?sf(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=of,r}return o=t.child,t=o.sibling,r=Br(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Op(t,e){return e=ku({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Fl(t,e,n,r){return r!==null&&Ep(r),Oo(e,t.child,null,n),t=Op(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function gA(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=Kd(Error(U(422))),Fl(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=ku({mode:"visible",children:r.children},i,0,null),o=Ti(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Oo(e,t.child,null,s),e.child.memoizedState=sf(s),e.memoizedState=of,o);if(!(e.mode&1))return Fl(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(U(419)),r=Kd(o,r,void 0),Fl(t,e,s,r)}if(a=(s&t.childLanes)!==0,$t||a){if(r=Ze,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,nr(t,i),un(r,t,i,-1))}return Bp(),r=Kd(Error(U(421))),Fl(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=PA.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Mt=Mr(i.nextSibling),Vt=e,ke=!0,an=null,t!==null&&(Gt[Kt++]=qn,Gt[Kt++]=Gn,Gt[Kt++]=Pi,qn=t.id,Gn=t.overflow,Pi=e),e=Op(e,r.children),e.flags|=4096,e)}function Zy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Jh(t.return,e,n)}function Qd(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Zw(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(St(t,e,r.children,n),r=Re.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Zy(t,n,e);else if(t.tag===19)Zy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ce(Re,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&jc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Qd(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&jc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Qd(e,!0,n,null,o);break;case"together":Qd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function sc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function rr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),$i|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Br(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Br(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function yA(t,e,n){switch(e.tag){case 3:Xw(e),Lo();break;case 5:Tw(e);break;case 1:Nt(e.type)&&Fc(e);break;case 4:kp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ce(Dc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ce(Re,Re.current&1),e.flags|=128,null):n&e.child.childLanes?Jw(t,e,n):(Ce(Re,Re.current&1),t=rr(t,e,n),t!==null?t.sibling:null);Ce(Re,Re.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Zw(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ce(Re,Re.current),r)break;return null;case 22:case 23:return e.lanes=0,Qw(t,e,n)}return rr(t,e,n)}var e_,af,t_,n_;e_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};af=function(){};t_=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,_i(Tn.current);var o=null;switch(n){case"input":i=kh(t,i),r=kh(t,r),o=[];break;case"select":i=Ne({},i,{value:void 0}),r=Ne({},r,{value:void 0}),o=[];break;case"textarea":i=$h(t,i),r=$h(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=bc)}Nh(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(la.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(la.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ie("scroll",t),o||a===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};n_=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ns(t,e){if(!ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function vA(t,e,n){var r=e.pendingProps;switch(_p(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(e),null;case 1:return Nt(e.type)&&Nc(),mt(e),null;case 3:return r=e.stateNode,Do(),Ae(bt),Ae(wt),Rp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(bl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,an!==null&&(mf(an),an=null))),af(t,e),mt(e),null;case 5:Pp(e);var i=_i(wa.current);if(n=e.type,t!==null&&e.stateNode!=null)t_(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return mt(e),null}if(t=_i(Tn.current),bl(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[En]=e,r[va]=o,t=(e.mode&1)!==0,n){case"dialog":Ie("cancel",r),Ie("close",r);break;case"iframe":case"object":case"embed":Ie("load",r);break;case"video":case"audio":for(i=0;i<zs.length;i++)Ie(zs[i],r);break;case"source":Ie("error",r);break;case"img":case"image":case"link":Ie("error",r),Ie("load",r);break;case"details":Ie("toggle",r);break;case"input":ly(r,o),Ie("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ie("invalid",r);break;case"textarea":uy(r,o),Ie("invalid",r)}Nh(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&$l(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&$l(r.textContent,a,t),i=["children",""+a]):la.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Ie("scroll",r)}switch(n){case"input":Cl(r),cy(r,o,!0);break;case"textarea":Cl(r),dy(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=bc)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Rx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[En]=e,t[va]=r,e_(t,e,!1,!1),e.stateNode=t;e:{switch(s=Fh(n,r),n){case"dialog":Ie("cancel",t),Ie("close",t),i=r;break;case"iframe":case"object":case"embed":Ie("load",t),i=r;break;case"video":case"audio":for(i=0;i<zs.length;i++)Ie(zs[i],t);i=r;break;case"source":Ie("error",t),i=r;break;case"img":case"image":case"link":Ie("error",t),Ie("load",t),i=r;break;case"details":Ie("toggle",t),i=r;break;case"input":ly(t,r),i=kh(t,r),Ie("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ne({},r,{value:void 0}),Ie("invalid",t);break;case"textarea":uy(t,r),i=$h(t,r),Ie("invalid",t);break;default:i=r}Nh(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?Nx(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&$x(t,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ca(t,l):typeof l=="number"&&ca(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(la.hasOwnProperty(o)?l!=null&&o==="onScroll"&&Ie("scroll",t):l!=null&&sp(t,o,l,s))}switch(n){case"input":Cl(t),cy(t,r,!1);break;case"textarea":Cl(t),dy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Kr(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?wo(t,!!r.multiple,o,!1):r.defaultValue!=null&&wo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=bc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return mt(e),null;case 6:if(t&&e.stateNode!=null)n_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=_i(wa.current),_i(Tn.current),bl(e)){if(r=e.stateNode,n=e.memoizedProps,r[En]=e,(o=r.nodeValue!==n)&&(t=Vt,t!==null))switch(t.tag){case 3:$l(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&$l(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[En]=e,e.stateNode=r}return mt(e),null;case 13:if(Ae(Re),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ke&&Mt!==null&&e.mode&1&&!(e.flags&128))ww(),Lo(),e.flags|=98560,o=!1;else if(o=bl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(U(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(U(317));o[En]=e}else Lo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;mt(e),o=!1}else an!==null&&(mf(an),an=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Re.current&1?qe===0&&(qe=3):Bp())),e.updateQueue!==null&&(e.flags|=4),mt(e),null);case 4:return Do(),af(t,e),t===null&&ga(e.stateNode.containerInfo),mt(e),null;case 10:return Tp(e.type._context),mt(e),null;case 17:return Nt(e.type)&&Nc(),mt(e),null;case 19:if(Ae(Re),o=e.memoizedState,o===null)return mt(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)Ns(o,!1);else{if(qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=jc(t),s!==null){for(e.flags|=128,Ns(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ce(Re,Re.current&1|2),e.child}t=t.sibling}o.tail!==null&&Me()>Vo&&(e.flags|=128,r=!0,Ns(o,!1),e.lanes=4194304)}else{if(!r)if(t=jc(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ns(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!ke)return mt(e),null}else 2*Me()-o.renderingStartTime>Vo&&n!==1073741824&&(e.flags|=128,r=!0,Ns(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Me(),e.sibling=null,n=Re.current,Ce(Re,r?n&1|2:n&1),e):(mt(e),null);case 22:case 23:return Up(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ot&1073741824&&(mt(e),e.subtreeFlags&6&&(e.flags|=8192)):mt(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function xA(t,e){switch(_p(e),e.tag){case 1:return Nt(e.type)&&Nc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Do(),Ae(bt),Ae(wt),Rp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Pp(e),null;case 13:if(Ae(Re),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Lo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ae(Re),null;case 4:return Do(),null;case 10:return Tp(e.type._context),null;case 22:case 23:return Up(),null;case 24:return null;default:return null}}var Ll=!1,vt=!1,wA=typeof WeakSet=="function"?WeakSet:Set,G=null;function vo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Oe(t,e,r)}else n.current=null}function lf(t,e,n){try{n()}catch(r){Oe(t,e,r)}}var ev=!1;function _A(t,e){if(Wh=Pc,t=aw(),xp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,u=0,d=0,f=t,h=null;t:for(;;){for(var y;f!==n||i!==0&&f.nodeType!==3||(a=s+i),f!==o||r!==0&&f.nodeType!==3||(l=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(y=f.firstChild)!==null;)h=f,f=y;for(;;){if(f===t)break t;if(h===n&&++u===i&&(a=s),h===o&&++d===r&&(l=s),(y=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Hh={focusedElem:t,selectionRange:n},Pc=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var x=E.memoizedProps,T=E.memoizedState,w=e.stateNode,v=w.getSnapshotBeforeUpdate(e.elementType===e.type?x:on(e.type,x),T);w.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch($){Oe(e,e.return,$)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return E=ev,ev=!1,E}function ea(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&lf(e,n,o)}i=i.next}while(i!==r)}}function Iu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function cf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function r_(t){var e=t.alternate;e!==null&&(t.alternate=null,r_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[En],delete e[va],delete e[Kh],delete e[rA],delete e[iA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function i_(t){return t.tag===5||t.tag===3||t.tag===4}function tv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||i_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function uf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=bc));else if(r!==4&&(t=t.child,t!==null))for(uf(t,e,n),t=t.sibling;t!==null;)uf(t,e,n),t=t.sibling}function df(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(df(t,e,n),t=t.sibling;t!==null;)df(t,e,n),t=t.sibling}var rt=null,sn=!1;function wr(t,e,n){for(n=n.child;n!==null;)o_(t,e,n),n=n.sibling}function o_(t,e,n){if(Sn&&typeof Sn.onCommitFiberUnmount=="function")try{Sn.onCommitFiberUnmount(vu,n)}catch{}switch(n.tag){case 5:vt||vo(n,e);case 6:var r=rt,i=sn;rt=null,wr(t,e,n),rt=r,sn=i,rt!==null&&(sn?(t=rt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):rt.removeChild(n.stateNode));break;case 18:rt!==null&&(sn?(t=rt,n=n.stateNode,t.nodeType===8?Bd(t.parentNode,n):t.nodeType===1&&Bd(t,n),fa(t)):Bd(rt,n.stateNode));break;case 4:r=rt,i=sn,rt=n.stateNode.containerInfo,sn=!0,wr(t,e,n),rt=r,sn=i;break;case 0:case 11:case 14:case 15:if(!vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&lf(n,e,s),i=i.next}while(i!==r)}wr(t,e,n);break;case 1:if(!vt&&(vo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Oe(n,e,a)}wr(t,e,n);break;case 21:wr(t,e,n);break;case 22:n.mode&1?(vt=(r=vt)||n.memoizedState!==null,wr(t,e,n),vt=r):wr(t,e,n);break;default:wr(t,e,n)}}function nv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new wA),e.forEach(function(r){var i=RA.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function tn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:rt=a.stateNode,sn=!1;break e;case 3:rt=a.stateNode.containerInfo,sn=!0;break e;case 4:rt=a.stateNode.containerInfo,sn=!0;break e}a=a.return}if(rt===null)throw Error(U(160));o_(o,s,i),rt=null,sn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Oe(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)s_(e,t),e=e.sibling}function s_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(tn(e,t),yn(t),r&4){try{ea(3,t,t.return),Iu(3,t)}catch(x){Oe(t,t.return,x)}try{ea(5,t,t.return)}catch(x){Oe(t,t.return,x)}}break;case 1:tn(e,t),yn(t),r&512&&n!==null&&vo(n,n.return);break;case 5:if(tn(e,t),yn(t),r&512&&n!==null&&vo(n,n.return),t.flags&32){var i=t.stateNode;try{ca(i,"")}catch(x){Oe(t,t.return,x)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&kx(i,o),Fh(a,s);var u=Fh(a,o);for(s=0;s<l.length;s+=2){var d=l[s],f=l[s+1];d==="style"?Nx(i,f):d==="dangerouslySetInnerHTML"?$x(i,f):d==="children"?ca(i,f):sp(i,d,f,u)}switch(a){case"input":Ph(i,o);break;case"textarea":Px(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var y=o.value;y!=null?wo(i,!!o.multiple,y,!1):h!==!!o.multiple&&(o.defaultValue!=null?wo(i,!!o.multiple,o.defaultValue,!0):wo(i,!!o.multiple,o.multiple?[]:"",!1))}i[va]=o}catch(x){Oe(t,t.return,x)}}break;case 6:if(tn(e,t),yn(t),r&4){if(t.stateNode===null)throw Error(U(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(x){Oe(t,t.return,x)}}break;case 3:if(tn(e,t),yn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{fa(e.containerInfo)}catch(x){Oe(t,t.return,x)}break;case 4:tn(e,t),yn(t);break;case 13:tn(e,t),yn(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Vp=Me())),r&4&&nv(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(vt=(u=vt)||d,tn(e,t),vt=u):tn(e,t),yn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(G=t,d=t.child;d!==null;){for(f=G=d;G!==null;){switch(h=G,y=h.child,h.tag){case 0:case 11:case 14:case 15:ea(4,h,h.return);break;case 1:vo(h,h.return);var E=h.stateNode;if(typeof E.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(x){Oe(r,n,x)}}break;case 5:vo(h,h.return);break;case 22:if(h.memoizedState!==null){iv(f);continue}}y!==null?(y.return=h,G=y):iv(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=f.stateNode,l=f.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=bx("display",s))}catch(x){Oe(t,t.return,x)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(x){Oe(t,t.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:tn(e,t),yn(t),r&4&&nv(t);break;case 21:break;default:tn(e,t),yn(t)}}function yn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(i_(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ca(i,""),r.flags&=-33);var o=tv(t);df(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=tv(t);uf(t,a,s);break;default:throw Error(U(161))}}catch(l){Oe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function EA(t,e,n){G=t,a_(t)}function a_(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var i=G,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Ll;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||vt;a=Ll;var u=vt;if(Ll=s,(vt=l)&&!u)for(G=i;G!==null;)s=G,l=s.child,s.tag===22&&s.memoizedState!==null?ov(i):l!==null?(l.return=s,G=l):ov(i);for(;o!==null;)G=o,a_(o),o=o.sibling;G=i,Ll=a,vt=u}rv(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,G=o):rv(t)}}function rv(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:vt||Iu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!vt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:on(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Uy(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Uy(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&fa(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}vt||e.flags&512&&cf(e)}catch(h){Oe(e,e.return,h)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function iv(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function ov(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Iu(4,e)}catch(l){Oe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Oe(e,i,l)}}var o=e.return;try{cf(e)}catch(l){Oe(e,o,l)}break;case 5:var s=e.return;try{cf(e)}catch(l){Oe(e,s,l)}}}catch(l){Oe(e,e.return,l)}if(e===t){G=null;break}var a=e.sibling;if(a!==null){a.return=e.return,G=a;break}G=e.return}}var CA=Math.ceil,zc=fr.ReactCurrentDispatcher,Dp=fr.ReactCurrentOwner,Xt=fr.ReactCurrentBatchConfig,me=0,Ze=null,Be=null,st=0,Ot=0,xo=si(0),qe=0,Sa=null,$i=0,Au=0,Mp=0,ta=null,Rt=null,Vp=0,Vo=1/0,zn=null,Wc=!1,hf=null,jr=null,Ol=!1,Nr=null,Hc=0,na=0,ff=null,ac=-1,lc=0;function Tt(){return me&6?Me():ac!==-1?ac:ac=Me()}function Ur(t){return t.mode&1?me&2&&st!==0?st&-st:sA.transition!==null?(lc===0&&(lc=Hx()),lc):(t=we,t!==0||(t=window.event,t=t===void 0?16:Jx(t.type)),t):1}function un(t,e,n,r){if(50<na)throw na=0,ff=null,Error(U(185));Ma(t,n,r),(!(me&2)||t!==Ze)&&(t===Ze&&(!(me&2)&&(Au|=n),qe===4&&kr(t,st)),Ft(t,r),n===1&&me===0&&!(e.mode&1)&&(Vo=Me()+500,Cu&&ai()))}function Ft(t,e){var n=t.callbackNode;sI(t,e);var r=kc(t,t===Ze?st:0);if(r===0)n!==null&&py(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&py(n),e===1)t.tag===0?oA(sv.bind(null,t)):yw(sv.bind(null,t)),tA(function(){!(me&6)&&ai()}),n=null;else{switch(qx(r)){case 1:n=dp;break;case 4:n=zx;break;case 16:n=Ac;break;case 536870912:n=Wx;break;default:n=Ac}n=m_(n,l_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function l_(t,e){if(ac=-1,lc=0,me&6)throw Error(U(327));var n=t.callbackNode;if(To()&&t.callbackNode!==n)return null;var r=kc(t,t===Ze?st:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=qc(t,r);else{e=r;var i=me;me|=2;var o=u_();(Ze!==t||st!==e)&&(zn=null,Vo=Me()+500,Si(t,e));do try{IA();break}catch(a){c_(t,a)}while(!0);Sp(),zc.current=o,me=i,Be!==null?e=0:(Ze=null,st=0,e=qe)}if(e!==0){if(e===2&&(i=Vh(t),i!==0&&(r=i,e=pf(t,i))),e===1)throw n=Sa,Si(t,0),kr(t,r),Ft(t,Me()),n;if(e===6)kr(t,r);else{if(i=t.current.alternate,!(r&30)&&!SA(i)&&(e=qc(t,r),e===2&&(o=Vh(t),o!==0&&(r=o,e=pf(t,o))),e===1))throw n=Sa,Si(t,0),kr(t,r),Ft(t,Me()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:yi(t,Rt,zn);break;case 3:if(kr(t,r),(r&130023424)===r&&(e=Vp+500-Me(),10<e)){if(kc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Tt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Gh(yi.bind(null,t,Rt,zn),e);break}yi(t,Rt,zn);break;case 4:if(kr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-cn(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=Me()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*CA(r/1960))-r,10<r){t.timeoutHandle=Gh(yi.bind(null,t,Rt,zn),r);break}yi(t,Rt,zn);break;case 5:yi(t,Rt,zn);break;default:throw Error(U(329))}}}return Ft(t,Me()),t.callbackNode===n?l_.bind(null,t):null}function pf(t,e){var n=ta;return t.current.memoizedState.isDehydrated&&(Si(t,e).flags|=256),t=qc(t,e),t!==2&&(e=Rt,Rt=n,e!==null&&mf(e)),t}function mf(t){Rt===null?Rt=t:Rt.push.apply(Rt,t)}function SA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!hn(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function kr(t,e){for(e&=~Mp,e&=~Au,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-cn(e),r=1<<n;t[n]=-1,e&=~r}}function sv(t){if(me&6)throw Error(U(327));To();var e=kc(t,0);if(!(e&1))return Ft(t,Me()),null;var n=qc(t,e);if(t.tag!==0&&n===2){var r=Vh(t);r!==0&&(e=r,n=pf(t,r))}if(n===1)throw n=Sa,Si(t,0),kr(t,e),Ft(t,Me()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,yi(t,Rt,zn),Ft(t,Me()),null}function jp(t,e){var n=me;me|=1;try{return t(e)}finally{me=n,me===0&&(Vo=Me()+500,Cu&&ai())}}function bi(t){Nr!==null&&Nr.tag===0&&!(me&6)&&To();var e=me;me|=1;var n=Xt.transition,r=we;try{if(Xt.transition=null,we=1,t)return t()}finally{we=r,Xt.transition=n,me=e,!(me&6)&&ai()}}function Up(){Ot=xo.current,Ae(xo)}function Si(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,eA(n)),Be!==null)for(n=Be.return;n!==null;){var r=n;switch(_p(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Nc();break;case 3:Do(),Ae(bt),Ae(wt),Rp();break;case 5:Pp(r);break;case 4:Do();break;case 13:Ae(Re);break;case 19:Ae(Re);break;case 10:Tp(r.type._context);break;case 22:case 23:Up()}n=n.return}if(Ze=t,Be=t=Br(t.current,null),st=Ot=e,qe=0,Sa=null,Mp=Au=$i=0,Rt=ta=null,wi!==null){for(e=0;e<wi.length;e++)if(n=wi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}wi=null}return t}function c_(t,e){do{var n=Be;try{if(Sp(),ic.current=Bc,Uc){for(var r=$e.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Uc=!1}if(Ri=0,Je=We=$e=null,Zs=!1,_a=0,Dp.current=null,n===null||n.return===null){qe=1,Sa=e,Be=null;break}e:{var o=t,s=n.return,a=n,l=e;if(e=st,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=Gy(s);if(y!==null){y.flags&=-257,Ky(y,s,a,o,e),y.mode&1&&qy(o,u,e),e=y,l=u;var E=e.updateQueue;if(E===null){var x=new Set;x.add(l),e.updateQueue=x}else E.add(l);break e}else{if(!(e&1)){qy(o,u,e),Bp();break e}l=Error(U(426))}}else if(ke&&a.mode&1){var T=Gy(s);if(T!==null){!(T.flags&65536)&&(T.flags|=256),Ky(T,s,a,o,e),Ep(Mo(l,a));break e}}o=l=Mo(l,a),qe!==4&&(qe=2),ta===null?ta=[o]:ta.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var w=qw(o,l,e);jy(o,w);break e;case 1:a=l;var v=o.type,S=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(jr===null||!jr.has(S)))){o.flags|=65536,e&=-e,o.lanes|=e;var $=Gw(o,a,e);jy(o,$);break e}}o=o.return}while(o!==null)}h_(n)}catch(F){e=F,Be===n&&n!==null&&(Be=n=n.return);continue}break}while(!0)}function u_(){var t=zc.current;return zc.current=Bc,t===null?Bc:t}function Bp(){(qe===0||qe===3||qe===2)&&(qe=4),Ze===null||!($i&268435455)&&!(Au&268435455)||kr(Ze,st)}function qc(t,e){var n=me;me|=2;var r=u_();(Ze!==t||st!==e)&&(zn=null,Si(t,e));do try{TA();break}catch(i){c_(t,i)}while(!0);if(Sp(),me=n,zc.current=r,Be!==null)throw Error(U(261));return Ze=null,st=0,qe}function TA(){for(;Be!==null;)d_(Be)}function IA(){for(;Be!==null&&!X1();)d_(Be)}function d_(t){var e=p_(t.alternate,t,Ot);t.memoizedProps=t.pendingProps,e===null?h_(t):Be=e,Dp.current=null}function h_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=xA(n,e),n!==null){n.flags&=32767,Be=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qe=6,Be=null;return}}else if(n=vA(n,e,Ot),n!==null){Be=n;return}if(e=e.sibling,e!==null){Be=e;return}Be=e=t}while(e!==null);qe===0&&(qe=5)}function yi(t,e,n){var r=we,i=Xt.transition;try{Xt.transition=null,we=1,AA(t,e,n,r)}finally{Xt.transition=i,we=r}return null}function AA(t,e,n,r){do To();while(Nr!==null);if(me&6)throw Error(U(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(aI(t,o),t===Ze&&(Be=Ze=null,st=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ol||(Ol=!0,m_(Ac,function(){return To(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Xt.transition,Xt.transition=null;var s=we;we=1;var a=me;me|=4,Dp.current=null,_A(t,n),s_(n,t),GI(Hh),Pc=!!Wh,Hh=Wh=null,t.current=n,EA(n),J1(),me=a,we=s,Xt.transition=o}else t.current=n;if(Ol&&(Ol=!1,Nr=t,Hc=i),o=t.pendingLanes,o===0&&(jr=null),tI(n.stateNode),Ft(t,Me()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wc)throw Wc=!1,t=hf,hf=null,t;return Hc&1&&t.tag!==0&&To(),o=t.pendingLanes,o&1?t===ff?na++:(na=0,ff=t):na=0,ai(),null}function To(){if(Nr!==null){var t=qx(Hc),e=Xt.transition,n=we;try{if(Xt.transition=null,we=16>t?16:t,Nr===null)var r=!1;else{if(t=Nr,Nr=null,Hc=0,me&6)throw Error(U(331));var i=me;for(me|=4,G=t.current;G!==null;){var o=G,s=o.child;if(G.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(G=u;G!==null;){var d=G;switch(d.tag){case 0:case 11:case 15:ea(8,d,o)}var f=d.child;if(f!==null)f.return=d,G=f;else for(;G!==null;){d=G;var h=d.sibling,y=d.return;if(r_(d),d===u){G=null;break}if(h!==null){h.return=y,G=h;break}G=y}}}var E=o.alternate;if(E!==null){var x=E.child;if(x!==null){E.child=null;do{var T=x.sibling;x.sibling=null,x=T}while(x!==null)}}G=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,G=s;else e:for(;G!==null;){if(o=G,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ea(9,o,o.return)}var w=o.sibling;if(w!==null){w.return=o.return,G=w;break e}G=o.return}}var v=t.current;for(G=v;G!==null;){s=G;var S=s.child;if(s.subtreeFlags&2064&&S!==null)S.return=s,G=S;else e:for(s=v;G!==null;){if(a=G,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Iu(9,a)}}catch(F){Oe(a,a.return,F)}if(a===s){G=null;break e}var $=a.sibling;if($!==null){$.return=a.return,G=$;break e}G=a.return}}if(me=i,ai(),Sn&&typeof Sn.onPostCommitFiberRoot=="function")try{Sn.onPostCommitFiberRoot(vu,t)}catch{}r=!0}return r}finally{we=n,Xt.transition=e}}return!1}function av(t,e,n){e=Mo(n,e),e=qw(t,e,1),t=Vr(t,e,1),e=Tt(),t!==null&&(Ma(t,1,e),Ft(t,e))}function Oe(t,e,n){if(t.tag===3)av(t,t,n);else for(;e!==null;){if(e.tag===3){av(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(jr===null||!jr.has(r))){t=Mo(n,t),t=Gw(e,t,1),e=Vr(e,t,1),t=Tt(),e!==null&&(Ma(e,1,t),Ft(e,t));break}}e=e.return}}function kA(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Tt(),t.pingedLanes|=t.suspendedLanes&n,Ze===t&&(st&n)===n&&(qe===4||qe===3&&(st&130023424)===st&&500>Me()-Vp?Si(t,0):Mp|=n),Ft(t,e)}function f_(t,e){e===0&&(t.mode&1?(e=Il,Il<<=1,!(Il&130023424)&&(Il=4194304)):e=1);var n=Tt();t=nr(t,e),t!==null&&(Ma(t,e,n),Ft(t,n))}function PA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),f_(t,n)}function RA(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),f_(t,n)}var p_;p_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||bt.current)$t=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return $t=!1,yA(t,e,n);$t=!!(t.flags&131072)}else $t=!1,ke&&e.flags&1048576&&vw(e,Oc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;sc(t,e),t=e.pendingProps;var i=Fo(e,wt.current);So(e,n),i=bp(null,e,r,t,i,n);var o=Np();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Nt(r)?(o=!0,Fc(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ap(e),i.updater=Tu,e.stateNode=i,i._reactInternals=e,ef(e,r,t,n),e=rf(null,e,r,!0,o,n)):(e.tag=0,ke&&o&&wp(e),St(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(sc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=bA(r),t=on(r,t),i){case 0:e=nf(null,e,r,t,n);break e;case 1:e=Xy(null,e,r,t,n);break e;case 11:e=Qy(null,e,r,t,n);break e;case 14:e=Yy(null,e,r,on(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:on(r,i),nf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:on(r,i),Xy(t,e,r,i,n);case 3:e:{if(Xw(e),t===null)throw Error(U(387));r=e.pendingProps,o=e.memoizedState,i=o.element,Sw(t,e),Vc(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Mo(Error(U(423)),e),e=Jy(t,e,r,n,i);break e}else if(r!==i){i=Mo(Error(U(424)),e),e=Jy(t,e,r,n,i);break e}else for(Mt=Mr(e.stateNode.containerInfo.firstChild),Vt=e,ke=!0,an=null,n=Ew(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Lo(),r===i){e=rr(t,e,n);break e}St(t,e,r,n)}e=e.child}return e;case 5:return Tw(e),t===null&&Xh(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,qh(r,i)?s=null:o!==null&&qh(r,o)&&(e.flags|=32),Yw(t,e),St(t,e,s,n),e.child;case 6:return t===null&&Xh(e),null;case 13:return Jw(t,e,n);case 4:return kp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Oo(e,null,r,n):St(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:on(r,i),Qy(t,e,r,i,n);case 7:return St(t,e,e.pendingProps,n),e.child;case 8:return St(t,e,e.pendingProps.children,n),e.child;case 12:return St(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,Ce(Dc,r._currentValue),r._currentValue=s,o!==null)if(hn(o.value,s)){if(o.children===i.children&&!bt.current){e=rr(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=Jn(-1,n&-n),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Jh(o.return,n,e),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(U(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Jh(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}St(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,So(e,n),i=Jt(i),r=r(i),e.flags|=1,St(t,e,r,n),e.child;case 14:return r=e.type,i=on(r,e.pendingProps),i=on(r.type,i),Yy(t,e,r,i,n);case 15:return Kw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:on(r,i),sc(t,e),e.tag=1,Nt(r)?(t=!0,Fc(e)):t=!1,So(e,n),Hw(e,r,i),ef(e,r,i,n),rf(null,e,r,!0,t,n);case 19:return Zw(t,e,n);case 22:return Qw(t,e,n)}throw Error(U(156,e.tag))};function m_(t,e){return Bx(t,e)}function $A(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(t,e,n,r){return new $A(t,e,n,r)}function zp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function bA(t){if(typeof t=="function")return zp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===lp)return 11;if(t===cp)return 14}return 2}function Br(t,e){var n=t.alternate;return n===null?(n=Yt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function cc(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")zp(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case lo:return Ti(n.children,i,o,e);case ap:s=8,i|=8;break;case Sh:return t=Yt(12,n,e,i|2),t.elementType=Sh,t.lanes=o,t;case Th:return t=Yt(13,n,e,i),t.elementType=Th,t.lanes=o,t;case Ih:return t=Yt(19,n,e,i),t.elementType=Ih,t.lanes=o,t;case Tx:return ku(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Cx:s=10;break e;case Sx:s=9;break e;case lp:s=11;break e;case cp:s=14;break e;case Tr:s=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Yt(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Ti(t,e,n,r){return t=Yt(7,t,r,e),t.lanes=n,t}function ku(t,e,n,r){return t=Yt(22,t,r,e),t.elementType=Tx,t.lanes=n,t.stateNode={isHidden:!1},t}function Yd(t,e,n){return t=Yt(6,t,null,e),t.lanes=n,t}function Xd(t,e,n){return e=Yt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function NA(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$d(0),this.expirationTimes=$d(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$d(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Wp(t,e,n,r,i,o,s,a,l){return t=new NA(t,e,n,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Yt(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ap(o),t}function FA(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ao,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function g_(t){if(!t)return Qr;t=t._reactInternals;e:{if(ji(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Nt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Nt(n))return gw(t,n,e)}return e}function y_(t,e,n,r,i,o,s,a,l){return t=Wp(n,r,!0,t,i,o,s,a,l),t.context=g_(null),n=t.current,r=Tt(),i=Ur(n),o=Jn(r,i),o.callback=e??null,Vr(n,o,i),t.current.lanes=i,Ma(t,i,r),Ft(t,r),t}function Pu(t,e,n,r){var i=e.current,o=Tt(),s=Ur(i);return n=g_(n),e.context===null?e.context=n:e.pendingContext=n,e=Jn(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Vr(i,e,s),t!==null&&(un(t,i,s,o),rc(t,i,s)),s}function Gc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function lv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Hp(t,e){lv(t,e),(t=t.alternate)&&lv(t,e)}function LA(){return null}var v_=typeof reportError=="function"?reportError:function(t){console.error(t)};function qp(t){this._internalRoot=t}Ru.prototype.render=qp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Pu(t,e,null,null)};Ru.prototype.unmount=qp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;bi(function(){Pu(null,t,null,null)}),e[tr]=null}};function Ru(t){this._internalRoot=t}Ru.prototype.unstable_scheduleHydration=function(t){if(t){var e=Qx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ar.length&&e!==0&&e<Ar[n].priority;n++);Ar.splice(n,0,t),n===0&&Xx(t)}};function Gp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function $u(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function cv(){}function OA(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=Gc(s);o.call(u)}}var s=y_(e,r,t,0,null,!1,!1,"",cv);return t._reactRootContainer=s,t[tr]=s.current,ga(t.nodeType===8?t.parentNode:t),bi(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Gc(l);a.call(u)}}var l=Wp(t,0,!1,null,null,!1,!1,"",cv);return t._reactRootContainer=l,t[tr]=l.current,ga(t.nodeType===8?t.parentNode:t),bi(function(){Pu(e,l,n,r)}),l}function bu(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=Gc(s);a.call(l)}}Pu(e,s,t,i)}else s=OA(n,e,t,i,r);return Gc(s)}Gx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Bs(e.pendingLanes);n!==0&&(hp(e,n|1),Ft(e,Me()),!(me&6)&&(Vo=Me()+500,ai()))}break;case 13:bi(function(){var r=nr(t,1);if(r!==null){var i=Tt();un(r,t,1,i)}}),Hp(t,1)}};fp=function(t){if(t.tag===13){var e=nr(t,134217728);if(e!==null){var n=Tt();un(e,t,134217728,n)}Hp(t,134217728)}};Kx=function(t){if(t.tag===13){var e=Ur(t),n=nr(t,e);if(n!==null){var r=Tt();un(n,t,e,r)}Hp(t,e)}};Qx=function(){return we};Yx=function(t,e){var n=we;try{return we=t,e()}finally{we=n}};Oh=function(t,e,n){switch(e){case"input":if(Ph(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Eu(r);if(!i)throw Error(U(90));Ax(r),Ph(r,i)}}}break;case"textarea":Px(t,n);break;case"select":e=n.value,e!=null&&wo(t,!!n.multiple,e,!1)}};Ox=jp;Dx=bi;var DA={usingClientEntryPoint:!1,Events:[ja,fo,Eu,Fx,Lx,jp]},Fs={findFiberByHostInstance:xi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},MA={bundleType:Fs.bundleType,version:Fs.version,rendererPackageName:Fs.rendererPackageName,rendererConfig:Fs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=jx(t),t===null?null:t.stateNode},findFiberByHostInstance:Fs.findFiberByHostInstance||LA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dl.isDisabled&&Dl.supportsFiber)try{vu=Dl.inject(MA),Sn=Dl}catch{}}Ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DA;Ht.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gp(e))throw Error(U(200));return FA(t,e,null,n)};Ht.createRoot=function(t,e){if(!Gp(t))throw Error(U(299));var n=!1,r="",i=v_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Wp(t,1,!1,null,null,n,!1,r,i),t[tr]=e.current,ga(t.nodeType===8?t.parentNode:t),new qp(e)};Ht.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=jx(e),t=t===null?null:t.stateNode,t};Ht.flushSync=function(t){return bi(t)};Ht.hydrate=function(t,e,n){if(!$u(e))throw Error(U(200));return bu(null,t,e,!0,n)};Ht.hydrateRoot=function(t,e,n){if(!Gp(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=v_;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=y_(e,null,t,1,n??null,i,!1,o,s),t[tr]=e.current,ga(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ru(e)};Ht.render=function(t,e,n){if(!$u(e))throw Error(U(200));return bu(null,t,e,!1,n)};Ht.unmountComponentAtNode=function(t){if(!$u(t))throw Error(U(40));return t._reactRootContainer?(bi(function(){bu(null,null,t,!1,function(){t._reactRootContainer=null,t[tr]=null})}),!0):!1};Ht.unstable_batchedUpdates=jp;Ht.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!$u(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return bu(t,e,n,!1,r)};Ht.version="18.3.1-next-f1338f8080-20240426";function x_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(x_)}catch(t){console.error(t)}}x_(),xx.exports=Ht;var ts=xx.exports;const VA=ax(ts);var uv=ts;Eh.createRoot=uv.createRoot,Eh.hydrateRoot=uv.hydrateRoot;var Kp={};Object.defineProperty(Kp,"__esModule",{value:!0});Kp.parse=qA;Kp.serialize=GA;const jA=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,UA=/^[\u0021-\u003A\u003C-\u007E]*$/,BA=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,zA=/^[\u0020-\u003A\u003D-\u007E]*$/,WA=Object.prototype.toString,HA=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function qA(t,e){const n=new HA,r=t.length;if(r<2)return n;const i=(e==null?void 0:e.decode)||KA;let o=0;do{const s=t.indexOf("=",o);if(s===-1)break;const a=t.indexOf(";",o),l=a===-1?r:a;if(s>l){o=t.lastIndexOf(";",s-1)+1;continue}const u=dv(t,o,s),d=hv(t,s,u),f=t.slice(u,d);if(n[f]===void 0){let h=dv(t,s+1,l),y=hv(t,l,h);const E=i(t.slice(h,y));n[f]=E}o=l+1}while(o<r);return n}function dv(t,e,n){do{const r=t.charCodeAt(e);if(r!==32&&r!==9)return e}while(++e<n);return n}function hv(t,e,n){for(;e>n;){const r=t.charCodeAt(--e);if(r!==32&&r!==9)return e+1}return n}function GA(t,e,n){const r=(n==null?void 0:n.encode)||encodeURIComponent;if(!jA.test(t))throw new TypeError(`argument name is invalid: ${t}`);const i=r(e);if(!UA.test(i))throw new TypeError(`argument val is invalid: ${e}`);let o=t+"="+i;if(!n)return o;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);o+="; Max-Age="+n.maxAge}if(n.domain){if(!BA.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);o+="; Domain="+n.domain}if(n.path){if(!zA.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);o+="; Path="+n.path}if(n.expires){if(!QA(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);o+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(o+="; HttpOnly"),n.secure&&(o+="; Secure"),n.partitioned&&(o+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"none":o+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return o}function KA(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function QA(t){return WA.call(t)==="[object Date]"}/**
 * react-router v7.1.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var fv="popstate";function YA(t={}){function e(i,o){let{pathname:s="/",search:a="",hash:l=""}=Ui(i.location.hash.substring(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),gf("",{pathname:s,search:a,hash:l},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){let s=i.document.querySelector("base"),a="";if(s&&s.getAttribute("href")){let l=i.location.href,u=l.indexOf("#");a=u===-1?l:l.slice(0,u)}return a+"#"+(typeof o=="string"?o:Ta(o))}function r(i,o){fn(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return JA(e,n,r,t)}function be(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function fn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function XA(){return Math.random().toString(36).substring(2,10)}function pv(t,e){return{usr:t.state,key:t.key,idx:e}}function gf(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Ui(e):e,state:n,key:e&&e.key||r||XA()}}function Ta({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ui(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function JA(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a="POP",l=null,u=d();u==null&&(u=0,s.replaceState({...s.state,idx:u},""));function d(){return(s.state||{idx:null}).idx}function f(){a="POP";let T=d(),w=T==null?null:T-u;u=T,l&&l({action:a,location:x.location,delta:w})}function h(T,w){a="PUSH";let v=gf(x.location,T,w);n&&n(v,T),u=d()+1;let S=pv(v,u),$=x.createHref(v);try{s.pushState(S,"",$)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;i.location.assign($)}o&&l&&l({action:a,location:x.location,delta:1})}function y(T,w){a="REPLACE";let v=gf(x.location,T,w);n&&n(v,T),u=d();let S=pv(v,u),$=x.createHref(v);s.replaceState(S,"",$),o&&l&&l({action:a,location:x.location,delta:0})}function E(T){let w=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof T=="string"?T:Ta(T);return v=v.replace(/ $/,"%20"),be(w,`No window.location.(origin|href) available to create URL for href: ${v}`),new URL(v,w)}let x={get action(){return a},get location(){return t(i,s)},listen(T){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(fv,f),l=T,()=>{i.removeEventListener(fv,f),l=null}},createHref(T){return e(i,T)},createURL:E,encodeLocation(T){let w=E(T);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:h,replace:y,go(T){return s.go(T)}};return x}function w_(t,e,n="/"){return ZA(t,e,n,!1)}function ZA(t,e,n,r){let i=typeof e=="string"?Ui(e):e,o=Yr(i.pathname||"/",n);if(o==null)return null;let s=__(t);ek(s);let a=null;for(let l=0;a==null&&l<s.length;++l){let u=dk(o);a=ck(s[l],u,r)}return a}function __(t,e=[],n=[],r=""){let i=(o,s,a)=>{let l={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};l.relativePath.startsWith("/")&&(be(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let u=Zn([r,l.relativePath]),d=n.concat(l);o.children&&o.children.length>0&&(be(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),__(o.children,e,d,u)),!(o.path==null&&!o.index)&&e.push({path:u,score:ak(u,o.index),routesMeta:d})};return t.forEach((o,s)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))i(o,s);else for(let l of E_(o.path))i(o,s,l)}),e}function E_(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=E_(r.join("/")),a=[];return a.push(...s.map(l=>l===""?o:[o,l].join("/"))),i&&a.push(...s),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function ek(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:lk(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var tk=/^:[\w-]+$/,nk=3,rk=2,ik=1,ok=10,sk=-2,mv=t=>t==="*";function ak(t,e){let n=t.split("/"),r=n.length;return n.some(mv)&&(r+=sk),e&&(r+=rk),n.filter(i=>!mv(i)).reduce((i,o)=>i+(tk.test(o)?nk:o===""?ik:ok),r)}function lk(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function ck(t,e,n=!1){let{routesMeta:r}=t,i={},o="/",s=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,d=o==="/"?e:e.slice(o.length)||"/",f=Kc({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),h=l.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=Kc({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!f)return null;Object.assign(i,f.params),s.push({params:i,pathname:Zn([o,f.pathname]),pathnameBase:mk(Zn([o,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(o=Zn([o,f.pathnameBase]))}return s}function Kc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=uk(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,{paramName:d,isOptional:f},h)=>{if(d==="*"){let E=a[h]||"";s=o.slice(0,o.length-E.length).replace(/(.)\/+$/,"$1")}const y=a[h];return f&&!y?u[d]=void 0:u[d]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:s,pattern:t}}function uk(t,e=!1,n=!0){fn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function dk(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return fn(!1,`The URL path "${t}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Yr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function hk(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Ui(t):t;return{pathname:n?n.startsWith("/")?n:fk(n,e):e,search:gk(r),hash:yk(i)}}function fk(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Jd(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function pk(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function C_(t){let e=pk(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function S_(t,e,n,r=!1){let i;typeof t=="string"?i=Ui(t):(i={...t},be(!i.pathname||!i.pathname.includes("?"),Jd("?","pathname","search",i)),be(!i.pathname||!i.pathname.includes("#"),Jd("#","pathname","hash",i)),be(!i.search||!i.search.includes("#"),Jd("#","search","hash",i)));let o=t===""||i.pathname==="",s=o?"/":i.pathname,a;if(s==null)a=n;else{let f=e.length-1;if(!r&&s.startsWith("..")){let h=s.split("/");for(;h[0]==="..";)h.shift(),f-=1;i.pathname=h.join("/")}a=f>=0?e[f]:"/"}let l=hk(i,a),u=s&&s!=="/"&&s.endsWith("/"),d=(o||s===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}var Zn=t=>t.join("/").replace(/\/\/+/g,"/"),mk=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),gk=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,yk=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function vk(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var T_=["POST","PUT","PATCH","DELETE"];new Set(T_);var xk=["GET",...T_];new Set(xk);var ns=_.createContext(null);ns.displayName="DataRouter";var Nu=_.createContext(null);Nu.displayName="DataRouterState";var I_=_.createContext({isTransitioning:!1});I_.displayName="ViewTransition";var wk=_.createContext(new Map);wk.displayName="Fetchers";var _k=_.createContext(null);_k.displayName="Await";var Ln=_.createContext(null);Ln.displayName="Navigation";var Ba=_.createContext(null);Ba.displayName="Location";var pr=_.createContext({outlet:null,matches:[],isDataRoute:!1});pr.displayName="Route";var Qp=_.createContext(null);Qp.displayName="RouteError";function Ek(t,{relative:e}={}){be(za(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=_.useContext(Ln),{hash:i,pathname:o,search:s}=Wa(t,{relative:e}),a=o;return n!=="/"&&(a=o==="/"?n:Zn([n,o])),r.createHref({pathname:a,search:s,hash:i})}function za(){return _.useContext(Ba)!=null}function Bi(){return be(za(),"useLocation() may be used only in the context of a <Router> component."),_.useContext(Ba).location}var A_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function k_(t){_.useContext(Ln).static||_.useLayoutEffect(t)}function P_(){let{isDataRoute:t}=_.useContext(pr);return t?Lk():Ck()}function Ck(){be(za(),"useNavigate() may be used only in the context of a <Router> component.");let t=_.useContext(ns),{basename:e,navigator:n}=_.useContext(Ln),{matches:r}=_.useContext(pr),{pathname:i}=Bi(),o=JSON.stringify(C_(r)),s=_.useRef(!1);return k_(()=>{s.current=!0}),_.useCallback((l,u={})=>{if(fn(s.current,A_),!s.current)return;if(typeof l=="number"){n.go(l);return}let d=S_(l,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Zn([e,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[e,n,o,i,t])}_.createContext(null);function Wa(t,{relative:e}={}){let{matches:n}=_.useContext(pr),{pathname:r}=Bi(),i=JSON.stringify(C_(n));return _.useMemo(()=>S_(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function Sk(t,e){return R_(t,e)}function R_(t,e,n,r){var w;be(za(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=_.useContext(Ln),{matches:o}=_.useContext(pr),s=o[o.length-1],a=s?s.params:{},l=s?s.pathname:"/",u=s?s.pathnameBase:"/",d=s&&s.route;{let v=d&&d.path||"";$_(l,!d||v.endsWith("*")||v.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${v}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${v}"> to <Route path="${v==="/"?"*":`${v}/*`}">.`)}let f=Bi(),h;if(e){let v=typeof e=="string"?Ui(e):e;be(u==="/"||((w=v.pathname)==null?void 0:w.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${v.pathname}" was given in the \`location\` prop.`),h=v}else h=f;let y=h.pathname||"/",E=y;if(u!=="/"){let v=u.replace(/^\//,"").split("/");E="/"+y.replace(/^\//,"").split("/").slice(v.length).join("/")}let x=w_(t,{pathname:E});fn(d||x!=null,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),fn(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=Pk(x&&x.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:Zn([u,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?u:Zn([u,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),o,n,r);return e&&T?_.createElement(Ba.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},T):T}function Tk(){let t=Fk(),e=vk(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=_.createElement(_.Fragment,null,_.createElement("p",null," Hey developer "),_.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",_.createElement("code",{style:o},"ErrorBoundary")," or"," ",_.createElement("code",{style:o},"errorElement")," prop on your route.")),_.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),n?_.createElement("pre",{style:i},n):null,s)}var Ik=_.createElement(Tk,null),Ak=class extends _.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?_.createElement(pr.Provider,{value:this.props.routeContext},_.createElement(Qp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function kk({routeContext:t,match:e,children:n}){let r=_.useContext(ns);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),_.createElement(pr.Provider,{value:t},n)}function Pk(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=n==null?void 0:n.errors;if(o!=null){let l=i.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id])!==void 0);be(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let s=!1,a=-1;if(n)for(let l=0;l<i.length;l++){let u=i[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(a=l),u.route.id){let{loaderData:d,errors:f}=n,h=u.route.loader&&!d.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||h){s=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((l,u,d)=>{let f,h=!1,y=null,E=null;n&&(f=o&&u.route.id?o[u.route.id]:void 0,y=u.route.errorElement||Ik,s&&(a<0&&d===0?($_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,E=null):a===d&&(h=!0,E=u.route.hydrateFallbackElement||null)));let x=e.concat(i.slice(0,d+1)),T=()=>{let w;return f?w=y:h?w=E:u.route.Component?w=_.createElement(u.route.Component,null):u.route.element?w=u.route.element:w=l,_.createElement(kk,{match:u,routeContext:{outlet:l,matches:x,isDataRoute:n!=null},children:w})};return n&&(u.route.ErrorBoundary||u.route.errorElement||d===0)?_.createElement(Ak,{location:n.location,revalidation:n.revalidation,component:y,error:f,children:T(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):T()},null)}function Yp(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Rk(t){let e=_.useContext(ns);return be(e,Yp(t)),e}function $k(t){let e=_.useContext(Nu);return be(e,Yp(t)),e}function bk(t){let e=_.useContext(pr);return be(e,Yp(t)),e}function Xp(t){let e=bk(t),n=e.matches[e.matches.length-1];return be(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function Nk(){return Xp("useRouteId")}function Fk(){var r;let t=_.useContext(Qp),e=$k("useRouteError"),n=Xp("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function Lk(){let{router:t}=Rk("useNavigate"),e=Xp("useNavigate"),n=_.useRef(!1);return k_(()=>{n.current=!0}),_.useCallback(async(i,o={})=>{fn(n.current,A_),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...o}))},[t,e])}var gv={};function $_(t,e,n){!e&&!gv[t]&&(gv[t]=!0,fn(!1,n))}_.memo(Ok);function Ok({routes:t,future:e,state:n}){return R_(t,void 0,n,e)}function yf(t){be(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Dk({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:o=!1}){be(!za(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=t.replace(/^\/*/,"/"),a=_.useMemo(()=>({basename:s,navigator:i,static:o,future:{}}),[s,i,o]);typeof n=="string"&&(n=Ui(n));let{pathname:l="/",search:u="",hash:d="",state:f=null,key:h="default"}=n,y=_.useMemo(()=>{let E=Yr(l,s);return E==null?null:{location:{pathname:E,search:u,hash:d,state:f,key:h},navigationType:r}},[s,l,u,d,f,h,r]);return fn(y!=null,`<Router basename="${s}"> is not able to match the URL "${l}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:_.createElement(Ln.Provider,{value:a},_.createElement(Ba.Provider,{children:e,value:y}))}function Mk({children:t,location:e}){return Sk(vf(t),e)}function vf(t,e=[]){let n=[];return _.Children.forEach(t,(r,i)=>{if(!_.isValidElement(r))return;let o=[...e,i];if(r.type===_.Fragment){n.push.apply(n,vf(r.props.children,o));return}be(r.type===yf,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),be(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=vf(r.props.children,o)),n.push(s)}),n}var uc="get",dc="application/x-www-form-urlencoded";function Fu(t){return t!=null&&typeof t.tagName=="string"}function Vk(t){return Fu(t)&&t.tagName.toLowerCase()==="button"}function jk(t){return Fu(t)&&t.tagName.toLowerCase()==="form"}function Uk(t){return Fu(t)&&t.tagName.toLowerCase()==="input"}function Bk(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function zk(t,e){return t.button===0&&(!e||e==="_self")&&!Bk(t)}var Ml=null;function Wk(){if(Ml===null)try{new FormData(document.createElement("form"),0),Ml=!1}catch{Ml=!0}return Ml}var Hk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Zd(t){return t!=null&&!Hk.has(t)?(fn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${dc}"`),null):t}function qk(t,e){let n,r,i,o,s;if(jk(t)){let a=t.getAttribute("action");r=a?Yr(a,e):null,n=t.getAttribute("method")||uc,i=Zd(t.getAttribute("enctype"))||dc,o=new FormData(t)}else if(Vk(t)||Uk(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?Yr(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||uc,i=Zd(t.getAttribute("formenctype"))||Zd(a.getAttribute("enctype"))||dc,o=new FormData(a,t),!Wk()){let{name:u,type:d,value:f}=t;if(d==="image"){let h=u?`${u}.`:"";o.append(`${h}x`,"0"),o.append(`${h}y`,"0")}else u&&o.append(u,f)}}else{if(Fu(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=uc,r=null,i=dc,s=t}return o&&i==="text/plain"&&(s=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:s}}function Jp(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function Gk(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Kk(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Qk(t,e,n){let r=await Promise.all(t.map(async i=>{let o=e.routes[i.route.id];if(o){let s=await Gk(o,n);return s.links?s.links():[]}return[]}));return Zk(r.flat(1).filter(Kk).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function yv(t,e,n,r,i,o){let s=(l,u)=>n[u]?l.route.id!==n[u].route.id:!0,a=(l,u)=>{var d;return n[u].pathname!==l.pathname||((d=n[u].route.path)==null?void 0:d.endsWith("*"))&&n[u].params["*"]!==l.params["*"]};return o==="assets"?e.filter((l,u)=>s(l,u)||a(l,u)):o==="data"?e.filter((l,u)=>{var f;let d=r.routes[l.route.id];if(!d||!d.hasLoader)return!1;if(s(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function Yk(t,e){return Xk(t.map(n=>{let r=e.routes[n.route.id];if(!r)return[];let i=[r.module];return r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function Xk(t){return[...new Set(t)]}function Jk(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function Zk(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let o=JSON.stringify(Jk(i));return n.has(o)||(n.add(o),r.push({key:o,link:i})),r},[])}function eP(t){let e=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function tP(){let t=_.useContext(ns);return Jp(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function nP(){let t=_.useContext(Nu);return Jp(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Zp=_.createContext(void 0);Zp.displayName="FrameworkContext";function b_(){let t=_.useContext(Zp);return Jp(t,"You must render this element inside a <HydratedRouter> element"),t}function rP(t,e){let n=_.useContext(Zp),[r,i]=_.useState(!1),[o,s]=_.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=e,h=_.useRef(null);_.useEffect(()=>{if(t==="render"&&s(!0),t==="viewport"){let x=w=>{w.forEach(v=>{s(v.isIntersecting)})},T=new IntersectionObserver(x,{threshold:.5});return h.current&&T.observe(h.current),()=>{T.disconnect()}}},[t]),_.useEffect(()=>{if(r){let x=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(x)}}},[r]);let y=()=>{i(!0)},E=()=>{i(!1),s(!1)};return n?t!=="intent"?[o,h,{}]:[o,h,{onFocus:Ls(a,y),onBlur:Ls(l,E),onMouseEnter:Ls(u,y),onMouseLeave:Ls(d,E),onTouchStart:Ls(f,y)}]:[!1,h,{}]}function Ls(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function iP({page:t,...e}){let{router:n}=tP(),r=_.useMemo(()=>w_(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?_.createElement(sP,{page:t,matches:r,...e}):null}function oP(t){let{manifest:e,routeModules:n}=b_(),[r,i]=_.useState([]);return _.useEffect(()=>{let o=!1;return Qk(t,e,n).then(s=>{o||i(s)}),()=>{o=!0}},[t,e,n]),r}function sP({page:t,matches:e,...n}){let r=Bi(),{manifest:i,routeModules:o}=b_(),{loaderData:s,matches:a}=nP(),l=_.useMemo(()=>yv(t,e,a,i,r,"data"),[t,e,a,i,r]),u=_.useMemo(()=>yv(t,e,a,i,r,"assets"),[t,e,a,i,r]),d=_.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let y=new Set,E=!1;if(e.forEach(T=>{var v;let w=i.routes[T.route.id];!w||!w.hasLoader||(!l.some(S=>S.route.id===T.route.id)&&T.route.id in s&&((v=o[T.route.id])!=null&&v.shouldRevalidate)||w.hasClientLoader?E=!0:y.add(T.route.id))}),y.size===0)return[];let x=eP(t);return E&&y.size>0&&x.searchParams.set("_routes",e.filter(T=>y.has(T.route.id)).map(T=>T.route.id).join(",")),[x.pathname+x.search]},[s,r,i,l,e,t,o]),f=_.useMemo(()=>Yk(u,i),[u,i]),h=oP(u);return _.createElement(_.Fragment,null,d.map(y=>_.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...n})),f.map(y=>_.createElement("link",{key:y,rel:"modulepreload",href:y,...n})),h.map(({key:y,link:E})=>_.createElement("link",{key:y,...E})))}function aP(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var N_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{N_&&(window.__reactRouterVersion="7.1.1")}catch{}function lP({basename:t,children:e,window:n}){let r=_.useRef();r.current==null&&(r.current=YA({window:n,v5Compat:!0}));let i=r.current,[o,s]=_.useState({action:i.action,location:i.location}),a=_.useCallback(l=>{_.startTransition(()=>s(l))},[s]);return _.useLayoutEffect(()=>i.listen(a),[i,a]),_.createElement(Dk,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:i})}var F_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,L_=_.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:s,state:a,target:l,to:u,preventScrollReset:d,viewTransition:f,...h},y){let{basename:E}=_.useContext(Ln),x=typeof u=="string"&&F_.test(u),T,w=!1;if(typeof u=="string"&&x&&(T=u,N_))try{let k=new URL(window.location.href),P=u.startsWith("//")?new URL(k.protocol+u):new URL(u),b=Yr(P.pathname,E);P.origin===k.origin&&b!=null?u=b+P.search+P.hash:w=!0}catch{fn(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=Ek(u,{relative:i}),[S,$,F]=rP(r,h),O=hP(u,{replace:s,state:a,target:l,preventScrollReset:d,relative:i,viewTransition:f});function I(k){e&&e(k),k.defaultPrevented||O(k)}let C=_.createElement("a",{...h,...F,href:T||v,onClick:w||o?e:I,ref:aP(y,$),target:l,"data-discover":!x&&n==="render"?"true":void 0});return S&&!x?_.createElement(_.Fragment,null,C,_.createElement(iP,{page:v})):C});L_.displayName="Link";var cP=_.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:s,viewTransition:a,children:l,...u},d){let f=Wa(s,{relative:u.relative}),h=Bi(),y=_.useContext(Nu),{navigator:E,basename:x}=_.useContext(Ln),T=y!=null&&yP(f)&&a===!0,w=E.encodeLocation?E.encodeLocation(f).pathname:f.pathname,v=h.pathname,S=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;n||(v=v.toLowerCase(),S=S?S.toLowerCase():null,w=w.toLowerCase()),S&&x&&(S=Yr(S,x)||S);const $=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let F=v===w||!i&&v.startsWith(w)&&v.charAt($)==="/",O=S!=null&&(S===w||!i&&S.startsWith(w)&&S.charAt(w.length)==="/"),I={isActive:F,isPending:O,isTransitioning:T},C=F?e:void 0,k;typeof r=="function"?k=r(I):k=[r,F?"active":null,O?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let P=typeof o=="function"?o(I):o;return _.createElement(L_,{...u,"aria-current":C,className:k,ref:d,style:P,to:s,viewTransition:a},typeof l=="function"?l(I):l)});cP.displayName="NavLink";var uP=_.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:o,method:s=uc,action:a,onSubmit:l,relative:u,preventScrollReset:d,viewTransition:f,...h},y)=>{let E=mP(),x=gP(a,{relative:u}),T=s.toLowerCase()==="get"?"get":"post",w=typeof a=="string"&&F_.test(a),v=S=>{if(l&&l(S),S.defaultPrevented)return;S.preventDefault();let $=S.nativeEvent.submitter,F=($==null?void 0:$.getAttribute("formmethod"))||s;E($||S.currentTarget,{fetcherKey:e,method:F,navigate:n,replace:i,state:o,relative:u,preventScrollReset:d,viewTransition:f})};return _.createElement("form",{ref:y,method:T,action:x,onSubmit:r?l:v,...h,"data-discover":!w&&t==="render"?"true":void 0})});uP.displayName="Form";function dP(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function O_(t){let e=_.useContext(ns);return be(e,dP(t)),e}function hP(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:s}={}){let a=P_(),l=Bi(),u=Wa(t,{relative:o});return _.useCallback(d=>{if(zk(d,e)){d.preventDefault();let f=n!==void 0?n:Ta(l)===Ta(u);a(t,{replace:f,state:r,preventScrollReset:i,relative:o,viewTransition:s})}},[l,a,u,n,r,e,t,i,o,s])}var fP=0,pP=()=>`__${String(++fP)}__`;function mP(){let{router:t}=O_("useSubmit"),{basename:e}=_.useContext(Ln),n=Nk();return _.useCallback(async(r,i={})=>{let{action:o,method:s,encType:a,formData:l,body:u}=qk(r,e);if(i.navigate===!1){let d=i.fetcherKey||pP();await t.fetch(d,n,i.action||o,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||s,formEncType:i.encType||a,flushSync:i.flushSync})}else await t.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||s,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function gP(t,{relative:e}={}){let{basename:n}=_.useContext(Ln),r=_.useContext(pr);be(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...Wa(t||".",{relative:e})},s=Bi();if(t==null){o.search=s.search;let a=new URLSearchParams(o.search),l=a.getAll("index");if(l.some(d=>d==="")){a.delete("index"),l.filter(f=>f).forEach(f=>a.append("index",f));let d=a.toString();o.search=d?`?${d}`:""}}return(!t||t===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Zn([n,o.pathname])),Ta(o)}function yP(t,e={}){let n=_.useContext(I_);be(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=O_("useViewTransitionState"),i=Wa(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=Yr(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=Yr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Kc(i.pathname,s)!=null||Kc(i.pathname,o)!=null}new TextEncoder;var vv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},vP=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],s=t[n++],a=t[n++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},M_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,a=s?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,d=o>>2,f=(o&3)<<4|a>>4;let h=(a&15)<<2|u>>6,y=u&63;l||(y=64,s||(h=64)),r.push(n[d],n[f],n[h],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(D_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):vP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||u==null||f==null)throw new xP;const h=o<<2|a>>4;if(r.push(h),u!==64){const y=a<<4&240|u>>2;if(r.push(y),f!==64){const E=u<<6&192|f;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class xP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wP=function(t){const e=D_(t);return M_.encodeByteArray(e,!0)},Qc=function(t){return wP(t).replace(/\./g,"")},V_=function(t){try{return M_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _P(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP=()=>_P().__FIREBASE_DEFAULTS__,CP=()=>{if(typeof process>"u"||typeof vv>"u")return;const t=vv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},SP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&V_(t[1]);return e&&JSON.parse(e)},Lu=()=>{try{return EP()||CP()||SP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},j_=t=>{var e,n;return(n=(e=Lu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},TP=t=>{const e=j_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},U_=()=>{var t;return(t=Lu())===null||t===void 0?void 0:t.config},B_=t=>{var e;return(e=Lu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Qc(JSON.stringify(n)),Qc(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_t())}function PP(){var t;const e=(t=Lu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $P(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function bP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function NP(){const t=_t();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function FP(){return!PP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function LP(){try{return typeof indexedDB=="object"}catch{return!1}}function OP(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP="FirebaseError";class mr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=DP,Object.setPrototypeOf(this,mr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ha.prototype.create)}}class Ha{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?MP(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new mr(i,a,r)}}function MP(t,e){return t.replace(VP,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const VP=/\{\$([^}]+)}/g;function jP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Yc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(xv(o)&&xv(s)){if(!Yc(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function xv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function UP(t,e){const n=new BP(t,e);return n.subscribe.bind(n)}class BP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");zP(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=eh),i.error===void 0&&(i.error=eh),i.complete===void 0&&(i.complete=eh);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function eh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(t){return t&&t._delegate?t._delegate:t}class Ni{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new IP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qP(e))try{this.getOrInitializeService({instanceIdentifier:vi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=vi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=vi){return this.instances.has(e)}getOptions(e=vi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:HP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=vi){return this.component?this.component.multipleInstances?e:vi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function HP(t){return t===vi?void 0:t}function qP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new WP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ce||(ce={}));const KP={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},QP=ce.INFO,YP={[ce.DEBUG]:"log",[ce.VERBOSE]:"log",[ce.INFO]:"info",[ce.WARN]:"warn",[ce.ERROR]:"error"},XP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=YP[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class em{constructor(e){this.name=e,this._logLevel=QP,this._logHandler=XP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?KP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ce.DEBUG,...e),this._logHandler(this,ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ce.VERBOSE,...e),this._logHandler(this,ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ce.INFO,...e),this._logHandler(this,ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ce.WARN,...e),this._logHandler(this,ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ce.ERROR,...e),this._logHandler(this,ce.ERROR,...e)}}const JP=(t,e)=>e.some(n=>t instanceof n);let wv,_v;function ZP(){return wv||(wv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eR(){return _v||(_v=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const z_=new WeakMap,xf=new WeakMap,W_=new WeakMap,th=new WeakMap,tm=new WeakMap;function tR(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(zr(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&z_.set(n,t)}).catch(()=>{}),tm.set(e,t),e}function nR(t){if(xf.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});xf.set(t,e)}let wf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return xf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||W_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function rR(t){wf=t(wf)}function iR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(nh(this),e,...n);return W_.set(r,e.sort?e.sort():[e]),zr(r)}:eR().includes(t)?function(...e){return t.apply(nh(this),e),zr(z_.get(this))}:function(...e){return zr(t.apply(nh(this),e))}}function oR(t){return typeof t=="function"?iR(t):(t instanceof IDBTransaction&&nR(t),JP(t,ZP())?new Proxy(t,wf):t)}function zr(t){if(t instanceof IDBRequest)return tR(t);if(th.has(t))return th.get(t);const e=oR(t);return e!==t&&(th.set(t,e),tm.set(e,t)),e}const nh=t=>tm.get(t);function sR(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=zr(s);return r&&s.addEventListener("upgradeneeded",l=>{r(zr(s.result),l.oldVersion,l.newVersion,zr(s.transaction),l)}),n&&s.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const aR=["get","getKey","getAll","getAllKeys","count"],lR=["put","add","delete","clear"],rh=new Map;function Ev(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(rh.get(e))return rh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=lR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||aR.includes(n)))return;const o=async function(s,...a){const l=this.transaction(s,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return rh.set(e,o),o}rR(t=>({...t,get:(e,n,r)=>Ev(e,n)||t.get(e,n,r),has:(e,n)=>!!Ev(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(uR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function uR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const _f="@firebase/app",Cv="0.10.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir=new em("@firebase/app"),dR="@firebase/app-compat",hR="@firebase/analytics-compat",fR="@firebase/analytics",pR="@firebase/app-check-compat",mR="@firebase/app-check",gR="@firebase/auth",yR="@firebase/auth-compat",vR="@firebase/database",xR="@firebase/data-connect",wR="@firebase/database-compat",_R="@firebase/functions",ER="@firebase/functions-compat",CR="@firebase/installations",SR="@firebase/installations-compat",TR="@firebase/messaging",IR="@firebase/messaging-compat",AR="@firebase/performance",kR="@firebase/performance-compat",PR="@firebase/remote-config",RR="@firebase/remote-config-compat",$R="@firebase/storage",bR="@firebase/storage-compat",NR="@firebase/firestore",FR="@firebase/vertexai",LR="@firebase/firestore-compat",OR="firebase",DR="11.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ef="[DEFAULT]",MR={[_f]:"fire-core",[dR]:"fire-core-compat",[fR]:"fire-analytics",[hR]:"fire-analytics-compat",[mR]:"fire-app-check",[pR]:"fire-app-check-compat",[gR]:"fire-auth",[yR]:"fire-auth-compat",[vR]:"fire-rtdb",[xR]:"fire-data-connect",[wR]:"fire-rtdb-compat",[_R]:"fire-fn",[ER]:"fire-fn-compat",[CR]:"fire-iid",[SR]:"fire-iid-compat",[TR]:"fire-fcm",[IR]:"fire-fcm-compat",[AR]:"fire-perf",[kR]:"fire-perf-compat",[PR]:"fire-rc",[RR]:"fire-rc-compat",[$R]:"fire-gcs",[bR]:"fire-gcs-compat",[NR]:"fire-fst",[LR]:"fire-fst-compat",[FR]:"fire-vertex","fire-js":"fire-js",[OR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xc=new Map,VR=new Map,Cf=new Map;function Sv(t,e){try{t.container.addComponent(e)}catch(n){ir.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function jo(t){const e=t.name;if(Cf.has(e))return ir.debug(`There were multiple attempts to register component ${e}.`),!1;Cf.set(e,t);for(const n of Xc.values())Sv(n,t);for(const n of VR.values())Sv(n,t);return!0}function nm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Kn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wr=new Ha("app","Firebase",jR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ni("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs=DR;function H_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ef,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Wr.create("bad-app-name",{appName:String(i)});if(n||(n=U_()),!n)throw Wr.create("no-options");const o=Xc.get(i);if(o){if(Yc(n,o.options)&&Yc(r,o.config))return o;throw Wr.create("duplicate-app",{appName:i})}const s=new GP(i);for(const l of Cf.values())s.addComponent(l);const a=new UR(n,r,s);return Xc.set(i,a),a}function q_(t=Ef){const e=Xc.get(t);if(!e&&t===Ef&&U_())return H_();if(!e)throw Wr.create("no-app",{appName:t});return e}function Hr(t,e,n){var r;let i=(r=MR[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ir.warn(a.join(" "));return}jo(new Ni(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR="firebase-heartbeat-database",zR=1,Ia="firebase-heartbeat-store";let ih=null;function G_(){return ih||(ih=sR(BR,zR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ia)}catch(n){console.warn(n)}}}}).catch(t=>{throw Wr.create("idb-open",{originalErrorMessage:t.message})})),ih}async function WR(t){try{const n=(await G_()).transaction(Ia),r=await n.objectStore(Ia).get(K_(t));return await n.done,r}catch(e){if(e instanceof mr)ir.warn(e.message);else{const n=Wr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ir.warn(n.message)}}}async function Tv(t,e){try{const r=(await G_()).transaction(Ia,"readwrite");await r.objectStore(Ia).put(e,K_(t)),await r.done}catch(n){if(n instanceof mr)ir.warn(n.message);else{const r=Wr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ir.warn(r.message)}}}function K_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR=1024,qR=30*24*60*60*1e3;class GR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new QR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Iv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const a=new Date(s.date).valueOf();return Date.now()-a<=qR}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ir.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Iv(),{heartbeatsToSend:r,unsentEntries:i}=KR(this._heartbeatsCache.heartbeats),o=Qc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return ir.warn(n),""}}}function Iv(){return new Date().toISOString().substring(0,10)}function KR(t,e=HR){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Av(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Av(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class QR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return LP()?OP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await WR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Tv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Tv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Av(t){return Qc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(t){jo(new Ni("platform-logger",e=>new cR(e),"PRIVATE")),jo(new Ni("heartbeat",e=>new GR(e),"PRIVATE")),Hr(_f,Cv,t),Hr(_f,Cv,"esm2017"),Hr("fire-js","")}YR("");var XR="firebase",JR="11.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hr(XR,JR,"app");var Cn=function(){return Cn=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Cn.apply(this,arguments)};function Ga(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function ZR(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}function Q_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const e2=Q_,Y_=new Ha("auth","Firebase",Q_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jc=new em("@firebase/auth");function t2(t,...e){Jc.logLevel<=ce.WARN&&Jc.warn(`Auth (${rs}): ${t}`,...e)}function hc(t,...e){Jc.logLevel<=ce.ERROR&&Jc.error(`Auth (${rs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(t,...e){throw im(t,...e)}function dn(t,...e){return im(t,...e)}function rm(t,e,n){const r=Object.assign(Object.assign({},e2()),{[e]:n});return new Ha("auth","Firebase",r).create(e,{appName:t.name})}function Ii(t){return rm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function n2(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&$n(t,"argument-error"),rm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function im(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Y_.create(t,...e)}function te(t,e,...n){if(!t)throw im(e,...n)}function Qn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw hc(e),new Error(e)}function or(t,e){t||Qn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function r2(){return kv()==="http:"||kv()==="https:"}function kv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(r2()||$P()||"connection"in navigator)?navigator.onLine:!0}function o2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,n){this.shortDelay=e,this.longDelay=n,or(n>e,"Short delay should be less than long delay!"),this.isMobile=kP()||bP()}get(){return i2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(t,e){or(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=new Ka(3e4,6e4);function sm(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function is(t,e,n,r,i={}){return J_(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});const a=qa(Object.assign({key:t.config.apiKey},s)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},o);return RP()||(u.referrerPolicy="no-referrer"),X_.fetch()(Z_(t,t.config.apiHost,n,a),u)})}async function J_(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},s2),e);try{const i=new c2(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw Vl(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vl(t,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw Vl(t,"email-already-in-use",s);if(l==="USER_DISABLED")throw Vl(t,"user-disabled",s);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw rm(t,d,u);$n(t,d)}}catch(i){if(i instanceof mr)throw i;$n(t,"network-request-failed",{message:String(i)})}}async function l2(t,e,n,r,i={}){const o=await is(t,e,n,r,i);return"mfaPendingCredential"in o&&$n(t,"multi-factor-auth-required",{_serverResponse:o}),o}function Z_(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?om(t.config,i):`${t.config.apiScheme}://${i}`}class c2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(dn(this.auth,"network-request-failed")),a2.get())})}}function Vl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=dn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u2(t,e){return is(t,"POST","/v1/accounts:delete",e)}async function eE(t,e){return is(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function d2(t,e=!1){const n=zt(t),r=await n.getIdToken(e),i=am(r);te(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:ra(oh(i.auth_time)),issuedAtTime:ra(oh(i.iat)),expirationTime:ra(oh(i.exp)),signInProvider:s||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function oh(t){return Number(t)*1e3}function am(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return hc("JWT malformed, contained fewer than 3 sections"),null;try{const i=V_(n);return i?JSON.parse(i):(hc("Failed to decode base64 JWT payload"),null)}catch(i){return hc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Pv(t){const e=am(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aa(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof mr&&h2(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function h2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ra(this.lastLoginAt),this.creationTime=ra(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zc(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Aa(t,eE(n,{idToken:r}));te(i==null?void 0:i.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?tE(o.providerUserInfo):[],a=m2(t.providerData,s),l=t.isAnonymous,u=!(t.email&&o.passwordHash)&&!(a!=null&&a.length),d=l?u:!1,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Tf(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function p2(t){const e=zt(t);await Zc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function m2(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function tE(t){return t.map(e=>{var{providerId:n}=e,r=Ga(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g2(t,e){const n=await J_(t,{},async()=>{const r=qa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=Z_(t,i,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",X_.fetch()(s,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function y2(t,e){return is(t,"POST","/v2/accounts:revokeToken",sm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Pv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){te(e.length!==0,"internal-error");const n=Pv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await g2(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new Io;return r&&(te(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(te(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(te(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Io,this.toJSON())}_performRefresh(){return Qn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Yn{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Ga(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new f2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Tf(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Aa(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return d2(this,e)}reload(){return p2(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Yn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Zc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Kn(this.auth.app))return Promise.reject(Ii(this.auth));const e=await this.getIdToken();return await Aa(this,u2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,l,u,d;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,y=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,E=(s=n.photoURL)!==null&&s!==void 0?s:void 0,x=(a=n.tenantId)!==null&&a!==void 0?a:void 0,T=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,w=(u=n.createdAt)!==null&&u!==void 0?u:void 0,v=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:S,emailVerified:$,isAnonymous:F,providerData:O,stsTokenManager:I}=n;te(S&&I,e,"internal-error");const C=Io.fromJSON(this.name,I);te(typeof S=="string",e,"internal-error"),_r(f,e.name),_r(h,e.name),te(typeof $=="boolean",e,"internal-error"),te(typeof F=="boolean",e,"internal-error"),_r(y,e.name),_r(E,e.name),_r(x,e.name),_r(T,e.name),_r(w,e.name),_r(v,e.name);const k=new Yn({uid:S,auth:e,email:h,emailVerified:$,displayName:f,isAnonymous:F,photoURL:E,phoneNumber:y,tenantId:x,stsTokenManager:C,createdAt:w,lastLoginAt:v});return O&&Array.isArray(O)&&(k.providerData=O.map(P=>Object.assign({},P))),T&&(k._redirectEventId=T),k}static async _fromIdTokenResponse(e,n,r=!1){const i=new Io;i.updateFromServerResponse(n);const o=new Yn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Zc(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];te(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?tE(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),a=new Io;a.updateFromIdToken(r);const l=new Yn({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Tf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv=new Map;function Xn(t){or(t instanceof Function,"Expected a class definition");let e=Rv.get(t);return e?(or(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Rv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}nE.type="NONE";const $v=nE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(t,e,n){return`firebase:${t}:${e}:${n}`}class Ao{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=fc(this.userKey,i.apiKey,o),this.fullPersistenceKey=fc("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Yn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ao(Xn($v),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let o=i[0]||Xn($v);const s=fc(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(s);if(d){const f=Yn._fromJSON(e,d);u!==o&&(a=f),o=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!l.length?new Ao(o,e,r):(o=l[0],a&&await o._set(s,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==o)try{await u._remove(s)}catch{}})),new Ao(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lE(e))return"Blackberry";if(cE(e))return"Webos";if(iE(e))return"Safari";if((e.includes("chrome/")||oE(e))&&!e.includes("edge/"))return"Chrome";if(aE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function rE(t=_t()){return/firefox\//i.test(t)}function iE(t=_t()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function oE(t=_t()){return/crios\//i.test(t)}function sE(t=_t()){return/iemobile/i.test(t)}function aE(t=_t()){return/android/i.test(t)}function lE(t=_t()){return/blackberry/i.test(t)}function cE(t=_t()){return/webos/i.test(t)}function lm(t=_t()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function v2(t=_t()){var e;return lm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function x2(){return NP()&&document.documentMode===10}function uE(t=_t()){return lm(t)||aE(t)||cE(t)||lE(t)||/windows phone/i.test(t)||sE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(t,e=[]){let n;switch(t){case"Browser":n=bv(_t());break;case"Worker":n=`${bv(_t())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${rs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,a)=>{try{const l=e(o);s(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _2(t,e={}){return is(t,"GET","/v2/passwordPolicy",sm(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2=6;class C2{constructor(e){var n,r,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:E2,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsUppercaseLetter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(s=l.containsNumericCharacter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Nv(this),this.idTokenSubscription=new Nv(this),this.beforeStateQueue=new w2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Y_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Xn(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ao.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await eE(this,{idToken:e}),r=await Yn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Kn(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!s||s===a)&&(l!=null&&l.user)&&(i=l.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Zc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=o2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Kn(this.app))return Promise.reject(Ii(this));const n=e?zt(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Kn(this.app)?Promise.reject(Ii(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Kn(this.app)?Promise.reject(Ii(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _2(this),n=new C2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ha("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await y2(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Xn(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await Ao.create(this,[Xn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{s=!0,l()}}else{const l=e.addObserver(n);return()=>{s=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=dE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&t2(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ou(t){return zt(t)}class Nv{constructor(e){this.auth=e,this.observer=null,this.addObserver=UP(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function T2(t){cm=t}function I2(t){return cm.loadJS(t)}function A2(){return cm.gapiScript}function k2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(t,e){const n=nm(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(Yc(o,e??{}))return i;$n(i,"already-initialized")}return n.initialize({options:e})}function R2(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Xn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function $2(t,e,n){const r=Ou(t);te(r._canInitEmulator,r,"emulator-config-failed"),te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=hE(e),{host:s,port:a}=b2(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),N2()}function hE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function b2(t){const e=hE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:Fv(r.substr(o.length+1))}}else{const[o,s]=r.split(":");return{host:o,port:Fv(s)}}}function Fv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function N2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Qn("not implemented")}_getIdTokenResponse(e){return Qn("not implemented")}_linkToIdToken(e,n){return Qn("not implemented")}_getReauthenticationResolver(e){return Qn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ko(t,e){return l2(t,"POST","/v1/accounts:signInWithIdp",sm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2="http://localhost";class Fi extends fE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Fi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):$n("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=Ga(n,["providerId","signInMethod"]);if(!r||!i)return null;const s=new Fi(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return ko(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ko(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ko(e,n)}buildRequest(){const e={requestUri:F2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=qa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa extends um{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends Qa{constructor(){super("facebook.com")}static credential(e){return Fi._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pr.credentialFromTaggedObject(e)}static credentialFromError(e){return Pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pr.credential(e.oauthAccessToken)}catch{return null}}}Pr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Pr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn extends Qa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Fi._fromParams({providerId:Hn.PROVIDER_ID,signInMethod:Hn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Hn.credentialFromTaggedObject(e)}static credentialFromError(e){return Hn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Hn.credential(n,r)}catch{return null}}}Hn.GOOGLE_SIGN_IN_METHOD="google.com";Hn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends Qa{constructor(){super("github.com")}static credential(e){return Fi._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rr.credential(e.oauthAccessToken)}catch{return null}}}Rr.GITHUB_SIGN_IN_METHOD="github.com";Rr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends Qa{constructor(){super("twitter.com")}static credential(e,n){return Fi._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return $r.credential(n,r)}catch{return null}}}$r.TWITTER_SIGN_IN_METHOD="twitter.com";$r.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await Yn._fromIdTokenResponse(e,r,i),s=Lv(r);return new Uo({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Lv(r);return new Uo({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Lv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu extends mr{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,eu.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new eu(e,n,r,i)}}function pE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?eu._fromErrorAndOperation(t,o,e,r):o})}async function L2(t,e,n=!1){const r=await Aa(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Uo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O2(t,e,n=!1){const{auth:r}=t;if(Kn(r.app))return Promise.reject(Ii(r));const i="reauthenticate";try{const o=await Aa(t,pE(r,i,e,t),n);te(o.idToken,r,"internal-error");const s=am(o.idToken);te(s,r,"internal-error");const{sub:a}=s;return te(t.uid===a,r,"user-mismatch"),Uo._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&$n(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D2(t,e,n=!1){if(Kn(t.app))return Promise.reject(Ii(t));const r="signIn",i=await pE(t,r,e),o=await Uo._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}function M2(t,e,n,r){return zt(t).onIdTokenChanged(e,n,r)}function V2(t,e,n){return zt(t).beforeAuthStateChanged(e,n)}function j2(t,e,n,r){return zt(t).onAuthStateChanged(e,n,r)}function U2(t){return zt(t).signOut()}const tu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(tu,"1"),this.storage.removeItem(tu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2=1e3,z2=10;class gE extends mE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=uE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,a,l)=>{this.notifyListeners(s,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},o=this.storage.getItem(r);x2()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,z2):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},B2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}gE.type="LOCAL";const W2=gE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE extends mE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}yE.type="SESSION";const vE=yE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H2(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Du(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(s).map(async u=>u(n.origin,o)),l=await H2(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Du.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,l)=>{const u=dm("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(f){const h=f;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(h.data.response);break;default:clearTimeout(d),clearTimeout(o),l(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(){return window}function G2(t){In().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(){return typeof In().WorkerGlobalScope<"u"&&typeof In().importScripts=="function"}async function K2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Q2(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Y2(){return xE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE="firebaseLocalStorageDb",X2=1,nu="firebaseLocalStorage",_E="fbase_key";class Ya{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Mu(t,e){return t.transaction([nu],e?"readwrite":"readonly").objectStore(nu)}function J2(){const t=indexedDB.deleteDatabase(wE);return new Ya(t).toPromise()}function If(){const t=indexedDB.open(wE,X2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(nu,{keyPath:_E})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(nu)?e(r):(r.close(),await J2(),e(await If()))})})}async function Ov(t,e,n){const r=Mu(t,!0).put({[_E]:e,value:n});return new Ya(r).toPromise()}async function Z2(t,e){const n=Mu(t,!1).get(e),r=await new Ya(n).toPromise();return r===void 0?null:r.value}function Dv(t,e){const n=Mu(t,!0).delete(e);return new Ya(n).toPromise()}const e$=800,t$=3;class EE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await If(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>t$)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Du._getInstance(Y2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await K2(),!this.activeServiceWorker)return;this.sender=new q2(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Q2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await If();return await Ov(e,tu,"1"),await Dv(e,tu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ov(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Z2(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Dv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Mu(i,!1).getAll();return new Ya(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),e$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}EE.type="LOCAL";const n$=EE;new Ka(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(t,e){return e?Xn(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm extends fE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ko(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ko(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ko(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function r$(t){return D2(t.auth,new hm(t),t.bypassAuthState)}function i$(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),O2(n,new hm(t),t.bypassAuthState)}async function o$(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),L2(n,new hm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return r$;case"linkViaPopup":case"linkViaRedirect":return o$;case"reauthViaPopup":case"reauthViaRedirect":return i$;default:$n(this.auth,"internal-error")}}resolve(e){or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s$=new Ka(2e3,1e4);async function a$(t,e,n){if(Kn(t.app))return Promise.reject(dn(t,"operation-not-supported-in-this-environment"));const r=Ou(t);n2(t,e,um);const i=CE(r,n);return new Ei(r,"signInViaPopup",e,i).executeNotNull()}class Ei extends SE{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Ei.currentPopupAction&&Ei.currentPopupAction.cancel(),Ei.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){or(this.filter.length===1,"Popup operations only handle one event");const e=dm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(dn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(dn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ei.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(dn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,s$.get())};e()}}Ei.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l$="pendingRedirect",pc=new Map;class c$ extends SE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=pc.get(this.auth._key());if(!e){try{const r=await u$(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}pc.set(this.auth._key(),e)}return this.bypassAuthState||pc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function u$(t,e){const n=f$(e),r=h$(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function d$(t,e){pc.set(t._key(),e)}function h$(t){return Xn(t._redirectPersistence)}function f$(t){return fc(l$,t.config.apiKey,t.name)}async function p$(t,e,n=!1){if(Kn(t.app))return Promise.reject(Ii(t));const r=Ou(t),i=CE(r,e),s=await new c$(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m$=10*60*1e3;class g${constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!y$(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!TE(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(dn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=m$&&this.cachedEventUids.clear(),this.cachedEventUids.has(Mv(e))}saveEventToCache(e){this.cachedEventUids.add(Mv(e)),this.lastProcessedEventTime=Date.now()}}function Mv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function TE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function y$(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return TE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v$(t,e={}){return is(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,w$=/^https?/;async function _$(t){if(t.config.emulator)return;const{authorizedDomains:e}=await v$(t);for(const n of e)try{if(E$(n))return}catch{}$n(t,"unauthorized-domain")}function E$(t){const e=Sf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!w$.test(n))return!1;if(x$.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C$=new Ka(3e4,6e4);function Vv(){const t=In().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function S$(t){return new Promise((e,n)=>{var r,i,o;function s(){Vv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Vv(),n(dn(t,"network-request-failed"))},timeout:C$.get()})}if(!((i=(r=In().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=In().gapi)===null||o===void 0)&&o.load)s();else{const a=k2("iframefcb");return In()[a]=()=>{gapi.load?s():n(dn(t,"network-request-failed"))},I2(`${A2()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw mc=null,e})}let mc=null;function T$(t){return mc=mc||S$(t),mc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I$=new Ka(5e3,15e3),A$="__/auth/iframe",k$="emulator/auth/iframe",P$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},R$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $$(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?om(e,k$):`https://${t.config.authDomain}/${A$}`,r={apiKey:e.apiKey,appName:t.name,v:rs},i=R$.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${qa(r).slice(1)}`}async function b$(t){const e=await T$(t),n=In().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:$$(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:P$,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const s=dn(t,"network-request-failed"),a=In().setTimeout(()=>{o(s)},I$.get());function l(){In().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},F$=500,L$=600,O$="_blank",D$="http://localhost";class jv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function M$(t,e,n,r=F$,i=L$){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},N$),{width:r.toString(),height:i.toString(),top:o,left:s}),u=_t().toLowerCase();n&&(a=oE(u)?O$:n),rE(u)&&(e=e||D$,l.scrollbars="yes");const d=Object.entries(l).reduce((h,[y,E])=>`${h}${y}=${E},`,"");if(v2(u)&&a!=="_self")return V$(e||"",a),new jv(null);const f=window.open(e||"",a,d);te(f,t,"popup-blocked");try{f.focus()}catch{}return new jv(f)}function V$(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j$="__/auth/handler",U$="emulator/auth/handler",B$=encodeURIComponent("fac");async function Uv(t,e,n,r,i,o){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:rs,eventId:i};if(e instanceof um){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",jP(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))s[d]=f}if(e instanceof Qa){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(s.scopes=d.join(","))}t.tenantId&&(s.tid=t.tenantId);const a=s;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),u=l?`#${B$}=${encodeURIComponent(l)}`:"";return`${z$(t)}?${qa(a).slice(1)}${u}`}function z$({config:t}){return t.emulator?om(t,U$):`https://${t.authDomain}/${j$}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh="webStorageSupport";class W${constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vE,this._completeRedirectFn=p$,this._overrideRedirectResult=d$}async _openPopup(e,n,r,i){var o;or((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await Uv(e,n,r,Sf(),i);return M$(e,s,dm())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await Uv(e,n,r,Sf(),i);return G2(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(or(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await b$(e),r=new g$(e);return n.register("authEvent",i=>(te(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(sh,{type:sh},i=>{var o;const s=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[sh];s!==void 0&&n(!!s),$n(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=_$(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return uE()||iE()||lm()}}const H$=W$;var Bv="@firebase/auth",zv="1.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q${constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G$(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function K$(t){jo(new Ni("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;te(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dE(t)},u=new S2(r,i,o,l);return R2(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),jo(new Ni("auth-internal",e=>{const n=Ou(e.getProvider("auth").getImmediate());return(r=>new q$(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hr(Bv,zv,G$(t)),Hr(Bv,zv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q$=5*60,Y$=B_("authIdTokenMaxAge")||Q$;let Wv=null;const X$=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Y$)return;const i=n==null?void 0:n.token;Wv!==i&&(Wv=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function J$(t=q_()){const e=nm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=P2(t,{popupRedirectResolver:H$,persistence:[n$,W2,vE]}),r=B_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=X$(o.toString());V2(n,s,()=>s(n.currentUser)),M2(n,a=>s(a))}}const i=j_("auth");return i&&$2(n,`http://${i}`),n}function Z$(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}T2({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=dn("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",Z$().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});K$("Browser");var Hv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ai,IE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,C){function k(){}k.prototype=C.prototype,I.D=C.prototype,I.prototype=new k,I.prototype.constructor=I,I.C=function(P,b,N){for(var R=Array(arguments.length-2),W=2;W<arguments.length;W++)R[W-2]=arguments[W];return C.prototype[b].apply(P,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,C,k){k||(k=0);var P=Array(16);if(typeof C=="string")for(var b=0;16>b;++b)P[b]=C.charCodeAt(k++)|C.charCodeAt(k++)<<8|C.charCodeAt(k++)<<16|C.charCodeAt(k++)<<24;else for(b=0;16>b;++b)P[b]=C[k++]|C[k++]<<8|C[k++]<<16|C[k++]<<24;C=I.g[0],k=I.g[1],b=I.g[2];var N=I.g[3],R=C+(N^k&(b^N))+P[0]+3614090360&4294967295;C=k+(R<<7&4294967295|R>>>25),R=N+(b^C&(k^b))+P[1]+3905402710&4294967295,N=C+(R<<12&4294967295|R>>>20),R=b+(k^N&(C^k))+P[2]+606105819&4294967295,b=N+(R<<17&4294967295|R>>>15),R=k+(C^b&(N^C))+P[3]+3250441966&4294967295,k=b+(R<<22&4294967295|R>>>10),R=C+(N^k&(b^N))+P[4]+4118548399&4294967295,C=k+(R<<7&4294967295|R>>>25),R=N+(b^C&(k^b))+P[5]+1200080426&4294967295,N=C+(R<<12&4294967295|R>>>20),R=b+(k^N&(C^k))+P[6]+2821735955&4294967295,b=N+(R<<17&4294967295|R>>>15),R=k+(C^b&(N^C))+P[7]+4249261313&4294967295,k=b+(R<<22&4294967295|R>>>10),R=C+(N^k&(b^N))+P[8]+1770035416&4294967295,C=k+(R<<7&4294967295|R>>>25),R=N+(b^C&(k^b))+P[9]+2336552879&4294967295,N=C+(R<<12&4294967295|R>>>20),R=b+(k^N&(C^k))+P[10]+4294925233&4294967295,b=N+(R<<17&4294967295|R>>>15),R=k+(C^b&(N^C))+P[11]+2304563134&4294967295,k=b+(R<<22&4294967295|R>>>10),R=C+(N^k&(b^N))+P[12]+1804603682&4294967295,C=k+(R<<7&4294967295|R>>>25),R=N+(b^C&(k^b))+P[13]+4254626195&4294967295,N=C+(R<<12&4294967295|R>>>20),R=b+(k^N&(C^k))+P[14]+2792965006&4294967295,b=N+(R<<17&4294967295|R>>>15),R=k+(C^b&(N^C))+P[15]+1236535329&4294967295,k=b+(R<<22&4294967295|R>>>10),R=C+(b^N&(k^b))+P[1]+4129170786&4294967295,C=k+(R<<5&4294967295|R>>>27),R=N+(k^b&(C^k))+P[6]+3225465664&4294967295,N=C+(R<<9&4294967295|R>>>23),R=b+(C^k&(N^C))+P[11]+643717713&4294967295,b=N+(R<<14&4294967295|R>>>18),R=k+(N^C&(b^N))+P[0]+3921069994&4294967295,k=b+(R<<20&4294967295|R>>>12),R=C+(b^N&(k^b))+P[5]+3593408605&4294967295,C=k+(R<<5&4294967295|R>>>27),R=N+(k^b&(C^k))+P[10]+38016083&4294967295,N=C+(R<<9&4294967295|R>>>23),R=b+(C^k&(N^C))+P[15]+3634488961&4294967295,b=N+(R<<14&4294967295|R>>>18),R=k+(N^C&(b^N))+P[4]+3889429448&4294967295,k=b+(R<<20&4294967295|R>>>12),R=C+(b^N&(k^b))+P[9]+568446438&4294967295,C=k+(R<<5&4294967295|R>>>27),R=N+(k^b&(C^k))+P[14]+3275163606&4294967295,N=C+(R<<9&4294967295|R>>>23),R=b+(C^k&(N^C))+P[3]+4107603335&4294967295,b=N+(R<<14&4294967295|R>>>18),R=k+(N^C&(b^N))+P[8]+1163531501&4294967295,k=b+(R<<20&4294967295|R>>>12),R=C+(b^N&(k^b))+P[13]+2850285829&4294967295,C=k+(R<<5&4294967295|R>>>27),R=N+(k^b&(C^k))+P[2]+4243563512&4294967295,N=C+(R<<9&4294967295|R>>>23),R=b+(C^k&(N^C))+P[7]+1735328473&4294967295,b=N+(R<<14&4294967295|R>>>18),R=k+(N^C&(b^N))+P[12]+2368359562&4294967295,k=b+(R<<20&4294967295|R>>>12),R=C+(k^b^N)+P[5]+4294588738&4294967295,C=k+(R<<4&4294967295|R>>>28),R=N+(C^k^b)+P[8]+2272392833&4294967295,N=C+(R<<11&4294967295|R>>>21),R=b+(N^C^k)+P[11]+1839030562&4294967295,b=N+(R<<16&4294967295|R>>>16),R=k+(b^N^C)+P[14]+4259657740&4294967295,k=b+(R<<23&4294967295|R>>>9),R=C+(k^b^N)+P[1]+2763975236&4294967295,C=k+(R<<4&4294967295|R>>>28),R=N+(C^k^b)+P[4]+1272893353&4294967295,N=C+(R<<11&4294967295|R>>>21),R=b+(N^C^k)+P[7]+4139469664&4294967295,b=N+(R<<16&4294967295|R>>>16),R=k+(b^N^C)+P[10]+3200236656&4294967295,k=b+(R<<23&4294967295|R>>>9),R=C+(k^b^N)+P[13]+681279174&4294967295,C=k+(R<<4&4294967295|R>>>28),R=N+(C^k^b)+P[0]+3936430074&4294967295,N=C+(R<<11&4294967295|R>>>21),R=b+(N^C^k)+P[3]+3572445317&4294967295,b=N+(R<<16&4294967295|R>>>16),R=k+(b^N^C)+P[6]+76029189&4294967295,k=b+(R<<23&4294967295|R>>>9),R=C+(k^b^N)+P[9]+3654602809&4294967295,C=k+(R<<4&4294967295|R>>>28),R=N+(C^k^b)+P[12]+3873151461&4294967295,N=C+(R<<11&4294967295|R>>>21),R=b+(N^C^k)+P[15]+530742520&4294967295,b=N+(R<<16&4294967295|R>>>16),R=k+(b^N^C)+P[2]+3299628645&4294967295,k=b+(R<<23&4294967295|R>>>9),R=C+(b^(k|~N))+P[0]+4096336452&4294967295,C=k+(R<<6&4294967295|R>>>26),R=N+(k^(C|~b))+P[7]+1126891415&4294967295,N=C+(R<<10&4294967295|R>>>22),R=b+(C^(N|~k))+P[14]+2878612391&4294967295,b=N+(R<<15&4294967295|R>>>17),R=k+(N^(b|~C))+P[5]+4237533241&4294967295,k=b+(R<<21&4294967295|R>>>11),R=C+(b^(k|~N))+P[12]+1700485571&4294967295,C=k+(R<<6&4294967295|R>>>26),R=N+(k^(C|~b))+P[3]+2399980690&4294967295,N=C+(R<<10&4294967295|R>>>22),R=b+(C^(N|~k))+P[10]+4293915773&4294967295,b=N+(R<<15&4294967295|R>>>17),R=k+(N^(b|~C))+P[1]+2240044497&4294967295,k=b+(R<<21&4294967295|R>>>11),R=C+(b^(k|~N))+P[8]+1873313359&4294967295,C=k+(R<<6&4294967295|R>>>26),R=N+(k^(C|~b))+P[15]+4264355552&4294967295,N=C+(R<<10&4294967295|R>>>22),R=b+(C^(N|~k))+P[6]+2734768916&4294967295,b=N+(R<<15&4294967295|R>>>17),R=k+(N^(b|~C))+P[13]+1309151649&4294967295,k=b+(R<<21&4294967295|R>>>11),R=C+(b^(k|~N))+P[4]+4149444226&4294967295,C=k+(R<<6&4294967295|R>>>26),R=N+(k^(C|~b))+P[11]+3174756917&4294967295,N=C+(R<<10&4294967295|R>>>22),R=b+(C^(N|~k))+P[2]+718787259&4294967295,b=N+(R<<15&4294967295|R>>>17),R=k+(N^(b|~C))+P[9]+3951481745&4294967295,I.g[0]=I.g[0]+C&4294967295,I.g[1]=I.g[1]+(b+(R<<21&4294967295|R>>>11))&4294967295,I.g[2]=I.g[2]+b&4294967295,I.g[3]=I.g[3]+N&4294967295}r.prototype.u=function(I,C){C===void 0&&(C=I.length);for(var k=C-this.blockSize,P=this.B,b=this.h,N=0;N<C;){if(b==0)for(;N<=k;)i(this,I,N),N+=this.blockSize;if(typeof I=="string"){for(;N<C;)if(P[b++]=I.charCodeAt(N++),b==this.blockSize){i(this,P),b=0;break}}else for(;N<C;)if(P[b++]=I[N++],b==this.blockSize){i(this,P),b=0;break}}this.h=b,this.o+=C},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var C=1;C<I.length-8;++C)I[C]=0;var k=8*this.o;for(C=I.length-8;C<I.length;++C)I[C]=k&255,k/=256;for(this.u(I),I=Array(16),C=k=0;4>C;++C)for(var P=0;32>P;P+=8)I[k++]=this.g[C]>>>P&255;return I};function o(I,C){var k=a;return Object.prototype.hasOwnProperty.call(k,I)?k[I]:k[I]=C(I)}function s(I,C){this.h=C;for(var k=[],P=!0,b=I.length-1;0<=b;b--){var N=I[b]|0;P&&N==C||(k[b]=N,P=!1)}this.g=k}var a={};function l(I){return-128<=I&&128>I?o(I,function(C){return new s([C|0],0>C?-1:0)}):new s([I|0],0>I?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return f;if(0>I)return T(u(-I));for(var C=[],k=1,P=0;I>=k;P++)C[P]=I/k|0,k*=4294967296;return new s(C,0)}function d(I,C){if(I.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(I.charAt(0)=="-")return T(d(I.substring(1),C));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=u(Math.pow(C,8)),P=f,b=0;b<I.length;b+=8){var N=Math.min(8,I.length-b),R=parseInt(I.substring(b,b+N),C);8>N?(N=u(Math.pow(C,N)),P=P.j(N).add(u(R))):(P=P.j(k),P=P.add(u(R)))}return P}var f=l(0),h=l(1),y=l(16777216);t=s.prototype,t.m=function(){if(x(this))return-T(this).m();for(var I=0,C=1,k=0;k<this.g.length;k++){var P=this.i(k);I+=(0<=P?P:4294967296+P)*C,C*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(E(this))return"0";if(x(this))return"-"+T(this).toString(I);for(var C=u(Math.pow(I,6)),k=this,P="";;){var b=$(k,C).g;k=w(k,b.j(C));var N=((0<k.g.length?k.g[0]:k.h)>>>0).toString(I);if(k=b,E(k))return N+P;for(;6>N.length;)N="0"+N;P=N+P}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function E(I){if(I.h!=0)return!1;for(var C=0;C<I.g.length;C++)if(I.g[C]!=0)return!1;return!0}function x(I){return I.h==-1}t.l=function(I){return I=w(this,I),x(I)?-1:E(I)?0:1};function T(I){for(var C=I.g.length,k=[],P=0;P<C;P++)k[P]=~I.g[P];return new s(k,~I.h).add(h)}t.abs=function(){return x(this)?T(this):this},t.add=function(I){for(var C=Math.max(this.g.length,I.g.length),k=[],P=0,b=0;b<=C;b++){var N=P+(this.i(b)&65535)+(I.i(b)&65535),R=(N>>>16)+(this.i(b)>>>16)+(I.i(b)>>>16);P=R>>>16,N&=65535,R&=65535,k[b]=R<<16|N}return new s(k,k[k.length-1]&-2147483648?-1:0)};function w(I,C){return I.add(T(C))}t.j=function(I){if(E(this)||E(I))return f;if(x(this))return x(I)?T(this).j(T(I)):T(T(this).j(I));if(x(I))return T(this.j(T(I)));if(0>this.l(y)&&0>I.l(y))return u(this.m()*I.m());for(var C=this.g.length+I.g.length,k=[],P=0;P<2*C;P++)k[P]=0;for(P=0;P<this.g.length;P++)for(var b=0;b<I.g.length;b++){var N=this.i(P)>>>16,R=this.i(P)&65535,W=I.i(b)>>>16,ie=I.i(b)&65535;k[2*P+2*b]+=R*ie,v(k,2*P+2*b),k[2*P+2*b+1]+=N*ie,v(k,2*P+2*b+1),k[2*P+2*b+1]+=R*W,v(k,2*P+2*b+1),k[2*P+2*b+2]+=N*W,v(k,2*P+2*b+2)}for(P=0;P<C;P++)k[P]=k[2*P+1]<<16|k[2*P];for(P=C;P<2*C;P++)k[P]=0;return new s(k,0)};function v(I,C){for(;(I[C]&65535)!=I[C];)I[C+1]+=I[C]>>>16,I[C]&=65535,C++}function S(I,C){this.g=I,this.h=C}function $(I,C){if(E(C))throw Error("division by zero");if(E(I))return new S(f,f);if(x(I))return C=$(T(I),C),new S(T(C.g),T(C.h));if(x(C))return C=$(I,T(C)),new S(T(C.g),C.h);if(30<I.g.length){if(x(I)||x(C))throw Error("slowDivide_ only works with positive integers.");for(var k=h,P=C;0>=P.l(I);)k=F(k),P=F(P);var b=O(k,1),N=O(P,1);for(P=O(P,2),k=O(k,2);!E(P);){var R=N.add(P);0>=R.l(I)&&(b=b.add(k),N=R),P=O(P,1),k=O(k,1)}return C=w(I,b.j(C)),new S(b,C)}for(b=f;0<=I.l(C);){for(k=Math.max(1,Math.floor(I.m()/C.m())),P=Math.ceil(Math.log(k)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),N=u(k),R=N.j(C);x(R)||0<R.l(I);)k-=P,N=u(k),R=N.j(C);E(N)&&(N=h),b=b.add(N),I=w(I,R)}return new S(b,I)}t.A=function(I){return $(this,I).h},t.and=function(I){for(var C=Math.max(this.g.length,I.g.length),k=[],P=0;P<C;P++)k[P]=this.i(P)&I.i(P);return new s(k,this.h&I.h)},t.or=function(I){for(var C=Math.max(this.g.length,I.g.length),k=[],P=0;P<C;P++)k[P]=this.i(P)|I.i(P);return new s(k,this.h|I.h)},t.xor=function(I){for(var C=Math.max(this.g.length,I.g.length),k=[],P=0;P<C;P++)k[P]=this.i(P)^I.i(P);return new s(k,this.h^I.h)};function F(I){for(var C=I.g.length+1,k=[],P=0;P<C;P++)k[P]=I.i(P)<<1|I.i(P-1)>>>31;return new s(k,I.h)}function O(I,C){var k=C>>5;C%=32;for(var P=I.g.length-k,b=[],N=0;N<P;N++)b[N]=0<C?I.i(N+k)>>>C|I.i(N+k+1)<<32-C:I.i(N+k);return new s(b,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,IE=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=d,Ai=s}).apply(typeof Hv<"u"?Hv:typeof self<"u"?self:typeof window<"u"?window:{});var jl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var AE,Ws,kE,gc,Af,PE,RE,$E;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,g){return c==Array.prototype||c==Object.prototype||(c[p]=g.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof jl=="object"&&jl];for(var p=0;p<c.length;++p){var g=c[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(c,p){if(p)e:{var g=r;c=c.split(".");for(var A=0;A<c.length-1;A++){var L=c[A];if(!(L in g))break e;g=g[L]}c=c[c.length-1],A=g[c],p=p(A),p!=A&&p!=null&&e(g,c,{configurable:!0,writable:!0,value:p})}}function o(c,p){c instanceof String&&(c+="");var g=0,A=!1,L={next:function(){if(!A&&g<c.length){var D=g++;return{value:p(D,c[D]),done:!1}}return A=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(c){return c||function(){return o(this,function(p,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function l(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function u(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function d(c,p,g){return c.call.apply(c.bind,arguments)}function f(c,p,g){if(!c)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,A),c.apply(p,L)}}return function(){return c.apply(p,arguments)}}function h(c,p,g){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,h.apply(null,arguments)}function y(c,p){var g=Array.prototype.slice.call(arguments,1);return function(){var A=g.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function E(c,p){function g(){}g.prototype=p.prototype,c.aa=p.prototype,c.prototype=new g,c.prototype.constructor=c,c.Qb=function(A,L,D){for(var z=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)z[Ee-2]=arguments[Ee];return p.prototype[L].apply(A,z)}}function x(c){const p=c.length;if(0<p){const g=Array(p);for(let A=0;A<p;A++)g[A]=c[A];return g}return[]}function T(c,p){for(let g=1;g<arguments.length;g++){const A=arguments[g];if(l(A)){const L=c.length||0,D=A.length||0;c.length=L+D;for(let z=0;z<D;z++)c[L+z]=A[z]}else c.push(A)}}class w{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function v(c){return/^[\s\xa0]*$/.test(c)}function S(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function $(c){return $[" "](c),c}$[" "]=function(){};var F=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function O(c,p,g){for(const A in c)p.call(g,c[A],A,c)}function I(c,p){for(const g in c)p.call(void 0,c[g],g,c)}function C(c){const p={};for(const g in c)p[g]=c[g];return p}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(c,p){let g,A;for(let L=1;L<arguments.length;L++){A=arguments[L];for(g in A)c[g]=A[g];for(let D=0;D<k.length;D++)g=k[D],Object.prototype.hasOwnProperty.call(A,g)&&(c[g]=A[g])}}function b(c){var p=1;c=c.split(":");const g=[];for(;0<p&&c.length;)g.push(c.shift()),p--;return c.length&&g.push(c.join(":")),g}function N(c){a.setTimeout(()=>{throw c},0)}function R(){var c=H;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class W{constructor(){this.h=this.g=null}add(p,g){const A=ie.get();A.set(p,g),this.h?this.h.next=A:this.g=A,this.h=A}}var ie=new w(()=>new K,c=>c.reset());class K{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,M=!1,H=new W,Q=()=>{const c=a.Promise.resolve(void 0);Y=()=>{c.then(ee)}};var ee=()=>{for(var c;c=R();){try{c.h.call(c.g)}catch(g){N(g)}var p=ie;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}M=!1};function ae(){this.s=this.s,this.C=this.C}ae.prototype.s=!1,ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var Qe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};a.addEventListener("test",g,p),a.removeEventListener("test",g,p)}catch{}return c}();function ut(c,p){if(fe.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var g=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(F){e:{try{$(p.nodeName);var L=!0;break e}catch{}L=!1}L||(p=null)}}else g=="mouseover"?p=c.fromElement:g=="mouseout"&&(p=c.toElement);this.relatedTarget=p,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:et[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ut.aa.h.call(this)}}E(ut,fe);var et={2:"touch",3:"pen",4:"mouse"};ut.prototype.h=function(){ut.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var X="closure_listenable_"+(1e6*Math.random()|0),_e=0;function Ye(c,p,g,A,L){this.listener=c,this.proxy=null,this.src=p,this.type=g,this.capture=!!A,this.ha=L,this.key=++_e,this.da=this.fa=!1}function ve(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function pe(c){this.src=c,this.g={},this.h=0}pe.prototype.add=function(c,p,g,A,L){var D=c.toString();c=this.g[D],c||(c=this.g[D]=[],this.h++);var z=tt(c,p,A,L);return-1<z?(p=c[z],g||(p.fa=!1)):(p=new Ye(p,this.src,D,!!A,L),p.fa=g,c.push(p)),p};function ge(c,p){var g=p.type;if(g in c.g){var A=c.g[g],L=Array.prototype.indexOf.call(A,p,void 0),D;(D=0<=L)&&Array.prototype.splice.call(A,L,1),D&&(ve(p),c.g[g].length==0&&(delete c.g[g],c.h--))}}function tt(c,p,g,A){for(var L=0;L<c.length;++L){var D=c[L];if(!D.da&&D.listener==p&&D.capture==!!g&&D.ha==A)return L}return-1}var kt="closure_lm_"+(1e6*Math.random()|0),Mn={};function gr(c,p,g,A,L){if(Array.isArray(p)){for(var D=0;D<p.length;D++)gr(c,p[D],g,A,L);return null}return g=sg(g),c&&c[X]?c.K(p,g,u(A)?!!A.capture:!!A,L):ui(c,p,g,!1,A,L)}function ui(c,p,g,A,L,D){if(!p)throw Error("Invalid event type");var z=u(L)?!!L.capture:!!L,Ee=ld(c);if(Ee||(c[kt]=Ee=new pe(c)),g=Ee.add(p,g,A,z,D),g.proxy)return g;if(A=sd(),g.proxy=A,A.src=c,A.listener=g,c.addEventListener)Qe||(L=z),L===void 0&&(L=!1),c.addEventListener(p.toString(),A,L);else if(c.attachEvent)c.attachEvent(og(p.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return g}function sd(){function c(g){return p.call(c.src,c.listener,g)}const p=VT;return c}function di(c,p,g,A,L){if(Array.isArray(p))for(var D=0;D<p.length;D++)di(c,p[D],g,A,L);else A=u(A)?!!A.capture:!!A,g=sg(g),c&&c[X]?(c=c.i,p=String(p).toString(),p in c.g&&(D=c.g[p],g=tt(D,g,A,L),-1<g&&(ve(D[g]),Array.prototype.splice.call(D,g,1),D.length==0&&(delete c.g[p],c.h--)))):c&&(c=ld(c))&&(p=c.g[p.toString()],c=-1,p&&(c=tt(p,g,A,L)),(g=-1<c?p[c]:null)&&ad(g))}function ad(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[X])ge(p.i,c);else{var g=c.type,A=c.proxy;p.removeEventListener?p.removeEventListener(g,A,c.capture):p.detachEvent?p.detachEvent(og(g),A):p.addListener&&p.removeListener&&p.removeListener(A),(g=ld(p))?(ge(g,c),g.h==0&&(g.src=null,p[kt]=null)):ve(c)}}}function og(c){return c in Mn?Mn[c]:Mn[c]="on"+c}function VT(c,p){if(c.da)c=!0;else{p=new ut(p,this);var g=c.listener,A=c.ha||c.src;c.fa&&ad(c),c=g.call(A,p)}return c}function ld(c){return c=c[kt],c instanceof pe?c:null}var cd="__closure_events_fn_"+(1e9*Math.random()>>>0);function sg(c){return typeof c=="function"?c:(c[cd]||(c[cd]=function(p){return c.handleEvent(p)}),c[cd])}function dt(){ae.call(this),this.i=new pe(this),this.M=this,this.F=null}E(dt,ae),dt.prototype[X]=!0,dt.prototype.removeEventListener=function(c,p,g,A){di(this,c,p,g,A)};function Et(c,p){var g,A=c.F;if(A)for(g=[];A;A=A.F)g.push(A);if(c=c.M,A=p.type||p,typeof p=="string")p=new fe(p,c);else if(p instanceof fe)p.target=p.target||c;else{var L=p;p=new fe(A,c),P(p,L)}if(L=!0,g)for(var D=g.length-1;0<=D;D--){var z=p.g=g[D];L=ol(z,A,!0,p)&&L}if(z=p.g=c,L=ol(z,A,!0,p)&&L,L=ol(z,A,!1,p)&&L,g)for(D=0;D<g.length;D++)z=p.g=g[D],L=ol(z,A,!1,p)&&L}dt.prototype.N=function(){if(dt.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var g=c.g[p],A=0;A<g.length;A++)ve(g[A]);delete c.g[p],c.h--}}this.F=null},dt.prototype.K=function(c,p,g,A){return this.i.add(String(c),p,!1,g,A)},dt.prototype.L=function(c,p,g,A){return this.i.add(String(c),p,!0,g,A)};function ol(c,p,g,A){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var L=!0,D=0;D<p.length;++D){var z=p[D];if(z&&!z.da&&z.capture==g){var Ee=z.listener,nt=z.ha||z.src;z.fa&&ge(c.i,z),L=Ee.call(nt,A)!==!1&&L}}return L&&!A.defaultPrevented}function ag(c,p,g){if(typeof c=="function")g&&(c=h(c,g));else if(c&&typeof c.handleEvent=="function")c=h(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(c,p||0)}function lg(c){c.g=ag(()=>{c.g=null,c.i&&(c.i=!1,lg(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class jT extends ae{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:lg(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ps(c){ae.call(this),this.h=c,this.g={}}E(ps,ae);var cg=[];function ug(c){O(c.g,function(p,g){this.g.hasOwnProperty(g)&&ad(p)},c),c.g={}}ps.prototype.N=function(){ps.aa.N.call(this),ug(this)},ps.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ud=a.JSON.stringify,UT=a.JSON.parse,BT=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function dd(){}dd.prototype.h=null;function dg(c){return c.h||(c.h=c.i())}function hg(){}var ms={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function hd(){fe.call(this,"d")}E(hd,fe);function fd(){fe.call(this,"c")}E(fd,fe);var hi={},fg=null;function sl(){return fg=fg||new dt}hi.La="serverreachability";function pg(c){fe.call(this,hi.La,c)}E(pg,fe);function gs(c){const p=sl();Et(p,new pg(p))}hi.STAT_EVENT="statevent";function mg(c,p){fe.call(this,hi.STAT_EVENT,c),this.stat=p}E(mg,fe);function Ct(c){const p=sl();Et(p,new mg(p,c))}hi.Ma="timingevent";function gg(c,p){fe.call(this,hi.Ma,c),this.size=p}E(gg,fe);function ys(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},p)}function vs(){this.g=!0}vs.prototype.xa=function(){this.g=!1};function zT(c,p,g,A,L,D){c.info(function(){if(c.g)if(D)for(var z="",Ee=D.split("&"),nt=0;nt<Ee.length;nt++){var ye=Ee[nt].split("=");if(1<ye.length){var ht=ye[0];ye=ye[1];var ft=ht.split("_");z=2<=ft.length&&ft[1]=="type"?z+(ht+"="+ye+"&"):z+(ht+"=redacted&")}}else z=null;else z=D;return"XMLHTTP REQ ("+A+") [attempt "+L+"]: "+p+`
`+g+`
`+z})}function WT(c,p,g,A,L,D,z){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+L+"]: "+p+`
`+g+`
`+D+" "+z})}function Qi(c,p,g,A){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+qT(c,g)+(A?" "+A:"")})}function HT(c,p){c.info(function(){return"TIMEOUT: "+p})}vs.prototype.info=function(){};function qT(c,p){if(!c.g)return p;if(!p)return null;try{var g=JSON.parse(p);if(g){for(c=0;c<g.length;c++)if(Array.isArray(g[c])){var A=g[c];if(!(2>A.length)){var L=A[1];if(Array.isArray(L)&&!(1>L.length)){var D=L[0];if(D!="noop"&&D!="stop"&&D!="close")for(var z=1;z<L.length;z++)L[z]=""}}}}return ud(g)}catch{return p}}var al={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},yg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},pd;function ll(){}E(ll,dd),ll.prototype.g=function(){return new XMLHttpRequest},ll.prototype.i=function(){return{}},pd=new ll;function yr(c,p,g,A){this.j=c,this.i=p,this.l=g,this.R=A||1,this.U=new ps(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vg}function vg(){this.i=null,this.g="",this.h=!1}var xg={},md={};function gd(c,p,g){c.L=1,c.v=hl(Vn(p)),c.m=g,c.P=!0,wg(c,null)}function wg(c,p){c.F=Date.now(),cl(c),c.A=Vn(c.v);var g=c.A,A=c.R;Array.isArray(A)||(A=[String(A)]),Fg(g.i,"t",A),c.C=0,g=c.j.J,c.h=new vg,c.g=Jg(c.j,g?p:null,!c.m),0<c.O&&(c.M=new jT(h(c.Y,c,c.g),c.O)),p=c.U,g=c.g,A=c.ca;var L="readystatechange";Array.isArray(L)||(L&&(cg[0]=L.toString()),L=cg);for(var D=0;D<L.length;D++){var z=gr(g,L[D],A||p.handleEvent,!1,p.h||p);if(!z)break;p.g[z.key]=z}p=c.H?C(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),gs(),zT(c.i,c.u,c.A,c.l,c.R,c.m)}yr.prototype.ca=function(c){c=c.target;const p=this.M;p&&jn(c)==3?p.j():this.Y(c)},yr.prototype.Y=function(c){try{if(c==this.g)e:{const ft=jn(this.g);var p=this.g.Ba();const Ji=this.g.Z();if(!(3>ft)&&(ft!=3||this.g&&(this.h.h||this.g.oa()||Ug(this.g)))){this.J||ft!=4||p==7||(p==8||0>=Ji?gs(3):gs(2)),yd(this);var g=this.g.Z();this.X=g;t:if(_g(this)){var A=Ug(this.g);c="";var L=A.length,D=jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fi(this),xs(this);var z="";break t}this.h.i=new a.TextDecoder}for(p=0;p<L;p++)this.h.h=!0,c+=this.h.i.decode(A[p],{stream:!(D&&p==L-1)});A.length=0,this.h.g+=c,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=g==200,WT(this.i,this.u,this.A,this.l,this.R,ft,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Ee,nt=this.g;if((Ee=nt.g?nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Ee)){var ye=Ee;break t}}ye=null}if(g=ye)Qi(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vd(this,g);else{this.o=!1,this.s=3,Ct(12),fi(this),xs(this);break e}}if(this.P){g=!0;let en;for(;!this.J&&this.C<z.length;)if(en=GT(this,z),en==md){ft==4&&(this.s=4,Ct(14),g=!1),Qi(this.i,this.l,null,"[Incomplete Response]");break}else if(en==xg){this.s=4,Ct(15),Qi(this.i,this.l,z,"[Invalid Chunk]"),g=!1;break}else Qi(this.i,this.l,en,null),vd(this,en);if(_g(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ft!=4||z.length!=0||this.h.h||(this.s=1,Ct(16),g=!1),this.o=this.o&&g,!g)Qi(this.i,this.l,z,"[Invalid Chunked Response]"),fi(this),xs(this);else if(0<z.length&&!this.W){this.W=!0;var ht=this.j;ht.g==this&&ht.ba&&!ht.M&&(ht.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),Sd(ht),ht.M=!0,Ct(11))}}else Qi(this.i,this.l,z,null),vd(this,z);ft==4&&fi(this),this.o&&!this.J&&(ft==4?Kg(this.j,this):(this.o=!1,cl(this)))}else u1(this.g),g==400&&0<z.indexOf("Unknown SID")?(this.s=3,Ct(12)):(this.s=0,Ct(13)),fi(this),xs(this)}}}catch{}finally{}};function _g(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function GT(c,p){var g=c.C,A=p.indexOf(`
`,g);return A==-1?md:(g=Number(p.substring(g,A)),isNaN(g)?xg:(A+=1,A+g>p.length?md:(p=p.slice(A,A+g),c.C=A+g,p)))}yr.prototype.cancel=function(){this.J=!0,fi(this)};function cl(c){c.S=Date.now()+c.I,Eg(c,c.I)}function Eg(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ys(h(c.ba,c),p)}function yd(c){c.B&&(a.clearTimeout(c.B),c.B=null)}yr.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(HT(this.i,this.A),this.L!=2&&(gs(),Ct(17)),fi(this),this.s=2,xs(this)):Eg(this,this.S-c)};function xs(c){c.j.G==0||c.J||Kg(c.j,c)}function fi(c){yd(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,ug(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function vd(c,p){try{var g=c.j;if(g.G!=0&&(g.g==c||xd(g.h,c))){if(!c.K&&xd(g.h,c)&&g.G==3){try{var A=g.Da.g.parse(p)}catch{A=null}if(Array.isArray(A)&&A.length==3){var L=A;if(L[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<c.F)vl(g),gl(g);else break e;Cd(g),Ct(18)}}else g.za=L[1],0<g.za-g.T&&37500>L[2]&&g.F&&g.v==0&&!g.C&&(g.C=ys(h(g.Za,g),6e3));if(1>=Tg(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else mi(g,11)}else if((c.K||g.g==c)&&vl(g),!v(p))for(L=g.Da.g.parse(p),p=0;p<L.length;p++){let ye=L[p];if(g.T=ye[0],ye=ye[1],g.G==2)if(ye[0]=="c"){g.K=ye[1],g.ia=ye[2];const ht=ye[3];ht!=null&&(g.la=ht,g.j.info("VER="+g.la));const ft=ye[4];ft!=null&&(g.Aa=ft,g.j.info("SVER="+g.Aa));const Ji=ye[5];Ji!=null&&typeof Ji=="number"&&0<Ji&&(A=1.5*Ji,g.L=A,g.j.info("backChannelRequestTimeoutMs_="+A)),A=g;const en=c.g;if(en){const wl=en.g?en.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wl){var D=A.h;D.g||wl.indexOf("spdy")==-1&&wl.indexOf("quic")==-1&&wl.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(wd(D,D.h),D.h=null))}if(A.D){const Td=en.g?en.g.getResponseHeader("X-HTTP-Session-Id"):null;Td&&(A.ya=Td,Se(A.I,A.D,Td))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-c.F,g.j.info("Handshake RTT: "+g.R+"ms")),A=g;var z=c;if(A.qa=Xg(A,A.J?A.ia:null,A.W),z.K){Ig(A.h,z);var Ee=z,nt=A.L;nt&&(Ee.I=nt),Ee.B&&(yd(Ee),cl(Ee)),A.g=z}else qg(A);0<g.i.length&&yl(g)}else ye[0]!="stop"&&ye[0]!="close"||mi(g,7);else g.G==3&&(ye[0]=="stop"||ye[0]=="close"?ye[0]=="stop"?mi(g,7):Ed(g):ye[0]!="noop"&&g.l&&g.l.ta(ye),g.v=0)}}gs(4)}catch{}}var KT=class{constructor(c,p){this.g=c,this.map=p}};function Cg(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Sg(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Tg(c){return c.h?1:c.g?c.g.size:0}function xd(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function wd(c,p){c.g?c.g.add(p):c.h=p}function Ig(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}Cg.prototype.cancel=function(){if(this.i=Ag(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Ag(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const g of c.g.values())p=p.concat(g.D);return p}return x(c.i)}function QT(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var p=[],g=c.length,A=0;A<g;A++)p.push(c[A]);return p}p=[],g=0;for(A in c)p[g++]=c[A];return p}function YT(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var p=[];c=c.length;for(var g=0;g<c;g++)p.push(g);return p}p=[],g=0;for(const A in c)p[g++]=A;return p}}}function kg(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var g=YT(c),A=QT(c),L=A.length,D=0;D<L;D++)p.call(void 0,A[D],g&&g[D],c)}var Pg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function XT(c,p){if(c){c=c.split("&");for(var g=0;g<c.length;g++){var A=c[g].indexOf("="),L=null;if(0<=A){var D=c[g].substring(0,A);L=c[g].substring(A+1)}else D=c[g];p(D,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function pi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof pi){this.h=c.h,ul(this,c.j),this.o=c.o,this.g=c.g,dl(this,c.s),this.l=c.l;var p=c.i,g=new Es;g.i=p.i,p.g&&(g.g=new Map(p.g),g.h=p.h),Rg(this,g),this.m=c.m}else c&&(p=String(c).match(Pg))?(this.h=!1,ul(this,p[1]||"",!0),this.o=ws(p[2]||""),this.g=ws(p[3]||"",!0),dl(this,p[4]),this.l=ws(p[5]||"",!0),Rg(this,p[6]||"",!0),this.m=ws(p[7]||"")):(this.h=!1,this.i=new Es(null,this.h))}pi.prototype.toString=function(){var c=[],p=this.j;p&&c.push(_s(p,$g,!0),":");var g=this.g;return(g||p=="file")&&(c.push("//"),(p=this.o)&&c.push(_s(p,$g,!0),"@"),c.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&c.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(_s(g,g.charAt(0)=="/"?e1:ZT,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",_s(g,n1)),c.join("")};function Vn(c){return new pi(c)}function ul(c,p,g){c.j=g?ws(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function dl(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function Rg(c,p,g){p instanceof Es?(c.i=p,r1(c.i,c.h)):(g||(p=_s(p,t1)),c.i=new Es(p,c.h))}function Se(c,p,g){c.i.set(p,g)}function hl(c){return Se(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function ws(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function _s(c,p,g){return typeof c=="string"?(c=encodeURI(c).replace(p,JT),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function JT(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var $g=/[#\/\?@]/g,ZT=/[#\?:]/g,e1=/[#\?]/g,t1=/[#\?@]/g,n1=/#/g;function Es(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function vr(c){c.g||(c.g=new Map,c.h=0,c.i&&XT(c.i,function(p,g){c.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=Es.prototype,t.add=function(c,p){vr(this),this.i=null,c=Yi(this,c);var g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(p),this.h+=1,this};function bg(c,p){vr(c),p=Yi(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function Ng(c,p){return vr(c),p=Yi(c,p),c.g.has(p)}t.forEach=function(c,p){vr(this),this.g.forEach(function(g,A){g.forEach(function(L){c.call(p,L,A,this)},this)},this)},t.na=function(){vr(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),g=[];for(let A=0;A<p.length;A++){const L=c[A];for(let D=0;D<L.length;D++)g.push(p[A])}return g},t.V=function(c){vr(this);let p=[];if(typeof c=="string")Ng(this,c)&&(p=p.concat(this.g.get(Yi(this,c))));else{c=Array.from(this.g.values());for(let g=0;g<c.length;g++)p=p.concat(c[g])}return p},t.set=function(c,p){return vr(this),this.i=null,c=Yi(this,c),Ng(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},t.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function Fg(c,p,g){bg(c,p),0<g.length&&(c.i=null,c.g.set(Yi(c,p),x(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var g=0;g<p.length;g++){var A=p[g];const D=encodeURIComponent(String(A)),z=this.V(A);for(A=0;A<z.length;A++){var L=D;z[A]!==""&&(L+="="+encodeURIComponent(String(z[A]))),c.push(L)}}return this.i=c.join("&")};function Yi(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function r1(c,p){p&&!c.j&&(vr(c),c.i=null,c.g.forEach(function(g,A){var L=A.toLowerCase();A!=L&&(bg(this,A),Fg(this,L,g))},c)),c.j=p}function i1(c,p){const g=new vs;if(a.Image){const A=new Image;A.onload=y(xr,g,"TestLoadImage: loaded",!0,p,A),A.onerror=y(xr,g,"TestLoadImage: error",!1,p,A),A.onabort=y(xr,g,"TestLoadImage: abort",!1,p,A),A.ontimeout=y(xr,g,"TestLoadImage: timeout",!1,p,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else p(!1)}function o1(c,p){const g=new vs,A=new AbortController,L=setTimeout(()=>{A.abort(),xr(g,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:A.signal}).then(D=>{clearTimeout(L),D.ok?xr(g,"TestPingServer: ok",!0,p):xr(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(L),xr(g,"TestPingServer: error",!1,p)})}function xr(c,p,g,A,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),A(g)}catch{}}function s1(){this.g=new BT}function a1(c,p,g){const A=g||"";try{kg(c,function(L,D){let z=L;u(L)&&(z=ud(L)),p.push(A+D+"="+encodeURIComponent(z))})}catch(L){throw p.push(A+"type="+encodeURIComponent("_badmap")),L}}function fl(c){this.l=c.Ub||null,this.j=c.eb||!1}E(fl,dd),fl.prototype.g=function(){return new pl(this.l,this.j)},fl.prototype.i=function(c){return function(){return c}}({});function pl(c,p){dt.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(pl,dt),t=pl.prototype,t.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,Ss(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Cs(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ss(this)),this.g&&(this.readyState=3,Ss(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Lg(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Lg(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?Cs(this):Ss(this),this.readyState==3&&Lg(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Cs(this))},t.Qa=function(c){this.g&&(this.response=c,Cs(this))},t.ga=function(){this.g&&Cs(this)};function Cs(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ss(c)}t.setRequestHeader=function(c,p){this.u.append(c,p)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=p.next();return c.join(`\r
`)};function Ss(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(pl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Og(c){let p="";return O(c,function(g,A){p+=A,p+=":",p+=g,p+=`\r
`}),p}function _d(c,p,g){e:{for(A in g){var A=!1;break e}A=!0}A||(g=Og(g),typeof c=="string"?g!=null&&encodeURIComponent(String(g)):Se(c,p,g))}function Le(c){dt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(Le,dt);var l1=/^https?$/i,c1=["POST","PUT"];t=Le.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,p,g,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():pd.g(),this.v=this.o?dg(this.o):dg(pd),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(D){Dg(this,D);return}if(c=g||"",g=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var L in A)g.set(L,A[L]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const D of A.keys())g.set(D,A.get(D));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(g.keys()).find(D=>D.toLowerCase()=="content-type"),L=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(c1,p,void 0))||A||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,z]of g)this.g.setRequestHeader(D,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{jg(this),this.u=!0,this.g.send(c),this.u=!1}catch(D){Dg(this,D)}};function Dg(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,Mg(c),ml(c)}function Mg(c){c.A||(c.A=!0,Et(c,"complete"),Et(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Et(this,"complete"),Et(this,"abort"),ml(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ml(this,!0)),Le.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Vg(this):this.bb())},t.bb=function(){Vg(this)};function Vg(c){if(c.h&&typeof s<"u"&&(!c.v[1]||jn(c)!=4||c.Z()!=2)){if(c.u&&jn(c)==4)ag(c.Ea,0,c);else if(Et(c,"readystatechange"),jn(c)==4){c.h=!1;try{const z=c.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var A;if(A=z===0){var L=String(c.D).match(Pg)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),A=!l1.test(L?L.toLowerCase():"")}g=A}if(g)Et(c,"complete"),Et(c,"success");else{c.m=6;try{var D=2<jn(c)?c.g.statusText:""}catch{D=""}c.l=D+" ["+c.Z()+"]",Mg(c)}}finally{ml(c)}}}}function ml(c,p){if(c.g){jg(c);const g=c.g,A=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||Et(c,"ready");try{g.onreadystatechange=A}catch{}}}function jg(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function jn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<jn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),UT(p)}};function Ug(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function u1(c){const p={};c=(c.g&&2<=jn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(v(c[A]))continue;var g=b(c[A]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const D=p[L]||[];p[L]=D,D.push(g)}I(p,function(A){return A.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ts(c,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||p}function Bg(c){this.Aa=0,this.i=[],this.j=new vs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ts("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ts("baseRetryDelayMs",5e3,c),this.cb=Ts("retryDelaySeedMs",1e4,c),this.Wa=Ts("forwardChannelMaxRetries",2,c),this.wa=Ts("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Cg(c&&c.concurrentRequestLimit),this.Da=new s1,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Bg.prototype,t.la=8,t.G=1,t.connect=function(c,p,g,A){Ct(0),this.W=c,this.H=p||{},g&&A!==void 0&&(this.H.OSID=g,this.H.OAID=A),this.F=this.X,this.I=Xg(this,null,this.W),yl(this)};function Ed(c){if(zg(c),c.G==3){var p=c.U++,g=Vn(c.I);if(Se(g,"SID",c.K),Se(g,"RID",p),Se(g,"TYPE","terminate"),Is(c,g),p=new yr(c,c.j,p),p.L=2,p.v=hl(Vn(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=p.v,g=!0),g||(p.g=Jg(p.j,null),p.g.ea(p.v)),p.F=Date.now(),cl(p)}Yg(c)}function gl(c){c.g&&(Sd(c),c.g.cancel(),c.g=null)}function zg(c){gl(c),c.u&&(a.clearTimeout(c.u),c.u=null),vl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function yl(c){if(!Sg(c.h)&&!c.s){c.s=!0;var p=c.Ga;Y||Q(),M||(Y(),M=!0),H.add(p,c),c.B=0}}function d1(c,p){return Tg(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ys(h(c.Ga,c,p),Qg(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const L=new yr(this,this.j,c);let D=this.o;if(this.S&&(D?(D=C(D),P(D,this.S)):D=this.S),this.m!==null||this.O||(L.H=D,D=null),this.P)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var A=this.i[g];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(p+=A,4096<p){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=Hg(this,L,p),g=Vn(this.I),Se(g,"RID",c),Se(g,"CVER",22),this.D&&Se(g,"X-HTTP-Session-Id",this.D),Is(this,g),D&&(this.O?p="headers="+encodeURIComponent(String(Og(D)))+"&"+p:this.m&&_d(g,this.m,D)),wd(this.h,L),this.Ua&&Se(g,"TYPE","init"),this.P?(Se(g,"$req",p),Se(g,"SID","null"),L.T=!0,gd(L,g,null)):gd(L,g,p),this.G=2}}else this.G==3&&(c?Wg(this,c):this.i.length==0||Sg(this.h)||Wg(this))};function Wg(c,p){var g;p?g=p.l:g=c.U++;const A=Vn(c.I);Se(A,"SID",c.K),Se(A,"RID",g),Se(A,"AID",c.T),Is(c,A),c.m&&c.o&&_d(A,c.m,c.o),g=new yr(c,c.j,g,c.B+1),c.m===null&&(g.H=c.o),p&&(c.i=p.D.concat(c.i)),p=Hg(c,g,1e3),g.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),wd(c.h,g),gd(g,A,p)}function Is(c,p){c.H&&O(c.H,function(g,A){Se(p,A,g)}),c.l&&kg({},function(g,A){Se(p,A,g)})}function Hg(c,p,g){g=Math.min(c.i.length,g);var A=c.l?h(c.l.Na,c.l,c):null;e:{var L=c.i;let D=-1;for(;;){const z=["count="+g];D==-1?0<g?(D=L[0].g,z.push("ofs="+D)):D=0:z.push("ofs="+D);let Ee=!0;for(let nt=0;nt<g;nt++){let ye=L[nt].g;const ht=L[nt].map;if(ye-=D,0>ye)D=Math.max(0,L[nt].g-100),Ee=!1;else try{a1(ht,z,"req"+ye+"_")}catch{A&&A(ht)}}if(Ee){A=z.join("&");break e}}}return c=c.i.splice(0,g),p.D=c,A}function qg(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;Y||Q(),M||(Y(),M=!0),H.add(p,c),c.v=0}}function Cd(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ys(h(c.Fa,c),Qg(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Gg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ys(h(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ct(10),gl(this),Gg(this))};function Sd(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Gg(c){c.g=new yr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=Vn(c.qa);Se(p,"RID","rpc"),Se(p,"SID",c.K),Se(p,"AID",c.T),Se(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&Se(p,"TO",c.ja),Se(p,"TYPE","xmlhttp"),Is(c,p),c.m&&c.o&&_d(p,c.m,c.o),c.L&&(c.g.I=c.L);var g=c.g;c=c.ia,g.L=1,g.v=hl(Vn(p)),g.m=null,g.P=!0,wg(g,c)}t.Za=function(){this.C!=null&&(this.C=null,gl(this),Cd(this),Ct(19))};function vl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Kg(c,p){var g=null;if(c.g==p){vl(c),Sd(c),c.g=null;var A=2}else if(xd(c.h,p))g=p.D,Ig(c.h,p),A=1;else return;if(c.G!=0){if(p.o)if(A==1){g=p.m?p.m.length:0,p=Date.now()-p.F;var L=c.B;A=sl(),Et(A,new gg(A,g)),yl(c)}else qg(c);else if(L=p.s,L==3||L==0&&0<p.X||!(A==1&&d1(c,p)||A==2&&Cd(c)))switch(g&&0<g.length&&(p=c.h,p.i=p.i.concat(g)),L){case 1:mi(c,5);break;case 4:mi(c,10);break;case 3:mi(c,6);break;default:mi(c,2)}}}function Qg(c,p){let g=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(g*=2),g*p}function mi(c,p){if(c.j.info("Error code "+p),p==2){var g=h(c.fb,c),A=c.Xa;const L=!A;A=new pi(A||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ul(A,"https"),hl(A),L?i1(A.toString(),g):o1(A.toString(),g)}else Ct(2);c.G=0,c.l&&c.l.sa(p),Yg(c),zg(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function Yg(c){if(c.G=0,c.ka=[],c.l){const p=Ag(c.h);(p.length!=0||c.i.length!=0)&&(T(c.ka,p),T(c.ka,c.i),c.h.i.length=0,x(c.i),c.i.length=0),c.l.ra()}}function Xg(c,p,g){var A=g instanceof pi?Vn(g):new pi(g);if(A.g!="")p&&(A.g=p+"."+A.g),dl(A,A.s);else{var L=a.location;A=L.protocol,p=p?p+"."+L.hostname:L.hostname,L=+L.port;var D=new pi(null);A&&ul(D,A),p&&(D.g=p),L&&dl(D,L),g&&(D.l=g),A=D}return g=c.D,p=c.ya,g&&p&&Se(A,g,p),Se(A,"VER",c.la),Is(c,A),A}function Jg(c,p,g){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new Le(new fl({eb:g})):new Le(c.pa),p.Ha(c.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zg(){}t=Zg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function xl(){}xl.prototype.g=function(c,p){return new Lt(c,p)};function Lt(c,p){dt.call(this),this.g=new Bg(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!v(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!v(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new Xi(this)}E(Lt,dt),Lt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Lt.prototype.close=function(){Ed(this.g)},Lt.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.u&&(g={},g.__data__=ud(c),c=g);p.i.push(new KT(p.Ya++,c)),p.G==3&&yl(p)},Lt.prototype.N=function(){this.g.l=null,delete this.j,Ed(this.g),delete this.g,Lt.aa.N.call(this)};function ey(c){hd.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){e:{for(const g in p){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}E(ey,hd);function ty(){fd.call(this),this.status=1}E(ty,fd);function Xi(c){this.g=c}E(Xi,Zg),Xi.prototype.ua=function(){Et(this.g,"a")},Xi.prototype.ta=function(c){Et(this.g,new ey(c))},Xi.prototype.sa=function(c){Et(this.g,new ty)},Xi.prototype.ra=function(){Et(this.g,"b")},xl.prototype.createWebChannel=xl.prototype.g,Lt.prototype.send=Lt.prototype.o,Lt.prototype.open=Lt.prototype.m,Lt.prototype.close=Lt.prototype.close,$E=function(){return new xl},RE=function(){return sl()},PE=hi,Af={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},al.NO_ERROR=0,al.TIMEOUT=8,al.HTTP_ERROR=6,gc=al,yg.COMPLETE="complete",kE=yg,hg.EventType=ms,ms.OPEN="a",ms.CLOSE="b",ms.ERROR="c",ms.MESSAGE="d",dt.prototype.listen=dt.prototype.K,Ws=hg,Le.prototype.listenOnce=Le.prototype.L,Le.prototype.getLastError=Le.prototype.Ka,Le.prototype.getLastErrorCode=Le.prototype.Ba,Le.prototype.getStatus=Le.prototype.Z,Le.prototype.getResponseJson=Le.prototype.Oa,Le.prototype.getResponseText=Le.prototype.oa,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Ha,AE=Le}).apply(typeof jl<"u"?jl:typeof self<"u"?self:typeof window<"u"?window:{});const qv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let os="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li=new em("@firebase/firestore");function ro(){return Li.logLevel}function q(t,...e){if(Li.logLevel<=ce.DEBUG){const n=e.map(fm);Li.debug(`Firestore (${os}): ${t}`,...n)}}function sr(t,...e){if(Li.logLevel<=ce.ERROR){const n=e.map(fm);Li.error(`Firestore (${os}): ${t}`,...n)}}function Bo(t,...e){if(Li.logLevel<=ce.WARN){const n=e.map(fm);Li.warn(`Firestore (${os}): ${t}`,...n)}}function fm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t="Unexpected state"){const e=`FIRESTORE (${os}) INTERNAL ASSERTION FAILED: `+t;throw sr(e),new Error(e)}function xe(t,e){t||ne()}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends mr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class eb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(yt.UNAUTHENTICATED))}shutdown(){}}class tb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class nb{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){xe(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let o=new qr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new qr,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const l=o;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new qr)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xe(typeof r.accessToken=="string"),new bE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xe(e===null||typeof e=="string"),new yt(e)}}class rb{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class ib{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new rb(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ob{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class sb{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){xe(this.o===void 0);const r=o=>{o.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,q("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(xe(typeof n.token=="string"),this.R=n.token,new ob(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=ab(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}}function de(t,e){return t<e?-1:t>e?1:0}function zo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{static now(){return Ge.fromMillis(Date.now())}static fromDate(e){return Ge.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ge(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new J(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?de(this.nanoseconds,e.nanoseconds):de(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{static fromTimestamp(e){return new re(e)}static min(){return new re(new Ge(0,0))}static max(){return new re(new Ge(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(),r===void 0?r=e.length-n:r>e.length-n&&ne(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ka.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ka?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Pe extends ka{construct(e,n,r){return new Pe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new J(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Pe(n)}static emptyPath(){return new Pe([])}}const lb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ot extends ka{construct(e,n,r){return new ot(e,n,r)}static isValidIdentifier(e){return lb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ot(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new J(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new J(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new J(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new J(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ot(n)}static emptyPath(){return new ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.path=e}static fromPath(e){return new Z(Pe.fromString(e))}static fromName(e){return new Z(Pe.fromString(e).popFirst(5))}static empty(){return new Z(Pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Z(new Pe(e.slice()))}}function cb(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=re.fromTimestamp(r===1e9?new Ge(n+1,0):new Ge(n,r));return new Xr(i,Z.empty(),e)}function ub(t){return new Xr(t.readTime,t.key,-1)}class Xr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Xr(re.min(),Z.empty(),-1)}static max(){return new Xr(re.max(),Z.empty(),-1)}}function db(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Z.comparator(t.documentKey,e.documentKey),n!==0?n:de(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ss(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==hb)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new V((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):V.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):V.reject(n)}static resolve(e){return new V((n,r)=>{n(e)})}static reject(e){return new V((n,r)=>{r(e)})}static waitFor(e){return new V((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},l=>r(l))}),s=!0,o===i&&n()})}static or(e){let n=V.resolve(!1);for(const r of e)n=n.next(i=>i?V.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new V((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let l=0;l<o;l++){const u=l;n(e[u]).next(d=>{s[u]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,n){return new V((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function pb(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function as(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Vu.oe=-1;function ju(t){return t==null}function ru(t){return t===0&&1/t==-1/0}function mb(t){return typeof t=="number"&&Number.isInteger(t)&&!ru(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Gv(e)),e=yb(t.get(n),e);return Gv(e)}function yb(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Gv(t){return t+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function zi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function FE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,n){this.comparator=e,this.root=n||it.EMPTY}insert(e,n){return new Fe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,it.BLACK,null,null))}remove(e){return new Fe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,it.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ul(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ul(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ul(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ul(this.root,e,this.comparator,!0)}}class Ul{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class it{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??it.RED,this.left=i??it.EMPTY,this.right=o??it.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new it(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return it.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return it.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,it.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,it.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ne();const e=this.left.check();if(e!==this.right.check())throw ne();return e+(this.isRed()?0:1)}}it.EMPTY=null,it.RED=!0,it.BLACK=!1;it.EMPTY=new class{constructor(){this.size=0}get key(){throw ne()}get value(){throw ne()}get color(){throw ne()}get left(){throw ne()}get right(){throw ne()}copy(e,n,r,i,o){return this}insert(e,n,r){return new it(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Qv(this.data.getIterator())}getIteratorFrom(e){return new Qv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ke)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ke(this.comparator);return n.data=e,n}}class Qv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.fields=e,e.sort(ot.comparator)}static empty(){return new ln([])}unionWith(e){let n=new Ke(ot.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return zo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new LE("Invalid base64 string: "+o):o}}(e);return new lt(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new lt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return de(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}lt.EMPTY_BYTE_STRING=new lt("");const vb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jr(t){if(xe(!!t),typeof t=="string"){let e=0;const n=vb.exec(t);if(xe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:De(t.seconds),nanos:De(t.nanos)}}function De(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Zr(t){return typeof t=="string"?lt.fromBase64String(t):lt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Uu(t){const e=t.mapValue.fields.__previous_value__;return pm(e)?Uu(e):e}function Pa(t){const e=Jr(t.mapValue.fields.__local_write_time__.timestampValue);return new Ge(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e,n,r,i,o,s,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class Ra{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ra("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ra&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ei(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?pm(t)?4:_b(t)?9007199254740991:wb(t)?10:11:ne()}function bn(t,e){if(t===e)return!0;const n=ei(t);if(n!==ei(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Pa(t).isEqual(Pa(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Jr(i.timestampValue),a=Jr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Zr(i.bytesValue).isEqual(Zr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return De(i.geoPointValue.latitude)===De(o.geoPointValue.latitude)&&De(i.geoPointValue.longitude)===De(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return De(i.integerValue)===De(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=De(i.doubleValue),a=De(o.doubleValue);return s===a?ru(s)===ru(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return zo(t.arrayValue.values||[],e.arrayValue.values||[],bn);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(Kv(s)!==Kv(a))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!bn(s[l],a[l])))return!1;return!0}(t,e);default:return ne()}}function $a(t,e){return(t.values||[]).find(n=>bn(n,e))!==void 0}function Wo(t,e){if(t===e)return 0;const n=ei(t),r=ei(e);if(n!==r)return de(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return de(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=De(o.integerValue||o.doubleValue),l=De(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Yv(t.timestampValue,e.timestampValue);case 4:return Yv(Pa(t),Pa(e));case 5:return de(t.stringValue,e.stringValue);case 6:return function(o,s){const a=Zr(o),l=Zr(s);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),l=s.split("/");for(let u=0;u<a.length&&u<l.length;u++){const d=de(a[u],l[u]);if(d!==0)return d}return de(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=de(De(o.latitude),De(s.latitude));return a!==0?a:de(De(o.longitude),De(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Xv(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,l,u,d;const f=o.fields||{},h=s.fields||{},y=(a=f.value)===null||a===void 0?void 0:a.arrayValue,E=(l=h.value)===null||l===void 0?void 0:l.arrayValue,x=de(((u=y==null?void 0:y.values)===null||u===void 0?void 0:u.length)||0,((d=E==null?void 0:E.values)===null||d===void 0?void 0:d.length)||0);return x!==0?x:Xv(y,E)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===Bl.mapValue&&s===Bl.mapValue)return 0;if(o===Bl.mapValue)return 1;if(s===Bl.mapValue)return-1;const a=o.fields||{},l=Object.keys(a),u=s.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let f=0;f<l.length&&f<d.length;++f){const h=de(l[f],d[f]);if(h!==0)return h;const y=Wo(a[l[f]],u[d[f]]);if(y!==0)return y}return de(l.length,d.length)}(t.mapValue,e.mapValue);default:throw ne()}}function Yv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return de(t,e);const n=Jr(t),r=Jr(e),i=de(n.seconds,r.seconds);return i!==0?i:de(n.nanos,r.nanos)}function Xv(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=Wo(n[i],r[i]);if(o)return o}return de(n.length,r.length)}function Ho(t){return kf(t)}function kf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Jr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Zr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Z.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=kf(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${kf(n.fields[s])}`;return i+"}"}(t.mapValue):ne()}function yc(t){switch(ei(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Uu(t);return e?16+yc(e):16;case 5:return 2*t.stringValue.length;case 6:return Zr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+yc(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return zi(r.fields,(o,s)=>{i+=o.length+yc(s)}),i}(t.mapValue);default:throw ne()}}function Pf(t){return!!t&&"integerValue"in t}function mm(t){return!!t&&"arrayValue"in t}function Jv(t){return!!t&&"nullValue"in t}function Zv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function vc(t){return!!t&&"mapValue"in t}function wb(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ia(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return zi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ia(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ia(t.arrayValue.values[n]);return e}return Object.assign({},t)}function _b(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.value=e}static empty(){return new Qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!vc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ia(n)}setAll(e){let n=ot.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=ia(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());vc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return bn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];vc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){zi(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Qt(ia(this.value))}}function OE(t){const e=[];return zi(t.fields,(n,r)=>{const i=new ot([n]);if(vc(r)){const o=OE(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new xt(e,0,re.min(),re.min(),re.min(),Qt.empty(),0)}static newFoundDocument(e,n,r,i){return new xt(e,1,n,re.min(),r,i,0)}static newNoDocument(e,n){return new xt(e,2,n,re.min(),re.min(),Qt.empty(),0)}static newUnknownDocument(e,n){return new xt(e,3,n,re.min(),re.min(),Qt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,n){this.position=e,this.inclusive=n}}function e0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?r=Z.comparator(Z.fromName(s.referenceValue),n.key):r=Wo(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function t0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!bn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,n="asc"){this.field=e,this.dir=n}}function Eb(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{}class He extends DE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Sb(e,n,r):n==="array-contains"?new Ab(e,r):n==="in"?new kb(e,r):n==="not-in"?new Pb(e,r):n==="array-contains-any"?new Rb(e,r):new He(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Tb(e,r):new Ib(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Wo(n,this.value)):n!==null&&ei(this.value)===ei(n)&&this.matchesComparison(Wo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Nn extends DE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Nn(e,n)}matches(e){return ME(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ME(t){return t.op==="and"}function VE(t){return Cb(t)&&ME(t)}function Cb(t){for(const e of t.filters)if(e instanceof Nn)return!1;return!0}function Rf(t){if(t instanceof He)return t.field.canonicalString()+t.op.toString()+Ho(t.value);if(VE(t))return t.filters.map(e=>Rf(e)).join(",");{const e=t.filters.map(n=>Rf(n)).join(",");return`${t.op}(${e})`}}function jE(t,e){return t instanceof He?function(r,i){return i instanceof He&&r.op===i.op&&r.field.isEqual(i.field)&&bn(r.value,i.value)}(t,e):t instanceof Nn?function(r,i){return i instanceof Nn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&jE(s,i.filters[a]),!0):!1}(t,e):void ne()}function UE(t){return t instanceof He?function(n){return`${n.field.canonicalString()} ${n.op} ${Ho(n.value)}`}(t):t instanceof Nn?function(n){return n.op.toString()+" {"+n.getFilters().map(UE).join(" ,")+"}"}(t):"Filter"}class Sb extends He{constructor(e,n,r){super(e,n,r),this.key=Z.fromName(r.referenceValue)}matches(e){const n=Z.comparator(e.key,this.key);return this.matchesComparison(n)}}class Tb extends He{constructor(e,n){super(e,"in",n),this.keys=BE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Ib extends He{constructor(e,n){super(e,"not-in",n),this.keys=BE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function BE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Z.fromName(r.referenceValue))}class Ab extends He{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return mm(n)&&$a(n.arrayValue,this.value)}}class kb extends He{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&$a(this.value.arrayValue,n)}}class Pb extends He{constructor(e,n){super(e,"not-in",n)}matches(e){if($a(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!$a(this.value.arrayValue,n)}}class Rb extends He{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!mm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>$a(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}}function n0(t,e=null,n=[],r=[],i=null,o=null,s=null){return new $b(t,e,n,r,i,o,s)}function gm(t){const e=oe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Rf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),ju(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ho(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ho(r)).join(",")),e.ue=n}return e.ue}function ym(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Eb(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!jE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!t0(t.startAt,e.startAt)&&t0(t.endAt,e.endAt)}function $f(t){return Z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function bb(t,e,n,r,i,o,s,a){return new Bu(t,e,n,r,i,o,s,a)}function vm(t){return new Bu(t)}function r0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Nb(t){return t.collectionGroup!==null}function oa(t){const e=oe(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ke(ot.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new ou(o,r))}),n.has(ot.keyField().canonicalString())||e.ce.push(new ou(ot.keyField(),r))}return e.ce}function An(t){const e=oe(t);return e.le||(e.le=Fb(e,oa(t))),e.le}function Fb(t,e){if(t.limitType==="F")return n0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new ou(i.field,o)});const n=t.endAt?new iu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new iu(t.startAt.position,t.startAt.inclusive):null;return n0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function bf(t,e,n){return new Bu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function zu(t,e){return ym(An(t),An(e))&&t.limitType===e.limitType}function zE(t){return`${gm(An(t))}|lt:${t.limitType}`}function io(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>UE(i)).join(", ")}]`),ju(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ho(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ho(i)).join(",")),`Target(${r})`}(An(t))}; limitType=${t.limitType})`}function Wu(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Z.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of oa(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,l){const u=e0(s,a,l);return s.inclusive?u<=0:u<0}(r.startAt,oa(r),i)||r.endAt&&!function(s,a,l){const u=e0(s,a,l);return s.inclusive?u>=0:u>0}(r.endAt,oa(r),i))}(t,e)}function Lb(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function WE(t){return(e,n)=>{let r=!1;for(const i of oa(t)){const o=Ob(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Ob(t,e,n){const r=t.field.isKeyField()?Z.comparator(e.key,n.key):function(o,s,a){const l=s.data.field(o),u=a.data.field(o);return l!==null&&u!==null?Wo(l,u):ne()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){zi(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return FE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db=new Fe(Z.comparator);function ar(){return Db}const HE=new Fe(Z.comparator);function Hs(...t){let e=HE;for(const n of t)e=e.insert(n.key,n);return e}function qE(t){let e=HE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ci(){return sa()}function GE(){return sa()}function sa(){return new Wi(t=>t.toString(),(t,e)=>t.isEqual(e))}const Mb=new Fe(Z.comparator),Vb=new Ke(Z.comparator);function ue(...t){let e=Vb;for(const n of t)e=e.add(n);return e}const jb=new Ke(de);function Ub(){return jb}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ru(e)?"-0":e}}function KE(t){return{integerValue:""+t}}function Bb(t,e){return mb(e)?KE(e):xm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(){this._=void 0}}function zb(t,e,n){return t instanceof ba?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&pm(o)&&(o=Uu(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof Na?YE(t,e):t instanceof Fa?XE(t,e):function(i,o){const s=QE(i,o),a=i0(s)+i0(i.Pe);return Pf(s)&&Pf(i.Pe)?KE(a):xm(i.serializer,a)}(t,e)}function Wb(t,e,n){return t instanceof Na?YE(t,e):t instanceof Fa?XE(t,e):n}function QE(t,e){return t instanceof su?function(r){return Pf(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class ba extends Hu{}class Na extends Hu{constructor(e){super(),this.elements=e}}function YE(t,e){const n=JE(e);for(const r of t.elements)n.some(i=>bn(i,r))||n.push(r);return{arrayValue:{values:n}}}class Fa extends Hu{constructor(e){super(),this.elements=e}}function XE(t,e){let n=JE(e);for(const r of t.elements)n=n.filter(i=>!bn(i,r));return{arrayValue:{values:n}}}class su extends Hu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function i0(t){return De(t.integerValue||t.doubleValue)}function JE(t){return mm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,n){this.field=e,this.transform=n}}function qb(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Na&&i instanceof Na||r instanceof Fa&&i instanceof Fa?zo(r.elements,i.elements,bn):r instanceof su&&i instanceof su?bn(r.Pe,i.Pe):r instanceof ba&&i instanceof ba}(t.transform,e.transform)}class Gb{constructor(e,n){this.version=e,this.transformResults=n}}class kn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new kn}static exists(e){return new kn(void 0,e)}static updateTime(e){return new kn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class qu{}function ZE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new tC(t.key,kn.none()):new Xa(t.key,t.data,kn.none());{const n=t.data,r=Qt.empty();let i=new Ke(ot.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Hi(t.key,r,new ln(i.toArray()),kn.none())}}function Kb(t,e,n){t instanceof Xa?function(i,o,s){const a=i.value.clone(),l=s0(i.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Hi?function(i,o,s){if(!xc(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=s0(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(eC(i)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function aa(t,e,n,r){return t instanceof Xa?function(o,s,a,l){if(!xc(o.precondition,s))return a;const u=o.value.clone(),d=a0(o.fieldTransforms,l,s);return u.setAll(d),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Hi?function(o,s,a,l){if(!xc(o.precondition,s))return a;const u=a0(o.fieldTransforms,l,s),d=s.data;return d.setAll(eC(o)),d.setAll(u),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(o,s,a){return xc(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function Qb(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=QE(r.transform,i||null);o!=null&&(n===null&&(n=Qt.empty()),n.set(r.field,o))}return n||null}function o0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&zo(r,i,(o,s)=>qb(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Xa extends qu{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Hi extends qu{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function eC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function s0(t,e,n){const r=new Map;xe(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Wb(s,a,n[i]))}return r}function a0(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,zb(o,s,e))}return r}class tC extends qu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Yb extends qu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&Kb(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=aa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=aa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=GE();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const l=ZE(s,a);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ue())}isEqual(e){return this.batchId===e.batchId&&zo(this.mutations,e.mutations,(n,r)=>o0(n,r))&&zo(this.baseMutations,e.baseMutations,(n,r)=>o0(n,r))}}class wm{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){xe(e.mutations.length===r.length);let i=function(){return Mb}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new wm(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je,he;function eN(t){switch(t){default:return ne();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function nC(t){if(t===void 0)return sr("GRPC error has no .code"),j.UNKNOWN;switch(t){case je.OK:return j.OK;case je.CANCELLED:return j.CANCELLED;case je.UNKNOWN:return j.UNKNOWN;case je.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case je.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case je.INTERNAL:return j.INTERNAL;case je.UNAVAILABLE:return j.UNAVAILABLE;case je.UNAUTHENTICATED:return j.UNAUTHENTICATED;case je.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case je.NOT_FOUND:return j.NOT_FOUND;case je.ALREADY_EXISTS:return j.ALREADY_EXISTS;case je.PERMISSION_DENIED:return j.PERMISSION_DENIED;case je.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case je.ABORTED:return j.ABORTED;case je.OUT_OF_RANGE:return j.OUT_OF_RANGE;case je.UNIMPLEMENTED:return j.UNIMPLEMENTED;case je.DATA_LOSS:return j.DATA_LOSS;default:return ne()}}(he=je||(je={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN=new Ai([4294967295,4294967295],0);function l0(t){const e=tN().encode(t),n=new IE;return n.update(e),new Uint8Array(n.digest())}function c0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ai([n,r],0),new Ai([i,o],0)]}class _m{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new qs(`Invalid padding: ${n}`);if(r<0)throw new qs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new qs(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new qs(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ie=Ai.fromNumber(this.Te)}Ee(e,n,r){let i=e.add(n.multiply(Ai.fromNumber(r)));return i.compare(nN)===1&&(i=new Ai([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=l0(e),[r,i]=c0(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new _m(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Te===0)return;const n=l0(e),[r,i]=c0(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class qs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ja.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Gu(re.min(),i,new Fe(de),ar(),ue())}}class Ja{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ja(r,n,ue(),ue(),ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class rC{constructor(e,n){this.targetId=e,this.me=n}}class iC{constructor(e,n,r=lt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class u0{constructor(){this.fe=0,this.ge=d0(),this.pe=lt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ue(),n=ue(),r=ue();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ne()}}),new Ja(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=d0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,xe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class rN{constructor(e){this.Le=e,this.Be=new Map,this.ke=ar(),this.qe=zl(),this.Qe=zl(),this.Ke=new Fe(de)}$e(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(n,e.Ve):this.We(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.We(n,e.key,e.Ve)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.je(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.De(e.resumeToken));break;default:ne()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.me.count,i=this.Ye(n);if(i){const o=i.target;if($f(o))if(r===0){const s=new Z(o.path);this.We(n,s,xt.newNoDocument(s,re.min()))}else xe(r===1);else{const s=this.Ze(n);if(s!==r){const a=this.Xe(e),l=a?this.et(a,e,s):1;if(l!==0){this.He(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,u)}}}}}Xe(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=Zr(r).toUint8Array()}catch(l){if(l instanceof LE)return Bo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new _m(s,i,o)}catch(l){return Bo(l instanceof qs?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,r){return n.me.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Le.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(n,o,null),i++)}),i}it(e){const n=new Map;this.Be.forEach((o,s)=>{const a=this.Ye(s);if(a){if(o.current&&$f(a.target)){const l=new Z(a.target.path);this.st(l).has(s)||this.ot(s,l)||this.We(s,l,xt.newNoDocument(l,e))}o.be&&(n.set(s,o.ve()),o.Ce())}});let r=ue();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{const u=this.Ye(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));const i=new Gu(e,n,this.Ke,this.ke,r);return this.ke=ar(),this.qe=zl(),this.Qe=zl(),this.Ke=new Fe(de),i}Ue(e,n){if(!this.je(e))return;const r=this.ot(e,n.key)?2:0;this.ze(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.ot(e,n)?i.Fe(n,1):i.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(e)),this.Qe=this.Qe.insert(n,this._t(n).add(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let n=this.Be.get(e);return n||(n=new u0,this.Be.set(e,n)),n}_t(e){let n=this.Qe.get(e);return n||(n=new Ke(de),this.Qe=this.Qe.insert(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ke(de),this.qe=this.qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new u0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}ot(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function zl(){return new Fe(Z.comparator)}function d0(){return new Fe(Z.comparator)}const iN={asc:"ASCENDING",desc:"DESCENDING"},oN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sN={and:"AND",or:"OR"};class aN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Nf(t,e){return t.useProto3Json||ju(e)?e:{value:e}}function au(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function lN(t,e){return au(t,e.toTimestamp())}function Pn(t){return xe(!!t),re.fromTimestamp(function(n){const r=Jr(n);return new Ge(r.seconds,r.nanos)}(t))}function Em(t,e){return Ff(t,e).canonicalString()}function Ff(t,e){const n=function(i){return new Pe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function sC(t){const e=Pe.fromString(t);return xe(dC(e)),e}function Lf(t,e){return Em(t.databaseId,e.path)}function ah(t,e){const n=sC(e);if(n.get(1)!==t.databaseId.projectId)throw new J(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new J(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Z(lC(n))}function aC(t,e){return Em(t.databaseId,e)}function cN(t){const e=sC(t);return e.length===4?Pe.emptyPath():lC(e)}function Of(t){return new Pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function lC(t){return xe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function h0(t,e,n){return{name:Lf(t,e),fields:n.value.mapValue.fields}}function uN(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,d){return u.useProto3Json?(xe(d===void 0||typeof d=="string"),lt.fromBase64String(d||"")):(xe(d===void 0||d instanceof Buffer||d instanceof Uint8Array),lt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){const d=u.code===void 0?j.UNKNOWN:nC(u.code);return new J(d,u.message||"")}(s);n=new iC(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ah(t,r.document.name),o=Pn(r.document.updateTime),s=r.document.createTime?Pn(r.document.createTime):re.min(),a=new Qt({mapValue:{fields:r.document.fields}}),l=xt.newFoundDocument(i,o,s,a),u=r.targetIds||[],d=r.removedTargetIds||[];n=new wc(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ah(t,r.document),o=r.readTime?Pn(r.readTime):re.min(),s=xt.newNoDocument(i,o),a=r.removedTargetIds||[];n=new wc([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ah(t,r.document),o=r.removedTargetIds||[];n=new wc([],o,i,null)}else{if(!("filter"in e))return ne();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new Zb(i,o),a=r.targetId;n=new rC(a,s)}}return n}function dN(t,e){let n;if(e instanceof Xa)n={update:h0(t,e.key,e.value)};else if(e instanceof tC)n={delete:Lf(t,e.key)};else if(e instanceof Hi)n={update:h0(t,e.key,e.data),updateMask:wN(e.fieldMask)};else{if(!(e instanceof Yb))return ne();n={verify:Lf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof ba)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Na)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Fa)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof su)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw ne()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:lN(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ne()}(t,e.precondition)),n}function hN(t,e){return t&&t.length>0?(xe(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?Pn(i.updateTime):Pn(o);return s.isEqual(re.min())&&(s=Pn(o)),new Gb(s,i.transformResults||[])}(n,e))):[]}function fN(t,e){return{documents:[aC(t,e.path)]}}function pN(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=aC(t,i);const o=function(u){if(u.length!==0)return uC(Nn.create(u,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(u){if(u.length!==0)return u.map(d=>function(h){return{field:oo(h.field),direction:yN(h.dir)}}(d))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=Nf(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ct:n,parent:i}}function mN(t){let e=cN(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){xe(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];n.where&&(o=function(f){const h=cC(f);return h instanceof Nn&&VE(h)?h.getFilters():[h]}(n.where));let s=[];n.orderBy&&(s=function(f){return f.map(h=>function(E){return new ou(so(E.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(f){let h;return h=typeof f=="object"?f.value:f,ju(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(f){const h=!!f.before,y=f.values||[];return new iu(y,h)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const h=!f.before,y=f.values||[];return new iu(y,h)}(n.endAt)),bb(e,i,s,o,a,"F",l,u)}function gN(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function cC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=so(n.unaryFilter.field);return He.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=so(n.unaryFilter.field);return He.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=so(n.unaryFilter.field);return He.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=so(n.unaryFilter.field);return He.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ne()}}(t):t.fieldFilter!==void 0?function(n){return He.create(so(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ne()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Nn.create(n.compositeFilter.filters.map(r=>cC(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ne()}}(n.compositeFilter.op))}(t):ne()}function yN(t){return iN[t]}function vN(t){return oN[t]}function xN(t){return sN[t]}function oo(t){return{fieldPath:t.canonicalString()}}function so(t){return ot.fromServerFormat(t.fieldPath)}function uC(t){return t instanceof He?function(n){if(n.op==="=="){if(Zv(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NAN"}};if(Jv(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Zv(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NOT_NAN"}};if(Jv(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oo(n.field),op:vN(n.op),value:n.value}}}(t):t instanceof Nn?function(n){const r=n.getFilters().map(i=>uC(i));return r.length===1?r[0]:{compositeFilter:{op:xN(n.op),filters:r}}}(t):ne()}function wN(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function dC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,n,r,i,o=re.min(),s=re.min(),a=lt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Fr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e){this.ht=e}}function EN(t){const e=mN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?bf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(){this.ln=new SN}addToCollectionParentIndex(e,n){return this.ln.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this.ln.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(Xr.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(Xr.min())}updateCollectionGroup(e,n,r){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}}class SN{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ke(Pe.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ke(Pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Pt{static withCacheSize(e){return new Pt(e,Pt.DEFAULT_COLLECTION_PERCENTILE,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pt.DEFAULT_COLLECTION_PERCENTILE=10,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pt.DEFAULT=new Pt(41943040,Pt.DEFAULT_COLLECTION_PERCENTILE,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pt.DISABLED=new Pt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new qo(0)}static Qn(){return new qo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0([t,e],[n,r]){const i=de(t,n);return i===0?de(e,r):i}class TN{constructor(e){this.Gn=e,this.buffer=new Ke(p0),this.zn=0}jn(){return++this.zn}Hn(e){const n=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();p0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class IN{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){q("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){as(n)?q("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await ss(n)}await this.Yn(3e5)})}}class AN{constructor(e,n){this.Zn=e,this.params=n}calculateTargetCount(e,n){return this.Zn.Xn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return V.resolve(Vu.oe);const r=new TN(n);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(f0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),f0):this.tr(e,n))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,n){let r,i,o,s,a,l,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(o=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),ro()<=ce.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-d}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}}function kN(t,e){return new AN(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(){this.changes=new Wi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,xt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?V.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&aa(r.mutation,i,ln.empty(),Ge.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ue()){const i=Ci();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Hs();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=Ci();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ue()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=ar();const s=sa(),a=function(){return sa()}();return n.forEach((l,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof Hi)?o=o.insert(u.key,u):d!==void 0?(s.set(u.key,d.mutation.getFieldMask()),aa(d.mutation,u,d.mutation.getFieldMask(),Ge.now())):s.set(u.key,ln.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((u,d)=>s.set(u,d)),n.forEach((u,d)=>{var f;return a.set(u,new RN(d,(f=s.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=sa();let i=new Fe((s,a)=>s-a),o=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const a of s)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let d=r.get(l)||ln.empty();d=a.applyToLocalView(u,d),r.set(l,d);const f=(i.get(a.batchId)||ue()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,d=l.value,f=GE();d.forEach(h=>{if(!o.has(h)){const y=ZE(n.get(h),r.get(h));y!==null&&f.set(h,y),o=o.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,f))}return V.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return Z.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Nb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):V.resolve(Ci());let a=-1,l=o;return s.next(u=>V.forEach(u,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?V.resolve():this.remoteDocumentCache.getEntry(e,d).next(h=>{l=l.insert(d,h)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,l,u,ue())).next(d=>({batchId:a,changes:qE(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Z(n)).next(r=>{let i=Hs();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=Hs();return this.indexManager.getCollectionParents(e,o).next(a=>V.forEach(a,l=>{const u=function(f,h){return new Bu(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((f,h)=>{s=s.insert(f,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((l,u)=>{const d=u.getKey();s.get(d)===null&&(s=s.insert(d,xt.newInvalidDocument(d)))});let a=Hs();return s.forEach((l,u)=>{const d=o.get(l);d!==void 0&&aa(d.mutation,u,ln.empty(),Ge.now()),Wu(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,n){return V.resolve(this.Tr.get(n))}saveBundleMetadata(e,n){return this.Tr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Pn(i.createTime)}}(n)),V.resolve()}getNamedQuery(e,n){return V.resolve(this.Ir.get(n))}saveNamedQuery(e,n){return this.Ir.set(n.name,function(i){return{name:i.name,query:EN(i.bundledQuery),readTime:Pn(i.readTime)}}(n)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(){this.overlays=new Fe(Z.comparator),this.Er=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ci();return V.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.Tt(e,n,o)}),V.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Er.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Er.delete(r)),V.resolve()}getOverlaysForCollection(e,n,r){const i=Ci(),o=n.length+1,s=new Z(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return V.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Fe((u,d)=>u-d);const s=this.overlays.getIterator();for(;s.hasNext();){const u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=o.get(u.largestBatchId);d===null&&(d=Ci(),o=o.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=Ci(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return V.resolve(a)}Tt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.Er.get(i.largestBatchId).delete(r.key);this.Er.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Jb(n,r));let o=this.Er.get(n);o===void 0&&(o=ue(),this.Er.set(n,o)),this.Er.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(){this.sessionToken=lt.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,V.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(){this.dr=new Ke(Xe.Ar),this.Rr=new Ke(Xe.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,n){const r=new Xe(e,n);this.dr=this.dr.add(r),this.Rr=this.Rr.add(r)}mr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.gr(new Xe(e,n))}pr(e,n){e.forEach(r=>this.removeReference(r,n))}yr(e){const n=new Z(new Pe([])),r=new Xe(n,e),i=new Xe(n,e+1),o=[];return this.Rr.forEachInRange([r,i],s=>{this.gr(s),o.push(s.key)}),o}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const n=new Z(new Pe([])),r=new Xe(n,e),i=new Xe(n,e+1);let o=ue();return this.Rr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new Xe(e,0),r=this.dr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Xe{constructor(e,n){this.key=e,this.br=n}static Ar(e,n){return Z.comparator(e.key,n.key)||de(e.br,n.br)}static Vr(e,n){return de(e.br,n.br)||Z.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new Ke(Xe.Ar)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Xb(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.vr=this.vr.add(new Xe(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(s)}lookupMutationBatch(e,n){return V.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Fr(r),o=i<0?0:i;return V.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Xe(n,0),i=new Xe(n,Number.POSITIVE_INFINITY),o=[];return this.vr.forEachInRange([r,i],s=>{const a=this.Cr(s.br);o.push(a)}),V.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ke(de);return n.forEach(i=>{const o=new Xe(i,0),s=new Xe(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([o,s],a=>{r=r.add(a.br)})}),V.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;Z.isDocumentKey(o)||(o=o.child(""));const s=new Xe(new Z(o),0);let a=new Ke(de);return this.vr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.br)),!0)},s),V.resolve(this.Mr(a))}Mr(e){const n=[];return e.forEach(r=>{const i=this.Cr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){xe(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return V.forEach(n.mutations,i=>{const o=new Xe(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Ln(e){}containsKey(e,n){const r=new Xe(n,0),i=this.vr.firstAfterOrEqual(r);return V.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}Or(e,n){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const n=this.Fr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e){this.Nr=e,this.docs=function(){return new Fe(Z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Nr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():xt.newInvalidDocument(n))}getEntries(e,n){let r=ar();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():xt.newInvalidDocument(i))}),V.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=ar();const s=n.path,a=new Z(s.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||db(ub(d),r)<=0||(i.has(d.key)||Wu(n,d))&&(o=o.insert(d.key,d.mutableCopy()))}return V.resolve(o)}getAllFromCollectionGroup(e,n,r,i){ne()}Lr(e,n){return V.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new DN(this)}getSize(e){return V.resolve(this.size)}}class DN extends PN{constructor(e){super(),this.hr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),V.waitFor(n)}getFromCache(e,n){return this.hr.getEntry(e,n)}getAllFromCache(e,n){return this.hr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e){this.persistence=e,this.Br=new Wi(n=>gm(n),ym),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.kr=0,this.qr=new Cm,this.targetCount=0,this.Qr=qo.qn()}forEachTarget(e,n){return this.Br.forEach((r,i)=>n(i)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.kr&&(this.kr=n),V.resolve()}Un(e){this.Br.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Qr=new qo(n),this.highestTargetId=n),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,n){return this.Un(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.Un(n),V.resolve()}removeTargetData(e,n){return this.Br.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Br.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Br.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),V.waitFor(o).next(()=>i)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){const r=this.Br.get(n)||null;return V.resolve(r)}addMatchingKeys(e,n,r){return this.qr.mr(n,r),V.resolve()}removeMatchingKeys(e,n,r){this.qr.pr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),V.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.qr.yr(n),V.resolve()}getMatchingKeysForTargetId(e,n){const r=this.qr.Sr(n);return V.resolve(r)}containsKey(e,n){return V.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,n){this.Kr={},this.overlays={},this.$r=new Vu(0),this.Ur=!1,this.Ur=!0,this.Wr=new FN,this.referenceDelegate=e(this),this.Gr=new MN(this),this.indexManager=new CN,this.remoteDocumentCache=function(i){return new ON(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new _N(n),this.jr=new bN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new NN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Kr[e.toKey()];return r||(r=new LN(n,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const i=new VN(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(o=>this.referenceDelegate.Jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Yr(e,n){return V.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,n)))}}class VN extends fb{constructor(e){super(),this.currentSequenceNumber=e}}class Sm{constructor(e){this.persistence=e,this.Zr=new Cm,this.Xr=null}static ei(e){return new Sm(e)}get ti(){if(this.Xr)return this.Xr;throw ne()}addReference(e,n,r){return this.Zr.addReference(r,n),this.ti.delete(r.toString()),V.resolve()}removeReference(e,n,r){return this.Zr.removeReference(r,n),this.ti.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.ti.add(n.toString()),V.resolve()}removeTarget(e,n){this.Zr.yr(n.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.ti.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Hr(){this.Xr=new Set}Jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.ti,r=>{const i=Z.fromPath(r);return this.ni(e,i).next(o=>{o||n.removeEntry(i,re.min())})}).next(()=>(this.Xr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ni(e,n).next(r=>{r?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(e){return 0}ni(e,n){return V.or([()=>V.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Yr(e,n)])}}class lu{constructor(e,n){this.persistence=e,this.ri=new Wi(r=>gb(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=kN(this,n)}static ei(e,n){return new lu(e,n)}Hr(){}Jr(e){return V.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Xn(e){const n=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}nr(e){let n=0;return this.er(e,r=>{n++}).next(()=>n)}er(e,n){return V.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(o=>o?V.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.Lr(e,s=>this.ir(e,s,n).next(a=>{a||(r++,o.removeEntry(s,re.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.ri.set(n,e.currentSequenceNumber),V.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),V.resolve()}removeReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),V.resolve()}updateLimboDocument(e,n){return this.ri.set(n,e.currentSequenceNumber),V.resolve()}zr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=yc(e.data.value)),n}ir(e,n,r){return V.or([()=>this.persistence.Yr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.ri.get(n);return V.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Wi=r,this.Gi=i}static zi(e,n){let r=ue(),i=ue();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Tm(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return FP()?8:pb(_t())>0?6:4}()}initialize(e,n){this.Zi=e,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.Xi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.es(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new jN;return this.ts(e,n,s).next(a=>{if(o.result=a,this.Hi)return this.ns(e,n,s,a.size)})}).next(()=>o.result)}ns(e,n,r,i){return r.documentReadCount<this.Ji?(ro()<=ce.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",io(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),V.resolve()):(ro()<=ce.DEBUG&&q("QueryEngine","Query:",io(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(ro()<=ce.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",io(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,An(n))):V.resolve())}Xi(e,n){if(r0(n))return V.resolve(null);let r=An(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=bf(n,null,"F"),r=An(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=ue(...o);return this.Zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.rs(n,a);return this.ss(n,u,s,l.readTime)?this.Xi(e,bf(n,null,"F")):this.os(e,u,n,l)}))})))}es(e,n,r,i){return r0(n)||i.isEqual(re.min())?V.resolve(null):this.Zi.getDocuments(e,r).next(o=>{const s=this.rs(n,o);return this.ss(n,s,r,i)?V.resolve(null):(ro()<=ce.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),io(n)),this.os(e,s,n,cb(i,-1)).next(a=>a))})}rs(e,n){let r=new Ke(WE(e));return n.forEach((i,o)=>{Wu(e,o)&&(r=r.add(o))}),r}ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ts(e,n,r){return ro()<=ce.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",io(n)),this.Zi.getDocumentsMatchingQuery(e,n,Xr.min(),r)}os(e,n,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e,n,r,i){this.persistence=e,this._s=n,this.serializer=i,this.us=new Fe(de),this.cs=new Wi(o=>gm(o),ym),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $N(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.us))}}function zN(t,e,n,r){return new BN(t,e,n,r)}async function fC(t,e){const n=oe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ps(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let l=ue();for(const u of i){s.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of o){a.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(u=>({Ts:u,removedBatchIds:s,addedBatchIds:a}))})})}function WN(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.hs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,d){const f=u.batch,h=f.keys();let y=V.resolve();return h.forEach(E=>{y=y.next(()=>d.getEntry(l,E)).next(x=>{const T=u.docVersions.get(E);xe(T!==null),x.version.compareTo(T)<0&&(f.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),d.addEntry(x)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ue();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function pC(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Gr.getLastRemoteSnapshotVersion(n))}function HN(t,e){const n=oe(t),r=e.snapshotVersion;let i=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.hs.newChangeBuffer({trackRemovals:!0});i=n.us;const a=[];e.targetChanges.forEach((d,f)=>{const h=i.get(f);if(!h)return;a.push(n.Gr.removeMatchingKeys(o,d.removedDocuments,f).next(()=>n.Gr.addMatchingKeys(o,d.addedDocuments,f)));let y=h.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(lt.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(f,y),function(x,T,w){return x.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(h,y,d)&&a.push(n.Gr.updateTargetData(o,y))});let l=ar(),u=ue();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(qN(o,s,e.documentUpdates).next(d=>{l=d.Is,u=d.Es})),!r.isEqual(re.min())){const d=n.Gr.getLastRemoteSnapshotVersion(o).next(f=>n.Gr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return V.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,l,u)).next(()=>l)}).then(o=>(n.us=i,o))}function qN(t,e,n){let r=ue(),i=ue();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=ar();return n.forEach((a,l)=>{const u=o.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(re.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Is:s,Es:i}})}function GN(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function KN(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Gr.getTargetData(r,e).next(o=>o?(i=o,V.resolve(i)):n.Gr.allocateTargetId(r).next(s=>(i=new Fr(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.us=n.us.insert(r.targetId,r),n.cs.set(e,r.targetId)),r})}async function Df(t,e,n){const r=oe(t),i=r.us.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!as(s))throw s;q("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.us=r.us.remove(e),r.cs.delete(i.target)}function m0(t,e,n){const r=oe(t);let i=re.min(),o=ue();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,u,d){const f=oe(l),h=f.cs.get(d);return h!==void 0?V.resolve(f.us.get(h)):f.Gr.getTargetData(u,d)}(r,s,An(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>r._s.getDocumentsMatchingQuery(s,e,n?i:re.min(),n?o:ue())).next(a=>(QN(r,Lb(e),a),{documents:a,ds:o})))}function QN(t,e,n){let r=t.ls.get(e)||re.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.ls.set(e,r)}class g0{constructor(){this.activeTargetIds=Ub()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class YN{constructor(){this._o=new g0,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,n,r){this.ao[e]=n}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new g0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wl=null;function lh(){return Wl===null?Wl=function(){return 268435456+Math.round(2147483648*Math.random())}():Wl++,"0x"+Wl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gt="WebChannelConnection";class eF extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+n.host,this.Mo=`projects/${i}/databases/${o}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Oo(n,r,i,o,s){const a=lh(),l=this.No(n,r.toUriEncodedString());q("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(u,o,s),this.Bo(n,l,u,i).then(d=>(q("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Bo("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}ko(n,r,i,o,s,a){return this.Oo(n,r,i,o,s)}Lo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+os}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}No(n,r){const i=JN[n];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,n,r,i){const o=lh();return new Promise((s,a)=>{const l=new AE;l.setWithCredentials(!0),l.listenOnce(kE.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case gc.NO_ERROR:const d=l.getResponseJson();q(gt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),s(d);break;case gc.TIMEOUT:q(gt,`RPC '${e}' ${o} timed out`),a(new J(j.DEADLINE_EXCEEDED,"Request time out"));break;case gc.HTTP_ERROR:const f=l.getStatus();if(q(gt,`RPC '${e}' ${o} failed with status:`,f,"response text:",l.getResponseText()),f>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);const y=h==null?void 0:h.error;if(y&&y.status&&y.message){const E=function(T){const w=T.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(w)>=0?w:j.UNKNOWN}(y.status);a(new J(E,y.message))}else a(new J(j.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new J(j.UNAVAILABLE,"Connection failed."));break;default:ne()}}finally{q(gt,`RPC '${e}' ${o} completed.`)}});const u=JSON.stringify(i);q(gt,`RPC '${e}' ${o} sending request:`,i),l.send(n,"POST",u,r,15)})}qo(e,n,r){const i=lh(),o=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=$E(),a=RE(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Lo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=o.join("");q(gt,`Creating RPC '${e}' stream ${i}: ${d}`,l);const f=s.createWebChannel(d,l);let h=!1,y=!1;const E=new ZN({Eo:T=>{y?q(gt,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(h||(q(gt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),h=!0),q(gt,`RPC '${e}' stream ${i} sending:`,T),f.send(T))},Ao:()=>f.close()}),x=(T,w,v)=>{T.listen(w,S=>{try{v(S)}catch($){setTimeout(()=>{throw $},0)}})};return x(f,Ws.EventType.OPEN,()=>{y||(q(gt,`RPC '${e}' stream ${i} transport opened.`),E.So())}),x(f,Ws.EventType.CLOSE,()=>{y||(y=!0,q(gt,`RPC '${e}' stream ${i} transport closed`),E.Do())}),x(f,Ws.EventType.ERROR,T=>{y||(y=!0,Bo(gt,`RPC '${e}' stream ${i} transport errored:`,T),E.Do(new J(j.UNAVAILABLE,"The operation could not be completed")))}),x(f,Ws.EventType.MESSAGE,T=>{var w;if(!y){const v=T.data[0];xe(!!v);const S=v,$=(S==null?void 0:S.error)||((w=S[0])===null||w===void 0?void 0:w.error);if($){q(gt,`RPC '${e}' stream ${i} received error:`,$);const F=$.status;let O=function(k){const P=je[k];if(P!==void 0)return nC(P)}(F),I=$.message;O===void 0&&(O=j.INTERNAL,I="Unknown error status: "+F+" with message "+$.message),y=!0,E.Do(new J(O,I)),f.close()}else q(gt,`RPC '${e}' stream ${i} received:`,v),E.vo(v)}}),x(a,PE.STAT_EVENT,T=>{T.stat===Af.PROXY?q(gt,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===Af.NOPROXY&&q(gt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.bo()},0),E}}function ch(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ku(t){return new aN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e,n,r=1e3,i=1.5,o=6e4){this.li=e,this.timerId=n,this.Qo=r,this.Ko=i,this.$o=o,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const n=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,n-r);i>0&&q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,n,r,i,o,s,a,l){this.li=e,this.Yo=r,this.Zo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new mC(e,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(sr(n.toString()),sr("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(n)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===n&&this.I_(r,i)},r=>{e(()=>{const i=new J(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.E_(i)})})}I_(e,n){const r=this.T_(this.Xo);this.stream=this.d_(e,n),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.E_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return n=>{this.li.enqueueAndForget(()=>this.Xo===e?n():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class tF extends gC{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}d_(e,n){return this.connection.qo("Listen",e,n)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const n=uN(this.serializer,e),r=function(o){if(!("targetChange"in o))return re.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?re.min():s.readTime?Pn(s.readTime):re.min()}(e);return this.listener.R_(n,r)}V_(e){const n={};n.database=Of(this.serializer),n.addTarget=function(o,s){let a;const l=s.target;if(a=$f(l)?{documents:fN(o,l)}:{query:pN(o,l).ct},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=oC(o,s.resumeToken);const u=Nf(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(re.min())>0){a.readTime=au(o,s.snapshotVersion.toTimestamp());const u=Nf(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=gN(this.serializer,e);r&&(n.labels=r),this.c_(n)}m_(e){const n={};n.database=Of(this.serializer),n.removeTarget=e,this.c_(n)}}class nF extends gC{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,n){return this.connection.qo("Write",e,n)}A_(e){return xe(!!e.streamToken),this.lastStreamToken=e.streamToken,xe(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){xe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const n=hN(e.writeResults,e.commitTime),r=Pn(e.commitTime);return this.listener.y_(r,n)}w_(){const e={};e.database=Of(this.serializer),this.c_(e)}g_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>dN(this.serializer,r))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rF extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new J(j.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,n,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Oo(e,Ff(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new J(j.UNKNOWN,o.toString())})}ko(e,n,r,i,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.ko(e,Ff(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new J(j.UNKNOWN,s.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class iF{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(sr(n),this.C_=!1):q("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=o,this.Q_.uo(s=>{r.enqueueAndForget(async()=>{qi(this)&&(q("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=oe(l);u.k_.add(4),await Za(u),u.K_.set("Unknown"),u.k_.delete(4),await Qu(u)}(this))})}),this.K_=new iF(r,i)}}async function Qu(t){if(qi(t))for(const e of t.q_)await e(!0)}async function Za(t){for(const e of t.q_)await e(!1)}function yC(t,e){const n=oe(t);n.B_.has(e.targetId)||(n.B_.set(e.targetId,e),Pm(n)?km(n):ls(n).s_()&&Am(n,e))}function Im(t,e){const n=oe(t),r=ls(n);n.B_.delete(e),r.s_()&&vC(n,e),n.B_.size===0&&(r.s_()?r.a_():qi(n)&&n.K_.set("Unknown"))}function Am(t,e){if(t.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ls(t).V_(e)}function vC(t,e){t.U_.xe(e),ls(t).m_(e)}function km(t){t.U_=new rN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>t.B_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),ls(t).start(),t.K_.F_()}function Pm(t){return qi(t)&&!ls(t).i_()&&t.B_.size>0}function qi(t){return oe(t).k_.size===0}function xC(t){t.U_=void 0}async function sF(t){t.K_.set("Online")}async function aF(t){t.B_.forEach((e,n)=>{Am(t,e)})}async function lF(t,e){xC(t),Pm(t)?(t.K_.O_(e),km(t)):t.K_.set("Unknown")}async function cF(t,e,n){if(t.K_.set("Online"),e instanceof iC&&e.state===2&&e.cause)try{await async function(i,o){const s=o.cause;for(const a of o.targetIds)i.B_.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.B_.delete(a),i.U_.removeTarget(a))}(t,e)}catch(r){q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await cu(t,r)}else if(e instanceof wc?t.U_.$e(e):e instanceof rC?t.U_.Je(e):t.U_.Ge(e),!n.isEqual(re.min()))try{const r=await pC(t.localStore);n.compareTo(r)>=0&&await function(o,s){const a=o.U_.it(s);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=o.B_.get(u);d&&o.B_.set(u,d.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,u)=>{const d=o.B_.get(l);if(!d)return;o.B_.set(l,d.withResumeToken(lt.EMPTY_BYTE_STRING,d.snapshotVersion)),vC(o,l);const f=new Fr(d.target,l,u,d.sequenceNumber);Am(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){q("RemoteStore","Failed to raise snapshot:",r),await cu(t,r)}}async function cu(t,e,n){if(!as(e))throw e;t.k_.add(1),await Za(t),t.K_.set("Offline"),n||(n=()=>pC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q("RemoteStore","Retrying IndexedDB access"),await n(),t.k_.delete(1),await Qu(t)})}function wC(t,e){return e().catch(n=>cu(t,n,e))}async function Yu(t){const e=oe(t),n=ti(e);let r=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;uF(e);)try{const i=await GN(e.localStore,r);if(i===null){e.L_.length===0&&n.a_();break}r=i.batchId,dF(e,i)}catch(i){await cu(e,i)}_C(e)&&EC(e)}function uF(t){return qi(t)&&t.L_.length<10}function dF(t,e){t.L_.push(e);const n=ti(t);n.s_()&&n.f_&&n.g_(e.mutations)}function _C(t){return qi(t)&&!ti(t).i_()&&t.L_.length>0}function EC(t){ti(t).start()}async function hF(t){ti(t).w_()}async function fF(t){const e=ti(t);for(const n of t.L_)e.g_(n.mutations)}async function pF(t,e,n){const r=t.L_.shift(),i=wm.from(r,e,n);await wC(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Yu(t)}async function mF(t,e){e&&ti(t).f_&&await async function(r,i){if(function(s){return eN(s)&&s!==j.ABORTED}(i.code)){const o=r.L_.shift();ti(r).__(),await wC(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Yu(r)}}(t,e),_C(t)&&EC(t)}async function v0(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");const r=qi(n);n.k_.add(3),await Za(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.k_.delete(3),await Qu(n)}async function gF(t,e){const n=oe(t);e?(n.k_.delete(2),await Qu(n)):e||(n.k_.add(2),await Za(n),n.K_.set("Unknown"))}function ls(t){return t.W_||(t.W_=function(n,r,i){const o=oe(n);return o.b_(),new tF(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Ro:sF.bind(null,t),mo:aF.bind(null,t),po:lF.bind(null,t),R_:cF.bind(null,t)}),t.q_.push(async e=>{e?(t.W_.__(),Pm(t)?km(t):t.K_.set("Unknown")):(await t.W_.stop(),xC(t))})),t.W_}function ti(t){return t.G_||(t.G_=function(n,r,i){const o=oe(n);return o.b_(),new nF(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Ro:()=>Promise.resolve(),mo:hF.bind(null,t),po:mF.bind(null,t),p_:fF.bind(null,t),y_:pF.bind(null,t)}),t.q_.push(async e=>{e?(t.G_.__(),await Yu(t)):(await t.G_.stop(),t.L_.length>0&&(q("RemoteStore",`Stopping write stream with ${t.L_.length} pending writes`),t.L_=[]))})),t.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,a=new Rm(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $m(t,e){if(sr("AsyncQueue",`${e}: ${t}`),as(t))return new J(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{static emptySet(e){return new Po(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Z.comparator(n.key,r.key):(n,r)=>Z.comparator(n.key,r.key),this.keyedMap=Hs(),this.sortedSet=new Fe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Po)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Po;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(){this.z_=new Fe(Z.comparator)}track(e){const n=e.doc.key,r=this.z_.get(n);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(n,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(n):e.type===1&&r.type===2?this.z_=this.z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):ne():this.z_=this.z_.insert(n,e)}j_(){const e=[];return this.z_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Go{constructor(e,n,r,i,o,s,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new Go(e,n,Po.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yF{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class vF{constructor(){this.queries=w0(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,r){const i=oe(n),o=i.queries;i.queries=w0(),o.forEach((s,a)=>{for(const l of a.J_)l.onError(r)})})(this,new J(j.ABORTED,"Firestore shutting down"))}}function w0(){return new Wi(t=>zE(t),zu)}async function xF(t,e){const n=oe(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.Y_()&&e.Z_()&&(r=2):(o=new yF,r=e.Z_()?0:1);try{switch(r){case 0:o.H_=await n.onListen(i,!0);break;case 1:o.H_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const a=$m(s,`Initialization of query '${io(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.J_.push(e),e.ea(n.onlineState),o.H_&&e.ta(o.H_)&&bm(n)}async function wF(t,e){const n=oe(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.J_.indexOf(e);s>=0&&(o.J_.splice(s,1),o.J_.length===0?i=e.Z_()?0:1:!o.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function _F(t,e){const n=oe(t);let r=!1;for(const i of e){const o=i.query,s=n.queries.get(o);if(s){for(const a of s.J_)a.ta(i)&&(r=!0);s.H_=i}}r&&bm(n)}function EF(t,e,n){const r=oe(t),i=r.queries.get(e);if(i)for(const o of i.J_)o.onError(n);r.queries.delete(e)}function bm(t){t.X_.forEach(e=>{e.next()})}var Mf,_0;(_0=Mf||(Mf={})).na="default",_0.Cache="cache";class CF{constructor(e,n,r){this.query=e,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Go(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ia?this.oa(e)&&(this.ra.next(e),n=!0):this._a(e,this.onlineState)&&(this.aa(e),n=!0),this.sa=e,n}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),n=!0),n}_a(e,n){if(!e.fromCache||!this.Z_())return!0;const r=n!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(e){e=Go.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==Mf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e){this.key=e}}class SC{constructor(e){this.key=e}}class SF{constructor(e,n){this.query=e,this.da=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=ue(),this.mutatedKeys=ue(),this.Va=WE(e),this.ma=new Po(this.Va)}get fa(){return this.da}ga(e,n){const r=n?n.pa:new x0,i=n?n.ma:this.ma;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{const h=i.get(d),y=Wu(this.query,f)?f:null,E=!!h&&this.mutatedKeys.has(h.key),x=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let T=!1;h&&y?h.data.isEqual(y.data)?E!==x&&(r.track({type:3,doc:y}),T=!0):this.ya(h,y)||(r.track({type:2,doc:y}),T=!0,(l&&this.Va(y,l)>0||u&&this.Va(y,u)<0)&&(a=!0)):!h&&y?(r.track({type:0,doc:y}),T=!0):h&&!y&&(r.track({type:1,doc:h}),T=!0,(l||u)&&(a=!0)),T&&(y?(s=s.add(y),o=x?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{ma:s,pa:r,ss:a,mutatedKeys:o}}ya(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const s=e.pa.j_();s.sort((d,f)=>function(y,E){const x=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne()}};return x(y)-x(E)}(d.type,f.type)||this.Va(d.doc,f.doc)),this.wa(r),i=i!=null&&i;const a=n&&!i?this.Sa():[],l=this.Ra.size===0&&this.current&&!i?1:0,u=l!==this.Aa;return this.Aa=l,s.length!==0||u?{snapshot:new Go(this.query,e.ma,o,s,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new x0,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(n=>this.da=this.da.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.da=this.da.delete(n)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=ue(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const n=[];return e.forEach(r=>{this.Ra.has(r)||n.push(new SC(r))}),this.Ra.forEach(r=>{e.has(r)||n.push(new CC(r))}),n}va(e){this.da=e.ds,this.Ra=ue();const n=this.ga(e.documents);return this.applyChanges(n,!0)}Ca(){return Go.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class TF{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class IF{constructor(e){this.key=e,this.Fa=!1}}class AF{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ma={},this.xa=new Wi(a=>zE(a),zu),this.Oa=new Map,this.Na=new Set,this.La=new Fe(Z.comparator),this.Ba=new Map,this.ka=new Cm,this.qa={},this.Qa=new Map,this.Ka=qo.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function kF(t,e,n=!0){const r=RC(t);let i;const o=r.xa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Ca()):i=await TC(r,e,n,!0),i}async function PF(t,e){const n=RC(t);await TC(n,e,!0,!1)}async function TC(t,e,n,r){const i=await KN(t.localStore,An(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=await RF(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&yC(t.remoteStore,i),a}async function RF(t,e,n,r,i){t.Ua=(f,h,y)=>async function(x,T,w,v){let S=T.view.ga(w);S.ss&&(S=await m0(x.localStore,T.query,!1).then(({documents:I})=>T.view.ga(I,S)));const $=v&&v.targetChanges.get(T.targetId),F=v&&v.targetMismatches.get(T.targetId)!=null,O=T.view.applyChanges(S,x.isPrimaryClient,$,F);return C0(x,T.targetId,O.ba),O.snapshot}(t,f,h,y);const o=await m0(t.localStore,e,!0),s=new SF(e,o.ds),a=s.ga(o.documents),l=Ja.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=s.applyChanges(a,t.isPrimaryClient,l);C0(t,n,u.ba);const d=new TF(e,n,s);return t.xa.set(e,d),t.Oa.has(n)?t.Oa.get(n).push(e):t.Oa.set(n,[e]),u.snapshot}async function $F(t,e,n){const r=oe(t),i=r.xa.get(e),o=r.Oa.get(i.targetId);if(o.length>1)return r.Oa.set(i.targetId,o.filter(s=>!zu(s,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Df(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Im(r.remoteStore,i.targetId),Vf(r,i.targetId)}).catch(ss)):(Vf(r,i.targetId),await Df(r.localStore,i.targetId,!0))}async function bF(t,e){const n=oe(t),r=n.xa.get(e),i=n.Oa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Im(n.remoteStore,r.targetId))}async function NF(t,e,n){const r=jF(t);try{const i=await function(s,a){const l=oe(s),u=Ge.now(),d=a.reduce((y,E)=>y.add(E.key),ue());let f,h;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let E=ar(),x=ue();return l.hs.getEntries(y,d).next(T=>{E=T,E.forEach((w,v)=>{v.isValidDocument()||(x=x.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,E)).next(T=>{f=T;const w=[];for(const v of a){const S=Qb(v,f.get(v.key).overlayedDocument);S!=null&&w.push(new Hi(v.key,S,OE(S.value.mapValue),kn.exists(!0)))}return l.mutationQueue.addMutationBatch(y,u,w,a)}).next(T=>{h=T;const w=T.applyToLocalDocumentSet(f,x);return l.documentOverlayCache.saveOverlays(y,T.batchId,w)})}).then(()=>({batchId:h.batchId,changes:qE(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,l){let u=s.qa[s.currentUser.toKey()];u||(u=new Fe(de)),u=u.insert(a,l),s.qa[s.currentUser.toKey()]=u}(r,i.batchId,n),await el(r,i.changes),await Yu(r.remoteStore)}catch(i){const o=$m(i,"Failed to persist write");n.reject(o)}}async function IC(t,e){const n=oe(t);try{const r=await HN(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Ba.get(o);s&&(xe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Fa=!0:i.modifiedDocuments.size>0?xe(s.Fa):i.removedDocuments.size>0&&(xe(s.Fa),s.Fa=!1))}),await el(n,r,e)}catch(r){await ss(r)}}function E0(t,e,n){const r=oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.xa.forEach((o,s)=>{const a=s.view.ea(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const l=oe(s);l.onlineState=a;let u=!1;l.queries.forEach((d,f)=>{for(const h of f.J_)h.ea(a)&&(u=!0)}),u&&bm(l)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function FF(t,e,n){const r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Ba.get(e),o=i&&i.key;if(o){let s=new Fe(Z.comparator);s=s.insert(o,xt.newNoDocument(o,re.min()));const a=ue().add(o),l=new Gu(re.min(),new Map,new Fe(de),s,a);await IC(r,l),r.La=r.La.remove(o),r.Ba.delete(e),Nm(r)}else await Df(r.localStore,e,!1).then(()=>Vf(r,e,n)).catch(ss)}async function LF(t,e){const n=oe(t),r=e.batch.batchId;try{const i=await WN(n.localStore,e);kC(n,r,null),AC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await el(n,i)}catch(i){await ss(i)}}async function OF(t,e,n){const r=oe(t);try{const i=await function(s,a){const l=oe(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,a).next(f=>(xe(f!==null),d=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(r.localStore,e);kC(r,e,n),AC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await el(r,i)}catch(i){await ss(i)}}function AC(t,e){(t.Qa.get(e)||[]).forEach(n=>{n.resolve()}),t.Qa.delete(e)}function kC(t,e,n){const r=oe(t);let i=r.qa[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.qa[r.currentUser.toKey()]=i}}function Vf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Oa.get(e))t.xa.delete(r),n&&t.Ma.Wa(r,n);t.Oa.delete(e),t.isPrimaryClient&&t.ka.yr(e).forEach(r=>{t.ka.containsKey(r)||PC(t,r)})}function PC(t,e){t.Na.delete(e.path.canonicalString());const n=t.La.get(e);n!==null&&(Im(t.remoteStore,n),t.La=t.La.remove(e),t.Ba.delete(n),Nm(t))}function C0(t,e,n){for(const r of n)r instanceof CC?(t.ka.addReference(r.key,e),DF(t,r)):r instanceof SC?(q("SyncEngine","Document no longer in limbo: "+r.key),t.ka.removeReference(r.key,e),t.ka.containsKey(r.key)||PC(t,r.key)):ne()}function DF(t,e){const n=e.key,r=n.path.canonicalString();t.La.get(n)||t.Na.has(r)||(q("SyncEngine","New document in limbo: "+n),t.Na.add(r),Nm(t))}function Nm(t){for(;t.Na.size>0&&t.La.size<t.maxConcurrentLimboResolutions;){const e=t.Na.values().next().value;t.Na.delete(e);const n=new Z(Pe.fromString(e)),r=t.Ka.next();t.Ba.set(r,new IF(n)),t.La=t.La.insert(n,r),yC(t.remoteStore,new Fr(An(vm(n.path)),r,"TargetPurposeLimboResolution",Vu.oe))}}async function el(t,e,n){const r=oe(t),i=[],o=[],s=[];r.xa.isEmpty()||(r.xa.forEach((a,l)=>{s.push(r.Ua(l,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){i.push(u);const f=Tm.zi(l.targetId,u);o.push(f)}}))}),await Promise.all(s),r.Ma.R_(i),await async function(l,u){const d=oe(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>V.forEach(u,h=>V.forEach(h.Wi,y=>d.persistence.referenceDelegate.addReference(f,h.targetId,y)).next(()=>V.forEach(h.Gi,y=>d.persistence.referenceDelegate.removeReference(f,h.targetId,y)))))}catch(f){if(!as(f))throw f;q("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const h=f.targetId;if(!f.fromCache){const y=d.us.get(h),E=y.snapshotVersion,x=y.withLastLimboFreeSnapshotVersion(E);d.us=d.us.insert(h,x)}}}(r.localStore,o))}async function MF(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){q("SyncEngine","User change. New user:",e.toKey());const r=await fC(n.localStore,e);n.currentUser=e,function(o,s){o.Qa.forEach(a=>{a.forEach(l=>{l.reject(new J(j.CANCELLED,s))})}),o.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await el(n,r.Ts)}}function VF(t,e){const n=oe(t),r=n.Ba.get(e);if(r&&r.Fa)return ue().add(r.key);{let i=ue();const o=n.Oa.get(e);if(!o)return i;for(const s of o){const a=n.xa.get(s);i=i.unionWith(a.view.fa)}return i}}function RC(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=IC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=VF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=FF.bind(null,e),e.Ma.R_=_F.bind(null,e.eventManager),e.Ma.Wa=EF.bind(null,e.eventManager),e}function jF(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=LF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=OF.bind(null,e),e}class uu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ku(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,n){return null}Ya(e,n){return null}Ha(e){return zN(this.persistence,new UN,e.initialUser,this.serializer)}ja(e){return new hC(Sm.ei,this.serializer)}za(e){return new YN}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}uu.provider={build:()=>new uu};class UF extends uu{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,n){xe(this.persistence.referenceDelegate instanceof lu);const r=this.persistence.referenceDelegate.garbageCollector;return new IN(r,e.asyncQueue,n)}ja(e){const n=this.cacheSizeBytes!==void 0?Pt.withCacheSize(this.cacheSizeBytes):Pt.DEFAULT;return new hC(r=>lu.ei(r,n),this.serializer)}}class jf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>E0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=MF.bind(null,this.syncEngine),await gF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new vF}()}createDatastore(e){const n=Ku(e.databaseInfo.databaseId),r=function(o){return new eF(o)}(e.databaseInfo);return function(o,s,a,l){return new rF(o,s,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new oF(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>E0(this.syncEngine,n,0),function(){return y0.p()?new y0:new XN}())}createSyncEngine(e,n){return function(i,o,s,a,l,u,d){const f=new AF(i,o,s,a,l,u);return d&&(f.$a=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=oe(i);q("RemoteStore","RemoteStore shutting down."),o.k_.add(5),await Za(o),o.Q_.shutdown(),o.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}jf.provider={build:()=>new jf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):sr("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=yt.UNAUTHENTICATED,this.clientId=NE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{q("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(q("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=$m(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function uh(t,e){t.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await fC(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function S0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await WF(t);q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>v0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>v0(e.remoteStore,i)),t._onlineComponents=e}async function WF(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q("FirestoreClient","Using user provided OfflineComponentProvider");try{await uh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===j.FAILED_PRECONDITION||i.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Bo("Error using user provided cache. Falling back to memory cache: "+n),await uh(t,new uu)}}else q("FirestoreClient","Using default OfflineComponentProvider"),await uh(t,new UF(void 0));return t._offlineComponents}async function $C(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q("FirestoreClient","Using user provided OnlineComponentProvider"),await S0(t,t._uninitializedComponentsProvider._online)):(q("FirestoreClient","Using default OnlineComponentProvider"),await S0(t,new jf))),t._onlineComponents}function HF(t){return $C(t).then(e=>e.syncEngine)}async function qF(t){const e=await $C(t),n=e.eventManager;return n.onListen=kF.bind(null,e.syncEngine),n.onUnlisten=$F.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=PF.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=bF.bind(null,e.syncEngine),n}function GF(t,e,n={}){const r=new qr;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,a,l,u){const d=new BF({next:h=>{d.eu(),s.enqueueAndForget(()=>wF(o,f));const y=h.docs.has(a);!y&&h.fromCache?u.reject(new J(j.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&h.fromCache&&l&&l.source==="server"?u.reject(new J(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new CF(vm(a.path),d,{includeMetadataChanges:!0,ua:!0});return xF(o,f)}(await qF(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(t,e,n){if(!n)throw new J(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function KF(t,e,n,r){if(e===!0&&r===!0)throw new J(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function I0(t){if(!Z.isDocumentKey(t))throw new J(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function A0(t){if(Z.isDocumentKey(t))throw new J(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Fm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne()}function Ko(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Fm(t);throw new J(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new J(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new J(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new J(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new J(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new J(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xu{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new k0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new J(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new J(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new k0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new eb;switch(r.type){case"firstParty":return new ib(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=T0.get(n);r&&(q("ComponentProvider","Removing Datastore"),T0.delete(n),r.terminate())}(this),Promise.resolve()}}function QF(t,e,n,r={}){var i;const o=(t=Ko(t,Xu))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Bo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=yt.MOCK_USER;else{a=AP(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new J(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new yt(u)}t._authCredentials=new tb(new bE(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Lm(this.firestore,e,this._query)}}class jt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jt(this.firestore,e,this._key)}}class Gr extends Lm{constructor(e,n,r){super(e,n,vm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jt(this.firestore,null,new Z(e))}withConverter(e){return new Gr(this.firestore,e,this._path)}}function YF(t,e,...n){if(t=zt(t),NC("collection","path",e),t instanceof Xu){const r=Pe.fromString(e,...n);return A0(r),new Gr(t,null,r)}{if(!(t instanceof jt||t instanceof Gr))throw new J(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Pe.fromString(e,...n));return A0(r),new Gr(t.firestore,null,r)}}function Om(t,e,...n){if(t=zt(t),arguments.length===1&&(e=NE.newId()),NC("doc","path",e),t instanceof Xu){const r=Pe.fromString(e,...n);return I0(r),new jt(t,null,new Z(r))}{if(!(t instanceof jt||t instanceof Gr))throw new J(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Pe.fromString(e,...n));return I0(r),new jt(t.firestore,t instanceof Gr?t.converter:null,new Z(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new mC(this,"async_queue_retry"),this.fu=()=>{const r=ch();r&&q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const n=ch();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const n=ch();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const n=new qr;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!as(e))throw e;q("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const n=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw sr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=n,n}enqueueAfterDelay(e,n,r){this.pu(),this.mu.indexOf(e)>-1&&(n=0);const i=Rm.createAndSchedule(this,e,n,r,o=>this.Su(o));return this.du.push(i),i}pu(){this.Au&&ne()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const n of this.du)if(n.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.du)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const n=this.du.indexOf(e);this.du.splice(n,1)}}class Ju extends Xu{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new P0,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new P0(e),this._firestoreClient=void 0,await e}}}function XF(t,e){const n=typeof t=="object"?t:q_(),r=typeof t=="string"?t:"(default)",i=nm(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=TP("firestore");o&&QF(i,...o)}return i}function FC(t){if(t._terminated)throw new J(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||JF(t),t._firestoreClient}function JF(t){var e,n,r;const i=t._freezeSettings(),o=function(a,l,u,d){return new xb(a,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,bC(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new zF(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qo(lt.fromBase64String(e))}catch(n){throw new J(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Qo(lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new J(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return de(this._lat,e._lat)||de(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZF=/^__.*__$/;class eL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Hi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Xa(e,this.data,n,this.fieldTransforms)}}function LC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne()}}class Um{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Fu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new Um(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Lu(e),i}Bu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return du(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(LC(this.Mu)&&ZF.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class tL{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ku(e)}$u(e,n,r,i=!1){return new Um({Mu:e,methodName:n,Ku:r,path:ot.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function OC(t){const e=t._freezeSettings(),n=Ku(t._databaseId);return new tL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function DC(t,e,n,r,i,o={}){const s=t.$u(o.merge||o.mergeFields?2:0,e,n,i);UC("Data must be an object, but it was:",s,r);const a=VC(r,s);let l,u;if(o.merge)l=new ln(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){const d=[];for(const f of o.mergeFields){const h=nL(e,f,n);if(!s.contains(h))throw new J(j.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);iL(d,h)||d.push(h)}l=new ln(d),u=s.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=s.fieldTransforms;return new eL(new Qt(a),l,u)}class Bm extends Mm{_toFieldTransform(e){return new Hb(e.path,new ba)}isEqual(e){return e instanceof Bm}}function MC(t,e){if(jC(t=zt(t)))return UC("Unsupported field value:",e,t),VC(t,e);if(t instanceof Mm)return function(r,i){if(!LC(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let l=MC(a,i.ku(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=zt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Bb(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Ge.fromDate(r);return{timestampValue:au(i.serializer,o)}}if(r instanceof Ge){const o=new Ge(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:au(i.serializer,o)}}if(r instanceof Vm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qo)return{bytesValue:oC(i.serializer,r._byteString)};if(r instanceof jt){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.qu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Em(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof jm)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.qu("VectorValues must only contain numeric values.");return xm(a.serializer,l)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${Fm(r)}`)}(t,e)}function VC(t,e){const n={};return FE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zi(t,(r,i)=>{const o=MC(i,e.Ou(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function jC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ge||t instanceof Vm||t instanceof Qo||t instanceof jt||t instanceof Mm||t instanceof jm)}function UC(t,e,n){if(!jC(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Fm(n);throw r==="an object"?e.qu(t+" a custom object"):e.qu(t+" "+r)}}function nL(t,e,n){if((e=zt(e))instanceof Dm)return e._internalPath;if(typeof e=="string")return BC(t,e);throw du("Field path arguments must be of type string or ",t,!1,void 0,n)}const rL=new RegExp("[~\\*/\\[\\]]");function BC(t,e,n){if(e.search(rL)>=0)throw du(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Dm(...e.split("."))._internalPath}catch{throw du(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function du(t,e,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new J(j.INVALID_ARGUMENT,a+t+l)}function iL(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new oL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(WC("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class oL extends zC{data(){return super.data()}}function WC(t,e){return typeof e=="string"?BC(t,e):e instanceof Dm?e._internalPath:e._delegate._internalPath}class sL{convertValue(e,n="none"){switch(ei(e)){case 0:return null;case 1:return e.booleanValue;case 2:return De(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Zr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ne()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return zi(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>De(s.doubleValue));return new jm(o)}convertGeoPoint(e){return new Vm(De(e.latitude),De(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Uu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Pa(e));default:return null}}convertTimestamp(e){const n=Jr(e);return new Ge(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Pe.fromString(e);xe(dC(r));const i=new Ra(r.get(1),r.get(3)),o=new Z(r.popFirst(5));return i.isEqual(n)||sr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qC extends zC{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new lL(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(WC("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class lL extends qC{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(t){t=Ko(t,jt);const e=Ko(t.firestore,Ju);return GF(FC(e),t._key).then(n=>hL(e,t,n))}class cL extends sL{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,n)}}function uL(t,e,n){t=Ko(t,jt);const r=Ko(t.firestore,Ju),i=HC(t.converter,e);return KC(r,[DC(OC(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,kn.none())])}function dL(t,e){const n=Ko(t.firestore,Ju),r=Om(t),i=HC(t.converter,e);return KC(n,[DC(OC(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,kn.exists(!1))]).then(()=>r)}function KC(t,e){return function(r,i){const o=new qr;return r.asyncQueue.enqueueAndForget(async()=>NF(await HF(r),i,o)),o.promise}(FC(t),e)}function hL(t,e,n){const r=n.docs.get(e._key),i=new cL(t);return new qC(t,i,e._key,r,new aL(n.hasPendingWrites,n.fromCache),e.converter)}function fL(){return new Bm("serverTimestamp")}(function(e,n=!0){(function(i){os=i})(rs),jo(new Ni("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new Ju(new nb(r.getProvider("auth-internal")),new sb(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new J(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ra(u.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Hr(qv,"4.7.5",e),Hr(qv,"4.7.5","esm2017")})();console.log("Current mode:","production");const Uf={apiKey:"AIzaSyBKI6MDjPopM298T9QnhnqHQhg_xF3gEEQ",authDomain:"optionsquiz.firebaseapp.com",projectId:"optionsquiz",storageBucket:"optionsquiz.firebasestorage.app",messagingSenderId:"163287932453",appId:"1:163287932453:web:a00cde77ac0cc01884a9cc"},QC=H_(Uf),dh=J$(QC),zm=XF(QC);console.log("Using Firebase config for:","production",{projectId:Uf.projectId,authDomain:Uf.authDomain});const YC=_.createContext(),cs=()=>_.useContext(YC),pL=({children:t})=>{const[e,n]=_.useState(null),[r,i]=_.useState(!0),o=async()=>{const l=new Hn;try{await a$(dh,l)}catch(u){console.error("Error signing in with Google:",u)}},s=async()=>{try{await U2(dh)}catch(l){console.error("Error signing out:",l)}};_.useEffect(()=>j2(dh,u=>{n(u),i(!1)}),[]);const a={user:e,signInWithGoogle:o,logout:s};return m.jsx(YC.Provider,{value:a,children:!r&&t})},mL=async t=>{console.log("Checking subscription status for userId:",t);try{const e=await GC(Om(zm,"subscriptions",t));if(console.log("Firestore subscription data:",e.data()),!e.exists())return console.log("No subscription document found"),{isPremium:!1};const n=e.data(),r=n.status==="active";return console.log("Subscription status:",{isActive:r,status:n.status}),{isPremium:r}}catch(e){throw console.error("Error checking subscription:",e),e}},gL=async(t,e)=>{console.log("Updating subscription status:",{userId:t,status:e});try{const n=Om(zm,"subscriptions",t),r={status:e,updatedAt:fL()};await uL(n,r),console.log("Successfully updated subscription in Firestore");const i=await GC(n);return console.log("Verified Firestore data:",i.data()),!0}catch(n){throw console.error("Error updating subscription status:",n),n}},XC=_.createContext(),Wm=()=>_.useContext(XC),yL=({children:t})=>{const{user:e}=cs(),[n,r]=_.useState(!1),[i,o]=_.useState(!0);_.useEffect(()=>{(async()=>{if(console.log("PaymentContext: Checking status, current user:",e==null?void 0:e.uid),e)try{const u=`premium_status_${e.uid}`;console.log("Checking localStorage with key:",u);const d=localStorage.getItem(u);if(console.log("Cached status found:",d),d){const y=JSON.parse(d);if(console.log("Parsed cached status:",y),Date.now()-y.timestamp<36e5){console.log("Using cached premium status:",y.isPremium),r(y.isPremium),o(!1);return}else console.log("Cache expired, checking Firestore")}const f=await mL(e.uid);console.log("Firestore status result:",f),r(f.isPremium),console.log("Updated isPremium state to:",f.isPremium);const h={isPremium:f.isPremium,timestamp:Date.now()};localStorage.setItem(u,JSON.stringify(h)),console.log("Updated localStorage cache:",h)}catch(u){console.error("Error in PaymentContext:",u)}else console.log("No user found, setting isPremium to false"),r(!1);o(!1)})()},[e]);const s=async l=>{if(console.log("Updating premium status to:",l),r(l),e){const u={isPremium:l,timestamp:Date.now()},d=`premium_status_${e.uid}`;localStorage.setItem(d,JSON.stringify(u)),console.log("Updated cache in updatePremiumStatus:",u)}};console.log("PaymentContext current state:",{isPremium:n,loading:i});const a={isPremium:n,setIsPremium:s,loading:i};return m.jsx(XC.Provider,{value:a,children:!i&&t})};function R0(t,[e,n]){return Math.min(n,Math.max(e,t))}function Ue(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function Hm(t,e=[]){let n=[];function r(o,s){const a=_.createContext(s),l=n.length;n=[...n,s];const u=f=>{var w;const{scope:h,children:y,...E}=f,x=((w=h==null?void 0:h[t])==null?void 0:w[l])||a,T=_.useMemo(()=>E,Object.values(E));return m.jsx(x.Provider,{value:T,children:y})};u.displayName=o+"Provider";function d(f,h){var x;const y=((x=h==null?void 0:h[t])==null?void 0:x[l])||a,E=_.useContext(y);if(E)return E;if(s!==void 0)return s;throw new Error(`\`${f}\` must be used within \`${o}\``)}return[u,d]}const i=()=>{const o=n.map(s=>_.createContext(s));return function(a){const l=(a==null?void 0:a[t])||o;return _.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,vL(i,...e)]}function vL(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const s=r.reduce((a,{useScope:l,scopeName:u})=>{const f=l(o)[`__scope${u}`];return{...a,...f}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return n.scopeName=e.scopeName,n}function $0(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function JC(...t){return e=>{let n=!1;const r=t.map(i=>{const o=$0(i,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():$0(t[i],null)}}}}function ct(...t){return _.useCallback(JC(...t),t)}var Yo=_.forwardRef((t,e)=>{const{children:n,...r}=t,i=_.Children.toArray(n),o=i.find(wL);if(o){const s=o.props.children,a=i.map(l=>l===o?_.Children.count(s)>1?_.Children.only(null):_.isValidElement(s)?s.props.children:null:l);return m.jsx(Bf,{...r,ref:e,children:_.isValidElement(s)?_.cloneElement(s,void 0,a):null})}return m.jsx(Bf,{...r,ref:e,children:n})});Yo.displayName="Slot";var Bf=_.forwardRef((t,e)=>{const{children:n,...r}=t;if(_.isValidElement(n)){const i=EL(n);return _.cloneElement(n,{..._L(r,n.props),ref:e?JC(e,i):i})}return _.Children.count(n)>1?_.Children.only(null):null});Bf.displayName="SlotClone";var xL=({children:t})=>m.jsx(m.Fragment,{children:t});function wL(t){return _.isValidElement(t)&&t.type===xL}function _L(t,e){const n={...e};for(const r in e){const i=t[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...a)=>{o(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...t,...n}}function EL(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function CL(t){const e=t+"CollectionProvider",[n,r]=Hm(e),[i,o]=n(e,{collectionRef:{current:null},itemMap:new Map}),s=y=>{const{scope:E,children:x}=y,T=Bn.useRef(null),w=Bn.useRef(new Map).current;return m.jsx(i,{scope:E,itemMap:w,collectionRef:T,children:x})};s.displayName=e;const a=t+"CollectionSlot",l=Bn.forwardRef((y,E)=>{const{scope:x,children:T}=y,w=o(a,x),v=ct(E,w.collectionRef);return m.jsx(Yo,{ref:v,children:T})});l.displayName=a;const u=t+"CollectionItemSlot",d="data-radix-collection-item",f=Bn.forwardRef((y,E)=>{const{scope:x,children:T,...w}=y,v=Bn.useRef(null),S=ct(E,v),$=o(u,x);return Bn.useEffect(()=>($.itemMap.set(v,{ref:v,...w}),()=>void $.itemMap.delete(v))),m.jsx(Yo,{[d]:"",ref:S,children:T})});f.displayName=u;function h(y){const E=o(t+"CollectionConsumer",y);return Bn.useCallback(()=>{const T=E.collectionRef.current;if(!T)return[];const w=Array.from(T.querySelectorAll(`[${d}]`));return Array.from(E.itemMap.values()).sort(($,F)=>w.indexOf($.ref.current)-w.indexOf(F.ref.current))},[E.collectionRef,E.itemMap])}return[{Provider:s,Slot:l,ItemSlot:f},h,r]}var SL=_.createContext(void 0);function TL(t){const e=_.useContext(SL);return t||e||"ltr"}var IL=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ve=IL.reduce((t,e)=>{const n=_.forwardRef((r,i)=>{const{asChild:o,...s}=r,a=o?Yo:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(a,{...s,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function AL(t,e){t&&ts.flushSync(()=>t.dispatchEvent(e))}function lr(t){const e=_.useRef(t);return _.useEffect(()=>{e.current=t}),_.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function kL(t,e=globalThis==null?void 0:globalThis.document){const n=lr(t);_.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var PL="DismissableLayer",zf="dismissableLayer.update",RL="dismissableLayer.pointerDownOutside",$L="dismissableLayer.focusOutside",b0,ZC=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),eS=_.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:s,onDismiss:a,...l}=t,u=_.useContext(ZC),[d,f]=_.useState(null),h=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=_.useState({}),E=ct(e,I=>f(I)),x=Array.from(u.layers),[T]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),w=x.indexOf(T),v=d?x.indexOf(d):-1,S=u.layersWithOutsidePointerEventsDisabled.size>0,$=v>=w,F=FL(I=>{const C=I.target,k=[...u.branches].some(P=>P.contains(C));!$||k||(i==null||i(I),s==null||s(I),I.defaultPrevented||a==null||a())},h),O=LL(I=>{const C=I.target;[...u.branches].some(P=>P.contains(C))||(o==null||o(I),s==null||s(I),I.defaultPrevented||a==null||a())},h);return kL(I=>{v===u.layers.size-1&&(r==null||r(I),!I.defaultPrevented&&a&&(I.preventDefault(),a()))},h),_.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(b0=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),N0(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=b0)}},[d,h,n,u]),_.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),N0())},[d,u]),_.useEffect(()=>{const I=()=>y({});return document.addEventListener(zf,I),()=>document.removeEventListener(zf,I)},[]),m.jsx(Ve.div,{...l,ref:E,style:{pointerEvents:S?$?"auto":"none":void 0,...t.style},onFocusCapture:Ue(t.onFocusCapture,O.onFocusCapture),onBlurCapture:Ue(t.onBlurCapture,O.onBlurCapture),onPointerDownCapture:Ue(t.onPointerDownCapture,F.onPointerDownCapture)})});eS.displayName=PL;var bL="DismissableLayerBranch",NL=_.forwardRef((t,e)=>{const n=_.useContext(ZC),r=_.useRef(null),i=ct(e,r);return _.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),m.jsx(Ve.div,{...t,ref:i})});NL.displayName=bL;function FL(t,e=globalThis==null?void 0:globalThis.document){const n=lr(t),r=_.useRef(!1),i=_.useRef(()=>{});return _.useEffect(()=>{const o=a=>{if(a.target&&!r.current){let l=function(){tS(RL,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},s=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(s),e.removeEventListener("pointerdown",o),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function LL(t,e=globalThis==null?void 0:globalThis.document){const n=lr(t),r=_.useRef(!1);return _.useEffect(()=>{const i=o=>{o.target&&!r.current&&tS($L,n,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function N0(){const t=new CustomEvent(zf);document.dispatchEvent(t)}function tS(t,e,n,{discrete:r}){const i=n.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?AL(i,o):i.dispatchEvent(o)}var hh=0;function OL(){_.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??F0()),document.body.insertAdjacentElement("beforeend",t[1]??F0()),hh++,()=>{hh===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),hh--}},[])}function F0(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var fh="focusScope.autoFocusOnMount",ph="focusScope.autoFocusOnUnmount",L0={bubbles:!1,cancelable:!0},DL="FocusScope",nS=_.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...s}=t,[a,l]=_.useState(null),u=lr(i),d=lr(o),f=_.useRef(null),h=ct(e,x=>l(x)),y=_.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;_.useEffect(()=>{if(r){let x=function(S){if(y.paused||!a)return;const $=S.target;a.contains($)?f.current=$:Sr(f.current,{select:!0})},T=function(S){if(y.paused||!a)return;const $=S.relatedTarget;$!==null&&(a.contains($)||Sr(f.current,{select:!0}))},w=function(S){if(document.activeElement===document.body)for(const F of S)F.removedNodes.length>0&&Sr(a)};document.addEventListener("focusin",x),document.addEventListener("focusout",T);const v=new MutationObserver(w);return a&&v.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",T),v.disconnect()}}},[r,a,y.paused]),_.useEffect(()=>{if(a){D0.add(y);const x=document.activeElement;if(!a.contains(x)){const w=new CustomEvent(fh,L0);a.addEventListener(fh,u),a.dispatchEvent(w),w.defaultPrevented||(ML(zL(rS(a)),{select:!0}),document.activeElement===x&&Sr(a))}return()=>{a.removeEventListener(fh,u),setTimeout(()=>{const w=new CustomEvent(ph,L0);a.addEventListener(ph,d),a.dispatchEvent(w),w.defaultPrevented||Sr(x??document.body,{select:!0}),a.removeEventListener(ph,d),D0.remove(y)},0)}}},[a,u,d,y]);const E=_.useCallback(x=>{if(!n&&!r||y.paused)return;const T=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,w=document.activeElement;if(T&&w){const v=x.currentTarget,[S,$]=VL(v);S&&$?!x.shiftKey&&w===$?(x.preventDefault(),n&&Sr(S,{select:!0})):x.shiftKey&&w===S&&(x.preventDefault(),n&&Sr($,{select:!0})):w===v&&x.preventDefault()}},[n,r,y.paused]);return m.jsx(Ve.div,{tabIndex:-1,...s,ref:h,onKeyDown:E})});nS.displayName=DL;function ML(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Sr(r,{select:e}),document.activeElement!==n)return}function VL(t){const e=rS(t),n=O0(e,t),r=O0(e.reverse(),t);return[n,r]}function rS(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function O0(t,e){for(const n of t)if(!jL(n,{upTo:e}))return n}function jL(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function UL(t){return t instanceof HTMLInputElement&&"select"in t}function Sr(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&UL(t)&&e&&t.select()}}var D0=BL();function BL(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=M0(t,e),t.unshift(e)},remove(e){var n;t=M0(t,e),(n=t[0])==null||n.resume()}}}function M0(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function zL(t){return t.filter(e=>e.tagName!=="A")}var Wt=globalThis!=null&&globalThis.document?_.useLayoutEffect:()=>{},WL=k1.useId||(()=>{}),HL=0;function qm(t){const[e,n]=_.useState(WL());return Wt(()=>{n(r=>r??String(HL++))},[t]),e?`radix-${e}`:""}const qL=["top","right","bottom","left"],ni=Math.min,Dt=Math.max,hu=Math.round,Hl=Math.floor,Rn=t=>({x:t,y:t}),GL={left:"right",right:"left",bottom:"top",top:"bottom"},KL={start:"end",end:"start"};function Wf(t,e,n){return Dt(t,ni(e,n))}function cr(t,e){return typeof t=="function"?t(e):t}function ur(t){return t.split("-")[0]}function us(t){return t.split("-")[1]}function Gm(t){return t==="x"?"y":"x"}function Km(t){return t==="y"?"height":"width"}function ri(t){return["top","bottom"].includes(ur(t))?"y":"x"}function Qm(t){return Gm(ri(t))}function QL(t,e,n){n===void 0&&(n=!1);const r=us(t),i=Qm(t),o=Km(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(s=fu(s)),[s,fu(s)]}function YL(t){const e=fu(t);return[Hf(t),e,Hf(e)]}function Hf(t){return t.replace(/start|end/g,e=>KL[e])}function XL(t,e,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?o:s;default:return[]}}function JL(t,e,n,r){const i=us(t);let o=XL(ur(t),n==="start",r);return i&&(o=o.map(s=>s+"-"+i),e&&(o=o.concat(o.map(Hf)))),o}function fu(t){return t.replace(/left|right|bottom|top/g,e=>GL[e])}function ZL(t){return{top:0,right:0,bottom:0,left:0,...t}}function iS(t){return typeof t!="number"?ZL(t):{top:t,right:t,bottom:t,left:t}}function pu(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function V0(t,e,n){let{reference:r,floating:i}=t;const o=ri(e),s=Qm(e),a=Km(s),l=ur(e),u=o==="y",d=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,h=r[a]/2-i[a]/2;let y;switch(l){case"top":y={x:d,y:r.y-i.height};break;case"bottom":y={x:d,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:f};break;case"left":y={x:r.x-i.width,y:f};break;default:y={x:r.x,y:r.y}}switch(us(e)){case"start":y[s]-=h*(n&&u?-1:1);break;case"end":y[s]+=h*(n&&u?-1:1);break}return y}const eO=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(e));let u=await s.getElementRects({reference:t,floating:e,strategy:i}),{x:d,y:f}=V0(u,r,l),h=r,y={},E=0;for(let x=0;x<a.length;x++){const{name:T,fn:w}=a[x],{x:v,y:S,data:$,reset:F}=await w({x:d,y:f,initialPlacement:r,placement:h,strategy:i,middlewareData:y,rects:u,platform:s,elements:{reference:t,floating:e}});d=v??d,f=S??f,y={...y,[T]:{...y[T],...$}},F&&E<=50&&(E++,typeof F=="object"&&(F.placement&&(h=F.placement),F.rects&&(u=F.rects===!0?await s.getElementRects({reference:t,floating:e,strategy:i}):F.rects),{x:d,y:f}=V0(u,h,l)),x=-1)}return{x:d,y:f,placement:h,strategy:i,middlewareData:y}};async function La(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:o,rects:s,elements:a,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:h=!1,padding:y=0}=cr(e,t),E=iS(y),T=a[h?f==="floating"?"reference":"floating":f],w=pu(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(T)))==null||n?T:T.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:u,rootBoundary:d,strategy:l})),v=f==="floating"?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),$=await(o.isElement==null?void 0:o.isElement(S))?await(o.getScale==null?void 0:o.getScale(S))||{x:1,y:1}:{x:1,y:1},F=pu(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:S,strategy:l}):v);return{top:(w.top-F.top+E.top)/$.y,bottom:(F.bottom-w.bottom+E.bottom)/$.y,left:(w.left-F.left+E.left)/$.x,right:(F.right-w.right+E.right)/$.x}}const tO=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:o,platform:s,elements:a,middlewareData:l}=e,{element:u,padding:d=0}=cr(t,e)||{};if(u==null)return{};const f=iS(d),h={x:n,y:r},y=Qm(i),E=Km(y),x=await s.getDimensions(u),T=y==="y",w=T?"top":"left",v=T?"bottom":"right",S=T?"clientHeight":"clientWidth",$=o.reference[E]+o.reference[y]-h[y]-o.floating[E],F=h[y]-o.reference[y],O=await(s.getOffsetParent==null?void 0:s.getOffsetParent(u));let I=O?O[S]:0;(!I||!await(s.isElement==null?void 0:s.isElement(O)))&&(I=a.floating[S]||o.floating[E]);const C=$/2-F/2,k=I/2-x[E]/2-1,P=ni(f[w],k),b=ni(f[v],k),N=P,R=I-x[E]-b,W=I/2-x[E]/2+C,ie=Wf(N,W,R),K=!l.arrow&&us(i)!=null&&W!==ie&&o.reference[E]/2-(W<N?P:b)-x[E]/2<0,Y=K?W<N?W-N:W-R:0;return{[y]:h[y]+Y,data:{[y]:ie,centerOffset:W-ie-Y,...K&&{alignmentOffset:Y}},reset:K}}}),nO=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:E="none",flipAlignment:x=!0,...T}=cr(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const w=ur(i),v=ri(a),S=ur(a)===a,$=await(l.isRTL==null?void 0:l.isRTL(u.floating)),F=h||(S||!x?[fu(a)]:YL(a)),O=E!=="none";!h&&O&&F.push(...JL(a,x,E,$));const I=[a,...F],C=await La(e,T),k=[];let P=((r=o.flip)==null?void 0:r.overflows)||[];if(d&&k.push(C[w]),f){const W=QL(i,s,$);k.push(C[W[0]],C[W[1]])}if(P=[...P,{placement:i,overflows:k}],!k.every(W=>W<=0)){var b,N;const W=(((b=o.flip)==null?void 0:b.index)||0)+1,ie=I[W];if(ie)return{data:{index:W,overflows:P},reset:{placement:ie}};let K=(N=P.filter(Y=>Y.overflows[0]<=0).sort((Y,M)=>Y.overflows[1]-M.overflows[1])[0])==null?void 0:N.placement;if(!K)switch(y){case"bestFit":{var R;const Y=(R=P.filter(M=>{if(O){const H=ri(M.placement);return H===v||H==="y"}return!0}).map(M=>[M.placement,M.overflows.filter(H=>H>0).reduce((H,Q)=>H+Q,0)]).sort((M,H)=>M[1]-H[1])[0])==null?void 0:R[0];Y&&(K=Y);break}case"initialPlacement":K=a;break}if(i!==K)return{reset:{placement:K}}}return{}}}};function j0(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function U0(t){return qL.some(e=>t[e]>=0)}const rO=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=cr(t,e);switch(r){case"referenceHidden":{const o=await La(e,{...i,elementContext:"reference"}),s=j0(o,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:U0(s)}}}case"escaped":{const o=await La(e,{...i,altBoundary:!0}),s=j0(o,n.floating);return{data:{escapedOffsets:s,escaped:U0(s)}}}default:return{}}}}};async function iO(t,e){const{placement:n,platform:r,elements:i}=t,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=ur(n),a=us(n),l=ri(n)==="y",u=["left","top"].includes(s)?-1:1,d=o&&l?-1:1,f=cr(e,t);let{mainAxis:h,crossAxis:y,alignmentAxis:E}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof E=="number"&&(y=a==="end"?E*-1:E),l?{x:y*d,y:h*u}:{x:h*u,y:y*d}}const oO=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:o,placement:s,middlewareData:a}=e,l=await iO(e,t);return s===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:o+l.y,data:{...l,placement:s}}}}},sO=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:T=>{let{x:w,y:v}=T;return{x:w,y:v}}},...l}=cr(t,e),u={x:n,y:r},d=await La(e,l),f=ri(ur(i)),h=Gm(f);let y=u[h],E=u[f];if(o){const T=h==="y"?"top":"left",w=h==="y"?"bottom":"right",v=y+d[T],S=y-d[w];y=Wf(v,y,S)}if(s){const T=f==="y"?"top":"left",w=f==="y"?"bottom":"right",v=E+d[T],S=E-d[w];E=Wf(v,E,S)}const x=a.fn({...e,[h]:y,[f]:E});return{...x,data:{x:x.x-n,y:x.y-r,enabled:{[h]:o,[f]:s}}}}}},aO=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:o,middlewareData:s}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=cr(t,e),d={x:n,y:r},f=ri(i),h=Gm(f);let y=d[h],E=d[f];const x=cr(a,e),T=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(l){const S=h==="y"?"height":"width",$=o.reference[h]-o.floating[S]+T.mainAxis,F=o.reference[h]+o.reference[S]-T.mainAxis;y<$?y=$:y>F&&(y=F)}if(u){var w,v;const S=h==="y"?"width":"height",$=["top","left"].includes(ur(i)),F=o.reference[f]-o.floating[S]+($&&((w=s.offset)==null?void 0:w[f])||0)+($?0:T.crossAxis),O=o.reference[f]+o.reference[S]+($?0:((v=s.offset)==null?void 0:v[f])||0)-($?T.crossAxis:0);E<F?E=F:E>O&&(E=O)}return{[h]:y,[f]:E}}}},lO=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:o,platform:s,elements:a}=e,{apply:l=()=>{},...u}=cr(t,e),d=await La(e,u),f=ur(i),h=us(i),y=ri(i)==="y",{width:E,height:x}=o.floating;let T,w;f==="top"||f==="bottom"?(T=f,w=h===(await(s.isRTL==null?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(w=f,T=h==="end"?"top":"bottom");const v=x-d.top-d.bottom,S=E-d.left-d.right,$=ni(x-d[T],v),F=ni(E-d[w],S),O=!e.middlewareData.shift;let I=$,C=F;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(C=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(I=v),O&&!h){const P=Dt(d.left,0),b=Dt(d.right,0),N=Dt(d.top,0),R=Dt(d.bottom,0);y?C=E-2*(P!==0||b!==0?P+b:Dt(d.left,d.right)):I=x-2*(N!==0||R!==0?N+R:Dt(d.top,d.bottom))}await l({...e,availableWidth:C,availableHeight:I});const k=await s.getDimensions(a.floating);return E!==k.width||x!==k.height?{reset:{rects:!0}}:{}}}};function Zu(){return typeof window<"u"}function ds(t){return oS(t)?(t.nodeName||"").toLowerCase():"#document"}function Ut(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function On(t){var e;return(e=(oS(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function oS(t){return Zu()?t instanceof Node||t instanceof Ut(t).Node:!1}function pn(t){return Zu()?t instanceof Element||t instanceof Ut(t).Element:!1}function Fn(t){return Zu()?t instanceof HTMLElement||t instanceof Ut(t).HTMLElement:!1}function B0(t){return!Zu()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ut(t).ShadowRoot}function tl(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=mn(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function cO(t){return["table","td","th"].includes(ds(t))}function ed(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Ym(t){const e=Xm(),n=pn(t)?mn(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function uO(t){let e=ii(t);for(;Fn(e)&&!Xo(e);){if(Ym(e))return e;if(ed(e))return null;e=ii(e)}return null}function Xm(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Xo(t){return["html","body","#document"].includes(ds(t))}function mn(t){return Ut(t).getComputedStyle(t)}function td(t){return pn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ii(t){if(ds(t)==="html")return t;const e=t.assignedSlot||t.parentNode||B0(t)&&t.host||On(t);return B0(e)?e.host:e}function sS(t){const e=ii(t);return Xo(e)?t.ownerDocument?t.ownerDocument.body:t.body:Fn(e)&&tl(e)?e:sS(e)}function Oa(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=sS(t),o=i===((r=t.ownerDocument)==null?void 0:r.body),s=Ut(i);if(o){const a=qf(s);return e.concat(s,s.visualViewport||[],tl(i)?i:[],a&&n?Oa(a):[])}return e.concat(i,Oa(i,[],n))}function qf(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function aS(t){const e=mn(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Fn(t),o=i?t.offsetWidth:n,s=i?t.offsetHeight:r,a=hu(n)!==o||hu(r)!==s;return a&&(n=o,r=s),{width:n,height:r,$:a}}function Jm(t){return pn(t)?t:t.contextElement}function Ro(t){const e=Jm(t);if(!Fn(e))return Rn(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:o}=aS(e);let s=(o?hu(n.width):n.width)/r,a=(o?hu(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const dO=Rn(0);function lS(t){const e=Ut(t);return!Xm()||!e.visualViewport?dO:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function hO(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Ut(t)?!1:e}function Oi(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),o=Jm(t);let s=Rn(1);e&&(r?pn(r)&&(s=Ro(r)):s=Ro(t));const a=hO(o,n,r)?lS(o):Rn(0);let l=(i.left+a.x)/s.x,u=(i.top+a.y)/s.y,d=i.width/s.x,f=i.height/s.y;if(o){const h=Ut(o),y=r&&pn(r)?Ut(r):r;let E=h,x=qf(E);for(;x&&r&&y!==E;){const T=Ro(x),w=x.getBoundingClientRect(),v=mn(x),S=w.left+(x.clientLeft+parseFloat(v.paddingLeft))*T.x,$=w.top+(x.clientTop+parseFloat(v.paddingTop))*T.y;l*=T.x,u*=T.y,d*=T.x,f*=T.y,l+=S,u+=$,E=Ut(x),x=qf(E)}}return pu({width:d,height:f,x:l,y:u})}function Zm(t,e){const n=td(t).scrollLeft;return e?e.left+n:Oi(On(t)).left+n}function cS(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:Zm(t,r)),o=r.top+e.scrollTop;return{x:i,y:o}}function fO(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const o=i==="fixed",s=On(r),a=e?ed(e.floating):!1;if(r===s||a&&o)return n;let l={scrollLeft:0,scrollTop:0},u=Rn(1);const d=Rn(0),f=Fn(r);if((f||!f&&!o)&&((ds(r)!=="body"||tl(s))&&(l=td(r)),Fn(r))){const y=Oi(r);u=Ro(r),d.x=y.x+r.clientLeft,d.y=y.y+r.clientTop}const h=s&&!f&&!o?cS(s,l,!0):Rn(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+d.x+h.x,y:n.y*u.y-l.scrollTop*u.y+d.y+h.y}}function pO(t){return Array.from(t.getClientRects())}function mO(t){const e=On(t),n=td(t),r=t.ownerDocument.body,i=Dt(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=Dt(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+Zm(t);const a=-n.scrollTop;return mn(r).direction==="rtl"&&(s+=Dt(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}function gO(t,e){const n=Ut(t),r=On(t),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;const u=Xm();(!u||u&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a,y:l}}function yO(t,e){const n=Oi(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,o=Fn(t)?Ro(t):Rn(1),s=t.clientWidth*o.x,a=t.clientHeight*o.y,l=i*o.x,u=r*o.y;return{width:s,height:a,x:l,y:u}}function z0(t,e,n){let r;if(e==="viewport")r=gO(t,n);else if(e==="document")r=mO(On(t));else if(pn(e))r=yO(e,n);else{const i=lS(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return pu(r)}function uS(t,e){const n=ii(t);return n===e||!pn(n)||Xo(n)?!1:mn(n).position==="fixed"||uS(n,e)}function vO(t,e){const n=e.get(t);if(n)return n;let r=Oa(t,[],!1).filter(a=>pn(a)&&ds(a)!=="body"),i=null;const o=mn(t).position==="fixed";let s=o?ii(t):t;for(;pn(s)&&!Xo(s);){const a=mn(s),l=Ym(s);!l&&a.position==="fixed"&&(i=null),(o?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||tl(s)&&!l&&uS(t,s))?r=r.filter(d=>d!==s):i=a,s=ii(s)}return e.set(t,r),r}function xO(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const s=[...n==="clippingAncestors"?ed(e)?[]:vO(e,this._c):[].concat(n),r],a=s[0],l=s.reduce((u,d)=>{const f=z0(e,d,i);return u.top=Dt(f.top,u.top),u.right=ni(f.right,u.right),u.bottom=ni(f.bottom,u.bottom),u.left=Dt(f.left,u.left),u},z0(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function wO(t){const{width:e,height:n}=aS(t);return{width:e,height:n}}function _O(t,e,n){const r=Fn(e),i=On(e),o=n==="fixed",s=Oi(t,!0,o,e);let a={scrollLeft:0,scrollTop:0};const l=Rn(0);if(r||!r&&!o)if((ds(e)!=="body"||tl(i))&&(a=td(e)),r){const h=Oi(e,!0,o,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else i&&(l.x=Zm(i));const u=i&&!r&&!o?cS(i,a):Rn(0),d=s.left+a.scrollLeft-l.x-u.x,f=s.top+a.scrollTop-l.y-u.y;return{x:d,y:f,width:s.width,height:s.height}}function mh(t){return mn(t).position==="static"}function W0(t,e){if(!Fn(t)||mn(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return On(t)===n&&(n=n.ownerDocument.body),n}function dS(t,e){const n=Ut(t);if(ed(t))return n;if(!Fn(t)){let i=ii(t);for(;i&&!Xo(i);){if(pn(i)&&!mh(i))return i;i=ii(i)}return n}let r=W0(t,e);for(;r&&cO(r)&&mh(r);)r=W0(r,e);return r&&Xo(r)&&mh(r)&&!Ym(r)?n:r||uO(t)||n}const EO=async function(t){const e=this.getOffsetParent||dS,n=this.getDimensions,r=await n(t.floating);return{reference:_O(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function CO(t){return mn(t).direction==="rtl"}const SO={convertOffsetParentRelativeRectToViewportRelativeRect:fO,getDocumentElement:On,getClippingRect:xO,getOffsetParent:dS,getElementRects:EO,getClientRects:pO,getDimensions:wO,getScale:Ro,isElement:pn,isRTL:CO};function TO(t,e){let n=null,r;const i=On(t);function o(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function s(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();const{left:u,top:d,width:f,height:h}=t.getBoundingClientRect();if(a||e(),!f||!h)return;const y=Hl(d),E=Hl(i.clientWidth-(u+f)),x=Hl(i.clientHeight-(d+h)),T=Hl(u),v={rootMargin:-y+"px "+-E+"px "+-x+"px "+-T+"px",threshold:Dt(0,ni(1,l))||1};let S=!0;function $(F){const O=F[0].intersectionRatio;if(O!==l){if(!S)return s();O?s(!1,O):r=setTimeout(()=>{s(!1,1e-7)},1e3)}S=!1}try{n=new IntersectionObserver($,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver($,v)}n.observe(t)}return s(!0),o}function IO(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=Jm(t),d=i||o?[...u?Oa(u):[],...Oa(e)]:[];d.forEach(w=>{i&&w.addEventListener("scroll",n,{passive:!0}),o&&w.addEventListener("resize",n)});const f=u&&a?TO(u,n):null;let h=-1,y=null;s&&(y=new ResizeObserver(w=>{let[v]=w;v&&v.target===u&&y&&(y.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var S;(S=y)==null||S.observe(e)})),n()}),u&&!l&&y.observe(u),y.observe(e));let E,x=l?Oi(t):null;l&&T();function T(){const w=Oi(t);x&&(w.x!==x.x||w.y!==x.y||w.width!==x.width||w.height!==x.height)&&n(),x=w,E=requestAnimationFrame(T)}return n(),()=>{var w;d.forEach(v=>{i&&v.removeEventListener("scroll",n),o&&v.removeEventListener("resize",n)}),f==null||f(),(w=y)==null||w.disconnect(),y=null,l&&cancelAnimationFrame(E)}}const AO=oO,kO=sO,PO=nO,RO=lO,$O=rO,H0=tO,bO=aO,NO=(t,e,n)=>{const r=new Map,i={platform:SO,...n},o={...i.platform,_c:r};return eO(t,e,{...i,platform:o})};var _c=typeof document<"u"?_.useLayoutEffect:_.useEffect;function mu(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!mu(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&t.$$typeof)&&!mu(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function hS(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function q0(t,e){const n=hS(t);return Math.round(e*n)/n}function gh(t){const e=_.useRef(t);return _c(()=>{e.current=t}),e}function FO(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:s}={},transform:a=!0,whileElementsMounted:l,open:u}=t,[d,f]=_.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,y]=_.useState(r);mu(h,r)||y(r);const[E,x]=_.useState(null),[T,w]=_.useState(null),v=_.useCallback(M=>{M!==O.current&&(O.current=M,x(M))},[]),S=_.useCallback(M=>{M!==I.current&&(I.current=M,w(M))},[]),$=o||E,F=s||T,O=_.useRef(null),I=_.useRef(null),C=_.useRef(d),k=l!=null,P=gh(l),b=gh(i),N=gh(u),R=_.useCallback(()=>{if(!O.current||!I.current)return;const M={placement:e,strategy:n,middleware:h};b.current&&(M.platform=b.current),NO(O.current,I.current,M).then(H=>{const Q={...H,isPositioned:N.current!==!1};W.current&&!mu(C.current,Q)&&(C.current=Q,ts.flushSync(()=>{f(Q)}))})},[h,e,n,b,N]);_c(()=>{u===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,f(M=>({...M,isPositioned:!1})))},[u]);const W=_.useRef(!1);_c(()=>(W.current=!0,()=>{W.current=!1}),[]),_c(()=>{if($&&(O.current=$),F&&(I.current=F),$&&F){if(P.current)return P.current($,F,R);R()}},[$,F,R,P,k]);const ie=_.useMemo(()=>({reference:O,floating:I,setReference:v,setFloating:S}),[v,S]),K=_.useMemo(()=>({reference:$,floating:F}),[$,F]),Y=_.useMemo(()=>{const M={position:n,left:0,top:0};if(!K.floating)return M;const H=q0(K.floating,d.x),Q=q0(K.floating,d.y);return a?{...M,transform:"translate("+H+"px, "+Q+"px)",...hS(K.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:H,top:Q}},[n,a,K.floating,d.x,d.y]);return _.useMemo(()=>({...d,update:R,refs:ie,elements:K,floatingStyles:Y}),[d,R,ie,K,Y])}const LO=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?H0({element:r.current,padding:i}).fn(n):{}:r?H0({element:r,padding:i}).fn(n):{}}}},OO=(t,e)=>({...AO(t),options:[t,e]}),DO=(t,e)=>({...kO(t),options:[t,e]}),MO=(t,e)=>({...bO(t),options:[t,e]}),VO=(t,e)=>({...PO(t),options:[t,e]}),jO=(t,e)=>({...RO(t),options:[t,e]}),UO=(t,e)=>({...$O(t),options:[t,e]}),BO=(t,e)=>({...LO(t),options:[t,e]});var zO="Arrow",fS=_.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...o}=t;return m.jsx(Ve.svg,{...o,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:m.jsx("polygon",{points:"0,0 30,0 15,10"})})});fS.displayName=zO;var WO=fS;function HO(t){const[e,n]=_.useState(void 0);return Wt(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let s,a;if("borderBoxSize"in o){const l=o.borderBoxSize,u=Array.isArray(l)?l[0]:l;s=u.inlineSize,a=u.blockSize}else s=t.offsetWidth,a=t.offsetHeight;n({width:s,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var eg="Popper",[pS,mS]=Hm(eg),[qO,gS]=pS(eg),yS=t=>{const{__scopePopper:e,children:n}=t,[r,i]=_.useState(null);return m.jsx(qO,{scope:e,anchor:r,onAnchorChange:i,children:n})};yS.displayName=eg;var vS="PopperAnchor",xS=_.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,o=gS(vS,n),s=_.useRef(null),a=ct(e,s);return _.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||s.current)}),r?null:m.jsx(Ve.div,{...i,ref:a})});xS.displayName=vS;var tg="PopperContent",[GO,KO]=pS(tg),wS=_.forwardRef((t,e)=>{var X,_e,Ye,ve,pe,ge;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:o="center",alignOffset:s=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:y="optimized",onPlaced:E,...x}=t,T=gS(tg,n),[w,v]=_.useState(null),S=ct(e,tt=>v(tt)),[$,F]=_.useState(null),O=HO($),I=(O==null?void 0:O.width)??0,C=(O==null?void 0:O.height)??0,k=r+(o!=="center"?"-"+o:""),P=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},b=Array.isArray(u)?u:[u],N=b.length>0,R={padding:P,boundary:b.filter(YO),altBoundary:N},{refs:W,floatingStyles:ie,placement:K,isPositioned:Y,middlewareData:M}=FO({strategy:"fixed",placement:k,whileElementsMounted:(...tt)=>IO(...tt,{animationFrame:y==="always"}),elements:{reference:T.anchor},middleware:[OO({mainAxis:i+C,alignmentAxis:s}),l&&DO({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?MO():void 0,...R}),l&&VO({...R}),jO({...R,apply:({elements:tt,rects:kt,availableWidth:Mn,availableHeight:gr})=>{const{width:ui,height:sd}=kt.reference,di=tt.floating.style;di.setProperty("--radix-popper-available-width",`${Mn}px`),di.setProperty("--radix-popper-available-height",`${gr}px`),di.setProperty("--radix-popper-anchor-width",`${ui}px`),di.setProperty("--radix-popper-anchor-height",`${sd}px`)}}),$&&BO({element:$,padding:a}),XO({arrowWidth:I,arrowHeight:C}),h&&UO({strategy:"referenceHidden",...R})]}),[H,Q]=CS(K),ee=lr(E);Wt(()=>{Y&&(ee==null||ee())},[Y,ee]);const ae=(X=M.arrow)==null?void 0:X.x,fe=(_e=M.arrow)==null?void 0:_e.y,Qe=((Ye=M.arrow)==null?void 0:Ye.centerOffset)!==0,[ut,et]=_.useState();return Wt(()=>{w&&et(window.getComputedStyle(w).zIndex)},[w]),m.jsx("div",{ref:W.setFloating,"data-radix-popper-content-wrapper":"",style:{...ie,transform:Y?ie.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ut,"--radix-popper-transform-origin":[(ve=M.transformOrigin)==null?void 0:ve.x,(pe=M.transformOrigin)==null?void 0:pe.y].join(" "),...((ge=M.hide)==null?void 0:ge.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:m.jsx(GO,{scope:n,placedSide:H,onArrowChange:F,arrowX:ae,arrowY:fe,shouldHideArrow:Qe,children:m.jsx(Ve.div,{"data-side":H,"data-align":Q,...x,ref:S,style:{...x.style,animation:Y?void 0:"none"}})})})});wS.displayName=tg;var _S="PopperArrow",QO={top:"bottom",right:"left",bottom:"top",left:"right"},ES=_.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,o=KO(_S,r),s=QO[o.placedSide];return m.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:m.jsx(WO,{...i,ref:n,style:{...i.style,display:"block"}})})});ES.displayName=_S;function YO(t){return t!==null}var XO=t=>({name:"transformOrigin",options:t,fn(e){var T,w,v;const{placement:n,rects:r,middlewareData:i}=e,s=((T=i.arrow)==null?void 0:T.centerOffset)!==0,a=s?0:t.arrowWidth,l=s?0:t.arrowHeight,[u,d]=CS(n),f={start:"0%",center:"50%",end:"100%"}[d],h=(((w=i.arrow)==null?void 0:w.x)??0)+a/2,y=(((v=i.arrow)==null?void 0:v.y)??0)+l/2;let E="",x="";return u==="bottom"?(E=s?f:`${h}px`,x=`${-l}px`):u==="top"?(E=s?f:`${h}px`,x=`${r.floating.height+l}px`):u==="right"?(E=`${-l}px`,x=s?f:`${y}px`):u==="left"&&(E=`${r.floating.width+l}px`,x=s?f:`${y}px`),{data:{x:E,y:x}}}});function CS(t){const[e,n="center"]=t.split("-");return[e,n]}var JO=yS,ZO=xS,eD=wS,tD=ES,nD="Portal",SS=_.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,o]=_.useState(!1);Wt(()=>o(!0),[]);const s=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return s?VA.createPortal(m.jsx(Ve.div,{...r,ref:e}),s):null});SS.displayName=nD;function G0({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=rD({defaultProp:e,onChange:n}),o=t!==void 0,s=o?t:r,a=lr(n),l=_.useCallback(u=>{if(o){const f=typeof u=="function"?u(t):u;f!==t&&a(f)}else i(u)},[o,t,i,a]);return[s,l]}function rD({defaultProp:t,onChange:e}){const n=_.useState(t),[r]=n,i=_.useRef(r),o=lr(e);return _.useEffect(()=>{i.current!==r&&(o(r),i.current=r)},[r,i,o]),n}function iD(t){const e=_.useRef({value:t,previous:t});return _.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var oD="VisuallyHidden",TS=_.forwardRef((t,e)=>m.jsx(Ve.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));TS.displayName=oD;var sD=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},eo=new WeakMap,ql=new WeakMap,Gl={},yh=0,IS=function(t){return t&&(t.host||IS(t.parentNode))},aD=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=IS(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},lD=function(t,e,n,r){var i=aD(e,Array.isArray(t)?t:[t]);Gl[n]||(Gl[n]=new WeakMap);var o=Gl[n],s=[],a=new Set,l=new Set(i),u=function(f){!f||a.has(f)||(a.add(f),u(f.parentNode))};i.forEach(u);var d=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(h){if(a.has(h))d(h);else try{var y=h.getAttribute(r),E=y!==null&&y!=="false",x=(eo.get(h)||0)+1,T=(o.get(h)||0)+1;eo.set(h,x),o.set(h,T),s.push(h),x===1&&E&&ql.set(h,!0),T===1&&h.setAttribute(n,"true"),E||h.setAttribute(r,"true")}catch(w){console.error("aria-hidden: cannot operate on ",h,w)}})};return d(e),a.clear(),yh++,function(){s.forEach(function(f){var h=eo.get(f)-1,y=o.get(f)-1;eo.set(f,h),o.set(f,y),h||(ql.has(f)||f.removeAttribute(r),ql.delete(f)),y||f.removeAttribute(n)}),yh--,yh||(eo=new WeakMap,eo=new WeakMap,ql=new WeakMap,Gl={})}},cD=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=sD(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),lD(r,i,n,"aria-hidden")):function(){return null}},Ec="right-scroll-bar-position",Cc="width-before-scroll-bar",uD="with-scroll-bars-hidden",dD="--removed-body-scroll-bar-size";function vh(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function hD(t,e){var n=_.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var fD=typeof window<"u"?_.useLayoutEffect:_.useEffect,K0=new WeakMap;function pD(t,e){var n=hD(null,function(r){return t.forEach(function(i){return vh(i,r)})});return fD(function(){var r=K0.get(n);if(r){var i=new Set(r),o=new Set(t),s=n.current;i.forEach(function(a){o.has(a)||vh(a,null)}),o.forEach(function(a){i.has(a)||vh(a,s)})}K0.set(n,t)},[t]),n}function mD(t){return t}function gD(t,e){e===void 0&&(e=mD);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(o){var s=e(o,r);return n.push(s),function(){n=n.filter(function(a){return a!==s})}},assignSyncMedium:function(o){for(r=!0;n.length;){var s=n;n=[],s.forEach(o)}n={push:function(a){return o(a)},filter:function(){return n}}},assignMedium:function(o){r=!0;var s=[];if(n.length){var a=n;n=[],a.forEach(o),s=n}var l=function(){var d=s;s=[],d.forEach(o)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(d){s.push(d),u()},filter:function(d){return s=s.filter(d),n}}}};return i}function yD(t){t===void 0&&(t={});var e=gD(null);return e.options=Cn({async:!0,ssr:!1},t),e}var AS=function(t){var e=t.sideCar,n=Ga(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return _.createElement(r,Cn({},n))};AS.isSideCarExport=!0;function vD(t,e){return t.useMedium(e),AS}var kS=yD(),xh=function(){},nd=_.forwardRef(function(t,e){var n=_.useRef(null),r=_.useState({onScrollCapture:xh,onWheelCapture:xh,onTouchMoveCapture:xh}),i=r[0],o=r[1],s=t.forwardProps,a=t.children,l=t.className,u=t.removeScrollBar,d=t.enabled,f=t.shards,h=t.sideCar,y=t.noIsolation,E=t.inert,x=t.allowPinchZoom,T=t.as,w=T===void 0?"div":T,v=t.gapMode,S=Ga(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),$=h,F=pD([n,e]),O=Cn(Cn({},S),i);return _.createElement(_.Fragment,null,d&&_.createElement($,{sideCar:kS,removeScrollBar:u,shards:f,noIsolation:y,inert:E,setCallbacks:o,allowPinchZoom:!!x,lockRef:n,gapMode:v}),s?_.cloneElement(_.Children.only(a),Cn(Cn({},O),{ref:F})):_.createElement(w,Cn({},O,{className:l,ref:F}),a))});nd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};nd.classNames={fullWidth:Cc,zeroRight:Ec};var xD=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function wD(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=xD();return e&&t.setAttribute("nonce",e),t}function _D(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function ED(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var CD=function(){var t=0,e=null;return{add:function(n){t==0&&(e=wD())&&(_D(e,n),ED(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},SD=function(){var t=CD();return function(e,n){_.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},PS=function(){var t=SD(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},TD={left:0,top:0,right:0,gap:0},wh=function(t){return parseInt(t||"",10)||0},ID=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[wh(n),wh(r),wh(i)]},AD=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return TD;var e=ID(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},kD=PS(),$o="data-scroll-locked",PD=function(t,e,n,r){var i=t.left,o=t.top,s=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(uD,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat($o,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ec,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Cc,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Ec," .").concat(Ec,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Cc," .").concat(Cc,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat($o,`] {
    `).concat(dD,": ").concat(a,`px;
  }
`)},Q0=function(){var t=parseInt(document.body.getAttribute($o)||"0",10);return isFinite(t)?t:0},RD=function(){_.useEffect(function(){return document.body.setAttribute($o,(Q0()+1).toString()),function(){var t=Q0()-1;t<=0?document.body.removeAttribute($o):document.body.setAttribute($o,t.toString())}},[])},$D=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;RD();var o=_.useMemo(function(){return AD(i)},[i]);return _.createElement(kD,{styles:PD(o,!e,i,n?"":"!important")})},Gf=!1;if(typeof window<"u")try{var Kl=Object.defineProperty({},"passive",{get:function(){return Gf=!0,!0}});window.addEventListener("test",Kl,Kl),window.removeEventListener("test",Kl,Kl)}catch{Gf=!1}var to=Gf?{passive:!1}:!1,bD=function(t){return t.tagName==="TEXTAREA"},RS=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!bD(t)&&n[e]==="visible")},ND=function(t){return RS(t,"overflowY")},FD=function(t){return RS(t,"overflowX")},Y0=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=$S(t,r);if(i){var o=bS(t,r),s=o[1],a=o[2];if(s>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},LD=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},OD=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},$S=function(t,e){return t==="v"?ND(e):FD(e)},bS=function(t,e){return t==="v"?LD(e):OD(e)},DD=function(t,e){return t==="h"&&e==="rtl"?-1:1},MD=function(t,e,n,r,i){var o=DD(t,window.getComputedStyle(e).direction),s=o*r,a=n.target,l=e.contains(a),u=!1,d=s>0,f=0,h=0;do{var y=bS(t,a),E=y[0],x=y[1],T=y[2],w=x-T-o*E;(E||w)&&$S(t,a)&&(f+=w,h+=E),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&(Math.abs(f)<1||!i)||!d&&(Math.abs(h)<1||!i))&&(u=!0),u},Ql=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},X0=function(t){return[t.deltaX,t.deltaY]},J0=function(t){return t&&"current"in t?t.current:t},VD=function(t,e){return t[0]===e[0]&&t[1]===e[1]},jD=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},UD=0,no=[];function BD(t){var e=_.useRef([]),n=_.useRef([0,0]),r=_.useRef(),i=_.useState(UD++)[0],o=_.useState(PS)[0],s=_.useRef(t);_.useEffect(function(){s.current=t},[t]),_.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var x=ZR([t.lockRef.current],(t.shards||[]).map(J0),!0).filter(Boolean);return x.forEach(function(T){return T.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),x.forEach(function(T){return T.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=_.useCallback(function(x,T){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!s.current.allowPinchZoom;var w=Ql(x),v=n.current,S="deltaX"in x?x.deltaX:v[0]-w[0],$="deltaY"in x?x.deltaY:v[1]-w[1],F,O=x.target,I=Math.abs(S)>Math.abs($)?"h":"v";if("touches"in x&&I==="h"&&O.type==="range")return!1;var C=Y0(I,O);if(!C)return!0;if(C?F=I:(F=I==="v"?"h":"v",C=Y0(I,O)),!C)return!1;if(!r.current&&"changedTouches"in x&&(S||$)&&(r.current=F),!F)return!0;var k=r.current||F;return MD(k,T,x,k==="h"?S:$,!0)},[]),l=_.useCallback(function(x){var T=x;if(!(!no.length||no[no.length-1]!==o)){var w="deltaY"in T?X0(T):Ql(T),v=e.current.filter(function(F){return F.name===T.type&&(F.target===T.target||T.target===F.shadowParent)&&VD(F.delta,w)})[0];if(v&&v.should){T.cancelable&&T.preventDefault();return}if(!v){var S=(s.current.shards||[]).map(J0).filter(Boolean).filter(function(F){return F.contains(T.target)}),$=S.length>0?a(T,S[0]):!s.current.noIsolation;$&&T.cancelable&&T.preventDefault()}}},[]),u=_.useCallback(function(x,T,w,v){var S={name:x,delta:T,target:w,should:v,shadowParent:zD(w)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function($){return $!==S})},1)},[]),d=_.useCallback(function(x){n.current=Ql(x),r.current=void 0},[]),f=_.useCallback(function(x){u(x.type,X0(x),x.target,a(x,t.lockRef.current))},[]),h=_.useCallback(function(x){u(x.type,Ql(x),x.target,a(x,t.lockRef.current))},[]);_.useEffect(function(){return no.push(o),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",l,to),document.addEventListener("touchmove",l,to),document.addEventListener("touchstart",d,to),function(){no=no.filter(function(x){return x!==o}),document.removeEventListener("wheel",l,to),document.removeEventListener("touchmove",l,to),document.removeEventListener("touchstart",d,to)}},[]);var y=t.removeScrollBar,E=t.inert;return _.createElement(_.Fragment,null,E?_.createElement(o,{styles:jD(i)}):null,y?_.createElement($D,{gapMode:t.gapMode}):null)}function zD(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const WD=vD(kS,BD);var NS=_.forwardRef(function(t,e){return _.createElement(nd,Cn({},t,{ref:e,sideCar:WD}))});NS.classNames=nd.classNames;var HD=[" ","Enter","ArrowUp","ArrowDown"],qD=[" ","Enter"],nl="Select",[rd,id,GD]=CL(nl),[hs,sj]=Hm(nl,[GD,mS]),od=mS(),[KD,li]=hs(nl),[QD,YD]=hs(nl),FS=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:o,value:s,defaultValue:a,onValueChange:l,dir:u,name:d,autoComplete:f,disabled:h,required:y,form:E}=t,x=od(e),[T,w]=_.useState(null),[v,S]=_.useState(null),[$,F]=_.useState(!1),O=TL(u),[I=!1,C]=G0({prop:r,defaultProp:i,onChange:o}),[k,P]=G0({prop:s,defaultProp:a,onChange:l}),b=_.useRef(null),N=T?E||!!T.closest("form"):!0,[R,W]=_.useState(new Set),ie=Array.from(R).map(K=>K.props.value).join(";");return m.jsx(JO,{...x,children:m.jsxs(KD,{required:y,scope:e,trigger:T,onTriggerChange:w,valueNode:v,onValueNodeChange:S,valueNodeHasChildren:$,onValueNodeHasChildrenChange:F,contentId:qm(),value:k,onValueChange:P,open:I,onOpenChange:C,dir:O,triggerPointerDownPosRef:b,disabled:h,children:[m.jsx(rd.Provider,{scope:e,children:m.jsx(QD,{scope:t.__scopeSelect,onNativeOptionAdd:_.useCallback(K=>{W(Y=>new Set(Y).add(K))},[]),onNativeOptionRemove:_.useCallback(K=>{W(Y=>{const M=new Set(Y);return M.delete(K),M})},[]),children:n})}),N?m.jsxs(oT,{"aria-hidden":!0,required:y,tabIndex:-1,name:d,autoComplete:f,value:k,onChange:K=>P(K.target.value),disabled:h,form:E,children:[k===void 0?m.jsx("option",{value:""}):null,Array.from(R)]},ie):null]})})};FS.displayName=nl;var LS="SelectTrigger",OS=_.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,o=od(n),s=li(LS,n),a=s.disabled||r,l=ct(e,s.onTriggerChange),u=id(n),d=_.useRef("touch"),[f,h,y]=sT(x=>{const T=u().filter(S=>!S.disabled),w=T.find(S=>S.value===s.value),v=aT(T,x,w);v!==void 0&&s.onValueChange(v.value)}),E=x=>{a||(s.onOpenChange(!0),y()),x&&(s.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return m.jsx(ZO,{asChild:!0,...o,children:m.jsx(Ve.button,{type:"button",role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":iT(s.value)?"":void 0,...i,ref:l,onClick:Ue(i.onClick,x=>{x.currentTarget.focus(),d.current!=="mouse"&&E(x)}),onPointerDown:Ue(i.onPointerDown,x=>{d.current=x.pointerType;const T=x.target;T.hasPointerCapture(x.pointerId)&&T.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(E(x),x.preventDefault())}),onKeyDown:Ue(i.onKeyDown,x=>{const T=f.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&h(x.key),!(T&&x.key===" ")&&HD.includes(x.key)&&(E(),x.preventDefault())})})})});OS.displayName=LS;var DS="SelectValue",MS=_.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:o,placeholder:s="",...a}=t,l=li(DS,n),{onValueNodeHasChildrenChange:u}=l,d=o!==void 0,f=ct(e,l.onValueNodeChange);return Wt(()=>{u(d)},[u,d]),m.jsx(Ve.span,{...a,ref:f,style:{pointerEvents:"none"},children:iT(l.value)?m.jsx(m.Fragment,{children:s}):o})});MS.displayName=DS;var XD="SelectIcon",VS=_.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return m.jsx(Ve.span,{"aria-hidden":!0,...i,ref:e,children:r||""})});VS.displayName=XD;var JD="SelectPortal",jS=t=>m.jsx(SS,{asChild:!0,...t});jS.displayName=JD;var Di="SelectContent",US=_.forwardRef((t,e)=>{const n=li(Di,t.__scopeSelect),[r,i]=_.useState();if(Wt(()=>{i(new DocumentFragment)},[]),!n.open){const o=r;return o?ts.createPortal(m.jsx(BS,{scope:t.__scopeSelect,children:m.jsx(rd.Slot,{scope:t.__scopeSelect,children:m.jsx("div",{children:t.children})})}),o):null}return m.jsx(zS,{...t,ref:e})});US.displayName=Di;var rn=10,[BS,ci]=hs(Di),ZD="SelectContentImpl",zS=_.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:o,onPointerDownOutside:s,side:a,sideOffset:l,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:y,sticky:E,hideWhenDetached:x,avoidCollisions:T,...w}=t,v=li(Di,n),[S,$]=_.useState(null),[F,O]=_.useState(null),I=ct(e,X=>$(X)),[C,k]=_.useState(null),[P,b]=_.useState(null),N=id(n),[R,W]=_.useState(!1),ie=_.useRef(!1);_.useEffect(()=>{if(S)return cD(S)},[S]),OL();const K=_.useCallback(X=>{const[_e,...Ye]=N().map(ge=>ge.ref.current),[ve]=Ye.slice(-1),pe=document.activeElement;for(const ge of X)if(ge===pe||(ge==null||ge.scrollIntoView({block:"nearest"}),ge===_e&&F&&(F.scrollTop=0),ge===ve&&F&&(F.scrollTop=F.scrollHeight),ge==null||ge.focus(),document.activeElement!==pe))return},[N,F]),Y=_.useCallback(()=>K([C,S]),[K,C,S]);_.useEffect(()=>{R&&Y()},[R,Y]);const{onOpenChange:M,triggerPointerDownPosRef:H}=v;_.useEffect(()=>{if(S){let X={x:0,y:0};const _e=ve=>{var pe,ge;X={x:Math.abs(Math.round(ve.pageX)-(((pe=H.current)==null?void 0:pe.x)??0)),y:Math.abs(Math.round(ve.pageY)-(((ge=H.current)==null?void 0:ge.y)??0))}},Ye=ve=>{X.x<=10&&X.y<=10?ve.preventDefault():S.contains(ve.target)||M(!1),document.removeEventListener("pointermove",_e),H.current=null};return H.current!==null&&(document.addEventListener("pointermove",_e),document.addEventListener("pointerup",Ye,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",_e),document.removeEventListener("pointerup",Ye,{capture:!0})}}},[S,M,H]),_.useEffect(()=>{const X=()=>M(!1);return window.addEventListener("blur",X),window.addEventListener("resize",X),()=>{window.removeEventListener("blur",X),window.removeEventListener("resize",X)}},[M]);const[Q,ee]=sT(X=>{const _e=N().filter(pe=>!pe.disabled),Ye=_e.find(pe=>pe.ref.current===document.activeElement),ve=aT(_e,X,Ye);ve&&setTimeout(()=>ve.ref.current.focus())}),ae=_.useCallback((X,_e,Ye)=>{const ve=!ie.current&&!Ye;(v.value!==void 0&&v.value===_e||ve)&&(k(X),ve&&(ie.current=!0))},[v.value]),fe=_.useCallback(()=>S==null?void 0:S.focus(),[S]),Qe=_.useCallback((X,_e,Ye)=>{const ve=!ie.current&&!Ye;(v.value!==void 0&&v.value===_e||ve)&&b(X)},[v.value]),ut=r==="popper"?Kf:WS,et=ut===Kf?{side:a,sideOffset:l,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:y,sticky:E,hideWhenDetached:x,avoidCollisions:T}:{};return m.jsx(BS,{scope:n,content:S,viewport:F,onViewportChange:O,itemRefCallback:ae,selectedItem:C,onItemLeave:fe,itemTextRefCallback:Qe,focusSelectedItem:Y,selectedItemText:P,position:r,isPositioned:R,searchRef:Q,children:m.jsx(NS,{as:Yo,allowPinchZoom:!0,children:m.jsx(nS,{asChild:!0,trapped:v.open,onMountAutoFocus:X=>{X.preventDefault()},onUnmountAutoFocus:Ue(i,X=>{var _e;(_e=v.trigger)==null||_e.focus({preventScroll:!0}),X.preventDefault()}),children:m.jsx(eS,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:s,onFocusOutside:X=>X.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:m.jsx(ut,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:X=>X.preventDefault(),...w,...et,onPlaced:()=>W(!0),ref:I,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:Ue(w.onKeyDown,X=>{const _e=X.ctrlKey||X.altKey||X.metaKey;if(X.key==="Tab"&&X.preventDefault(),!_e&&X.key.length===1&&ee(X.key),["ArrowUp","ArrowDown","Home","End"].includes(X.key)){let ve=N().filter(pe=>!pe.disabled).map(pe=>pe.ref.current);if(["ArrowUp","End"].includes(X.key)&&(ve=ve.slice().reverse()),["ArrowUp","ArrowDown"].includes(X.key)){const pe=X.target,ge=ve.indexOf(pe);ve=ve.slice(ge+1)}setTimeout(()=>K(ve)),X.preventDefault()}})})})})})})});zS.displayName=ZD;var eM="SelectItemAlignedPosition",WS=_.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,o=li(Di,n),s=ci(Di,n),[a,l]=_.useState(null),[u,d]=_.useState(null),f=ct(e,I=>d(I)),h=id(n),y=_.useRef(!1),E=_.useRef(!0),{viewport:x,selectedItem:T,selectedItemText:w,focusSelectedItem:v}=s,S=_.useCallback(()=>{if(o.trigger&&o.valueNode&&a&&u&&x&&T&&w){const I=o.trigger.getBoundingClientRect(),C=u.getBoundingClientRect(),k=o.valueNode.getBoundingClientRect(),P=w.getBoundingClientRect();if(o.dir!=="rtl"){const pe=P.left-C.left,ge=k.left-pe,tt=I.left-ge,kt=I.width+tt,Mn=Math.max(kt,C.width),gr=window.innerWidth-rn,ui=R0(ge,[rn,Math.max(rn,gr-Mn)]);a.style.minWidth=kt+"px",a.style.left=ui+"px"}else{const pe=C.right-P.right,ge=window.innerWidth-k.right-pe,tt=window.innerWidth-I.right-ge,kt=I.width+tt,Mn=Math.max(kt,C.width),gr=window.innerWidth-rn,ui=R0(ge,[rn,Math.max(rn,gr-Mn)]);a.style.minWidth=kt+"px",a.style.right=ui+"px"}const b=h(),N=window.innerHeight-rn*2,R=x.scrollHeight,W=window.getComputedStyle(u),ie=parseInt(W.borderTopWidth,10),K=parseInt(W.paddingTop,10),Y=parseInt(W.borderBottomWidth,10),M=parseInt(W.paddingBottom,10),H=ie+K+R+M+Y,Q=Math.min(T.offsetHeight*5,H),ee=window.getComputedStyle(x),ae=parseInt(ee.paddingTop,10),fe=parseInt(ee.paddingBottom,10),Qe=I.top+I.height/2-rn,ut=N-Qe,et=T.offsetHeight/2,X=T.offsetTop+et,_e=ie+K+X,Ye=H-_e;if(_e<=Qe){const pe=b.length>0&&T===b[b.length-1].ref.current;a.style.bottom="0px";const ge=u.clientHeight-x.offsetTop-x.offsetHeight,tt=Math.max(ut,et+(pe?fe:0)+ge+Y),kt=_e+tt;a.style.height=kt+"px"}else{const pe=b.length>0&&T===b[0].ref.current;a.style.top="0px";const tt=Math.max(Qe,ie+x.offsetTop+(pe?ae:0)+et)+Ye;a.style.height=tt+"px",x.scrollTop=_e-Qe+x.offsetTop}a.style.margin=`${rn}px 0`,a.style.minHeight=Q+"px",a.style.maxHeight=N+"px",r==null||r(),requestAnimationFrame(()=>y.current=!0)}},[h,o.trigger,o.valueNode,a,u,x,T,w,o.dir,r]);Wt(()=>S(),[S]);const[$,F]=_.useState();Wt(()=>{u&&F(window.getComputedStyle(u).zIndex)},[u]);const O=_.useCallback(I=>{I&&E.current===!0&&(S(),v==null||v(),E.current=!1)},[S,v]);return m.jsx(nM,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:y,onScrollButtonChange:O,children:m.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:$},children:m.jsx(Ve.div,{...i,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});WS.displayName=eM;var tM="SelectPopperPosition",Kf=_.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=rn,...o}=t,s=od(n);return m.jsx(eD,{...s,...o,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Kf.displayName=tM;var[nM,ng]=hs(Di,{}),Qf="SelectViewport",HS=_.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,o=ci(Qf,n),s=ng(Qf,n),a=ct(e,o.onViewportChange),l=_.useRef(0);return m.jsxs(m.Fragment,{children:[m.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),m.jsx(rd.Slot,{scope:n,children:m.jsx(Ve.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Ue(i.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:h}=s;if(h!=null&&h.current&&f){const y=Math.abs(l.current-d.scrollTop);if(y>0){const E=window.innerHeight-rn*2,x=parseFloat(f.style.minHeight),T=parseFloat(f.style.height),w=Math.max(x,T);if(w<E){const v=w+y,S=Math.min(E,v),$=v-S;f.style.height=S+"px",f.style.bottom==="0px"&&(d.scrollTop=$>0?$:0,f.style.justifyContent="flex-end")}}}l.current=d.scrollTop})})})]})});HS.displayName=Qf;var qS="SelectGroup",[rM,iM]=hs(qS),oM=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=qm();return m.jsx(rM,{scope:n,id:i,children:m.jsx(Ve.div,{role:"group","aria-labelledby":i,...r,ref:e})})});oM.displayName=qS;var GS="SelectLabel",KS=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=iM(GS,n);return m.jsx(Ve.div,{id:i.id,...r,ref:e})});KS.displayName=GS;var gu="SelectItem",[sM,QS]=hs(gu),YS=_.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:o,...s}=t,a=li(gu,n),l=ci(gu,n),u=a.value===r,[d,f]=_.useState(o??""),[h,y]=_.useState(!1),E=ct(e,v=>{var S;return(S=l.itemRefCallback)==null?void 0:S.call(l,v,r,i)}),x=qm(),T=_.useRef("touch"),w=()=>{i||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return m.jsx(sM,{scope:n,value:r,disabled:i,textId:x,isSelected:u,onItemTextChange:_.useCallback(v=>{f(S=>S||((v==null?void 0:v.textContent)??"").trim())},[]),children:m.jsx(rd.ItemSlot,{scope:n,value:r,disabled:i,textValue:d,children:m.jsx(Ve.div,{role:"option","aria-labelledby":x,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...s,ref:E,onFocus:Ue(s.onFocus,()=>y(!0)),onBlur:Ue(s.onBlur,()=>y(!1)),onClick:Ue(s.onClick,()=>{T.current!=="mouse"&&w()}),onPointerUp:Ue(s.onPointerUp,()=>{T.current==="mouse"&&w()}),onPointerDown:Ue(s.onPointerDown,v=>{T.current=v.pointerType}),onPointerMove:Ue(s.onPointerMove,v=>{var S;T.current=v.pointerType,i?(S=l.onItemLeave)==null||S.call(l):T.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ue(s.onPointerLeave,v=>{var S;v.currentTarget===document.activeElement&&((S=l.onItemLeave)==null||S.call(l))}),onKeyDown:Ue(s.onKeyDown,v=>{var $;(($=l.searchRef)==null?void 0:$.current)!==""&&v.key===" "||(qD.includes(v.key)&&w(),v.key===" "&&v.preventDefault())})})})})});YS.displayName=gu;var Gs="SelectItemText",XS=_.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...o}=t,s=li(Gs,n),a=ci(Gs,n),l=QS(Gs,n),u=YD(Gs,n),[d,f]=_.useState(null),h=ct(e,w=>f(w),l.onItemTextChange,w=>{var v;return(v=a.itemTextRefCallback)==null?void 0:v.call(a,w,l.value,l.disabled)}),y=d==null?void 0:d.textContent,E=_.useMemo(()=>m.jsx("option",{value:l.value,disabled:l.disabled,children:y},l.value),[l.disabled,l.value,y]),{onNativeOptionAdd:x,onNativeOptionRemove:T}=u;return Wt(()=>(x(E),()=>T(E)),[x,T,E]),m.jsxs(m.Fragment,{children:[m.jsx(Ve.span,{id:l.textId,...o,ref:h}),l.isSelected&&s.valueNode&&!s.valueNodeHasChildren?ts.createPortal(o.children,s.valueNode):null]})});XS.displayName=Gs;var JS="SelectItemIndicator",ZS=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return QS(JS,n).isSelected?m.jsx(Ve.span,{"aria-hidden":!0,...r,ref:e}):null});ZS.displayName=JS;var Yf="SelectScrollUpButton",eT=_.forwardRef((t,e)=>{const n=ci(Yf,t.__scopeSelect),r=ng(Yf,t.__scopeSelect),[i,o]=_.useState(!1),s=ct(e,r.onScrollButtonChange);return Wt(()=>{if(n.viewport&&n.isPositioned){let a=function(){const u=l.scrollTop>0;o(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?m.jsx(nT,{...t,ref:s,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});eT.displayName=Yf;var Xf="SelectScrollDownButton",tT=_.forwardRef((t,e)=>{const n=ci(Xf,t.__scopeSelect),r=ng(Xf,t.__scopeSelect),[i,o]=_.useState(!1),s=ct(e,r.onScrollButtonChange);return Wt(()=>{if(n.viewport&&n.isPositioned){let a=function(){const u=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<u;o(d)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?m.jsx(nT,{...t,ref:s,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});tT.displayName=Xf;var nT=_.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,o=ci("SelectScrollButton",n),s=_.useRef(null),a=id(n),l=_.useCallback(()=>{s.current!==null&&(window.clearInterval(s.current),s.current=null)},[]);return _.useEffect(()=>()=>l(),[l]),Wt(()=>{var d;const u=a().find(f=>f.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[a]),m.jsx(Ve.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:Ue(i.onPointerDown,()=>{s.current===null&&(s.current=window.setInterval(r,50))}),onPointerMove:Ue(i.onPointerMove,()=>{var u;(u=o.onItemLeave)==null||u.call(o),s.current===null&&(s.current=window.setInterval(r,50))}),onPointerLeave:Ue(i.onPointerLeave,()=>{l()})})}),aM="SelectSeparator",rT=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return m.jsx(Ve.div,{"aria-hidden":!0,...r,ref:e})});rT.displayName=aM;var Jf="SelectArrow",lM=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=od(n),o=li(Jf,n),s=ci(Jf,n);return o.open&&s.position==="popper"?m.jsx(tD,{...i,...r,ref:e}):null});lM.displayName=Jf;function iT(t){return t===""||t===void 0}var oT=_.forwardRef((t,e)=>{const{value:n,...r}=t,i=_.useRef(null),o=ct(e,i),s=iD(n);return _.useEffect(()=>{const a=i.current,l=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==n&&d){const f=new Event("change",{bubbles:!0});d.call(a,n),a.dispatchEvent(f)}},[s,n]),m.jsx(TS,{asChild:!0,children:m.jsx("select",{...r,ref:o,defaultValue:n})})});oT.displayName="BubbleSelect";function sT(t){const e=lr(t),n=_.useRef(""),r=_.useRef(0),i=_.useCallback(s=>{const a=n.current+s;e(a),function l(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),o=_.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return _.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,o]}function aT(t,e,n){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,o=n?t.indexOf(n):-1;let s=cM(t,Math.max(o,0));i.length===1&&(s=s.filter(u=>u!==n));const l=s.find(u=>u.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function cM(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var uM=FS,lT=OS,dM=MS,hM=VS,fM=jS,cT=US,pM=HS,uT=KS,dT=YS,mM=XS,gM=ZS,hT=eT,fT=tT,pT=rT;/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var yM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),gn=(t,e)=>{const n=_.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:s,className:a="",children:l,...u},d)=>_.createElement("svg",{ref:d,...yM,width:i,height:i,stroke:r,strokeWidth:s?Number(o)*24/Number(i):o,className:["lucide",`lucide-${vM(t)}`,a].join(" "),...u},[...e.map(([f,h])=>_.createElement(f,h)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mT=gn("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=gn("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=gn("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=gn("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EM=gn("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=gn("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=gn("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gT=gn("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=gn("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=gn("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yT=gn("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);function vT(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=vT(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function xT(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=vT(t))&&(r&&(r+=" "),r+=e);return r}const rg="-",AM=t=>{const e=PM(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:s=>{const a=s.split(rg);return a[0]===""&&a.length!==1&&a.shift(),wT(a,e)||kM(s)},getConflictingClassGroupIds:(s,a)=>{const l=n[s]||[];return a&&r[s]?[...l,...r[s]]:l}}},wT=(t,e)=>{var s;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?wT(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const o=t.join(rg);return(s=e.validators.find(({validator:a})=>a(o)))==null?void 0:s.classGroupId},Z0=/^\[(.+)\]$/,kM=t=>{if(Z0.test(t)){const e=Z0.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},PM=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return $M(Object.entries(t.classGroups),n).forEach(([o,s])=>{Zf(s,r,o,e)}),r},Zf=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const o=i===""?e:ex(e,i);o.classGroupId=n;return}if(typeof i=="function"){if(RM(i)){Zf(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([o,s])=>{Zf(s,ex(e,o),n,r)})})},ex=(t,e)=>{let n=t;return e.split(rg).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},RM=t=>t.isThemeGetter,$M=(t,e)=>e?t.map(([n,r])=>{const i=r.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([s,a])=>[e+s,a])):o);return[n,i]}):t,bM=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(o,s)=>{n.set(o,s),e++,e>t&&(e=0,r=n,n=new Map)};return{get(o){let s=n.get(o);if(s!==void 0)return s;if((s=r.get(o))!==void 0)return i(o,s),s},set(o,s){n.has(o)?n.set(o,s):i(o,s)}}},_T="!",NM=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],o=e.length,s=a=>{const l=[];let u=0,d=0,f;for(let T=0;T<a.length;T++){let w=a[T];if(u===0){if(w===i&&(r||a.slice(T,T+o)===e)){l.push(a.slice(d,T)),d=T+o;continue}if(w==="/"){f=T;continue}}w==="["?u++:w==="]"&&u--}const h=l.length===0?a:a.substring(d),y=h.startsWith(_T),E=y?h.substring(1):h,x=f&&f>d?f-d:void 0;return{modifiers:l,hasImportantModifier:y,baseClassName:E,maybePostfixModifierPosition:x}};return n?a=>n({className:a,parseClassName:s}):s},FM=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},LM=t=>({cache:bM(t.cacheSize),parseClassName:NM(t),...AM(t)}),OM=/\s+/,DM=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,o=[],s=t.trim().split(OM);let a="";for(let l=s.length-1;l>=0;l-=1){const u=s[l],{modifiers:d,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:y}=n(u);let E=!!y,x=r(E?h.substring(0,y):h);if(!x){if(!E){a=u+(a.length>0?" "+a:a);continue}if(x=r(h),!x){a=u+(a.length>0?" "+a:a);continue}E=!1}const T=FM(d).join(":"),w=f?T+_T:T,v=w+x;if(o.includes(v))continue;o.push(v);const S=i(x,E);for(let $=0;$<S.length;++$){const F=S[$];o.push(w+F)}a=u+(a.length>0?" "+a:a)}return a};function MM(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=ET(e))&&(r&&(r+=" "),r+=n);return r}const ET=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=ET(t[r]))&&(n&&(n+=" "),n+=e);return n};function VM(t,...e){let n,r,i,o=s;function s(l){const u=e.reduce((d,f)=>f(d),t());return n=LM(u),r=n.cache.get,i=n.cache.set,o=a,a(l)}function a(l){const u=r(l);if(u)return u;const d=DM(l,n);return i(l,d),d}return function(){return o(MM.apply(null,arguments))}}const Te=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},CT=/^\[(?:([a-z-]+):)?(.+)\]$/i,jM=/^\d+\/\d+$/,UM=new Set(["px","full","screen"]),BM=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,zM=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,WM=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,HM=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,qM=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Un=t=>bo(t)||UM.has(t)||jM.test(t),Er=t=>fs(t,"length",eV),bo=t=>!!t&&!Number.isNaN(Number(t)),_h=t=>fs(t,"number",bo),Os=t=>!!t&&Number.isInteger(Number(t)),GM=t=>t.endsWith("%")&&bo(t.slice(0,-1)),se=t=>CT.test(t),Cr=t=>BM.test(t),KM=new Set(["length","size","percentage"]),QM=t=>fs(t,KM,ST),YM=t=>fs(t,"position",ST),XM=new Set(["image","url"]),JM=t=>fs(t,XM,nV),ZM=t=>fs(t,"",tV),Ds=()=>!0,fs=(t,e,n)=>{const r=CT.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},eV=t=>zM.test(t)&&!WM.test(t),ST=()=>!1,tV=t=>HM.test(t),nV=t=>qM.test(t),rV=()=>{const t=Te("colors"),e=Te("spacing"),n=Te("blur"),r=Te("brightness"),i=Te("borderColor"),o=Te("borderRadius"),s=Te("borderSpacing"),a=Te("borderWidth"),l=Te("contrast"),u=Te("grayscale"),d=Te("hueRotate"),f=Te("invert"),h=Te("gap"),y=Te("gradientColorStops"),E=Te("gradientColorStopPositions"),x=Te("inset"),T=Te("margin"),w=Te("opacity"),v=Te("padding"),S=Te("saturate"),$=Te("scale"),F=Te("sepia"),O=Te("skew"),I=Te("space"),C=Te("translate"),k=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],b=()=>["auto",se,e],N=()=>[se,e],R=()=>["",Un,Er],W=()=>["auto",bo,se],ie=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],K=()=>["solid","dashed","dotted","double","none"],Y=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],M=()=>["start","end","center","between","around","evenly","stretch"],H=()=>["","0",se],Q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ee=()=>[bo,se];return{cacheSize:500,separator:":",theme:{colors:[Ds],spacing:[Un,Er],blur:["none","",Cr,se],brightness:ee(),borderColor:[t],borderRadius:["none","","full",Cr,se],borderSpacing:N(),borderWidth:R(),contrast:ee(),grayscale:H(),hueRotate:ee(),invert:H(),gap:N(),gradientColorStops:[t],gradientColorStopPositions:[GM,Er],inset:b(),margin:b(),opacity:ee(),padding:N(),saturate:ee(),scale:ee(),sepia:H(),skew:ee(),space:N(),translate:N()},classGroups:{aspect:[{aspect:["auto","square","video",se]}],container:["container"],columns:[{columns:[Cr]}],"break-after":[{"break-after":Q()}],"break-before":[{"break-before":Q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ie(),se]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Os,se]}],basis:[{basis:b()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",se]}],grow:[{grow:H()}],shrink:[{shrink:H()}],order:[{order:["first","last","none",Os,se]}],"grid-cols":[{"grid-cols":[Ds]}],"col-start-end":[{col:["auto",{span:["full",Os,se]},se]}],"col-start":[{"col-start":W()}],"col-end":[{"col-end":W()}],"grid-rows":[{"grid-rows":[Ds]}],"row-start-end":[{row:["auto",{span:[Os,se]},se]}],"row-start":[{"row-start":W()}],"row-end":[{"row-end":W()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",se]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",se]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...M()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...M(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...M(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[T]}],mx:[{mx:[T]}],my:[{my:[T]}],ms:[{ms:[T]}],me:[{me:[T]}],mt:[{mt:[T]}],mr:[{mr:[T]}],mb:[{mb:[T]}],ml:[{ml:[T]}],"space-x":[{"space-x":[I]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[I]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",se,e]}],"min-w":[{"min-w":[se,e,"min","max","fit"]}],"max-w":[{"max-w":[se,e,"none","full","min","max","fit","prose",{screen:[Cr]},Cr]}],h:[{h:[se,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[se,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[se,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[se,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Cr,Er]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",_h]}],"font-family":[{font:[Ds]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",se]}],"line-clamp":[{"line-clamp":["none",bo,_h]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Un,se]}],"list-image":[{"list-image":["none",se]}],"list-style-type":[{list:["none","disc","decimal",se]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...K(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Un,Er]}],"underline-offset":[{"underline-offset":["auto",Un,se]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",se]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",se]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ie(),YM]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",QM]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},JM]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[E]}],"gradient-via-pos":[{via:[E]}],"gradient-to-pos":[{to:[E]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...K(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:K()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...K()]}],"outline-offset":[{"outline-offset":[Un,se]}],"outline-w":[{outline:[Un,Er]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[Un,Er]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Cr,ZM]}],"shadow-color":[{shadow:[Ds]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...Y(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Y()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Cr,se]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[S]}],sepia:[{sepia:[F]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[F]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",se]}],duration:[{duration:ee()}],ease:[{ease:["linear","in","out","in-out",se]}],delay:[{delay:ee()}],animate:[{animate:["none","spin","ping","pulse","bounce",se]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[$]}],"scale-x":[{"scale-x":[$]}],"scale-y":[{"scale-y":[$]}],rotate:[{rotate:[Os,se]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[O]}],"skew-y":[{"skew-y":[O]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",se]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",se]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",se]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Un,Er,_h]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},iV=VM(rV);function ze(...t){return iV(xT(t))}const oV=uM,sV=dM,TT=_.forwardRef(({className:t,children:e,...n},r)=>m.jsxs(lT,{ref:r,className:ze("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,m.jsx(hM,{asChild:!0,children:m.jsx(gT,{className:"h-4 w-4 opacity-50"})})]}));TT.displayName=lT.displayName;const IT=_.forwardRef(({className:t,...e},n)=>m.jsx(hT,{ref:n,className:ze("flex cursor-default items-center justify-center py-1",t),...e,children:m.jsx(TM,{className:"h-4 w-4"})}));IT.displayName=hT.displayName;const AT=_.forwardRef(({className:t,...e},n)=>m.jsx(fT,{ref:n,className:ze("flex cursor-default items-center justify-center py-1",t),...e,children:m.jsx(gT,{className:"h-4 w-4"})}));AT.displayName=fT.displayName;const kT=_.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>m.jsx(fM,{children:m.jsxs(cT,{ref:i,className:ze("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-white text-gray-900 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[m.jsx(IT,{}),m.jsx(pM,{className:ze("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),m.jsx(AT,{})]})}));kT.displayName=cT.displayName;const aV=_.forwardRef(({className:t,...e},n)=>m.jsx(uT,{ref:n,className:ze("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));aV.displayName=uT.displayName;const nn=_.forwardRef(({className:t,children:e,...n},r)=>m.jsxs(dT,{ref:r,className:ze("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[m.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:m.jsx(gM,{children:m.jsx(SM,{className:"h-4 w-4"})})}),m.jsx(mM,{children:e})]}));nn.displayName=dT.displayName;const lV=_.forwardRef(({className:t,...e},n)=>m.jsx(pT,{ref:n,className:ze("-mx-1 my-1 h-px bg-muted",t),...e}));lV.displayName=pT.displayName;const B={LONG_CALL:"LONG_CALL",COVERED_CALL:"COVERED_CALL",CASH_SECURED_PUT:"CASH_SECURED_PUT",COLLAR_STRATEGY:"COLLAR_STRATEGY",OPTIONS_THEORY:"OPTIONS_THEORY",PROTECTIVE_PUT:"PROTECTIVE_PUT",LONG_PUT:"LONG_PUT",LONG_CALL_SPREAD:"LONG_CALL_SPREAD",LONG_PUT_SPREAD:"LONG_PUT_SPREAD",FIG_LEAF:"FIG_LEAF"},vn={[B.LONG_CALL]:"Long Call",[B.COVERED_CALL]:"Covered Call",[B.CASH_SECURED_PUT]:"Cash Secured Put",[B.COLLAR_STRATEGY]:"Collar Strategy",[B.OPTIONS_THEORY]:"Options Theory",[B.PROTECTIVE_PUT]:"Protective Put",[B.LONG_PUT]:"Long Put",[B.LONG_CALL_SPREAD]:"Long Call Spread",[B.LONG_PUT_SPREAD]:"Long Put Spread",[B.FIG_LEAF]:"Fig Leaf"},cV={[B.LONG_CALL]:"Learn how to profit from stock price increases with limited risk using long call options.",[B.COVERED_CALL]:"Learn how to generate income by selling call options against stock you own.",[B.CASH_SECURED_PUT]:"Selling the Cash Secured Put obligates you to buy stock at strike price if the option is assigned.",[B.COLLAR_STRATEGY]:"Protect stock positions while generating income through a combined put and call strategy.",[B.OPTIONS_THEORY]:"Learn Stock Options",[B.PROTECTIVE_PUT]:"Purchasing a protective put gives you the right to sell stock you already own at strike price.",[B.LONG_PUT]:"Purchasing a put option, typically in anticipation of a decline in the underlying asset.",[B.LONG_CALL_SPREAD]:"Bullish strategy: Buy lower-strike call, sell higher-strike call. Limited risk and reward, cheaper than buying calls.",[B.LONG_PUT_SPREAD]:"A bearish options strategy that buys a put and sells a lower-strike put to reduce cost but caps profit",[B.FIG_LEAF]:"Fig Leaf strategy buys a deep ITM LEAPS call while selling short-term OTM calls against it, creating a leveraged covered call."},uV=({selectedStrategy:t,onStrategyChange:e})=>{const{isPremium:n}=Wm();return m.jsxs("div",{className:"space-y-4",children:[m.jsx("div",{className:"flex flex-col space-y-2",children:m.jsxs(oV,{value:t,onValueChange:r=>e(r),children:[m.jsx(TT,{className:"w-[280px]",children:m.jsx(sV,{placeholder:"Select a strategy"})}),m.jsxs(kT,{children:[m.jsx(nn,{value:B.OPTIONS_THEORY,children:vn[B.OPTIONS_THEORY]}),m.jsx(nn,{value:B.COVERED_CALL,children:vn[B.COVERED_CALL]}),m.jsxs(nn,{value:B.CASH_SECURED_PUT,children:[vn[B.CASH_SECURED_PUT]," ",!n&&"(Premium)"]}),m.jsxs(nn,{value:B.PROTECTIVE_PUT,children:[vn[B.PROTECTIVE_PUT]," ",!n&&"(Premium)"]}),m.jsxs(nn,{value:B.LONG_CALL,children:[vn[B.LONG_CALL]," ",!n&&"(Premium)"]}),m.jsxs(nn,{value:B.LONG_PUT,children:[vn[B.LONG_PUT]," ",!n&&"(Premium)"]}),m.jsxs(nn,{value:B.COLLAR_STRATEGY,children:[vn[B.COLLAR_STRATEGY]," ",!n&&"(Premium)"]}),m.jsxs(nn,{value:B.LONG_CALL_SPREAD,children:[vn[B.LONG_CALL_SPREAD]," ",!n&&"(Premium)"]}),m.jsxs(nn,{value:B.LONG_PUT_SPREAD,children:[vn[B.LONG_PUT_SPREAD]," ",!n&&"(Premium)"]}),m.jsxs(nn,{value:B.FIG_LEAF,children:[vn[B.FIG_LEAF]," ",!n&&"(Premium)"]})]})]})}),t&&m.jsx("p",{className:"text-sm text-gray-600",children:cV[t]})]})},tx=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,nx=xT,PT=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return nx(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:o}=e,s=Object.keys(i).map(u=>{const d=n==null?void 0:n[u],f=o==null?void 0:o[u];if(d===null)return null;const h=tx(d)||tx(f);return i[u][h]}),a=n&&Object.entries(n).reduce((u,d)=>{let[f,h]=d;return h===void 0||(u[f]=h),u},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:f,className:h,...y}=d;return Object.entries(y).every(E=>{let[x,T]=E;return Array.isArray(T)?T.includes({...o,...a}[x]):{...o,...a}[x]===T})?[...u,f,h]:u},[]);return nx(t,s,l,n==null?void 0:n.class,n==null?void 0:n.className)},dV=PT("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Mi=_.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},o)=>{const s=r?Yo:"button";return m.jsx(s,{className:ze(dV({variant:e,size:n,className:t})),ref:o,...i})});Mi.displayName="Button";const hV=()=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",className:"w-4 h-4 mr-2",children:[m.jsx("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),m.jsx("path",{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"}),m.jsx("path",{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}),m.jsx("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"}),m.jsx("path",{fill:"none",d:"M0 0h48v48H0z"})]}),fV=()=>{const{user:t,signInWithGoogle:e,logout:n}=cs();return m.jsx("div",{className:"flex items-center gap-4",children:t?m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("img",{src:t.photoURL,alt:t.displayName,className:"w-8 h-8 rounded-full"}),m.jsx("span",{className:"text-sm text-gray-700",children:t.displayName}),m.jsx(Mi,{onClick:n,variant:"outline",className:"text-sm",children:"Logout"})]}):m.jsxs(Mi,{onClick:e,className:"bg-white text-gray-600 border border-gray-300 hover:bg-gray-50",children:[m.jsx(hV,{}),"Sign in with Google"]})})};var RT="https://js.stripe.com/v3",pV=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,rx="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",mV=function(){for(var e=document.querySelectorAll('script[src^="'.concat(RT,'"]')),n=0;n<e.length;n++){var r=e[n];if(pV.test(r.src))return r}return null},ix=function(e){var n="",r=document.createElement("script");r.src="".concat(RT).concat(n);var i=document.head||document.body;if(!i)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(r),r},gV=function(e,n){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"5.4.0",startTime:n})},Ms=null,Yl=null,Xl=null,yV=function(e){return function(){e(new Error("Failed to load Stripe.js"))}},vV=function(e,n){return function(){window.Stripe?e(window.Stripe):n(new Error("Stripe.js not available"))}},xV=function(e){return Ms!==null?Ms:(Ms=new Promise(function(n,r){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe&&e&&console.warn(rx),window.Stripe){n(window.Stripe);return}try{var i=mV();if(i&&e)console.warn(rx);else if(!i)i=ix(e);else if(i&&Xl!==null&&Yl!==null){var o;i.removeEventListener("load",Xl),i.removeEventListener("error",Yl),(o=i.parentNode)===null||o===void 0||o.removeChild(i),i=ix(e)}Xl=vV(n,r),Yl=yV(r),i.addEventListener("load",Xl),i.addEventListener("error",Yl)}catch(s){r(s);return}}),Ms.catch(function(n){return Ms=null,Promise.reject(n)}))},wV=function(e,n,r){if(e===null)return null;var i=e.apply(void 0,n);return gV(i,r),i},Vs,$T=!1,bT=function(){return Vs||(Vs=xV(null).catch(function(e){return Vs=null,Promise.reject(e)}),Vs)};Promise.resolve().then(function(){return bT()}).catch(function(t){$T||console.warn(t)});var _V=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];$T=!0;var i=Date.now();return bT().then(function(o){return wV(o,n,i)})};const EV=_V("pk_test_51QZ41vGVXFEMO3WwuM00yaX8i8d24tRljolK8cEn9M2WMYlLx2flC6qCy2Qyido3Mr4re7ukhTmQ6OoyFDyxMQAk002uz5HTuW"),CV=async(t,e)=>{try{const n=await EV,{error:r}=await n.redirectToCheckout({lineItems:[{price:"price_1QZiAlGVXFEMO3Ww8XH3vqNS",quantity:1}],mode:"payment",successUrl:`${window.location.origin}/#/success?userId=${t}`,cancelUrl:`${window.location.origin}/`,customerEmail:e});if(r)throw console.error("Stripe error:",r),r}catch(n){throw console.error("Error initiating checkout:",n),n}},dr=_.forwardRef(({className:t,...e},n)=>m.jsx("div",{ref:n,className:ze("rounded-xl border bg-card text-card-foreground shadow",t),...e}));dr.displayName="Card";const Gi=_.forwardRef(({className:t,...e},n)=>m.jsx("div",{ref:n,className:ze("flex flex-col space-y-1.5 p-6",t),...e}));Gi.displayName="CardHeader";const Ki=_.forwardRef(({className:t,...e},n)=>m.jsx("h3",{ref:n,className:ze("font-semibold leading-none tracking-tight",t),...e}));Ki.displayName="CardTitle";const ig=_.forwardRef(({className:t,...e},n)=>m.jsx("p",{ref:n,className:ze("text-sm text-muted-foreground",t),...e}));ig.displayName="CardDescription";const hr=_.forwardRef(({className:t,...e},n)=>m.jsx("div",{ref:n,className:ze("p-6 pt-0",t),...e}));hr.displayName="CardContent";const SV=_.forwardRef(({className:t,...e},n)=>m.jsx("div",{ref:n,className:ze("flex items-center p-6 pt-0",t),...e}));SV.displayName="CardFooter";const TV=PT("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),rl=_.forwardRef(({className:t,variant:e,...n},r)=>m.jsx("div",{ref:r,role:"alert",className:ze(TV({variant:e}),t),...n}));rl.displayName="Alert";const NT=_.forwardRef(({className:t,...e},n)=>m.jsx("h5",{ref:n,className:ze("mb-1 font-medium leading-none tracking-tight",t),...e}));NT.displayName="AlertTitle";const il=_.forwardRef(({className:t,...e},n)=>m.jsx("div",{ref:n,className:ze("text-sm [&_p]:leading-relaxed",t),...e}));il.displayName="AlertDescription";const IV=()=>{const{user:t}=cs(),[e,n]=_.useState(!1),[r,i]=_.useState(null),o=async()=>{if(!t){i("Please sign in to continue");return}n(!0),i(null);try{console.log("Price ID:","price_1QZiAlGVXFEMO3Ww8XH3vqNS"),await CV(t.uid,t.email)}catch(s){console.error("Payment error:",s),i(s.message||"Unable to initiate checkout. Please try again."),n(!1)}};return m.jsxs(dr,{className:"max-w-md mx-auto",children:[m.jsx(Gi,{children:m.jsx(Ki,{children:"Upgrade to Premium Access"})}),m.jsx(hr,{className:"space-y-6",children:m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("h3",{className:"font-medium",children:"Premium Features Include:"}),m.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[m.jsx("li",{children:"Access to Advanced Options Strategies"}),m.jsx("li",{children:"Long Call Strategy"}),m.jsx("li",{children:"Cash Secured Put Strategy"}),m.jsx("li",{children:"Protective Put Strategy"}),m.jsx("li",{children:"Collar Strategy"}),m.jsx("li",{children:"Detailed Strategy-Specific Practice Scenarios"})]})]}),m.jsxs("div",{className:"text-center py-4",children:[m.jsx("span",{className:"text-3xl font-bold",children:"$4.99"}),m.jsx("span",{className:"text-gray-500 ml-2",children:"one-time payment"})]}),r&&m.jsx(rl,{variant:"destructive",className:"bg-red-50",children:m.jsx(il,{children:r})}),m.jsx(Mi,{onClick:o,className:"w-full bg-blue-600 hover:bg-blue-700 text-white",disabled:e,children:e?m.jsxs(m.Fragment,{children:[m.jsx(yT,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):"Upgrade Now"}),m.jsx("p",{className:"text-sm text-gray-500 text-center",children:"Secure payment powered by Stripe"})]})})]})},FT=_.forwardRef(({className:t,type:e,...n},r)=>m.jsx("input",{type:e,className:ze("flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));FT.displayName="Input";var AV="Label",LT=_.forwardRef((t,e)=>m.jsx(Ve.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));LT.displayName=AV;var OT=LT;const DT=_.forwardRef(({className:t,...e},n)=>m.jsx(OT,{ref:n,className:ze("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",t),...e}));DT.displayName=OT.displayName;const kV=async(t,e,n,r,i)=>{try{const o=YF(zm,"scores");await dL(o,{userId:t,score:e,totalQuestions:n,symbol:r,date:new Date,tradeDate:i})}catch(o){throw console.error("Error saving score:",o),o}},Dn=t=>{const e=[...t];for(let n=e.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[e[n],e[r]]=[e[r],e[n]]}return e},PV=(t,e,n,r,i,o,s)=>{const a=parseFloat(t),l=parseFloat(e),u=parseFloat(n),d=parseFloat(i),f=l+u,h=u*100,y=a*1.1,E=a*.9;return[{id:1,question:`If ${r} rises to $${y.toFixed(2)} (10% increase) before expiration, what would be your profit?`,options:[{text:`$${((y-l)*100-h).toFixed(2)}`,isCorrect:!0},{text:`$${h.toFixed(2)}`,isCorrect:!1},{text:`$${((y-l)*100).toFixed(2)}`,isCorrect:!1},{text:`$${((y-a)*100).toFixed(2)}`,isCorrect:!1}],explanation:`At $${y.toFixed(2)}, the profit is: (Stock Price - Strike Price)  100 shares - Premium Paid = ($${y.toFixed(2)} - $${l.toFixed(2)})  100 - $${h.toFixed(2)} = $${((y-l)*100-h).toFixed(2)}`},{id:2,question:`If ${r} drops to $${E.toFixed(2)} (10% decrease), what is your maximum loss?`,options:[{text:`$${((a-E)*100).toFixed(2)}`,isCorrect:!1},{text:`$${h.toFixed(2)}`,isCorrect:!0},{text:`$${(a*100).toFixed(2)}`,isCorrect:!1},{text:`$${((l-E)*100).toFixed(2)}`,isCorrect:!1}],explanation:`With a long call option, your maximum loss is limited to the premium paid ($${h.toFixed(2)}), no matter how low the stock price goes.`},{id:3,question:`For your ${r} call option, what is the break-even stock price at expiration?`,options:[{text:`$${a.toFixed(2)} (Current Price)`,isCorrect:!1},{text:`$${l.toFixed(2)} (Strike Price)`,isCorrect:!1},{text:`$${f.toFixed(2)} (Strike + Premium)`,isCorrect:!0},{text:`$${(l-u).toFixed(2)}`,isCorrect:!1}],explanation:`Break-even price at expiration = Strike Price + Premium per share = $${l.toFixed(2)} + $${u.toFixed(2)} = $${f.toFixed(2)}`},{id:4,question:`With ${r} currently at $${a.toFixed(2)}, what happens if the stock expires exactly at the strike price of $${l.toFixed(2)}?`,options:[{text:"You break even",isCorrect:!1},{text:`You lose $${h.toFixed(2)} (the premium paid)`,isCorrect:!0},{text:`You lose $${(h/2).toFixed(2)}`,isCorrect:!1},{text:"You make a small profit",isCorrect:!1}],explanation:`At expiration, if the stock price equals the strike price, the option expires at-the-money and worthless. You lose the entire premium paid ($${h.toFixed(2)}).`},{id:5,question:`On ${o}, ${r} closed at $${i}. What was your actual profit/loss on this trade?`,options:[{text:d>l?`Profit of $${((d-l)*100-h).toFixed(2)}`:`Loss of $${h.toFixed(2)}`,isCorrect:!0},{text:d>a?`Profit of $${((d-a)*100).toFixed(2)}`:`Loss of $${((a-d)*100).toFixed(2)}`,isCorrect:!1},{text:d>l?`Profit of $${((d-l)*100).toFixed(2)}`:`Loss of $${((l-d)*100).toFixed(2)}`,isCorrect:!1},{text:`Profit of $${h.toFixed(2)}`,isCorrect:!1}],explanation:d>l?`The stock closed above the strike price ($${l.toFixed(2)}), so your call option was in-the-money. Your profit calculation is:
           1. Option value at expiration = (Final Price - Strike Price)  100 shares
           2. Option value = ($${d.toFixed(2)} - $${l.toFixed(2)})  100 = $${((d-l)*100).toFixed(2)}
           3. Final P/L = Option value - Premium paid
           4. P/L = $${((d-l)*100).toFixed(2)} - $${h.toFixed(2)} = $${((d-l)*100-h).toFixed(2)}`:`The stock closed below the strike price ($${l.toFixed(2)}), so your call option expired worthless (out-of-the-money). In this case, you lose the entire premium paid: -$${h.toFixed(2)}. This is the maximum loss possible on a long call option.`},{id:6,question:`Between ${s} and ${o}, ${r} moved from $${a} to $${i}. What was your return on investment (ROI) for this call option trade?`,options:[{text:d>l?`Gain of ${(((d-l)*100-h)/h*100).toFixed(2)}% (based on premium invested)`:"Loss of 100% (total premium lost)",isCorrect:!0},{text:`${((d-a)/a*100).toFixed(2)}% (stock price return)`,isCorrect:!1},{text:d>l?`Gain of ${((d-l)/l*100).toFixed(2)}% (from strike price)`:`Loss of ${((l-d)/l*100).toFixed(2)}% (from strike price)`,isCorrect:!1},{text:d>l?`Gain of ${((d-a)/h*100).toFixed(2)}% (price change / premium)`:`Loss of ${((a-d)/h*100).toFixed(2)}% (price change / premium)`,isCorrect:!1}],explanation:d>l?`ROI = (Profit / Premium Paid)  100. With final value of $${((d-l)*100).toFixed(2)} and premium paid of $${h.toFixed(2)}, your ROI is ${(((d-l)*100-h)/h*100).toFixed(2)}%.`:`Since the option expired worthless, you lost your entire premium of $${h.toFixed(2)}, resulting in an ROI of -100%.`},{id:7,question:`Your ${r} long call with strike $${l.toFixed(2)} has gained value. The stock is at $${(l*1.15).toFixed(2)}, and your option can be sold for $${(l*.18).toFixed(2)} (original premium paid: $${u.toFixed(2)}). Should you close early?`,options:[{text:`Yes, lock in a profit of $${((l*.18-u)*100).toFixed(2)} now rather than risk time decay`,isCorrect:!0},{text:"No, hold until expiration for maximum profit potential",isCorrect:!1},{text:`No, wait for the stock to reach $${(l*1.25).toFixed(2)} first`,isCorrect:!1},{text:"Exercise the option immediately to own the shares",isCorrect:!1}],explanation:`With the option showing a profit of $${((l*.18-u)*100).toFixed(2)} (($${(l*.18).toFixed(2)} - $${u.toFixed(2)})  100), it's often wise to close early. This locks in gains and avoids theta decay, especially if implied volatility is high. Remember: you don't need to hold options to expiration to profit.`},{id:8,question:`Your ${r} call option has lost value, with the stock dropping to $${E.toFixed(2)}. The option now trades at $${(u*.4).toFixed(2)} (original premium: $${u.toFixed(2)}). What's the best action?`,options:[{text:`Sell the option to salvage $${(u*.4*100).toFixed(2)} of your initial investment`,isCorrect:!0},{text:"Hold until expiration hoping for recovery",isCorrect:!1},{text:"Buy another call to average down your cost",isCorrect:!1},{text:`Exercise the option to buy shares at $${l.toFixed(2)}`,isCorrect:!1}],explanation:`When a long call moves significantly out-of-the-money, selling to salvage remaining value ($${(u*.4*100).toFixed(2)}) can be prudent. This reduces your maximum loss from $${(u*100).toFixed(2)} to $${((u-u*.4)*100).toFixed(2)} and frees up capital for other opportunities.`},{id:9,question:`Your ${r} call has doubled in value due to increased volatility, trading at $${(u*2).toFixed(2)} (cost basis: $${u.toFixed(2)}). The stock price is still near $${(a*1.02).toFixed(2)}. What should you consider?`,options:[{text:`Sell the call to profit from the volatility spike, potential gain: $${(u*100).toFixed(2)}`,isCorrect:!0},{text:"Hold the position since the stock hasn't moved much",isCorrect:!1},{text:"Buy more calls at the higher premium",isCorrect:!1},{text:"Exercise the option early",isCorrect:!1}],explanation:`When implied volatility causes your option to double in value without significant stock movement, it's often profitable to sell. You're capturing $${(u*100).toFixed(2)} profit from volatility expansion alone, which could decrease even if the stock moves favorably later.`},{id:10,question:`You bought a ${r} $${l.toFixed(2)} call for $${u.toFixed(2)}. Now the stock is at $${(l*1.1).toFixed(2)}, and a major earnings report is coming. The call is worth $${(u*1.8).toFixed(2)}. What's the strategic consideration?`,options:[{text:`Sell before earnings to lock in $${((u*1.8-u)*100).toFixed(2)} profit and avoid earnings volatility risk`,isCorrect:!0},{text:"Hold through earnings for potentially larger gains",isCorrect:!1},{text:"Exercise the option before earnings",isCorrect:!1},{text:"Buy more calls to increase potential earnings gains",isCorrect:!1}],explanation:`With a profit of $${((u*1.8-u)*100).toFixed(2)} before earnings, selling is often prudent. Earnings events can cause dramatic moves in both stock price and volatility. Even if the stock rises, your option could lose value if implied volatility drops post-earnings (volatility crush).`}]},RV=(t,e,n,r,i,o,s)=>(console.log("Generating questions with:",{stockPrice:t,strikePrice:e,premium:n,symbol:r,futurePrice:i,expirationDate:o,selectedDate:s}),PV(t,e,n,r,i,o,s).map(l=>{const u=Dn(l.options),d=u.findIndex(f=>f.isCorrect);return{id:l.id,question:l.question,options:u.map(f=>f.text),correctAnswer:d,explanation:l.explanation}})),$V=(t,e,n,r,i,o,s)=>{const a=parseFloat(t),l=parseFloat(e),u=parseFloat(n),d=parseFloat(i),f=a*1.1,h=a*.9,y=u*.3,E=(u-y)*100;return[{id:1,question:`For a covered call on ${r}, you own 100 shares at $${a} and sell a $${l} call for $${u} premium. What's your maximum profit if the stock is called away?`,options:[{text:`$${((l-a)*100+u*100).toFixed(2)}`,isCorrect:!0},{text:`$${(u*100).toFixed(2)}`,isCorrect:!1},{text:`$${((l-a)*100).toFixed(2)}`,isCorrect:!1},{text:`$${(l*100).toFixed(2)}`,isCorrect:!1}],explanation:`Maximum profit = (Strike Price - Purchase Price)  100 + Premium = ($${l} - $${a})  100 + $${(u*100).toFixed(2)} = $${((l-a)*100+u*100).toFixed(2)}`},{id:2,question:`You bought ${r} at $${a} and sold a $${l} call for $${u} premium. If ${r} drops to $${(a*.8).toFixed(2)} at expiration, what's your actual loss per share compared to just holding the stock?`,options:[{text:`$${(a*.8-(a-u)).toFixed(2)} loss with covered call vs $${(a*.8-a).toFixed(2)} loss with stock only`,isCorrect:!0},{text:`$${(a*.8-a).toFixed(2)} loss for both strategies`,isCorrect:!1},{text:`$${u.toFixed(2)} profit with covered call vs $${(a*.8-a).toFixed(2)} loss with stock only`,isCorrect:!1},{text:`$${(a-a*.8).toFixed(2)} loss for both strategies`,isCorrect:!1}],explanation:`With a covered call, your cost basis is reduced from $${a} to $${(a-u).toFixed(2)} due to the premium received. At $${(a*.8).toFixed(2)}, your actual loss is $${(a*.8-(a-u)).toFixed(2)} per share. Without the covered call, you would lose $${(a*.8-a).toFixed(2)} per share. The premium received ($${u}) provides this much downside protection.`},{id:3,question:`If ${r} rises to $${d.toFixed(2)} by ${o}, what happens to your covered call position?`,options:[{text:`Your shares will be called away at $${l.toFixed(2)}, and you'll keep the $${(u*100).toFixed(2)} premium`,isCorrect:d>l},{text:`The option expires worthless, and you keep your shares and the $${(u*100).toFixed(2)} premium`,isCorrect:d<=l},{text:"You must buy back the option at a loss",isCorrect:!1},{text:"You can exercise your option",isCorrect:!1}],explanation:d>l?`Since the stock price ($${d.toFixed(2)}) is above the strike price ($${l.toFixed(2)}), your shares will be called away, but you keep the premium.`:`Since the stock price ($${d.toFixed(2)}) is below the strike price ($${l.toFixed(2)}), the option expires worthless and you keep both shares and premium.`},{id:4,question:`On ${s}, what's your break-even price point for this covered call position in ${r}?`,options:[{text:`$${(a-u).toFixed(2)}`,isCorrect:!0},{text:`$${a.toFixed(2)}`,isCorrect:!1},{text:`$${l.toFixed(2)}`,isCorrect:!1},{text:`$${(l+u).toFixed(2)}`,isCorrect:!1}],explanation:`Break-even = Stock Purchase Price - Premium Received = $${a.toFixed(2)} - $${u.toFixed(2)} = $${(a-u).toFixed(2)}`},{id:5,question:`What's your maximum potential loss on this ${r} covered call position?`,options:[{text:`$${((a-u)*100).toFixed(2)}`,isCorrect:!0},{text:`$${(u*100).toFixed(2)}`,isCorrect:!1},{text:`$${(a*100).toFixed(2)}`,isCorrect:!1},{text:"Unlimited loss",isCorrect:!1}],explanation:`Maximum loss occurs if stock goes to zero: (Stock price - Premium)  100 = ($${a.toFixed(2)} - $${u.toFixed(2)})  100 = $${((a-u)*100).toFixed(2)}. The premium received reduces your potential loss.`},{id:6,question:`If ${r} changes from $${a.toFixed(2)} to $${Math.min(l-.01,f).toFixed(2)} (below the $${l} strike price), compare your returns: holding 100 shares versus a covered call strategy that collects $${(u*100).toFixed(2)} premium.`,options:[{text:`Stock only: $${((Math.min(l-.01,f)-a)*100).toFixed(2)} profit vs. Covered Call: $${((Math.min(l-.01,f)-a)*100+u*100).toFixed(2)} profit`,isCorrect:!0},{text:`Both strategies would earn $${((Math.min(l-.01,f)-a)*100).toFixed(2)}`,isCorrect:!1},{text:`Stock only: $${((Math.min(l-.01,f)-a)*100).toFixed(2)} profit vs. Covered Call: $${(u*100).toFixed(2)} profit`,isCorrect:!1},{text:`Stock only: $${(Math.min(l-.01,f)*100).toFixed(2)} profit vs. Covered Call: $${(l*100+u*100).toFixed(2)} profit`,isCorrect:!1}],explanation:`With stock only, your profit is the price increase: ($${Math.min(l-.01,f).toFixed(2)} - $${a.toFixed(2)})  100 = $${((Math.min(l-.01,f)-a)*100).toFixed(2)}. With a covered call, you keep both this stock appreciation AND the premium collected: $${((Math.min(l-.01,f)-a)*100).toFixed(2)} + $${(u*100).toFixed(2)} = $${((Math.min(l-.01,f)-a)*100+u*100).toFixed(2)}. This shows how covered calls can enhance returns when the stock price rises but stays below the strike price.`},{id:7,question:`${r} drops to $${h.toFixed(2)} halfway to expiration, and your sold call is now worth $${y.toFixed(2)}. Should you consider buying back the call?`,options:[{text:`Yes, buy it back and save $${E.toFixed(2)} in premium, potentially reselling a new call later`,isCorrect:!0},{text:"No, keep the original position as the stock might recover",isCorrect:!1},{text:"No, the loss on the stock negates any benefit from the call",isCorrect:!1},{text:"Yes, buy it back and sell the stock immediately",isCorrect:!1}],explanation:`With the stock down significantly, the call option's value has decreased to $${y.toFixed(2)}. Buying it back saves $${E.toFixed(2)} of the original premium, and you could potentially sell another call at a lower strike price to generate new premium income.`},{id:8,question:`In the scenario where ${r} drops to $${h.toFixed(2)}, let's analyze the covered call management. You originally sold the call for $${u.toFixed(2)} (premium received = $${(u*100).toFixed(2)}) and can now buy it back for $${y.toFixed(2)} (cost = $${(y*100).toFixed(2)}). What's the return on investment (ROI) if you buy back the call?`,options:[{text:`${(E/(u*100)*100).toFixed(2)}% on the option component ($${E.toFixed(2)} profit / $${(u*100).toFixed(2)} initial premium)`,isCorrect:!0},{text:`${((h-a)/a*100).toFixed(2)}% (stock loss only: $${((h-a)*100).toFixed(2)})`,isCorrect:!1},{text:`${((h-a+u)/a*100).toFixed(2)}% (stock loss plus original premium: $${((h-a)*100+u*100).toFixed(2)})`,isCorrect:!1},{text:"0% as the loss on stock offsets option gains",isCorrect:!1}],explanation:`Let's break down the ROI calculation:
1. Original premium received: $${(u*100).toFixed(2)}
2. Buy-back cost: $${(y*100).toFixed(2)}
3. Premium saved/profit: $${E.toFixed(2)}
4. ROI = (Premium Saved / Original Premium)  100
   = ($${E.toFixed(2)} / $${(u*100).toFixed(2)})  100
   = ${(E/(u*100)*100).toFixed(2)}%

While the stock position shows a loss of ${((h-a)/a*100).toFixed(2)}%, managing the option position independently has resulted in a profit on the option component.`},{id:9,question:`If you buy back the ${r} call for $${y.toFixed(2)} when the stock is at $${h.toFixed(2)}, and you believe the stock will remain range-bound between $${(h*.95).toFixed(2)} and $${(h*1.05).toFixed(2)} for the next month, what's the most appropriate action to maximize income while holding the stock?`,options:[{text:`Sell a new covered call at a lower strike price (around $${(h*1.02).toFixed(2)}) to generate additional premium while the stock trades sideways`,isCorrect:!0},{text:`Wait for the stock to recover to $${a.toFixed(2)} before selling another call, missing out on potential premium in the meantime`,isCorrect:!1},{text:`Sell the stock immediately at $${h.toFixed(2)} and take the loss`,isCorrect:!1},{text:"Buy another call option, which would increase your risk and cost basis",isCorrect:!1}],explanation:`Given the expectation of range-bound trading, selling a new covered call at a lower strike price (around $${(h*1.02).toFixed(2)}) is optimal because: 1. It generates immediate premium income to help offset the stock decline. 2. With sideways trading expected, the new premium has a high probability of being retained. 3. The lower strike price reflects the new trading range while still allowing for some upside. 4. If the stock does recover sharply, you can manage the position again by rolling up. This strategy maximizes income potential while maintaining the position in a sideways market.`},{id:10,question:`For ${r}, you bought shares at $${a.toFixed(2)} and sold a call at strike $${l.toFixed(2)} for $${u.toFixed(2)} premium. The stock rises sharply to $${(l*1.2).toFixed(2)} (20% above strike), and the call now costs $${(l*.22).toFixed(2)} to buy back. What should you do?`,options:[{text:`Buy back the call despite a $${((l*.22-u)*100).toFixed(2)} loss to capture the stock's upside potential`,isCorrect:!0},{text:`Let the shares be called away at $${l.toFixed(2)}, limiting your profit to $${((l-a+u)*100).toFixed(2)}`,isCorrect:!1},{text:`Sell the stock at $${(l*1.2).toFixed(2)} while keeping the short call open`,isCorrect:!1},{text:"Wait until expiration, since the premium received offsets any lost stock gains",isCorrect:!1}],explanation:`When a stock shows strong upward momentum, it may be worth buying back the call even at a loss. Here, letting the stock be called away limits your profit to $${((l-a+u)*100).toFixed(2)}, while buying back the call for a $${((l*.22-u)*100).toFixed(2)} loss allows you to capture all future gains above $${(l*1.2).toFixed(2)}. The loss on the call could be recovered by just a small additional move higher in the stock.`}]},bV=(t,e,n,r,i,o,s)=>(console.log("Generating questions with:",{stockPrice:t,strikePrice:e,premium:n,symbol:r,futurePrice:i,expirationDate:o,selectedDate:s}),$V(t,e,n,r,i,o,s).map(l=>{const u=Dn(l.options),d=u.findIndex(f=>f.isCorrect);return{id:l.id,question:l.question,options:u.map(f=>f.text),correctAnswer:d,explanation:l.explanation}})),NV=(t,e,n,r,i,o,s)=>{const a=parseFloat(t),l=parseFloat(e),u=parseFloat(n),d=parseFloat(i),f=l+u,h=100,y=u*h;return[{id:1,question:`For ${r} trading at $${a}, which best describes your rights if you buy a call option with strike price $${l}?`,options:[{text:`Right to buy ${r} at $${l} regardless of how high the stock price goes`,isCorrect:!0},{text:`Obligation to buy ${r} at $${l} if the stock goes up`,isCorrect:!1},{text:`Right to sell ${r} at $${l} if the stock goes down`,isCorrect:!1},{text:`Right to buy ${r} at $${a} anytime before expiration`,isCorrect:!1}],explanation:`When buying a call option on ${r}, you have the right (but not obligation) to buy the stock at the strike price of $${l}, even if the stock price rises significantly above this level. Your maximum loss is limited to the premium paid of $${y.toFixed(2)}.`},{id:2,question:`If ${r} is trading at $${a} now, when would the $${l} call option be considered in-the-money (ITM)?`,options:[{text:`When ${r} trades above $${l}`,isCorrect:!0},{text:`When ${r} trades below $${l}`,isCorrect:!1},{text:`When ${r} trades exactly at $${l}`,isCorrect:!1},{text:`When ${r} trades above $${f.toFixed(2)}`,isCorrect:!1}],explanation:`A call option is in-the-money when the stock price is above the strike price. For this ${r} option, any price above $${l} means the option has intrinsic value, though you need the price above $${f.toFixed(2)} to be profitable after considering the premium paid.`},{id:3,question:`Given the $${n} premium for this ${r} option, what's the break-even price at expiration?`,options:[{text:`$${f.toFixed(2)}`,isCorrect:!0},{text:`$${l}`,isCorrect:!1},{text:`$${a}`,isCorrect:!1},{text:`$${(l-u).toFixed(2)}`,isCorrect:!1}],explanation:`The break-even price for a call option at expiration is the strike price ($${l}) plus the premium paid per share ($${n}), which equals $${f.toFixed(2)}. At this price, the intrinsic value exactly equals the premium paid.`},{id:4,question:`If you sell a put option on ${r} with a $${l} strike price, what is your obligation?`,options:[{text:`To buy ${r} at $${l} if assigned, requiring $${(l*h).toFixed(2)} in cash`,isCorrect:!0},{text:`To sell ${r} at $${l} if the stock price rises`,isCorrect:!1},{text:`To pay the difference if ${r} falls below $${l}`,isCorrect:!1},{text:`To buy ${r} at the market price if assigned`,isCorrect:!1}],explanation:`When selling a put option on ${r}, you are obligated to buy 100 shares at the strike price ($${l}) if assigned, requiring $${(l*h).toFixed(2)} in cash. This is true regardless of how low the stock price might fall.`},{id:5,question:`For the ${r} option expiring on ${o}, what happens to the time value portion of the $${n} premium as we approach expiration?`,options:[{text:"Time value consistently decreases as expiration approaches",isCorrect:!0},{text:"Time value increases as expiration approaches",isCorrect:!1},{text:"Time value stays constant until expiration day",isCorrect:!1},{text:"Time value fluctuates randomly until expiration",isCorrect:!1}],explanation:`The time value portion of your $${n} premium will decay (decrease) as we approach the ${o} expiration, with the decay accelerating in the final weeks. At expiration, only intrinsic value (if any) remains.`},{id:6,question:`If implied volatility increases after you buy the ${r} $${l} call option for $${n}, what typically happens to the option's price?`,options:[{text:"The option's price typically increases",isCorrect:!0},{text:"The option's price typically decreases",isCorrect:!1},{text:"The option's price remains unchanged",isCorrect:!1},{text:"The option's intrinsic value changes",isCorrect:!1}],explanation:`An increase in implied volatility typically increases the option's price, assuming all other factors remain constant. This would increase the time value portion of your ${r} option above the initial $${n} premium paid.`},{id:7,question:`What is the maximum possible loss when buying this ${r} call option with $${l} strike price?`,options:[{text:`$${y.toFixed(2)} (the total premium paid)`,isCorrect:!0},{text:`$${(l*h).toFixed(2)} (the strike price value)`,isCorrect:!1},{text:`$${(a*h).toFixed(2)} (the current stock value)`,isCorrect:!1},{text:"Unlimited loss potential",isCorrect:!1}],explanation:`When buying this call option on ${r}, your maximum loss is limited to the total premium paid of $${y.toFixed(2)} ($${n}  100 shares). This occurs if the stock is below $${l} at expiration.`},{id:8,question:`On ${o}, ${r} closed at $${i}. What term describes the $${l} call option's status?`,options:[{text:d>l?"In-the-money (ITM)":d<l?"Out-of-the-money (OTM)":"At-the-money (ATM)",isCorrect:!0},{text:d>l?"Out-of-the-money (OTM)":"In-the-money (ITM)",isCorrect:!1},{text:"Equal-to-the-money",isCorrect:!1},{text:d>f?"Profitable":"Unprofitable",isCorrect:!1}],explanation:`With ${r} closing at $${i} and the strike at $${l}, the option was ${d>l?"in-the-money by $"+(d-l).toFixed(2)+" per share":d<l?"out-of-the-money by $"+(l-d).toFixed(2)+" per share":"exactly at-the-money"}.`},{id:9,question:`From ${s} to ${o}, ${r} moved from $${a} to $${i}. What was the better choice?`,options:[{text:(()=>{const E=(d-a)*h,x=d>l?(d-l-u)*h:-y;return Math.abs(E)<Math.abs(x)||E>x?`Buying the stock directly (${E>=0?"profit":"loss"}: $${Math.abs(E).toFixed(2)})`:`Buying the call option (${x>=0?"profit":"loss"}: $${Math.abs(x).toFixed(2)})`})(),isCorrect:!0},{text:(()=>{const E=(d-a)*h,x=d>l?(d-l-u)*h:-y;return Math.abs(E)<Math.abs(x)||E>x?`Buying the call option (${x>=0?"profit":"loss"}: $${Math.abs(x).toFixed(2)})`:`Buying the stock directly (${E>=0?"profit":"loss"}: $${Math.abs(E).toFixed(2)})`})(),isCorrect:!1},{text:"Neither - staying in cash",isCorrect:!1},{text:"Both would have the same profit",isCorrect:!1}],explanation:`With ${r} moving from $${a} to $${i}:
    Stock P/L: ${(d-a)*h>=0?"Profit":"Loss"} of $${Math.abs((d-a)*h).toFixed(2)}
    Option P/L: ${d>l?`Profit of $${((d-l-u)*h).toFixed(2)}`:`Loss of $${y.toFixed(2)}`}
    
    In this case, ${Math.abs((d-a)*h)<Math.abs(d>l?(d-l-u)*h:-y)?"the stock position":"the options position"} had a smaller loss, making it the better choice.`},{id:10,question:`For your ${r} $${l} call option trading at $${u}, which statement best describes the impact of time value?`,options:[{text:l>a?`Since the option is out-of-the-money by $${(l-a).toFixed(2)}, time value represents 100% of the premium`:`With the option in-the-money by $${(a-l).toFixed(2)}, part of the premium is intrinsic value`,isCorrect:!0},{text:l>a?`The option has equal parts of time value and intrinsic value at $${(u/2).toFixed(2)} each`:"Time value and intrinsic value are always equal for in-the-money options",isCorrect:!1},{text:`Time value doesn't matter since expiration is ${Math.round((new Date(o)-new Date(s))/(1e3*60*60*24))} days away`,isCorrect:!1},{text:`Time value is only relevant if the stock price exceeds $${(a*1.1).toFixed(2)}`,isCorrect:!1}],explanation:l>a?`With ${r} at $${a} and the strike at $${l}, this call option is out-of-the-money. The entire premium of $${u} is time value, which will decay as expiration approaches. If the stock doesn't rise above $${l} by expiration, all time value will be lost.`:`With ${r} at $${a} and the strike at $${l}, this call has intrinsic value of $${(a-l).toFixed(2)} and time value of $${(u-(a-l)).toFixed(2)}. While intrinsic value remains as long as the stock stays above the strike, time value will decay to zero by expiration.`}]},FV=(t,e,n,r,i,o,s)=>(console.log("Generating questions with:",{stockPrice:t,strikePrice:e,premium:n,symbol:r,futurePrice:i,expirationDate:o,selectedDate:s}),NV(t,e,n,r,i,o,s).map(l=>{const u=Dn(l.options),d=u.findIndex(f=>f.isCorrect);return{id:l.id,question:l.question,options:u.map(f=>f.text),correctAnswer:d,explanation:l.explanation}})),LV=(t,e,n,r,i,o,s)=>{const a=parseFloat(t),l=parseFloat(e),u=a*.9,d=parseFloat(n),f=parseFloat(n)*.8,h=parseFloat(i),y=f-d,E=l-a-y,x=a-u+y;return[{id:1,question:`You establish a collar on ${r} at $${a.toFixed(2)} by buying a put at $${u.toFixed(2)} and selling a call at $${l.toFixed(2)}. What's your maximum possible profit?`,options:[{text:`$${E.toFixed(2)}`,isCorrect:!0},{text:`$${(l-a).toFixed(2)}`,isCorrect:!1},{text:"Unlimited profit",isCorrect:!1},{text:`$${(u-a).toFixed(2)}`,isCorrect:!1}],explanation:`The maximum profit is limited to the call strike ($${l.toFixed(2)}) minus current stock price ($${a.toFixed(2)}) minus the net debit ($${y.toFixed(2)}) = $${E.toFixed(2)}`},{id:2,question:`For your ${r} collar, what is your maximum potential loss?`,options:[{text:`$${x.toFixed(2)}`,isCorrect:!0},{text:"Unlimited loss",isCorrect:!1},{text:`$${(a-u).toFixed(2)}`,isCorrect:!1},{text:`$${f.toFixed(2)}`,isCorrect:!1}],explanation:`The maximum loss is limited to the current stock price ($${a.toFixed(2)}) minus put strike ($${u.toFixed(2)}) plus the net debit ($${y.toFixed(2)}) = $${x.toFixed(2)}`},{id:3,question:`On ${r}, you paid $${f.toFixed(2)} for the put and received $${d.toFixed(2)} for the call. What was the net cost of establishing this collar?`,options:[{text:`Net debit of $${y.toFixed(2)}`,isCorrect:!0},{text:`Net credit of $${(d-f).toFixed(2)}`,isCorrect:!1},{text:`$${(f+d).toFixed(2)}`,isCorrect:!1},{text:"$0 (Zero-cost collar)",isCorrect:!1}],explanation:`The net cost is the put premium paid ($${f.toFixed(2)}) minus the call premium received ($${d.toFixed(2)}) = Net debit of $${y.toFixed(2)}`},{id:4,question:`At expiration, ${r} is at $${h.toFixed(2)}. What happened to your position?`,options:[{text:h>l?`Stock was called away at $${l.toFixed(2)}`:h<u?`Put protection kicked in at $${u.toFixed(2)}`:"Stock was retained, both options expired worthless",isCorrect:!0},{text:"You must sell the stock at market price",isCorrect:!1},{text:"You must buy more stock",isCorrect:!1},{text:"You lost both the stock and the premium",isCorrect:!1}],explanation:h>l?`Since the stock price ($${h.toFixed(2)}) exceeded the call strike ($${l.toFixed(2)}), your stock was called away at the strike price`:h<u?`Since the stock price ($${h.toFixed(2)}) fell below the put strike ($${u.toFixed(2)}), your put protection limited your losses`:`The stock price ($${h.toFixed(2)}) stayed between your put strike ($${u.toFixed(2)}) and call strike ($${l.toFixed(2)}), so both options expired worthless`},{id:5,question:`What is your profit/loss on ${r} at the current price of $${h.toFixed(2)}?`,options:[{text:`$${(h>l?E:h<u?-x:h-a-y).toFixed(2)}`,isCorrect:!0},{text:`$${(h-a).toFixed(2)}`,isCorrect:!1},{text:`$${(u-a).toFixed(2)}`,isCorrect:!1},{text:`$${y.toFixed(2)}`,isCorrect:!1}],explanation:h>l?`Stock was called away, resulting in maximum profit of $${E.toFixed(2)}`:h<u?`Put protection limited your loss to $${x.toFixed(2)}`:`Stock price movement ($${(h-a).toFixed(2)}) minus net debit ($${y.toFixed(2)}) = $${(h-a-y).toFixed(2)}`},{id:6,question:`If ${r} drops by 15% to $${(a*.85).toFixed(2)}, how does your collar compare to just owning the stock?`,options:[{text:`Collar limits loss to $${x.toFixed(2)} vs stock loss of $${(a*.15).toFixed(2)}`,isCorrect:!0},{text:"Both strategies lose the same amount",isCorrect:!1},{text:"Collar loses more due to premium paid",isCorrect:!1},{text:"Cannot be determined",isCorrect:!1}],explanation:`With just stock ownership, a 15% drop means a loss of $${(a*.15).toFixed(2)}. The collar's put strike at $${u.toFixed(2)} limits your loss to $${x.toFixed(2)}`}]},OV=(t,e,n,r,i,o,s)=>(console.log("Generating Collar Strategy questions with:",{stockPrice:t,strikePrice:e,premium:n,symbol:r,futurePrice:i,expirationDate:o,selectedDate:s}),LV(t,e,n,r,i).map(l=>{const u=Dn(l.options),d=u.findIndex(f=>f.isCorrect);return{id:l.id,question:l.question,options:u.map(f=>f.text),correctAnswer:d,explanation:l.explanation}})),DV=(t,e,n,r,i,o,s)=>{const a=parseFloat(t),l=parseFloat(e),u=parseFloat(n),d=parseFloat(i),f=l-u,h=u*100,y=a*.9,E=l*100;return[{id:1,question:`You sold a cash secured put on ${r} with strike $${l} for $${u} premium. What is your break-even price?`,options:[{text:`$${f.toFixed(2)}`,isCorrect:!0},{text:`$${l.toFixed(2)}`,isCorrect:!1},{text:`$${(l+u).toFixed(2)}`,isCorrect:!1},{text:`$${a.toFixed(2)}`,isCorrect:!1}],explanation:`Break-even = Strike Price - Premium = $${l.toFixed(2)} - $${u.toFixed(2)} = $${f.toFixed(2)}. This is the price below which you start losing money if assigned.`},{id:2,question:`How much cash must you have secured for this ${r} put option?`,options:[{text:`$${E.toFixed(2)}`,isCorrect:!0},{text:`$${(E-h).toFixed(2)}`,isCorrect:!1},{text:`$${(a*100).toFixed(2)}`,isCorrect:!1},{text:`$${h.toFixed(2)}`,isCorrect:!1}],explanation:`You must secure $${E.toFixed(2)} (Strike Price  100 shares) to cover potential assignment, regardless of the premium received.`},{id:3,question:`If ${r} drops to $${y.toFixed(2)} halfway to expiration, what's your unrealized loss if assigned?`,options:[{text:`$${((l-y-u)*100).toFixed(2)}`,isCorrect:!0},{text:`$${((l-y)*100).toFixed(2)}`,isCorrect:!1},{text:`$${h.toFixed(2)}`,isCorrect:!1},{text:`$${((a-y)*100).toFixed(2)}`,isCorrect:!1}],explanation:`Your loss would be: (Strike Price - Current Price - Premium)  100 = ($${l.toFixed(2)} - $${y.toFixed(2)} - $${u.toFixed(2)})  100 = $${((l-y-u)*100).toFixed(2)}.`},{id:4,question:`${r} is now at $${y.toFixed(2)}. Should you consider closing the position early?`,options:[{text:"Yes, to avoid potential further losses if stock continues dropping",isCorrect:!0},{text:"No, always hold until expiration to keep full premium",isCorrect:!1},{text:"No, the loss is just on paper",isCorrect:!1},{text:"Yes, and sell another put at a lower strike",isCorrect:!1}],explanation:"With the stock below your strike price, closing early can prevent larger losses if the stock continues to fall. Managing risk is often more important than maximizing premium."},{id:5,question:`What's your maximum potential gain on this ${r} cash secured put?`,options:[{text:`$${h.toFixed(2)}`,isCorrect:!0},{text:`$${E.toFixed(2)}`,isCorrect:!1},{text:`$${(l*100).toFixed(2)}`,isCorrect:!1},{text:"Unlimited gain",isCorrect:!1}],explanation:`Maximum gain is limited to the premium received: $${u.toFixed(2)}  100 shares = $${h.toFixed(2)}. This occurs if the stock stays above the strike price.`},{id:6,question:`If ${r} expires at $${d.toFixed(2)}, will you be assigned shares?`,options:[{text:`Yes, you'll buy 100 shares at $${l.toFixed(2)} per share`,isCorrect:d<l},{text:"No, you keep the premium and avoid assignment",isCorrect:d>=l},{text:"Maybe, it depends on the buyer's decision",isCorrect:!1},{text:"No, you can choose to decline assignment",isCorrect:!1}],explanation:d<l?`Since $${d.toFixed(2)} is below the strike price of $${l.toFixed(2)}, you'll be assigned and must buy 100 shares at the strike price.`:`Since $${d.toFixed(2)} is above the strike price of $${l.toFixed(2)}, the put expires worthless and you keep the full premium.`},{id:7,question:`What's your return on investment (ROI) if ${r} stays above $${l.toFixed(2)} until expiration?`,options:[{text:`${(h/E*100).toFixed(2)}%`,isCorrect:!0},{text:`${(h/(a*100)*100).toFixed(2)}%`,isCorrect:!1},{text:`${(u/l*100).toFixed(2)}%`,isCorrect:!1},{text:"100%",isCorrect:!1}],explanation:`ROI = (Premium / Cash Secured)  100 = ($${h.toFixed(2)} / $${E.toFixed(2)})  100 = ${(h/E*100).toFixed(2)}%. This represents return on the cash you must set aside.`},{id:8,question:`If ${r} drops significantly below your put strike of $${l.toFixed(2)}, which action might be best?`,options:[{text:"Close the position and preserve capital",isCorrect:!0},{text:"Wait for assignment no matter what",isCorrect:!1},{text:"Sell another put at a lower strike",isCorrect:!1},{text:"Buy shares at market price",isCorrect:!1}],explanation:"When a stock drops significantly below your put strike, closing the position can prevent larger losses and free up capital for better opportunities. The premium received doesn't justify holding a losing position indefinitely."},{id:9,question:`How does your cost basis compare to the current market price if ${r} gets assigned at $${l.toFixed(2)}?`,options:[{text:`$${f.toFixed(2)} vs market price of $${d.toFixed(2)}`,isCorrect:!0},{text:`$${l.toFixed(2)} vs market price of $${d.toFixed(2)}`,isCorrect:!1},{text:`$${a.toFixed(2)} vs market price of $${d.toFixed(2)}`,isCorrect:!1},{text:`$${(l+u).toFixed(2)} vs market price of $${d.toFixed(2)}`,isCorrect:!1}],explanation:`Your effective cost basis is the strike price minus the premium received ($${f.toFixed(2)}). This is what you compare to the market price to determine your position's profit or loss.`},{id:10,question:`What percentage of your cash secured amount ($${E.toFixed(2)}) are you risking if ${r} goes to zero?`,options:[{text:`${((l-u)/l*100).toFixed(2)}%`,isCorrect:!0},{text:"100%",isCorrect:!1},{text:`${(u/l*100).toFixed(2)}%`,isCorrect:!1},{text:"0%",isCorrect:!1}],explanation:`Maximum risk is strike price minus premium ($${(l-u).toFixed(2)} per share or $${((l-u)*100).toFixed(2)} total), which is ${((l-u)/l*100).toFixed(2)}% of your secured cash. The premium received slightly reduces your total risk.`}]},MV=(t,e,n,r,i,o,s)=>(console.log("Generating Cash Secured Put questions with:",{stockPrice:t,strikePrice:e,premium:n,symbol:r,futurePrice:i,expirationDate:o,selectedDate:s}),DV(t,e,n,r,i).map(l=>{const u=Dn(l.options),d=u.findIndex(f=>f.isCorrect);return{id:l.id,question:l.question,options:u.map(f=>f.text),correctAnswer:d,explanation:l.explanation}})),VV=(t,e,n,r,i,o,s)=>{const a=parseFloat(t),l=parseFloat(e),u=parseFloat(n),d=parseFloat(i),f=(a-l+u)*100,h=a*.8,y=a*1.1;return[{id:1,question:`You own 100 shares of ${r} at $${a.toFixed(2)} and buy a protective put at strike $${l.toFixed(2)} for $${u.toFixed(2)}. What's your maximum possible loss per share?`,options:[{text:`$${(a-l+u).toFixed(2)}`,isCorrect:!0},{text:`$${a.toFixed(2)}`,isCorrect:!1},{text:`$${u.toFixed(2)}`,isCorrect:!1},{text:`$${l.toFixed(2)}`,isCorrect:!1}],explanation:`Your maximum loss is limited to the difference between your stock purchase price ($${a.toFixed(2)}) and the put strike price ($${l.toFixed(2)}), plus the premium paid ($${u.toFixed(2)}). This equals $${(a-l+u).toFixed(2)} per share.`},{id:2,question:`If ${r} crashes to $${h.toFixed(2)} (20% drop), how much protection does your protective put provide?`,options:[{text:`$${((l-h)*100).toFixed(2)}`,isCorrect:!0},{text:`$${((a-h)*100).toFixed(2)}`,isCorrect:!1},{text:`$${(u*100).toFixed(2)}`,isCorrect:!1},{text:"$0.00",isCorrect:!1}],explanation:`The protective put allows you to sell at $${l.toFixed(2)} even though the market price is $${h.toFixed(2)}. This provides protection of $${((l-h)*100).toFixed(2)} for your 100 shares, offsetting much of the stock's decline.`},{id:3,question:`If ${r} rises to $${y.toFixed(2)} (10% increase), what's your net profit considering the cost of protection?`,options:[{text:`$${((y-a)*100-u*100).toFixed(2)}`,isCorrect:!0},{text:`$${((y-a)*100).toFixed(2)}`,isCorrect:!1},{text:`$${((y-l)*100).toFixed(2)}`,isCorrect:!1},{text:`$${(u*100).toFixed(2)}`,isCorrect:!1}],explanation:`Your profit is the stock's gain ($${((y-a)*100).toFixed(2)}) minus the cost of the put protection ($${(u*100).toFixed(2)}), resulting in a net profit of $${((y-a)*100-u*100).toFixed(2)}.`},{id:4,question:`When would be the most cost-effective time to buy this protective put for ${r}?`,options:[{text:"After the stock has had a significant rally and you want to protect gains",isCorrect:!0},{text:"When the stock is at its lowest point",isCorrect:!1},{text:"Right before earnings announcement",isCorrect:!1},{text:"When the stock is trending downward",isCorrect:!1}],explanation:"It's often most psychologically and financially optimal to buy protective puts after a stock has rallied. This way, you're using some of your paper profits to protect against a downturn, rather than spending additional capital when the stock is already down."},{id:5,question:`Comparing a protective put to a stop-loss order for ${r}, which statement is most accurate?`,options:[{text:"A protective put provides guaranteed protection at a specific price but costs a premium",isCorrect:!0},{text:"A stop-loss order is always more effective in a crash",isCorrect:!1},{text:"A protective put and stop-loss provide identical protection",isCorrect:!1},{text:"A stop-loss is more expensive but more reliable",isCorrect:!1}],explanation:"While a stop-loss order is free, it might execute at a much lower price if the stock gaps down overnight. A protective put guarantees your exit price regardless of how quickly the stock falls, though you pay a premium for this insurance."},{id:6,question:`What happens to your protective put strategy on ${r} if implied volatility increases significantly?`,options:[{text:"The put option becomes more valuable, offsetting some of its time decay",isCorrect:!0},{text:"The strategy becomes less effective",isCorrect:!1},{text:"There is no effect on the protective put",isCorrect:!1},{text:"The maximum loss increases",isCorrect:!1}],explanation:"An increase in implied volatility will increase the value of your put option. This is beneficial as it can help offset the negative effect of time decay and potentially allow you to sell the put for a profit if you no longer need the protection."},{id:7,question:`By ${o}, ${r} is at $${i}. What was the outcome of your protective put strategy?`,options:[{text:d>a?`Profit of $${((d-a)*100-u*100).toFixed(2)}`:d<l?`Loss limited to $${f.toFixed(2)}`:`Loss of $${((a-d)*100+u*100).toFixed(2)}`,isCorrect:!0},{text:"Loss of entire investment",isCorrect:!1},{text:"Profit equal to put premium",isCorrect:!1},{text:"Break-even regardless of stock price",isCorrect:!1}],explanation:d>a?`The stock rose, giving you a profit of $${((d-a)*100).toFixed(2)} minus the put cost of $${(u*100).toFixed(2)}.`:d<l?`The stock fell below the put strike, but your loss was limited to $${f.toFixed(2)} thanks to the protective put.`:"The stock fell but not below the put strike. Your loss is the stock decline plus the put premium."},{id:8,question:`In what market conditions would this protective put strategy on ${r} be most valuable?`,options:[{text:"During high market uncertainty or ahead of major events",isCorrect:!0},{text:"In a steadily rising market",isCorrect:!1},{text:"During low volatility periods",isCorrect:!1},{text:"When the stock is trending downward",isCorrect:!1}],explanation:"Protective puts are most valuable during periods of high uncertainty or before major events (earnings, FDA decisions, etc.) where the stock could gap down significantly. They provide insurance against sudden, sharp declines that might bypass stop-loss orders."},{id:9,question:`What's the break-even point for your ${r} position including the protective put?`,options:[{text:`$${(a+u).toFixed(2)}`,isCorrect:!0},{text:`$${a.toFixed(2)}`,isCorrect:!1},{text:`$${l.toFixed(2)}`,isCorrect:!1},{text:`$${(l+u).toFixed(2)}`,isCorrect:!1}],explanation:`Your break-even point is your stock purchase price ($${a.toFixed(2)}) plus the cost of the put protection ($${u.toFixed(2)}), or $${(a+u).toFixed(2)}. The stock needs to rise by at least the cost of the put for you to profit.`},{id:10,question:`If you're worried about a potential market correction, which strike price selection would provide the best protection for ${r}?`,options:[{text:`At-the-money strike near $${a.toFixed(2)}`,isCorrect:!0},{text:`Deep out-of-the-money strike at $${(a*.7).toFixed(2)}`,isCorrect:!1},{text:`Deep in-the-money strike at $${(a*1.3).toFixed(2)}`,isCorrect:!1},{text:"Multiple strikes at different prices",isCorrect:!1}],explanation:"An at-the-money protective put provides the best balance of cost and protection. While it's more expensive than an OTM put, it starts protecting your position immediately if the stock falls. ITM puts provide immediate protection but are unnecessarily expensive."}]},jV=(t,e,n,r,i,o,s)=>(console.log("Generating Protective Put questions with:",{stockPrice:t,strikePrice:e,premium:n,symbol:r,futurePrice:i,expirationDate:o,selectedDate:s}),VV(t,e,n,r,i,o).map(l=>{const u=Dn(l.options),d=u.findIndex(f=>f.isCorrect);return{id:l.id,question:l.question,options:u.map(f=>f.text),correctAnswer:d,explanation:l.explanation}})),UV=(t,e,n,r,i,o,s)=>{const a=parseFloat(t),l=parseFloat(e),u=parseFloat(n),d=parseFloat(i),f=l-u,h=u*100,y=a*1.1,E=a*.9;return[{id:1,question:`If ${r} falls to $${E.toFixed(2)} (10% decrease) before expiration, what would be your profit?`,options:[{text:`$${((l-E)*100-h).toFixed(2)}`,isCorrect:!0},{text:`$${h.toFixed(2)}`,isCorrect:!1},{text:`$${((l-E)*100).toFixed(2)}`,isCorrect:!1},{text:`$${((a-E)*100).toFixed(2)}`,isCorrect:!1}],explanation:`At $${E.toFixed(2)}, the profit is: (Strike Price - Stock Price)  100 shares - Premium Paid = ($${l.toFixed(2)} - $${E.toFixed(2)})  100 - $${h.toFixed(2)} = $${((l-E)*100-h).toFixed(2)}`},{id:2,question:`If ${r} rises to $${y.toFixed(2)} (10% increase), what is your maximum loss?`,options:[{text:`$${((y-a)*100).toFixed(2)}`,isCorrect:!1},{text:`$${h.toFixed(2)}`,isCorrect:!0},{text:`$${(a*100).toFixed(2)}`,isCorrect:!1},{text:`$${((y-l)*100).toFixed(2)}`,isCorrect:!1}],explanation:`With a long put option, your maximum loss is limited to the premium paid ($${h.toFixed(2)}), no matter how high the stock price goes.`},{id:3,question:`For your ${r} put option, what is the break-even stock price at expiration?`,options:[{text:`$${a.toFixed(2)} (Current Price)`,isCorrect:!1},{text:`$${l.toFixed(2)} (Strike Price)`,isCorrect:!1},{text:`$${f.toFixed(2)} (Strike - Premium)`,isCorrect:!0},{text:`$${(l+u).toFixed(2)}`,isCorrect:!1}],explanation:`Break-even price at expiration = Strike Price - Premium per share = $${l.toFixed(2)} - $${u.toFixed(2)} = $${f.toFixed(2)}`},{id:4,question:`How does time decay (theta) affect your long put position in ${r}?`,options:[{text:"Time decay helps the position by increasing the put's value",isCorrect:!1},{text:"Time decay hurts the position by reducing the put's value",isCorrect:!0},{text:"Time decay has no effect on the position",isCorrect:!1},{text:"Time decay only affects in-the-money puts",isCorrect:!1}],explanation:"Time decay (theta) is your enemy when buying options. Each day that passes, your put option loses some time value, assuming all other factors remain constant."},{id:5,question:`On ${o}, ${r} closed at $${i}. What was your actual profit/loss on this trade?`,options:[{text:`$${((d<l?(l-d)*100:0)-h).toFixed(2)}`,isCorrect:!0},{text:`$${((a-d)*100).toFixed(2)}`,isCorrect:!1},{text:`$${((l-d)*100).toFixed(2)}`,isCorrect:!1},{text:`$${h.toFixed(2)}`,isCorrect:!1}],explanation:d<l?`The stock closed below the strike price, so your profit is: (Strike Price - Final Price)  100 - Premium = ($${l.toFixed(2)} - $${d.toFixed(2)})  100 - $${h.toFixed(2)} = $${((l-d)*100-h).toFixed(2)}`:`The stock closed above the strike price, so the option expired worthless. Your loss is the premium paid: $${h.toFixed(2)}`},{id:6,question:`What's the maximum profit potential for your ${r} long put position?`,options:[{text:`$${h.toFixed(2)}`,isCorrect:!1},{text:`$${(l*100).toFixed(2)}`,isCorrect:!1},{text:`$${(l*100-h).toFixed(2)}`,isCorrect:!0},{text:"Unlimited profit potential",isCorrect:!1}],explanation:`The maximum profit occurs if the stock goes to $0. At that point, you can sell shares at the strike price ($${l.toFixed(2)}) that cost $0, for a profit of (Strike Price  100) - Premium = $${(l*100-h).toFixed(2)}`},{id:7,question:`How would an increase in implied volatility affect your ${r} put option?`,options:[{text:"It would increase the put's value",isCorrect:!0},{text:"It would decrease the put's value",isCorrect:!1},{text:"It would have no effect on the put's value",isCorrect:!1},{text:"It only affects call options",isCorrect:!1}],explanation:"Higher implied volatility increases option premiums for both calls and puts. As a put buyer, you benefit from increased volatility as it raises the value of your option."},{id:8,question:`If ${r} trades sideways and stays at $${a.toFixed(2)} until expiration, what happens to your put option?`,options:[{text:"You break even",isCorrect:!1},{text:`You lose the entire premium of $${h.toFixed(2)}`,isCorrect:a>=l},{text:"You make a partial profit",isCorrect:a<l},{text:"The option extends to the next expiration",isCorrect:!1}],explanation:a>=l?`If the stock stays at $${a.toFixed(2)}, which is above the strike price of $${l.toFixed(2)}, your put expires worthless and you lose the entire premium paid ($${h.toFixed(2)})`:`If the stock stays at $${a.toFixed(2)}, which is below the strike price of $${l.toFixed(2)}, you'll make a partial profit of $${((l-a)*100-h).toFixed(2)}`},{id:9,question:`How does your ${r} put compare to shorting 100 shares at $${a.toFixed(2)}?`,options:[{text:"The put has limited risk while shorting has unlimited risk",isCorrect:!0},{text:"Shorting has limited risk while the put has unlimited risk",isCorrect:!1},{text:"Both strategies have the same risk profile",isCorrect:!1},{text:"Both strategies have unlimited risk",isCorrect:!1}],explanation:`A long put limits your risk to the premium paid ($${h.toFixed(2)}), while shorting stock exposes you to unlimited risk if the stock price rises.`},{id:10,question:`What's the best scenario for your ${r} put option?`,options:[{text:"Stock price rises significantly",isCorrect:!1},{text:"Stock price stays at current level",isCorrect:!1},{text:"Stock price falls significantly below break-even",isCorrect:!0},{text:"Stock price stays above strike price",isCorrect:!1}],explanation:`The best scenario is a significant drop in stock price below your break-even of $${f.toFixed(2)}. This maximizes your profit potential while your risk remains limited to the premium paid.`}]},BV=(t,e,n,r,i,o,s)=>(console.log("Generating Long Put questions with:",{stockPrice:t,strikePrice:e,premium:n,symbol:r,futurePrice:i,expirationDate:o,selectedDate:s}),UV(t,e,n,r,i,o).map(l=>{const u=Dn(l.options),d=u.findIndex(f=>f.isCorrect);return{id:l.id,question:l.question,options:u.map(f=>f.text),correctAnswer:d,explanation:l.explanation}})),zV=(t,e,n,r,i,o,s)=>{const a=parseFloat(t),l=parseFloat(e)*.95,u=parseFloat(e)*1.05,d=parseFloat(n)*1.2,f=parseFloat(n)*.8,h=parseFloat(i),y=d-f,E=u-l-y,x=l+y;return[{id:1,question:`You set up a call spread on ${r} by buying a call at strike $${l.toFixed(2)} for $${d.toFixed(2)} and selling a call at strike $${u.toFixed(2)} for $${f.toFixed(2)}. What's your net debit?`,options:[{text:`$${y.toFixed(2)}`,isCorrect:!0},{text:`$${(d+f).toFixed(2)}`,isCorrect:!1},{text:`$${f.toFixed(2)}`,isCorrect:!1},{text:`$${(u-l).toFixed(2)}`,isCorrect:!1}],explanation:`The net debit is the long call premium paid ($${d.toFixed(2)}) minus the short call premium received ($${f.toFixed(2)}) = $${y.toFixed(2)}`},{id:2,question:`What's your maximum potential profit on this ${r} call spread?`,options:[{text:`$${E.toFixed(2)}`,isCorrect:!0},{text:`$${(u-l).toFixed(2)}`,isCorrect:!1},{text:"Unlimited profit",isCorrect:!1},{text:`$${(u-a).toFixed(2)}`,isCorrect:!1}],explanation:`Maximum profit is the difference between strikes ($${u.toFixed(2)} - $${l.toFixed(2)} = $${(u-l).toFixed(2)}) minus the net debit ($${y.toFixed(2)}) = $${E.toFixed(2)}`},{id:3,question:`What's your maximum potential loss on this ${r} call spread?`,options:[{text:`$${y.toFixed(2)}`,isCorrect:!0},{text:`$${d.toFixed(2)}`,isCorrect:!1},{text:`$${(u-l).toFixed(2)}`,isCorrect:!1},{text:"Unlimited loss",isCorrect:!1}],explanation:`The maximum loss is limited to the net debit paid ($${y.toFixed(2)}), which occurs if ${r} stays below the lower strike price of $${l.toFixed(2)}`},{id:4,question:`What's your break-even point at expiration for this ${r} call spread?`,options:[{text:`$${x.toFixed(2)}`,isCorrect:!0},{text:`$${l.toFixed(2)}`,isCorrect:!1},{text:`$${u.toFixed(2)}`,isCorrect:!1},{text:`$${a.toFixed(2)}`,isCorrect:!1}],explanation:`Break-even = Lower strike ($${l.toFixed(2)}) + Net debit ($${y.toFixed(2)}) = $${x.toFixed(2)}`},{id:5,question:`At expiration, ${r} is at $${h.toFixed(2)}. What is your profit/loss?`,options:[{text:`$${(h>=u?E:h<=l?-y:h-l-y).toFixed(2)}`,isCorrect:!0},{text:`$${(h-a).toFixed(2)}`,isCorrect:!1},{text:`$${(h-x).toFixed(2)}`,isCorrect:!1},{text:`$${(u-l).toFixed(2)}`,isCorrect:!1}],explanation:h>=u?`Stock is above upper strike ($${u.toFixed(2)}), resulting in maximum profit of $${E.toFixed(2)}`:h<=l?`Stock is below lower strike ($${l.toFixed(2)}), resulting in maximum loss of $${y.toFixed(2)}`:`Stock is between strikes, profit = Stock price - Lower strike - Net debit = $${(h-l-y).toFixed(2)}`},{id:6,question:`How does implied volatility affect your ${r} call spread when the stock is near the upper strike of $${u.toFixed(2)}?`,options:[{text:"A decrease in implied volatility is beneficial",isCorrect:!0},{text:"An increase in implied volatility is beneficial",isCorrect:!1},{text:"Implied volatility has no effect",isCorrect:!1},{text:"The effect depends on time to expiration",isCorrect:!1}],explanation:"When the stock is near the upper strike, a decrease in implied volatility helps because it decreases the value of the near-the-money option you sold faster than the in-the-money option you bought"},{id:7,question:`If ${r} rises to $${(u*1.2).toFixed(2)}, well above your upper strike, what's your regret cost compared to just buying a call?`,options:[{text:`$${((u*1.2-u)*100).toFixed(2)}`,isCorrect:!0},{text:"No regret cost, maximum profit achieved",isCorrect:!1},{text:`$${E.toFixed(2)}`,isCorrect:!1},{text:`$${y.toFixed(2)}`,isCorrect:!1}],explanation:`You missed out on $${((u*1.2-u)*100).toFixed(2)} of potential profit above your short strike, but remember you accepted this limited profit in exchange for reduced risk`},{id:8,question:`What happens to your ${r} position if the stock price stays flat at $${a.toFixed(2)} as time decay increases?`,options:[{text:"Both options lose value, net effect is minimal",isCorrect:!0},{text:"Position becomes more valuable",isCorrect:!1},{text:"You lose the entire net debit immediately",isCorrect:!1},{text:"Only the short call loses value",isCorrect:!1}],explanation:"Time decay affects both options, the one you bought and the one you sold, making the net effect relatively neutral when the stock price doesn't move significantly"},{id:9,question:`What's the ideal price target for your ${r} call spread at expiration?`,options:[{text:`$${u.toFixed(2)} or slightly higher`,isCorrect:!0},{text:`$${l.toFixed(2)}`,isCorrect:!1},{text:`$${x.toFixed(2)}`,isCorrect:!1},{text:`$${(u*1.2).toFixed(2)}`,isCorrect:!1}],explanation:`The ideal target is the upper strike ($${u.toFixed(2)}) or slightly above, as this gives you the maximum profit of $${E.toFixed(2)}`},{id:10,question:`For your ${r} call spread, how much capital is at risk compared to buying 100 shares?`,options:[{text:`$${y.toFixed(2)} vs $${(a*100).toFixed(2)}`,isCorrect:!0},{text:`$${d.toFixed(2)} vs $${(a*100).toFixed(2)}`,isCorrect:!1},{text:`$${(u-l).toFixed(2)} vs $${(a*100).toFixed(2)}`,isCorrect:!1},{text:"Same risk for both strategies",isCorrect:!1}],explanation:`The call spread risks only the net debit ($${y.toFixed(2)}), while buying 100 shares would risk $${(a*100).toFixed(2)}, showing the spread's capital efficiency`}]},WV=(t,e,n,r,i,o,s)=>(console.log("Generating Call Spread questions with:",{stockPrice:t,strikePrice:e,premium:n,symbol:r,futurePrice:i,expirationDate:o,selectedDate:s}),zV(t,e,n,r,i).map(l=>{const u=Dn(l.options),d=u.findIndex(f=>f.isCorrect);return{id:l.id,question:l.question,options:u.map(f=>f.text),correctAnswer:d,explanation:l.explanation}})),HV=(t,e,n,r,i,o,s)=>{const a=parseFloat(t),l=parseFloat(e),u=l*.95,d=parseFloat(n),f=d*.7,h=d-f,y=l-u-h,E=parseFloat(i),x=l-h;return[{id:1,question:`You establish a long put spread on ${r} with strike prices $${l.toFixed(2)} (buy) and $${u.toFixed(2)} (sell). What's your maximum possible profit?`,options:[{text:`$${(y*100).toFixed(2)}`,isCorrect:!0},{text:`$${(l-u).toFixed(2)}`,isCorrect:!1},{text:`$${(d*100).toFixed(2)}`,isCorrect:!1},{text:"Unlimited profit",isCorrect:!1}],explanation:`The maximum profit is the difference between strikes ($${l.toFixed(2)} - $${u.toFixed(2)} = $${(l-u).toFixed(2)}) minus the net debit paid ($${h.toFixed(2)})  100 = $${(y*100).toFixed(2)}`},{id:2,question:`What is your maximum potential loss on this ${r} put spread?`,options:[{text:`$${(h*100).toFixed(2)}`,isCorrect:!0},{text:`$${(d*100).toFixed(2)}`,isCorrect:!1},{text:`$${(l-u).toFixed(2)}`,isCorrect:!1},{text:"Unlimited loss",isCorrect:!1}],explanation:`The maximum loss is limited to the net debit paid: Premium paid for higher strike ($${d.toFixed(2)}) minus premium received for lower strike ($${f.toFixed(2)})  100 = $${(h*100).toFixed(2)}`},{id:3,question:`What is the break-even price for your ${r} put spread at expiration?`,options:[{text:`$${x.toFixed(2)}`,isCorrect:!0},{text:`$${l.toFixed(2)}`,isCorrect:!1},{text:`$${u.toFixed(2)}`,isCorrect:!1},{text:`$${a.toFixed(2)}`,isCorrect:!1}],explanation:`Break-even price = Higher strike price ($${l.toFixed(2)}) minus net debit ($${h.toFixed(2)}) = $${x.toFixed(2)}`},{id:4,question:`At expiration, ${r} is at $${E.toFixed(2)}. What is your profit/loss?`,options:[{text:`$${(E<=u?y*100:E>=l?-(h*100):(l-E-h)*100).toFixed(2)}`,isCorrect:!0},{text:`$${((l-E)*100).toFixed(2)}`,isCorrect:!1},{text:`$${((u-E)*100).toFixed(2)}`,isCorrect:!1},{text:`$${(h*100).toFixed(2)}`,isCorrect:!1}],explanation:E<=u?`Stock is below both strikes, achieving maximum profit of $${(y*100).toFixed(2)}`:E>=l?`Stock is above both strikes, resulting in maximum loss of $${(h*100).toFixed(2)}`:`Stock is between strikes, profit/loss = (Higher strike - Stock price - Net debit)  100 = $${((l-E-h)*100).toFixed(2)}`},{id:5,question:`If ${r}'s implied volatility increases significantly, how should it affect your position if the stock is currently near $${(l*1.02).toFixed(2)}?`,options:[{text:"Beneficial, as it increases the value of your long put more than the short put",isCorrect:!0},{text:"Harmful, as it increases the value of your short put more",isCorrect:!1},{text:"No effect, as the changes cancel each other out",isCorrect:!1},{text:"Harmful to both puts equally",isCorrect:!1}],explanation:"When the stock is above the higher strike, increased implied volatility helps because it increases the value of your out-of-the-money long put more than the further out-of-the-money short put."},{id:6,question:`What happens to your ${r} put spread if the stock drops to $${(u*.95).toFixed(2)} before expiration?`,options:[{text:`Achieves maximum profit of $${(y*100).toFixed(2)}`,isCorrect:!0},{text:`Results in a loss of $${(h*100).toFixed(2)}`,isCorrect:!1},{text:"Breaks even",isCorrect:!1},{text:"Profit continues to increase as stock falls further",isCorrect:!1}],explanation:`When the stock falls below the lower strike price ($${u.toFixed(2)}), the spread reaches its maximum value of $${((l-u)*100).toFixed(2)}, resulting in the maximum profit of $${(y*100).toFixed(2)} after subtracting the net debit paid.`},{id:7,question:`For your ${r} put spread, how does time decay (theta) affect the position when the stock is at $${(l*.98).toFixed(2)}?`,options:[{text:"Relatively neutral as it affects both puts",isCorrect:!0},{text:"Strongly negative as both puts lose value",isCorrect:!1},{text:"Strongly positive as short put decays faster",isCorrect:!1},{text:"Only affects the long put position",isCorrect:!1}],explanation:"Time decay has a relatively neutral effect on a put spread because it's eroding the value of both the long put you bought and the short put you sold, partially offsetting each other."},{id:8,question:`If ${r} is at $${(u*.97).toFixed(2)} at expiration, what actions should you take?`,options:[{text:"Exercise your long put and get assigned on your short put",isCorrect:!0},{text:"Only exercise your long put",isCorrect:!1},{text:"Let both puts expire",isCorrect:!1},{text:"Only get assigned on your short put",isCorrect:!1}],explanation:`With the stock below both strikes at expiration, both puts are in-the-money. You'll exercise your long put to sell at $${l.toFixed(2)} and be assigned on your short put to buy at $${u.toFixed(2)}, realizing the maximum profit.`},{id:9,question:`Compared to buying just the $${l.toFixed(2)} put on ${r}, what's the main advantage of this spread?`,options:[{text:"Lower cost and defined risk",isCorrect:!0},{text:"Higher potential profit",isCorrect:!1},{text:"No obligation to buy stock",isCorrect:!1},{text:"Unlimited profit potential",isCorrect:!1}],explanation:`The spread reduces your cost from $${(d*100).toFixed(2)} to $${(h*100).toFixed(2)} by selling the lower strike put. While this limits your profit potential, it reduces your risk and cost basis.`},{id:10,question:`What's the ideal market condition for your ${r} put spread position?`,options:[{text:`Moderate downside move to $${u.toFixed(2)} by expiration`,isCorrect:!0},{text:`Sharp upward move above $${l.toFixed(2)}`,isCorrect:!1},{text:"Stock staying at current price",isCorrect:!1},{text:`Extreme drop well below $${(u*.8).toFixed(2)}`,isCorrect:!1}],explanation:`The ideal scenario is a moderate decline to or below the lower strike price ($${u.toFixed(2)}) by expiration, which would allow the spread to achieve its maximum value of $${((l-u)*100).toFixed(2)}.`}]},qV=(t,e,n,r,i,o,s)=>(console.log("Generating Long Put Spread questions with:",{stockPrice:t,strikePrice:e,premium:n,symbol:r,futurePrice:i,expirationDate:o,selectedDate:s}),HV(t,e,n,r,i).map(l=>{const u=Dn(l.options),d=u.findIndex(f=>f.isCorrect);return{id:l.id,question:l.question,options:u.map(f=>f.text),correctAnswer:d,explanation:l.explanation}})),GV=(t,e,n,r,i,o,s)=>{const a=parseFloat(t),l=parseFloat(e),u=a*.8,d=parseFloat(n),f=d*3,h=f-d;return[{id:1,question:`You implement a Fig Leaf on ${r} at $${a.toFixed(2)} by buying a LEAPS call at strike $${u.toFixed(2)} for $${f.toFixed(2)} and selling a 30-day call at strike $${l.toFixed(2)} for $${d.toFixed(2)}. What's your initial net investment?`,options:[{text:`$${(h*100).toFixed(2)}`,isCorrect:!0},{text:`$${(f*100).toFixed(2)}`,isCorrect:!1},{text:`$${(d*100).toFixed(2)}`,isCorrect:!1},{text:`$${(a*100).toFixed(2)}`,isCorrect:!1}],explanation:`The net investment is the LEAPS premium paid ($${f.toFixed(2)}) minus the short call premium received ($${d.toFixed(2)}) multiplied by 100 shares = $${(h*100).toFixed(2)}`},{id:2,question:`For your ${r} Fig Leaf, what happens if the stock price rises above your short strike of $${l.toFixed(2)} before the short call expires?`,options:[{text:"You should consider closing the entire position for a profit",isCorrect:!0},{text:"Exercise your LEAPS call to cover the assignment",isCorrect:!1},{text:"Let assignment happen and maintain the LEAPS position",isCorrect:!1},{text:"Roll the short call to a higher strike price",isCorrect:!1}],explanation:"If the stock rises above the short strike before expiration, it's often best to close the entire position for a profit rather than risk assignment, as early assignment would require complex management of the LEAPS position."},{id:3,question:`What's the approximate delta of your ${r} LEAPS call at the $${u.toFixed(2)} strike, and why is this important?`,options:[{text:"Around 0.80, making it a good stock substitute",isCorrect:!0},{text:"Around 0.50, providing balanced exposure",isCorrect:!1},{text:"Around 0.30, minimizing risk",isCorrect:!1},{text:"Around 0.95, providing maximum leverage",isCorrect:!1}],explanation:`The LEAPS call should have a delta of about 0.80 or higher to act as an effective stock substitute, which is why we chose a strike 20% in-the-money at $${u.toFixed(2)}.`},{id:4,question:`If ${r} drops to $${(a*.85).toFixed(2)} before the short call expires, what's the best action?`,options:[{text:"Buy back the short call and sell another at a lower strike",isCorrect:!0},{text:"Exercise the LEAPS call immediately",isCorrect:!1},{text:"Close the entire position for a loss",isCorrect:!1},{text:"Add another short call at the same strike",isCorrect:!1}],explanation:"When the stock price drops significantly, you can buy back the short call (which has lost value) and sell another at a lower strike to continue generating income while maintaining the position."},{id:5,question:`What's your maximum potential loss on this ${r} Fig Leaf position?`,options:[{text:`$${(h*100).toFixed(2)} (net debit paid)`,isCorrect:!0},{text:`$${(f*100).toFixed(2)} (LEAPS premium)`,isCorrect:!1},{text:`$${(a*100).toFixed(2)} (stock value)`,isCorrect:!1},{text:"Unlimited loss potential",isCorrect:!1}],explanation:`The maximum loss is limited to your initial net debit of $${(h*100).toFixed(2)}, which occurs if the stock drops significantly and both options expire worthless.`},{id:6,question:`If ${r} is at $${(l*1.1).toFixed(2)} at short call expiration, what should you do?`,options:[{text:"Close both positions to lock in the profit",isCorrect:!0},{text:"Exercise the LEAPS to cover assignment",isCorrect:!1},{text:"Roll the short call up and out",isCorrect:!1},{text:"Let assignment occur naturally",isCorrect:!1}],explanation:`With the stock above the short strike at $${(l*1.1).toFixed(2)}, the position is profitable and should be closed to avoid assignment complications with the LEAPS call.`},{id:7,question:`How does the leverage in your ${r} Fig Leaf compare to a regular covered call?`,options:[{text:"Higher leverage due to lower capital requirement",isCorrect:!0},{text:"Lower leverage due to option premium costs",isCorrect:!1},{text:"Same leverage as a covered call",isCorrect:!1},{text:"No leverage effect",isCorrect:!1}],explanation:`The Fig Leaf provides higher leverage because you're only paying $${(h*100).toFixed(2)} instead of $${(a*100).toFixed(2)} for a covered call, while still collecting similar call premium.`},{id:8,question:`What happens to your ${r} position if you're assigned on the short call?`,options:[{text:"Sell the LEAPS and buy stock to cover, preserving time value",isCorrect:!0},{text:"Exercise the LEAPS call immediately",isCorrect:!1},{text:"Let the stock be called away",isCorrect:!1},{text:"Roll the short call forward",isCorrect:!1}],explanation:"If assigned, you should sell the LEAPS call (preserving any remaining time value) and use the proceeds plus additional capital to buy stock to cover the assignment."},{id:9,question:`If ${r} remains at $${a.toFixed(2)} until short call expiration, what's your best course of action?`,options:[{text:"Sell another short-term call against your LEAPS",isCorrect:!0},{text:"Close the entire position",isCorrect:!1},{text:"Exercise the LEAPS call",isCorrect:!1},{text:"Buy back the short call only",isCorrect:!1}],explanation:"With the stock price unchanged, you can continue the strategy by selling another short-term call to generate more premium while maintaining your LEAPS position."},{id:10,question:`What's the key risk difference between your ${r} Fig Leaf and a regular covered call?`,options:[{text:"The LEAPS call expires worthless if the stock drops significantly",isCorrect:!0},{text:"The short call has more risk",isCorrect:!1},{text:"The position has unlimited risk",isCorrect:!1},{text:"There is no difference in risk",isCorrect:!1}],explanation:`Unlike stock in a covered call, your LEAPS call can expire worthless if ${r} drops significantly, potentially losing your entire $${(h*100).toFixed(2)} investment.`}]},KV=(t,e,n,r,i,o,s)=>(console.log("Generating Fig Leaf questions with:",{stockPrice:t,strikePrice:e,premium:n,symbol:r,futurePrice:i,expirationDate:o,selectedDate:s}),GV(t,e,n,r).map(l=>{const u=Dn(l.options),d=u.findIndex(f=>f.isCorrect);return{id:l.id,question:l.question,options:u.map(f=>f.text),correctAnswer:d,explanation:l.explanation}})),QV=({stockPrice:t,strikePrice:e,premium:n,symbol:r,futurePrice:i,expirationDate:o,selectedDate:s,strategy:a})=>{const{user:l}=cs(),[u,d]=_.useState(0),[f,h]=_.useState(!1),[y,E]=_.useState(null),[x,T]=_.useState(0);_.useEffect(()=>{console.log("ConceptQuiz received props:",{stockPrice:t,strikePrice:e,premium:n,symbol:r,futurePrice:i,expirationDate:o,selectedDate:s})},[t,e,n,r,i,o,s]);const w=_.useMemo(()=>{console.log("Generating questions with props:",{stockPrice:t,strikePrice:e,premium:n,symbol:r,futurePrice:i,expirationDate:o,selectedDate:s});const I=!!(t&&e&&n&&r&&i&&o&&s);if(console.log("All props available:",I),I)switch(console.log("All props available: ",I),a){case B.LONG_CALL:return console.log("Selecting generate Long Call"),RV(t,e,n,r,i,o,s);case B.COVERED_CALL:return console.log("Selecting Covered Call"),bV(t,e,n,r,i,o,s);case B.OPTIONS_THEORY:return console.log("Selecting Options Theory"),FV(t,e,n,r,i,o,s);case B.COLLAR_STRATEGY:return console.log("Selecting Collar Strategy"),OV(t,e,n,r,i,o,s);case B.CASH_SECURED_PUT:return console.log("Selecting Cash Secured Put"),MV(t,e,n,r,i,o,s);case B.PROTECTIVE_PUT:return console.log("Selecting Protectivated Put"),jV(t,e,n,r,i,o,s);case B.LONG_PUT:return console.log("Selecting Long Put"),BV(t,e,n,r,i,o,s);case B.LONG_CALL_SPREAD:return console.log("Selecting Long Call Spread"),WV(t,e,n,r,i,o,s);case B.LONG_PUT_SPREAD:return console.log("Selecting Long Put Spread"),qV(t,e,n,r,i,o,s);case B.FIG_LEAF:return console.log("Selecting Fig Leaf Strategy"),KV(t,e,n,r,i,o,s);default:return[]}return[]},[t,e,n,r,i,o,s,a]);_.useEffect(()=>{console.log("Questions array updated:",w)},[w]);const v=I=>{E(I),h(!0),I===w[u].correctAnswer&&T(x+1)},S=()=>{u<w.length-1&&(d(u+1),E(null),h(!1))},$=async()=>{if(l)try{await kV(l.uid,x,w.length,r,s)}catch(I){console.error("Error saving score:",I)}},F=()=>{d(0),E(null),h(!1),T(0)};if(_.useEffect(()=>{u===w.length-1&&f&&$()},[u,f,w.length]),w.length===0)return console.log("Rendering empty state - no questions available"),m.jsx("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:m.jsx("p",{children:"Generate a question to see practical scenarios based on real market data."})});console.log("Rendering question:",u);const O=w[u];return m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("h3",{className:"text-lg font-semibold",children:"Practice Scenarios"}),m.jsxs("span",{className:"text-sm text-blue-600",children:["Score: ",x,"/",w.length]})]}),m.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[m.jsx("p",{className:"font-medium mb-4",children:O.question}),m.jsx("div",{className:"space-y-2",children:O.options.map((I,C)=>m.jsx("button",{onClick:()=>v(C),disabled:f,className:`w-full p-3 text-left rounded ${f?C===O.correctAnswer?"bg-green-100 border-green-500":C===y?"bg-red-100 border-red-500":"bg-gray-50":"bg-gray-50 hover:bg-blue-50"} border transition-colors`,children:I},C))}),f&&m.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded",children:m.jsx("p",{className:"text-sm",children:O.explanation})}),f&&m.jsx("div",{className:"mt-4 flex justify-end",children:u<w.length-1?m.jsx(Mi,{onClick:S,className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Next Question"}):m.jsx(Mi,{onClick:F,className:"bg-green-600 hover:bg-green-700 text-white",children:"Try New Scenarios"})})]})]})},ox=["MMM","AOS","ABT","ABBV","ACN","ATVI","ADM","ADBE","ADP","AAP","AES","AFL","A","APD","AKAM","ALK","ALB","ARE","ALGN","ALLE","LNT","ALL","GOOGL","GOOG","MO","AMZN","AMCR","AMD","AEE","AAL","AEP","AXP","AIG","AMT","AWK","AMP","ABC","AME","AMGN","APH","ADI","ANSS","AON","APA","AAPL","AMAT","APTV","ACGL","ANET","AJG","AIZ","T","ATO","ADSK","AZO","AVB","AVY","AXON","BKR","BALL","BAC","BBWI","BAX","BDX","WRB","BRK.B","BBY","BIO","TECH","BIIB","BLK","BK","BA","BKNG","BWA","BXP","BSX","BMY","AVGO","BR","BRO","BF.B","BG","CHRW","CDNS","CZR","CPT","CPB","COF","CAH","KMX","CCL","CARR","CTLT","CAT","CBOE","CBRE","CDW","CE","CNC","CNP","CDAY","CF","CRL","SCHW","CHTR","CVX","CMG","CB","CHD","CI","CINF","CTAS","CSCO","C","CFG","CLX","CME","CMS","KO","CTSH","CL","CMCSA","CMA","CAG","COP","ED","STZ","CEG","COO","CPRT","GLW","CTVA","CSGP","COST","CTRA","CCI","CSX","CMI","CVS","DHI","DHR","DRI","DVA","DE","DAL","XRAY","DVN","DXCM","FANG","DLR","DFS","DISH","DIS","DG","DLTR","D","DPZ","DOV","DOW","DTE","DUK","DD","DXC","EMN","ETN","EBAY","ECL","EIX","EW","EA","ELV","LLY","EMR","ENPH","ETR","EOG","EPAM","EQT","EFX","EQIX","EQR","ESS","EL","ETSY","RE","EVRG","ES","EXC","EXPE","EXPD","EXR","XOM","FFIV","FDS","FICO","FAST","FRT","FDX","FITB","FRC","FE","FIS","FISV","FLT","FMC","F","FTNT","FTV","FOXA","FOX","BEN","FCX","GRMN","IT","GEHC","GEN","GNRC","GD","GE","GIS","GM","GPC","GILD","GL","GPN","GS","HAL","HIG","HAS","HCA","PEAK","HSIC","HSY","HES","HPE","HLT","HOLX","HD","HON","HRL","HST","HWM","HPQ","HUM","HBAN","HII","IBM","IEX","IDXX","ITW","ILMN","INCY","IR","PODD","INTC","ICE","IFF","IP","IPG","INTU","ISRG","IVZ","INVH","IQV","IRM","JBHT","JKHY","J","JNJ","JCI","JPM","JNPR","K","KDP","KEY","KEYS","KMB","KIM","KMI","KLAC","KHC","KR","LHX","LH","LRCX","LW","LVS","LDOS","LEN","LNC","LIN","LYV","LKQ","LMT","L","LOW","LYB","MTB","MRO","MPC","MKTX","MAR","MMC","MLM","MAS","MA","MTCH","MKC","MCD","MCK","MDT","MRK","META","MET","MTD","MGM","MCHP","MU","MSFT","MAA","MRNA","MHK","MOH","TAP","MDLZ","MPWR","MNST","MCO","MS","MOS","MSI","MSCI","NDAQ","NTAP","NFLX","NWL","NEM","NWSA","NWS","NEE","NKE","NI","NDSN","NSC","NTRS","NOC","NCLH","NRG","NUE","NVDA","NVR","NXPI","ORLY","OXY","ODFL","OMC","ON","OKE","ORCL","OGN","OTIS","PCAR","PKG","PARA","PH","PAYX","PAYC","PYPL","PNR","PEP","PKI","PFE","PCG","PM","PSX","PNW","PXD","PNC","POOL","PPG","PPL","PFG","PG","PGR","PLD","PRU","PEG","PTC","PSA","PHM","QRVO","PWR","QCOM","DGX","RL","RJF","RTX","O","REG","REGN","RF","RSG","RMD","RHI","ROK","ROL","ROP","ROST","RCL","SPGI","CRM","SBAC","SLB","STX","SEE","SRE","NOW","SHW","SPG","SWKS","SJM","SNA","SEDG","SO","LUV","SWK","SBUX","STT","STLD","STE","SYK","SYF","SNPS","SYY","TMUS","TROW","TTWO","TPR","TRGP","TGT","TEL","TDY","TFX","TER","TSLA","TXN","TXT","TMO","TJX","TSCO","TT","TDG","TRV","TRMB","TFC","TYL","TSN","USB","UDR","ULTA","UNP","UAL","UPS","URI","UNH","UHS","VLO","VTR","VRSN","VRSK","VZ","VRTX","VFC","VTRS","VICI","V","VMC","WAB","WBA","WMT","WBD","WM","WAT","WEC","WFC","WELL","WST","WDC","WRK","WY","WHR","WMB","WTW","GWW","WYNN","XEL","XYL","YUM","ZBRA","ZBH","ZION","ZTS"],YV=()=>{const t=P_(),{user:e}=cs(),{setIsPremium:n}=Wm(),[r,i]=_.useState(null),[o,s]=_.useState(!1);return _.useEffect(()=>{(async()=>{if(console.log("SuccessPage: Starting payment success handling"),console.log("Current user:",e==null?void 0:e.uid),!e){console.error("No user found in SuccessPage"),i("User not found. Please try logging in again.");return}try{console.log("Updating subscription status in Firestore..."),await gL(e.uid,"active"),console.log("Setting premium status in context..."),await n(!0),console.log("Updating localStorage..."),localStorage.setItem(`premium_status_${e.uid}`,JSON.stringify({isPremium:!0,timestamp:Date.now()})),s(!0),console.log("All updates completed successfully"),setTimeout(()=>{console.log("Redirecting to home page..."),t("/")},3e3)}catch(l){console.error("Error in SuccessPage:",l),i(l.message||"Failed to update subscription status")}})()},[t,n,e]),m.jsx("div",{className:"min-h-screen bg-blue-50 flex items-center justify-center p-4",children:m.jsxs(dr,{className:"max-w-md w-full",children:[m.jsxs(Gi,{children:[m.jsx("div",{className:"flex items-center justify-center mb-4",children:r?m.jsx(xM,{className:"h-12 w-12 text-red-500"}):m.jsx(CM,{className:"h-12 w-12 text-green-500"})}),m.jsx(Ki,{className:"text-center",children:r?"Update Failed":"Payment Successful!"})]}),m.jsx(hr,{className:"space-y-4",children:r?m.jsx(rl,{variant:"destructive",children:m.jsx(il,{children:r})}):m.jsxs(m.Fragment,{children:[m.jsx("p",{className:"text-center text-gray-600",children:"Thank you for upgrading to premium access. You now have access to all advanced options trading strategies."}),m.jsxs("p",{className:"text-sm text-center text-gray-500",children:[o?"Premium status updated successfully! ":"","Redirecting you back to the application in a few seconds..."]})]})})]})})},XV=({companyName:t})=>{var a;const[e,n]=_.useState(null),[r,i]=_.useState(!1),[o,s]=_.useState(null);return _.useEffect(()=>{(async()=>{if(t){i(!0),s(null);try{const u=`https://en.wikipedia.org/w/api.php?action=query&list=search&srsearch=${t} company&format=json&origin=*`,f=await(await fetch(u)).json();if(f.query.search.length===0)throw new Error("No Wikipedia page found for this company");const h=f.query.search[0].pageid,y=`https://en.wikipedia.org/w/api.php?action=query&prop=extracts&exintro&explaintext&pageids=${h}&format=json&origin=*`,T=(await(await fetch(y)).json()).query.pages[h];n({title:T.title,extract:T.extract})}catch(u){s(u.message)}finally{i(!1)}}})()},[t]),m.jsxs(dr,{className:"mt-4",children:[m.jsxs(Gi,{children:[m.jsx(Ki,{children:"Company Information"}),m.jsx(ig,{children:"Data from Wikipedia"})]}),m.jsxs(hr,{children:[r&&m.jsx("div",{className:"text-gray-600",children:"Loading company information..."}),o&&m.jsxs(rl,{variant:"destructive",children:[m.jsx(mT,{className:"h-4 w-4"}),m.jsx(il,{children:o})]}),e&&m.jsxs("div",{className:"space-y-2",children:[m.jsx("h3",{className:"font-semibold text-lg",children:e.title}),m.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:(a=e.extract)==null?void 0:a.split(`
`)[0]}),m.jsx("a",{href:`https://en.wikipedia.org/wiki/${encodeURIComponent(e.title)}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-sm",children:"Read more on Wikipedia"})]})]})]})},JV=({symbol:t})=>{const e=_.useRef(null),n=_.useRef(null);if(_.useEffect(()=>{if(!t)return;n.current&&n.current.remove();const i=document.createElement("script");return i.src="https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js",i.type="text/javascript",i.async=!0,i.innerHTML=JSON.stringify({interval:"1W",width:"100%",isTransparent:!1,height:"400",symbol:`${t}`,showIntervalTabs:!0,displayMode:"single",locale:"en",colorTheme:"light"}),n.current=i,e.current&&e.current.appendChild(i),()=>{n.current&&n.current.remove()}},[t]),!t)return null;const r=`https://www.tradingview.com/symbols/${t}/`;return m.jsxs(dr,{className:"mt-4",children:[m.jsxs(Gi,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[m.jsx(Ki,{className:"text-sm font-medium",children:"Technical Analysis"}),m.jsxs("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-800 flex items-center gap-1",children:["View on TradingView",m.jsx(IM,{className:"h-4 w-4"})]})]}),m.jsx(hr,{children:m.jsx("div",{className:"tradingview-widget-container",ref:e,children:m.jsx("div",{className:"tradingview-widget-container__widget"})})})]})},ZV=({stockPrice:t,strikePrice:e,premium:n,companyDetails:r})=>{const i=s=>s?s>=1e6?`$${(s/1e6).toFixed(2)}T`:s>=1e3?`$${(s/1e3).toFixed(2)}B`:`$${s.toFixed(2)}M`:"N/A",o=s=>s?s>=1e3?`${(s/1e3).toFixed(2)}B shares`:`${s.toFixed(2)}M shares`:"N/A";return m.jsxs("div",{className:"space-y-4",children:[r&&m.jsx(dr,{className:"bg-white",children:m.jsxs(hr,{className:"pt-6",children:[m.jsxs("div",{className:"flex items-start space-x-4",children:[r.logo&&m.jsx("img",{src:r.logo,alt:`${r.name} logo`,className:"w-16 h-16 object-contain"}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold",children:r.name}),m.jsx("p",{className:"text-sm text-gray-500",children:r.finnhubIndustry})]})]}),m.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mt-4",children:[m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(EM,{className:"w-4 h-4 text-gray-500"}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Market Cap"}),m.jsx("p",{className:"font-medium",children:i(r.marketCapitalization)})]})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(wM,{className:"w-4 h-4 text-gray-500"}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Shares Outstanding"}),m.jsx("p",{className:"font-medium",children:o(r.shareOutstanding)})]})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(_M,{className:"w-4 h-4 text-gray-500"}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"IPO Date"}),m.jsx("p",{className:"font-medium",children:r.ipo||"N/A"})]})]})]})]})}),(r==null?void 0:r.name)&&m.jsx(XV,{companyName:r.name}),(r==null?void 0:r.ticker)&&m.jsx(JV,{symbol:r.ticker})]})},MT={LEAPS_ITM_PERCENTAGE:.2,LEAPS_PREMIUM_MULTIPLIER:3},xn=(t,e,n,r)=>{const i=parseFloat(e),o=parseFloat(n),s=parseFloat(r),a=s*1.2,l=s*.8,u=a-l,d=s,f=s*.7,h=d-f,E=s*MT.LEAPS_PREMIUM_MULTIPLIER-s;switch(t){case B.COVERED_CALL:return{amount:(i*100).toFixed(2),description:"(100 shares)"};case B.CASH_SECURED_PUT:return{amount:(o*100).toFixed(2),description:"(cash to buy 100 shares)"};case B.LONG_CALL:return{amount:(s*100).toFixed(2),description:"(premium for 1 contract)"};case B.PROTECTIVE_PUT:return{amount:(i*100+s*100).toFixed(2),description:"(100 shares + put premium)"};case B.COLLAR_STRATEGY:return{amount:(i*100).toFixed(2),description:"(100 shares)"};case B.LONG_PUT:return{amount:(s*100).toFixed(2),description:"(premium for 1 contract)"};case B.LONG_CALL_SPREAD:return{amount:(u*100).toFixed(2),description:"(net debit for long call spread)"};case B.LONG_PUT_SPREAD:return{amount:(h*100).toFixed(2),description:"(net debit for long put spread)"};case B.FIG_LEAF:return{amount:(E*100).toFixed(2),description:"(net debit for LEAPS + short call)"};default:return{amount:"0.00",description:""}}},wn=(t,e,n,r)=>{const i=parseFloat(r),o=i*.8,s=i*1.2,a=i*.8,l=s-a,u=i,d=i*.7,f=u-d,y=i*MT.LEAPS_PREMIUM_MULTIPLIER-i;switch(t){case B.COVERED_CALL:return{amount:(i*100).toFixed(2),description:"premium received"};case B.CASH_SECURED_PUT:return{amount:(i*100).toFixed(2),description:"premium received"};case B.LONG_CALL:return{amount:(i*100).toFixed(2),description:"premium paid"};case B.PROTECTIVE_PUT:return{amount:(i*100).toFixed(2),description:"premium paid"};case B.COLLAR_STRATEGY:const E=o-i;return{amount:Math.abs(E*100).toFixed(2),description:E>0?"net debit paid":"net credit received"};case B.LONG_PUT:return{amount:(i*100).toFixed(2),description:"premium paid"};case B.LONG_CALL_SPREAD:return{amount:(l*100).toFixed(2),description:"net debit paid"};case B.LONG_PUT_SPREAD:return{amount:(f*100).toFixed(2),description:"net debit paid"};case B.FIG_LEAF:return{amount:(y*100).toFixed(2),description:"net debit paid (LEAPS premium - short call premium)"};default:return{amount:"0.00",description:""}}},ej=({symbol:t})=>{const e=_.useRef(null),n=_.useRef(null);return _.useEffect(()=>{if(!t)return;n.current&&(n.current.remove(),n.current=null);const r=document.createElement("script");return r.type="text/javascript",r.src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js",r.async=!0,r.innerHTML=JSON.stringify({autosize:!0,symbol:`${t}`,timezone:"Etc/UTC",theme:"light",style:"2",locale:"en",hide_legend:!0,range:"1M",allow_symbol_change:!1,save_image:!1,calendar:!1,support_host:"https://www.tradingview.com"}),n.current=r,e.current&&e.current.appendChild(r),()=>{n.current&&(n.current.remove(),n.current=null)}},[t]),t?m.jsxs(dr,{className:"mt-4",children:[m.jsx(Gi,{children:m.jsxs(Ki,{className:"text-sm font-medium",children:[t," Price Chart"]})}),m.jsx(hr,{children:m.jsx("div",{className:"w-full h-96",children:m.jsxs("div",{ref:e,className:"tradingview-widget-container w-full h-full",children:[m.jsx("div",{className:"tradingview-widget-container__widget",style:{height:"calc(100% - 32px)",width:"100%"}}),m.jsx("div",{className:"tradingview-widget-copyright",children:m.jsx("a",{href:"https://www.tradingview.com/",rel:"noopener nofollow",target:"_blank",className:"text-xs text-blue-600 hover:text-blue-800",children:"Track all markets on TradingView"})})]})})})]}):null},sx="ctff27hr01qi0nfd3lugctff27hr01qi0nfd3lv0",tj=()=>{cs();const{isPremium:t}=Wm(),e=()=>{const W=Math.floor(Math.random()*ox.length);return ox[W]},[n,r]=_.useState(B.OPTIONS_THEORY),[i,o]=_.useState(()=>e()),[s,a]=_.useState(!1),[l,u]=_.useState(""),[d,f]=_.useState(""),[h,y]=_.useState(""),[E,x]=_.useState({show:!1,correct:!1,message:""}),[T,w]=_.useState(""),[v,S]=_.useState(""),[$,F]=_.useState(null);_.useState("");const O=async W=>{try{const K=await(await fetch(`https://finnhub.io/api/v1/stock/profile2?symbol=${W}&token=${sx}`)).json();K&&F(K)}catch(ie){console.error("Error fetching company details:",ie)}},I=W=>![B.OPTIONS_THEORY,B.COVERED_CALL].includes(W),C=(W,ie)=>{let K=new Date(W),Y=0;for(;Y<ie;)K.setDate(K.getDate()+1),K.getDay()!==0&&K.getDay()!==6&&Y++;return K},k=(W,ie)=>{switch(ie){case B.LONG_CALL:return W*1.05;case B.COVERED_CALL:return W*1.08;case B.CASH_SECURED_PUT:return W*.92;case B.PROTECTIVE_PUT:return W*.9;case B.COLLAR_STRATEGY:return W*1.1;case B.FIG_LEAF:return W*1.05;default:return W*1.1}},P=W=>{switch(W){case B.COVERED_CALL:return .004;case B.LONG_CALL:return .015;case B.CASH_SECURED_PUT:return .008;case B.PROTECTIVE_PUT:return .012;case B.COLLAR_STRATEGY:return .006;case B.FIG_LEAF:return .015;default:return .01}},b=async()=>{a(!0);try{console.log("Starting fetchStockData with:",{symbol:i}),await O(i);const W=n===B.FIG_LEAF?C(new Date,30):C(new Date,10),K=await(await fetch(`https://finnhub.io/api/v1/quote?symbol=${i}&token=${sx}`)).json();if(console.log("Quote data:",K),K.c){const Y=K.c,M=-.05,Q=Math.random()*(.15-M)+M,ee=Y*(1+Q);console.log("Setting data with values:",{startingPrice:Y,randomChange:`${(Q*100).toFixed(2)}%`,futurePrice:ee}),u(Y.toFixed(2));const ae=k(Y,n);f(ae.toFixed(2));const fe=P(n);return y((Y*fe).toFixed(2)),S(ee.toFixed(2)),w(W.toISOString().split("T")[0]),console.log("Data set successfully:",{stockPrice:Y.toFixed(2),strikePrice:(Y*1.05).toFixed(2),premium:(Y*.03).toFixed(2),futurePrice:ee.toFixed(2),expirationDate:W.toISOString().split("T")[0]}),!0}else return console.log("Missing required data:",{hasCurrentPrice:!!K.c}),x({show:!0,correct:!1,message:"No data available for this symbol"}),!1}catch(W){return console.error("Error fetching data:",W),x({show:!0,correct:!1,message:"Error fetching stock data"}),!1}finally{a(!1)}},N=async()=>{if(!i){x({show:!0,correct:!1,message:"Please enter both symbol and date"});return}await b()&&x({show:!0,correct:!0,message:""})},R=()=>{if(I(n)&&!t)return m.jsx("div",{className:"mt-8",children:m.jsx(IV,{})});const W=l&&d&&h&&v&&T;return m.jsx("div",{className:"space-y-8",children:W&&m.jsx("div",{className:"border-t pt-8",children:m.jsx(QV,{stockPrice:l,strikePrice:d,premium:h,symbol:i,expirationDate:T,futurePrice:v,selectedDate:new Date().toISOString().split("T")[0],strategy:n})})})};return m.jsx("div",{className:"min-h-screen bg-blue-50 p-8",children:m.jsxs(dr,{className:"max-w-4xl mx-auto bg-white mb-8",children:[m.jsx(Gi,{children:m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("div",{children:[m.jsx(Ki,{className:"text-2xl font-bold text-blue-900",children:"Options Trading Guide"}),m.jsx(ig,{children:"Learn options trading concepts with interactive examples"})]}),m.jsx(fV,{})]})}),m.jsxs(hr,{className:"space-y-8",children:[m.jsx(uV,{selectedStrategy:n,onStrategyChange:r}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Options Analysis Tool"}),m.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(DT,{htmlFor:"symbol",children:"Stock Symbol"}),m.jsx(FT,{id:"symbol",placeholder:`Enter symbol (e.g., ${e()})`,value:i,onChange:W=>o(W.target.value.toUpperCase()),className:"bg-blue-50"})]}),m.jsx(Mi,{onClick:N,className:"w-full bg-blue-600 hover:bg-blue-700 text-white",disabled:s,children:s?m.jsxs("span",{className:"flex items-center",children:[m.jsx(yT,{className:"animate-spin mr-2"}),"Loading..."]}):"Analyze Stock"}),l&&d&&h&&(!I(n)||t)?m.jsx(ZV,{stockPrice:l,strikePrice:d,premium:h,companyDetails:$}):null,E.show&&!E.correct&&m.jsxs(rl,{className:"bg-red-50",children:[m.jsx(mT,{className:"text-red-600"}),m.jsx(NT,{className:"text-red-800",children:"Error"}),m.jsx(il,{className:"whitespace-pre-line",children:E.message})]})]}),m.jsx("div",{className:"space-y-4",children:m.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[m.jsx("h4",{className:"font-medium mb-2",children:"Analysis"}),l&&d&&(!I(n)||t)?m.jsxs(m.Fragment,{children:[m.jsx(ej,{symbol:i}),m.jsx("div",{className:"mt-6",children:m.jsx(dr,{className:"bg-white",children:m.jsxs(hr,{className:"pt-6",children:[m.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Options Details"}),(()=>{const W=parseFloat(h)*1.2,ie=parseFloat(h)*.8,K=W-ie,Y=parseFloat(d)*.95,M=parseFloat(d)*1.05,H=M-Y-K,Q=K,ee=parseFloat(l)*.8,ae=parseFloat(h)*3,fe=ae-parseFloat(h);switch(n){case B.FIG_LEAF:return m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Current Stock Price"}),m.jsxs("p",{className:"font-medium",children:["$",l]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"LEAPS Strike (ITM)"}),m.jsxs("p",{className:"font-medium",children:["$",ee.toFixed(2)]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Short Call Strike (OTM)"}),m.jsxs("p",{className:"font-medium",children:["$",d]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"LEAPS Premium (Paid)"}),m.jsxs("p",{className:"font-medium text-red-600",children:["-$",ae.toFixed(2)," per share"]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Short Call Premium (Received)"}),m.jsxs("p",{className:"font-medium text-green-600",children:["+$",h," per share"]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Net Debit"}),m.jsxs("p",{className:"font-medium text-red-600",children:["$",fe.toFixed(2)," per share"]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Required Collateral"}),m.jsxs("p",{className:"font-medium",children:["$",xn(n,l,d,h).amount,m.jsx("span",{className:"text-sm text-gray-500 ml-1",children:xn(n,l,d,h).description})]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Initial Investment"}),m.jsxs("p",{className:"font-medium text-red-600",children:["$",wn(n,l,d,h).amount,m.jsx("span",{className:"text-sm text-gray-500 ml-1",children:wn(n,l,d,h).description})]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Trade Date"}),m.jsx("p",{className:"font-medium",children:new Date().toISOString().split("T")[0]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Expiration Date"}),m.jsx("p",{className:"font-medium",children:T})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Break-even Price"}),m.jsxs("p",{className:"font-medium",children:["$",(ee+fe).toFixed(2)]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Maximum Loss"}),m.jsxs("p",{className:"font-medium",children:["$",(fe*100).toFixed(2)," (net debit paid)"]})]})]});case B.LONG_PUT_SPREAD:return m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Current Stock Price"}),m.jsxs("p",{className:"font-medium",children:["$",l]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Long Put Strike (Higher)"}),m.jsxs("p",{className:"font-medium",children:["$",d]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Short Put Strike (Lower)"}),m.jsxs("p",{className:"font-medium",children:["$",(parseFloat(d)*.95).toFixed(2)]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Long Put Premium (Paid)"}),m.jsxs("p",{className:"font-medium text-red-600",children:["-$",h," per share"]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Short Put Premium (Received)"}),m.jsxs("p",{className:"font-medium text-green-600",children:["+$",(parseFloat(h)*.7).toFixed(2)," per share"]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Net Debit"}),m.jsxs("p",{className:"font-medium text-red-600",children:["$",(parseFloat(h)*.3).toFixed(2)," per share"]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Maximum Profit"}),m.jsxs("p",{className:"font-medium",children:["$",(parseFloat(d)-parseFloat(d)*.95-parseFloat(h)*.3).toFixed(2)," per share"]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Maximum Loss"}),m.jsxs("p",{className:"font-medium",children:["$",(parseFloat(h)*.3).toFixed(2)," per share"]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Break-even Price"}),m.jsxs("p",{className:"font-medium",children:["$",(parseFloat(d)-parseFloat(h)*.3).toFixed(2)]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Required Collateral"}),m.jsxs("p",{className:"font-medium",children:["$",xn(n,l,d,h).amount,m.jsx("span",{className:"text-sm text-gray-500 ml-1",children:xn(n,l,d,h).description})]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Initial Investment"}),m.jsxs("p",{className:"font-medium text-red-600",children:["$",wn(n,l,d,h).amount,m.jsx("span",{className:"text-sm text-gray-500 ml-1",children:wn(n,l,d,h).description})]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Trade Date"}),m.jsx("p",{className:"font-medium",children:new Date().toISOString().split("T")[0]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Expiration Date"}),m.jsx("p",{className:"font-medium",children:T})]})]});case B.LONG_CALL_SPREAD:return m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Current Stock Price"}),m.jsxs("p",{className:"font-medium",children:["$",l]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Long Call Strike"}),m.jsxs("p",{className:"font-medium",children:["$",Y.toFixed(2)]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Short Call Strike"}),m.jsxs("p",{className:"font-medium",children:["$",M.toFixed(2)]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Long Call Premium (Paid)"}),m.jsxs("p",{className:"font-medium text-red-600",children:["-$",W.toFixed(2)," per share"]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Short Call Premium (Received)"}),m.jsxs("p",{className:"font-medium text-green-600",children:["+$",ie.toFixed(2)," per share"]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Net Debit"}),m.jsxs("p",{className:"font-medium text-red-600",children:["$",K.toFixed(2)," per share"]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Maximum Profit"}),m.jsxs("p",{className:"font-medium",children:["$",H.toFixed(2)," per share"]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Maximum Loss"}),m.jsxs("p",{className:"font-medium",children:["$",Q.toFixed(2)," per share"]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Break-even Price"}),m.jsxs("p",{className:"font-medium",children:["$",(Y+K).toFixed(2)]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Required Collateral"}),m.jsxs("p",{className:"font-medium",children:["$",xn(n,l,d,h).amount,m.jsx("span",{className:"text-sm text-gray-500 ml-1",children:xn(n,l,d,h).description})]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Initial Investment"}),m.jsxs("p",{className:"font-medium text-red-600",children:["$",wn(n,l,d,h).amount,m.jsx("span",{className:"text-sm text-gray-500 ml-1",children:wn(n,l,d,h).description})]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Trade Date"}),m.jsx("p",{className:"font-medium",children:new Date().toISOString().split("T")[0]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Expiration Date"}),m.jsx("p",{className:"font-medium",children:T})]})]});case B.COLLAR_STRATEGY:return m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Current Stock Price"}),m.jsxs("p",{className:"font-medium",children:["$",l]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Call Strike (Short)"}),m.jsxs("p",{className:"font-medium",children:["$",d]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Put Strike (Long)"}),m.jsxs("p",{className:"font-medium",children:["$",(parseFloat(l)*.9).toFixed(2)]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Call Premium (Received)"}),m.jsxs("p",{className:"font-medium text-green-600",children:["+$",h," per share"]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Put Premium (Paid)"}),m.jsxs("p",{className:"font-medium text-red-600",children:["-$",(parseFloat(h)*.8).toFixed(2)," per share"]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Net Debit/Credit"}),m.jsxs("p",{className:`font-medium ${parseFloat(h)*.2>0?"text-green-600":"text-red-600"}`,children:["$",(parseFloat(h)*.2).toFixed(2)," per share"]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Maximum Profit"}),m.jsxs("p",{className:"font-medium",children:["$",(parseFloat(d)-parseFloat(l)+parseFloat(h)*.2).toFixed(2)," per share"]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Maximum Loss"}),m.jsxs("p",{className:"font-medium",children:["$",(parseFloat(l)-parseFloat(l)*.9-parseFloat(h)*.2).toFixed(2)," per share"]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Required Collateral"}),m.jsxs("p",{className:"font-medium",children:["$",xn(n,l,d,h).amount,m.jsx("span",{className:"text-sm text-gray-500 ml-1",children:xn(n,l,d,h).description})]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Initial Cash Flow"}),m.jsxs("p",{className:`font-medium ${parseFloat(h)*.2>0?"text-green-600":"text-red-600"}`,children:["$",wn(n,l,d,h).amount,m.jsx("span",{className:"text-sm text-gray-500 ml-1",children:wn(n,l,d,h).description})]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Trade Date"}),m.jsx("p",{className:"font-medium",children:new Date().toISOString().split("T")[0]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Expiration Date"}),m.jsxs("p",{className:"font-medium",children:["$",T]})]})]});default:return m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Current Stock Price"}),m.jsxs("p",{className:"font-medium",children:["$",l]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Strike Price"}),m.jsxs("p",{className:"font-medium",children:["$",d]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Option Premium"}),m.jsxs("p",{className:"font-medium",children:["$",h," per share"]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Total Cost"}),m.jsxs("p",{className:"font-medium",children:["$",(parseFloat(h)*100).toFixed(2)]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Required Collateral"}),m.jsxs("p",{className:"font-medium",children:["$",xn(n,l,d,h).amount,m.jsx("span",{className:"text-sm text-gray-500 ml-1",children:xn(n,l,d,h).description})]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Initial Cash Flow"}),m.jsxs("p",{className:`font-medium ${n===B.COVERED_CALL||n===B.CASH_SECURED_PUT?"text-green-600":"text-red-600"}`,children:[n===B.COVERED_CALL||n===B.CASH_SECURED_PUT?"+":"-","$",wn(n,l,d,h).amount,m.jsx("span",{className:"text-sm text-gray-500 ml-1",children:wn(n,l,d,h).description})]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Trade Date"}),m.jsx("p",{className:"font-medium",children:new Date().toISOString().split("T")[0]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Expiration Date"}),m.jsxs("p",{className:"font-medium",children:["$",T]})]})]})}})()]})})})]}):m.jsx("p",{className:"text-gray-500",children:"Select a stock symbol and date to see analysis"})]})})]})]}),R()]})]})})},nj=()=>m.jsx(pL,{children:m.jsx(yL,{children:m.jsxs(Mk,{children:[m.jsx(yf,{path:"/",element:m.jsx(tj,{})}),m.jsx(yf,{path:"/success",element:m.jsx(YV,{})})]})})});Eh.createRoot(document.getElementById("root")).render(m.jsx(Bn.StrictMode,{children:m.jsx(lP,{children:m.jsx(nj,{})})}));
