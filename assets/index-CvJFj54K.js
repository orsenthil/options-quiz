function d1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function a_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var l_={exports:{}},yc={},u_={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var La=Symbol.for("react.element"),h1=Symbol.for("react.portal"),f1=Symbol.for("react.fragment"),p1=Symbol.for("react.strict_mode"),m1=Symbol.for("react.profiler"),g1=Symbol.for("react.provider"),y1=Symbol.for("react.context"),v1=Symbol.for("react.forward_ref"),_1=Symbol.for("react.suspense"),w1=Symbol.for("react.memo"),x1=Symbol.for("react.lazy"),ny=Symbol.iterator;function E1(t){return t===null||typeof t!="object"?null:(t=ny&&t[ny]||t["@@iterator"],typeof t=="function"?t:null)}var c_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},d_=Object.assign,h_={};function Qo(t,e,n){this.props=t,this.context=e,this.refs=h_,this.updater=n||c_}Qo.prototype.isReactComponent={};Qo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Qo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function f_(){}f_.prototype=Qo.prototype;function ep(t,e,n){this.props=t,this.context=e,this.refs=h_,this.updater=n||c_}var tp=ep.prototype=new f_;tp.constructor=ep;d_(tp,Qo.prototype);tp.isPureReactComponent=!0;var ry=Array.isArray,p_=Object.prototype.hasOwnProperty,np={current:null},m_={key:!0,ref:!0,__self:!0,__source:!0};function g_(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)p_.call(e,r)&&!m_.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:La,type:t,key:o,ref:s,props:i,_owner:np.current}}function T1(t,e){return{$$typeof:La,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function rp(t){return typeof t=="object"&&t!==null&&t.$$typeof===La}function S1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var iy=/\/+/g;function Id(t,e){return typeof t=="object"&&t!==null&&t.key!=null?S1(""+t.key):e.toString(36)}function Jl(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case La:case h1:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+Id(s,0):r,ry(i)?(n="",t!=null&&(n=t.replace(iy,"$&/")+"/"),Jl(i,e,n,"",function(c){return c})):i!=null&&(rp(i)&&(i=T1(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(iy,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",ry(t))for(var a=0;a<t.length;a++){o=t[a];var l=r+Id(o,a);s+=Jl(o,e,n,l,i)}else if(l=E1(t),typeof l=="function")for(t=l.call(t),a=0;!(o=t.next()).done;)o=o.value,l=r+Id(o,a++),s+=Jl(o,e,n,l,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function _l(t,e,n){if(t==null)return t;var r=[],i=0;return Jl(t,r,"","",function(o){return e.call(n,o,i++)}),r}function C1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var It={current:null},Zl={transition:null},I1={ReactCurrentDispatcher:It,ReactCurrentBatchConfig:Zl,ReactCurrentOwner:np};function y_(){throw Error("act(...) is not supported in production builds of React.")}ae.Children={map:_l,forEach:function(t,e,n){_l(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return _l(t,function(){e++}),e},toArray:function(t){return _l(t,function(e){return e})||[]},only:function(t){if(!rp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ae.Component=Qo;ae.Fragment=f1;ae.Profiler=m1;ae.PureComponent=ep;ae.StrictMode=p1;ae.Suspense=_1;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I1;ae.act=y_;ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=d_({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=np.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)p_.call(e,l)&&!m_.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:La,type:t.type,key:i,ref:o,props:r,_owner:s}};ae.createContext=function(t){return t={$$typeof:y1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:g1,_context:t},t.Consumer=t};ae.createElement=g_;ae.createFactory=function(t){var e=g_.bind(null,t);return e.type=t,e};ae.createRef=function(){return{current:null}};ae.forwardRef=function(t){return{$$typeof:v1,render:t}};ae.isValidElement=rp;ae.lazy=function(t){return{$$typeof:x1,_payload:{_status:-1,_result:t},_init:C1}};ae.memo=function(t,e){return{$$typeof:w1,type:t,compare:e===void 0?null:e}};ae.startTransition=function(t){var e=Zl.transition;Zl.transition={};try{t()}finally{Zl.transition=e}};ae.unstable_act=y_;ae.useCallback=function(t,e){return It.current.useCallback(t,e)};ae.useContext=function(t){return It.current.useContext(t)};ae.useDebugValue=function(){};ae.useDeferredValue=function(t){return It.current.useDeferredValue(t)};ae.useEffect=function(t,e){return It.current.useEffect(t,e)};ae.useId=function(){return It.current.useId()};ae.useImperativeHandle=function(t,e,n){return It.current.useImperativeHandle(t,e,n)};ae.useInsertionEffect=function(t,e){return It.current.useInsertionEffect(t,e)};ae.useLayoutEffect=function(t,e){return It.current.useLayoutEffect(t,e)};ae.useMemo=function(t,e){return It.current.useMemo(t,e)};ae.useReducer=function(t,e,n){return It.current.useReducer(t,e,n)};ae.useRef=function(t){return It.current.useRef(t)};ae.useState=function(t){return It.current.useState(t)};ae.useSyncExternalStore=function(t,e,n){return It.current.useSyncExternalStore(t,e,n)};ae.useTransition=function(){return It.current.useTransition()};ae.version="18.3.1";u_.exports=ae;var w=u_.exports;const Fn=a_(w),A1=d1({__proto__:null,default:Fn},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R1=w,P1=Symbol.for("react.element"),k1=Symbol.for("react.fragment"),b1=Object.prototype.hasOwnProperty,N1=R1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$1={key:!0,ref:!0,__self:!0,__source:!0};function v_(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)b1.call(e,r)&&!$1.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:P1,type:t,key:o,ref:s,props:i,_owner:N1.current}}yc.Fragment=k1;yc.jsx=v_;yc.jsxs=v_;l_.exports=yc;var x=l_.exports,Eh={},__={exports:{}},Ht={},w_={exports:{}},x_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,z){var G=M.length;M.push(z);e:for(;0<G;){var ee=G-1>>>1,ce=M[ee];if(0<i(ce,z))M[ee]=z,M[G]=ce,G=ee;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var z=M[0],G=M.pop();if(G!==z){M[0]=G;e:for(var ee=0,ce=M.length,_e=ce>>>1;ee<_e;){var Qe=2*(ee+1)-1,ct=M[Qe],et=Qe+1,X=M[et];if(0>i(ct,G))et<ce&&0>i(X,ct)?(M[ee]=X,M[et]=G,ee=et):(M[ee]=ct,M[Qe]=G,ee=Qe);else if(et<ce&&0>i(X,G))M[ee]=X,M[et]=G,ee=et;else break e}}return z}function i(M,z){var G=M.sortIndex-z.sortIndex;return G!==0?G:M.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],c=[],d=1,f=null,p=3,g=!1,E=!1,v=!1,A=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(M){for(var z=n(c);z!==null;){if(z.callback===null)r(c);else if(z.startTime<=M)r(c),z.sortIndex=z.expirationTime,e(l,z);else break;z=n(c)}}function b(M){if(v=!1,S(M),!E)if(n(l)!==null)E=!0,K(O);else{var z=n(c);z!==null&&Y(b,z.startTime-M)}}function O(M,z){E=!1,v&&(v=!1,_(T),T=-1),g=!0;var G=p;try{for(S(z),f=n(l);f!==null&&(!(f.expirationTime>z)||M&&!N());){var ee=f.callback;if(typeof ee=="function"){f.callback=null,p=f.priorityLevel;var ce=ee(f.expirationTime<=z);z=t.unstable_now(),typeof ce=="function"?f.callback=ce:f===n(l)&&r(l),S(z)}else r(l);f=n(l)}if(f!==null)var _e=!0;else{var Qe=n(c);Qe!==null&&Y(b,Qe.startTime-z),_e=!1}return _e}finally{f=null,p=G,g=!1}}var D=!1,I=null,T=-1,R=5,P=-1;function N(){return!(t.unstable_now()-P<R)}function $(){if(I!==null){var M=t.unstable_now();P=M;var z=!0;try{z=I(!0,M)}finally{z?k():(D=!1,I=null)}}else D=!1}var k;if(typeof y=="function")k=function(){y($)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,oe=W.port2;W.port1.onmessage=$,k=function(){oe.postMessage(null)}}else k=function(){A($,0)};function K(M){I=M,D||(D=!0,k())}function Y(M,z){T=A(function(){M(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){E||g||(E=!0,K(O))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(M){switch(p){case 1:case 2:case 3:var z=3;break;default:z=p}var G=p;p=z;try{return M()}finally{p=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,z){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var G=p;p=M;try{return z()}finally{p=G}},t.unstable_scheduleCallback=function(M,z,G){var ee=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?ee+G:ee):G=ee,M){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=G+ce,M={id:d++,callback:z,priorityLevel:M,startTime:G,expirationTime:ce,sortIndex:-1},G>ee?(M.sortIndex=G,e(c,M),n(l)===null&&M===n(c)&&(v?(_(T),T=-1):v=!0,Y(b,G-ee))):(M.sortIndex=ce,e(l,M),E||g||(E=!0,K(O))),M},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(M){var z=p;return function(){var G=p;p=z;try{return M.apply(this,arguments)}finally{p=G}}}})(x_);w_.exports=x_;var O1=w_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L1=w,Bt=O1;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var E_=new Set,sa={};function Li(t,e){ko(t,e),ko(t+"Capture",e)}function ko(t,e){for(sa[t]=e,t=0;t<e.length;t++)E_.add(e[t])}var Qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Th=Object.prototype.hasOwnProperty,D1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,oy={},sy={};function F1(t){return Th.call(sy,t)?!0:Th.call(oy,t)?!1:D1.test(t)?sy[t]=!0:(oy[t]=!0,!1)}function M1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function V1(t,e,n,r){if(e===null||typeof e>"u"||M1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function At(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var at={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){at[t]=new At(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];at[e]=new At(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){at[t]=new At(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){at[t]=new At(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){at[t]=new At(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){at[t]=new At(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){at[t]=new At(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){at[t]=new At(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){at[t]=new At(t,5,!1,t.toLowerCase(),null,!1,!1)});var ip=/[\-:]([a-z])/g;function op(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ip,op);at[e]=new At(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ip,op);at[e]=new At(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ip,op);at[e]=new At(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){at[t]=new At(t,1,!1,t.toLowerCase(),null,!1,!1)});at.xlinkHref=new At("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){at[t]=new At(t,1,!1,t.toLowerCase(),null,!0,!0)});function sp(t,e,n,r){var i=at.hasOwnProperty(e)?at[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(V1(e,n,i,r)&&(n=null),r||i===null?F1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var lr=L1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wl=Symbol.for("react.element"),io=Symbol.for("react.portal"),oo=Symbol.for("react.fragment"),ap=Symbol.for("react.strict_mode"),Sh=Symbol.for("react.profiler"),T_=Symbol.for("react.provider"),S_=Symbol.for("react.context"),lp=Symbol.for("react.forward_ref"),Ch=Symbol.for("react.suspense"),Ih=Symbol.for("react.suspense_list"),up=Symbol.for("react.memo"),wr=Symbol.for("react.lazy"),C_=Symbol.for("react.offscreen"),ay=Symbol.iterator;function Cs(t){return t===null||typeof t!="object"?null:(t=ay&&t[ay]||t["@@iterator"],typeof t=="function"?t:null)}var $e=Object.assign,Ad;function Ms(t){if(Ad===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ad=e&&e[1]||""}return`
`+Ad+t}var Rd=!1;function Pd(t,e){if(!t||Rd)return"";Rd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=a);break}}}finally{Rd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ms(t):""}function j1(t){switch(t.tag){case 5:return Ms(t.type);case 16:return Ms("Lazy");case 13:return Ms("Suspense");case 19:return Ms("SuspenseList");case 0:case 2:case 15:return t=Pd(t.type,!1),t;case 11:return t=Pd(t.type.render,!1),t;case 1:return t=Pd(t.type,!0),t;default:return""}}function Ah(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case oo:return"Fragment";case io:return"Portal";case Sh:return"Profiler";case ap:return"StrictMode";case Ch:return"Suspense";case Ih:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case S_:return(t.displayName||"Context")+".Consumer";case T_:return(t._context.displayName||"Context")+".Provider";case lp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case up:return e=t.displayName||null,e!==null?e:Ah(t.type)||"Memo";case wr:e=t._payload,t=t._init;try{return Ah(t(e))}catch{}}return null}function U1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ah(e);case 8:return e===ap?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function zr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function I_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function B1(t){var e=I_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xl(t){t._valueTracker||(t._valueTracker=B1(t))}function A_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=I_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Su(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Rh(t,e){var n=e.checked;return $e({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ly(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=zr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function R_(t,e){e=e.checked,e!=null&&sp(t,"checked",e,!1)}function Ph(t,e){R_(t,e);var n=zr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?kh(t,e.type,n):e.hasOwnProperty("defaultValue")&&kh(t,e.type,zr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function uy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function kh(t,e,n){(e!=="number"||Su(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Vs=Array.isArray;function yo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+zr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function bh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return $e({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function cy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Vs(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:zr(n)}}function P_(t,e){var n=zr(e.value),r=zr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function dy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function k_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Nh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?k_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var El,b_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(El=El||document.createElement("div"),El.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=El.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function aa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var qs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},z1=["Webkit","ms","Moz","O"];Object.keys(qs).forEach(function(t){z1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),qs[e]=qs[t]})});function N_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||qs.hasOwnProperty(t)&&qs[t]?(""+e).trim():e+"px"}function $_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=N_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var W1=$e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $h(t,e){if(e){if(W1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Oh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lh=null;function cp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Dh=null,vo=null,_o=null;function hy(t){if(t=Ma(t)){if(typeof Dh!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Ec(e),Dh(t.stateNode,t.type,e))}}function O_(t){vo?_o?_o.push(t):_o=[t]:vo=t}function L_(){if(vo){var t=vo,e=_o;if(_o=vo=null,hy(t),e)for(t=0;t<e.length;t++)hy(e[t])}}function D_(t,e){return t(e)}function F_(){}var kd=!1;function M_(t,e,n){if(kd)return t(e,n);kd=!0;try{return D_(t,e,n)}finally{kd=!1,(vo!==null||_o!==null)&&(F_(),L_())}}function la(t,e){var n=t.stateNode;if(n===null)return null;var r=Ec(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var Fh=!1;if(Qn)try{var Is={};Object.defineProperty(Is,"passive",{get:function(){Fh=!0}}),window.addEventListener("test",Is,Is),window.removeEventListener("test",Is,Is)}catch{Fh=!1}function H1(t,e,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Gs=!1,Cu=null,Iu=!1,Mh=null,q1={onError:function(t){Gs=!0,Cu=t}};function G1(t,e,n,r,i,o,s,a,l){Gs=!1,Cu=null,H1.apply(q1,arguments)}function K1(t,e,n,r,i,o,s,a,l){if(G1.apply(this,arguments),Gs){if(Gs){var c=Cu;Gs=!1,Cu=null}else throw Error(U(198));Iu||(Iu=!0,Mh=c)}}function Di(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function V_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function fy(t){if(Di(t)!==t)throw Error(U(188))}function Q1(t){var e=t.alternate;if(!e){if(e=Di(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return fy(i),t;if(o===r)return fy(i),e;o=o.sibling}throw Error(U(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function j_(t){return t=Q1(t),t!==null?U_(t):null}function U_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=U_(t);if(e!==null)return e;t=t.sibling}return null}var B_=Bt.unstable_scheduleCallback,py=Bt.unstable_cancelCallback,Y1=Bt.unstable_shouldYield,X1=Bt.unstable_requestPaint,Me=Bt.unstable_now,J1=Bt.unstable_getCurrentPriorityLevel,dp=Bt.unstable_ImmediatePriority,z_=Bt.unstable_UserBlockingPriority,Au=Bt.unstable_NormalPriority,Z1=Bt.unstable_LowPriority,W_=Bt.unstable_IdlePriority,vc=null,wn=null;function eI(t){if(wn&&typeof wn.onCommitFiberRoot=="function")try{wn.onCommitFiberRoot(vc,t,void 0,(t.current.flags&128)===128)}catch{}}var ln=Math.clz32?Math.clz32:rI,tI=Math.log,nI=Math.LN2;function rI(t){return t>>>=0,t===0?32:31-(tI(t)/nI|0)|0}var Tl=64,Sl=4194304;function js(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ru(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=js(a):(o&=s,o!==0&&(r=js(o)))}else s=n&~i,s!==0?r=js(s):o!==0&&(r=js(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ln(e),i=1<<n,r|=t[n],e&=~i;return r}function iI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-ln(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=iI(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}function Vh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function H_(){var t=Tl;return Tl<<=1,!(Tl&4194240)&&(Tl=64),t}function bd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Da(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ln(e),t[e]=n}function sI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ln(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function hp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ln(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var we=0;function q_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var G_,fp,K_,Q_,Y_,jh=!1,Cl=[],kr=null,br=null,Nr=null,ua=new Map,ca=new Map,Er=[],aI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function my(t,e){switch(t){case"focusin":case"focusout":kr=null;break;case"dragenter":case"dragleave":br=null;break;case"mouseover":case"mouseout":Nr=null;break;case"pointerover":case"pointerout":ua.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ca.delete(e.pointerId)}}function As(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Ma(e),e!==null&&fp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function lI(t,e,n,r,i){switch(e){case"focusin":return kr=As(kr,t,e,n,r,i),!0;case"dragenter":return br=As(br,t,e,n,r,i),!0;case"mouseover":return Nr=As(Nr,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return ua.set(o,As(ua.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,ca.set(o,As(ca.get(o)||null,t,e,n,r,i)),!0}return!1}function X_(t){var e=mi(t.target);if(e!==null){var n=Di(e);if(n!==null){if(e=n.tag,e===13){if(e=V_(n),e!==null){t.blockedOn=e,Y_(t.priority,function(){K_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function eu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Uh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Lh=r,n.target.dispatchEvent(r),Lh=null}else return e=Ma(n),e!==null&&fp(e),t.blockedOn=n,!1;e.shift()}return!0}function gy(t,e,n){eu(t)&&n.delete(e)}function uI(){jh=!1,kr!==null&&eu(kr)&&(kr=null),br!==null&&eu(br)&&(br=null),Nr!==null&&eu(Nr)&&(Nr=null),ua.forEach(gy),ca.forEach(gy)}function Rs(t,e){t.blockedOn===e&&(t.blockedOn=null,jh||(jh=!0,Bt.unstable_scheduleCallback(Bt.unstable_NormalPriority,uI)))}function da(t){function e(i){return Rs(i,t)}if(0<Cl.length){Rs(Cl[0],t);for(var n=1;n<Cl.length;n++){var r=Cl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(kr!==null&&Rs(kr,t),br!==null&&Rs(br,t),Nr!==null&&Rs(Nr,t),ua.forEach(e),ca.forEach(e),n=0;n<Er.length;n++)r=Er[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Er.length&&(n=Er[0],n.blockedOn===null);)X_(n),n.blockedOn===null&&Er.shift()}var wo=lr.ReactCurrentBatchConfig,Pu=!0;function cI(t,e,n,r){var i=we,o=wo.transition;wo.transition=null;try{we=1,pp(t,e,n,r)}finally{we=i,wo.transition=o}}function dI(t,e,n,r){var i=we,o=wo.transition;wo.transition=null;try{we=4,pp(t,e,n,r)}finally{we=i,wo.transition=o}}function pp(t,e,n,r){if(Pu){var i=Uh(t,e,n,r);if(i===null)Ud(t,e,r,ku,n),my(t,r);else if(lI(i,t,e,n,r))r.stopPropagation();else if(my(t,r),e&4&&-1<aI.indexOf(t)){for(;i!==null;){var o=Ma(i);if(o!==null&&G_(o),o=Uh(t,e,n,r),o===null&&Ud(t,e,r,ku,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Ud(t,e,r,null,n)}}var ku=null;function Uh(t,e,n,r){if(ku=null,t=cp(r),t=mi(t),t!==null)if(e=Di(t),e===null)t=null;else if(n=e.tag,n===13){if(t=V_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ku=t,null}function J_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(J1()){case dp:return 1;case z_:return 4;case Au:case Z1:return 16;case W_:return 536870912;default:return 16}default:return 16}}var Ar=null,mp=null,tu=null;function Z_(){if(tu)return tu;var t,e=mp,n=e.length,r,i="value"in Ar?Ar.value:Ar.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return tu=i.slice(t,1<r?1-r:void 0)}function nu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Il(){return!0}function yy(){return!1}function qt(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Il:yy,this.isPropagationStopped=yy,this}return $e(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Il)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Il)},persist:function(){},isPersistent:Il}),e}var Yo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gp=qt(Yo),Fa=$e({},Yo,{view:0,detail:0}),hI=qt(Fa),Nd,$d,Ps,_c=$e({},Fa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ps&&(Ps&&t.type==="mousemove"?(Nd=t.screenX-Ps.screenX,$d=t.screenY-Ps.screenY):$d=Nd=0,Ps=t),Nd)},movementY:function(t){return"movementY"in t?t.movementY:$d}}),vy=qt(_c),fI=$e({},_c,{dataTransfer:0}),pI=qt(fI),mI=$e({},Fa,{relatedTarget:0}),Od=qt(mI),gI=$e({},Yo,{animationName:0,elapsedTime:0,pseudoElement:0}),yI=qt(gI),vI=$e({},Yo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_I=qt(vI),wI=$e({},Yo,{data:0}),_y=qt(wI),xI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},EI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},TI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function SI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=TI[t])?!!e[t]:!1}function yp(){return SI}var CI=$e({},Fa,{key:function(t){if(t.key){var e=xI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=nu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?EI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yp,charCode:function(t){return t.type==="keypress"?nu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?nu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),II=qt(CI),AI=$e({},_c,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wy=qt(AI),RI=$e({},Fa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yp}),PI=qt(RI),kI=$e({},Yo,{propertyName:0,elapsedTime:0,pseudoElement:0}),bI=qt(kI),NI=$e({},_c,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$I=qt(NI),OI=[9,13,27,32],vp=Qn&&"CompositionEvent"in window,Ks=null;Qn&&"documentMode"in document&&(Ks=document.documentMode);var LI=Qn&&"TextEvent"in window&&!Ks,ew=Qn&&(!vp||Ks&&8<Ks&&11>=Ks),xy=" ",Ey=!1;function tw(t,e){switch(t){case"keyup":return OI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var so=!1;function DI(t,e){switch(t){case"compositionend":return nw(e);case"keypress":return e.which!==32?null:(Ey=!0,xy);case"textInput":return t=e.data,t===xy&&Ey?null:t;default:return null}}function FI(t,e){if(so)return t==="compositionend"||!vp&&tw(t,e)?(t=Z_(),tu=mp=Ar=null,so=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ew&&e.locale!=="ko"?null:e.data;default:return null}}var MI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ty(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!MI[t.type]:e==="textarea"}function rw(t,e,n,r){O_(r),e=bu(e,"onChange"),0<e.length&&(n=new gp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Qs=null,ha=null;function VI(t){pw(t,0)}function wc(t){var e=uo(t);if(A_(e))return t}function jI(t,e){if(t==="change")return e}var iw=!1;if(Qn){var Ld;if(Qn){var Dd="oninput"in document;if(!Dd){var Sy=document.createElement("div");Sy.setAttribute("oninput","return;"),Dd=typeof Sy.oninput=="function"}Ld=Dd}else Ld=!1;iw=Ld&&(!document.documentMode||9<document.documentMode)}function Cy(){Qs&&(Qs.detachEvent("onpropertychange",ow),ha=Qs=null)}function ow(t){if(t.propertyName==="value"&&wc(ha)){var e=[];rw(e,ha,t,cp(t)),M_(VI,e)}}function UI(t,e,n){t==="focusin"?(Cy(),Qs=e,ha=n,Qs.attachEvent("onpropertychange",ow)):t==="focusout"&&Cy()}function BI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wc(ha)}function zI(t,e){if(t==="click")return wc(e)}function WI(t,e){if(t==="input"||t==="change")return wc(e)}function HI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var dn=typeof Object.is=="function"?Object.is:HI;function fa(t,e){if(dn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Th.call(e,i)||!dn(t[i],e[i]))return!1}return!0}function Iy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ay(t,e){var n=Iy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Iy(n)}}function sw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?sw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function aw(){for(var t=window,e=Su();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Su(t.document)}return e}function _p(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function qI(t){var e=aw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&sw(n.ownerDocument.documentElement,n)){if(r!==null&&_p(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=Ay(n,o);var s=Ay(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var GI=Qn&&"documentMode"in document&&11>=document.documentMode,ao=null,Bh=null,Ys=null,zh=!1;function Ry(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;zh||ao==null||ao!==Su(r)||(r=ao,"selectionStart"in r&&_p(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ys&&fa(Ys,r)||(Ys=r,r=bu(Bh,"onSelect"),0<r.length&&(e=new gp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ao)))}function Al(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var lo={animationend:Al("Animation","AnimationEnd"),animationiteration:Al("Animation","AnimationIteration"),animationstart:Al("Animation","AnimationStart"),transitionend:Al("Transition","TransitionEnd")},Fd={},lw={};Qn&&(lw=document.createElement("div").style,"AnimationEvent"in window||(delete lo.animationend.animation,delete lo.animationiteration.animation,delete lo.animationstart.animation),"TransitionEvent"in window||delete lo.transitionend.transition);function xc(t){if(Fd[t])return Fd[t];if(!lo[t])return t;var e=lo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in lw)return Fd[t]=e[n];return t}var uw=xc("animationend"),cw=xc("animationiteration"),dw=xc("animationstart"),hw=xc("transitionend"),fw=new Map,Py="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ei(t,e){fw.set(t,e),Li(e,[t])}for(var Md=0;Md<Py.length;Md++){var Vd=Py[Md],KI=Vd.toLowerCase(),QI=Vd[0].toUpperCase()+Vd.slice(1);ei(KI,"on"+QI)}ei(uw,"onAnimationEnd");ei(cw,"onAnimationIteration");ei(dw,"onAnimationStart");ei("dblclick","onDoubleClick");ei("focusin","onFocus");ei("focusout","onBlur");ei(hw,"onTransitionEnd");ko("onMouseEnter",["mouseout","mouseover"]);ko("onMouseLeave",["mouseout","mouseover"]);ko("onPointerEnter",["pointerout","pointerover"]);ko("onPointerLeave",["pointerout","pointerover"]);Li("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Li("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Li("onBeforeInput",["compositionend","keypress","textInput","paste"]);Li("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Li("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Li("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Us="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Us));function ky(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,K1(r,e,void 0,t),t.currentTarget=null}function pw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;ky(i,a,c),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;ky(i,a,c),o=l}}}if(Iu)throw t=Mh,Iu=!1,Mh=null,t}function Ie(t,e){var n=e[Kh];n===void 0&&(n=e[Kh]=new Set);var r=t+"__bubble";n.has(r)||(mw(e,t,2,!1),n.add(r))}function jd(t,e,n){var r=0;e&&(r|=4),mw(n,t,r,e)}var Rl="_reactListening"+Math.random().toString(36).slice(2);function pa(t){if(!t[Rl]){t[Rl]=!0,E_.forEach(function(n){n!=="selectionchange"&&(YI.has(n)||jd(n,!1,t),jd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Rl]||(e[Rl]=!0,jd("selectionchange",!1,e))}}function mw(t,e,n,r){switch(J_(e)){case 1:var i=cI;break;case 4:i=dI;break;default:i=pp}n=i.bind(null,e,n,t),i=void 0,!Fh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Ud(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=mi(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}M_(function(){var c=o,d=cp(n),f=[];e:{var p=fw.get(t);if(p!==void 0){var g=gp,E=t;switch(t){case"keypress":if(nu(n)===0)break e;case"keydown":case"keyup":g=II;break;case"focusin":E="focus",g=Od;break;case"focusout":E="blur",g=Od;break;case"beforeblur":case"afterblur":g=Od;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=vy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=pI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=PI;break;case uw:case cw:case dw:g=yI;break;case hw:g=bI;break;case"scroll":g=hI;break;case"wheel":g=$I;break;case"copy":case"cut":case"paste":g=_I;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=wy}var v=(e&4)!==0,A=!v&&t==="scroll",_=v?p!==null?p+"Capture":null:p;v=[];for(var y=c,S;y!==null;){S=y;var b=S.stateNode;if(S.tag===5&&b!==null&&(S=b,_!==null&&(b=la(y,_),b!=null&&v.push(ma(y,b,S)))),A)break;y=y.return}0<v.length&&(p=new g(p,E,null,n,d),f.push({event:p,listeners:v}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==Lh&&(E=n.relatedTarget||n.fromElement)&&(mi(E)||E[Yn]))break e;if((g||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,g?(E=n.relatedTarget||n.toElement,g=c,E=E?mi(E):null,E!==null&&(A=Di(E),E!==A||E.tag!==5&&E.tag!==6)&&(E=null)):(g=null,E=c),g!==E)){if(v=vy,b="onMouseLeave",_="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(v=wy,b="onPointerLeave",_="onPointerEnter",y="pointer"),A=g==null?p:uo(g),S=E==null?p:uo(E),p=new v(b,y+"leave",g,n,d),p.target=A,p.relatedTarget=S,b=null,mi(d)===c&&(v=new v(_,y+"enter",E,n,d),v.target=S,v.relatedTarget=A,b=v),A=b,g&&E)t:{for(v=g,_=E,y=0,S=v;S;S=Qi(S))y++;for(S=0,b=_;b;b=Qi(b))S++;for(;0<y-S;)v=Qi(v),y--;for(;0<S-y;)_=Qi(_),S--;for(;y--;){if(v===_||_!==null&&v===_.alternate)break t;v=Qi(v),_=Qi(_)}v=null}else v=null;g!==null&&by(f,p,g,v,!1),E!==null&&A!==null&&by(f,A,E,v,!0)}}e:{if(p=c?uo(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var O=jI;else if(Ty(p))if(iw)O=WI;else{O=BI;var D=UI}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(O=zI);if(O&&(O=O(t,c))){rw(f,O,n,d);break e}D&&D(t,p,c),t==="focusout"&&(D=p._wrapperState)&&D.controlled&&p.type==="number"&&kh(p,"number",p.value)}switch(D=c?uo(c):window,t){case"focusin":(Ty(D)||D.contentEditable==="true")&&(ao=D,Bh=c,Ys=null);break;case"focusout":Ys=Bh=ao=null;break;case"mousedown":zh=!0;break;case"contextmenu":case"mouseup":case"dragend":zh=!1,Ry(f,n,d);break;case"selectionchange":if(GI)break;case"keydown":case"keyup":Ry(f,n,d)}var I;if(vp)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else so?tw(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(ew&&n.locale!=="ko"&&(so||T!=="onCompositionStart"?T==="onCompositionEnd"&&so&&(I=Z_()):(Ar=d,mp="value"in Ar?Ar.value:Ar.textContent,so=!0)),D=bu(c,T),0<D.length&&(T=new _y(T,t,null,n,d),f.push({event:T,listeners:D}),I?T.data=I:(I=nw(n),I!==null&&(T.data=I)))),(I=LI?DI(t,n):FI(t,n))&&(c=bu(c,"onBeforeInput"),0<c.length&&(d=new _y("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:c}),d.data=I))}pw(f,e)})}function ma(t,e,n){return{instance:t,listener:e,currentTarget:n}}function bu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=la(t,n),o!=null&&r.unshift(ma(t,o,i)),o=la(t,e),o!=null&&r.push(ma(t,o,i))),t=t.return}return r}function Qi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function by(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=la(n,o),l!=null&&s.unshift(ma(n,l,a))):i||(l=la(n,o),l!=null&&s.push(ma(n,l,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var XI=/\r\n?/g,JI=/\u0000|\uFFFD/g;function Ny(t){return(typeof t=="string"?t:""+t).replace(XI,`
`).replace(JI,"")}function Pl(t,e,n){if(e=Ny(e),Ny(t)!==e&&n)throw Error(U(425))}function Nu(){}var Wh=null,Hh=null;function qh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Gh=typeof setTimeout=="function"?setTimeout:void 0,ZI=typeof clearTimeout=="function"?clearTimeout:void 0,$y=typeof Promise=="function"?Promise:void 0,eA=typeof queueMicrotask=="function"?queueMicrotask:typeof $y<"u"?function(t){return $y.resolve(null).then(t).catch(tA)}:Gh;function tA(t){setTimeout(function(){throw t})}function Bd(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),da(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);da(e)}function $r(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Oy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Xo=Math.random().toString(36).slice(2),vn="__reactFiber$"+Xo,ga="__reactProps$"+Xo,Yn="__reactContainer$"+Xo,Kh="__reactEvents$"+Xo,nA="__reactListeners$"+Xo,rA="__reactHandles$"+Xo;function mi(t){var e=t[vn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Yn]||n[vn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Oy(t);t!==null;){if(n=t[vn])return n;t=Oy(t)}return e}t=n,n=t.parentNode}return null}function Ma(t){return t=t[vn]||t[Yn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function uo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Ec(t){return t[ga]||null}var Qh=[],co=-1;function ti(t){return{current:t}}function Ae(t){0>co||(t.current=Qh[co],Qh[co]=null,co--)}function Te(t,e){co++,Qh[co]=t.current,t.current=e}var Wr={},wt=ti(Wr),Nt=ti(!1),Si=Wr;function bo(t,e){var n=t.type.contextTypes;if(!n)return Wr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function $t(t){return t=t.childContextTypes,t!=null}function $u(){Ae(Nt),Ae(wt)}function Ly(t,e,n){if(wt.current!==Wr)throw Error(U(168));Te(wt,e),Te(Nt,n)}function gw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(U(108,U1(t)||"Unknown",i));return $e({},n,r)}function Ou(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Wr,Si=wt.current,Te(wt,t),Te(Nt,Nt.current),!0}function Dy(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=gw(t,e,Si),r.__reactInternalMemoizedMergedChildContext=t,Ae(Nt),Ae(wt),Te(wt,t)):Ae(Nt),Te(Nt,n)}var Vn=null,Tc=!1,zd=!1;function yw(t){Vn===null?Vn=[t]:Vn.push(t)}function iA(t){Tc=!0,yw(t)}function ni(){if(!zd&&Vn!==null){zd=!0;var t=0,e=we;try{var n=Vn;for(we=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Vn=null,Tc=!1}catch(i){throw Vn!==null&&(Vn=Vn.slice(t+1)),B_(dp,ni),i}finally{we=e,zd=!1}}return null}var ho=[],fo=0,Lu=null,Du=0,Gt=[],Kt=0,Ci=null,Un=1,Bn="";function di(t,e){ho[fo++]=Du,ho[fo++]=Lu,Lu=t,Du=e}function vw(t,e,n){Gt[Kt++]=Un,Gt[Kt++]=Bn,Gt[Kt++]=Ci,Ci=t;var r=Un;t=Bn;var i=32-ln(r)-1;r&=~(1<<i),n+=1;var o=32-ln(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Un=1<<32-ln(e)+i|n<<i|r,Bn=o+t}else Un=1<<o|n<<i|r,Bn=t}function wp(t){t.return!==null&&(di(t,1),vw(t,1,0))}function xp(t){for(;t===Lu;)Lu=ho[--fo],ho[fo]=null,Du=ho[--fo],ho[fo]=null;for(;t===Ci;)Ci=Gt[--Kt],Gt[Kt]=null,Bn=Gt[--Kt],Gt[Kt]=null,Un=Gt[--Kt],Gt[Kt]=null}var Vt=null,Mt=null,Re=!1,sn=null;function _w(t,e){var n=Yt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Fy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Vt=t,Mt=$r(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Vt=t,Mt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ci!==null?{id:Un,overflow:Bn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Yt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Vt=t,Mt=null,!0):!1;default:return!1}}function Yh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Xh(t){if(Re){var e=Mt;if(e){var n=e;if(!Fy(t,e)){if(Yh(t))throw Error(U(418));e=$r(n.nextSibling);var r=Vt;e&&Fy(t,e)?_w(r,n):(t.flags=t.flags&-4097|2,Re=!1,Vt=t)}}else{if(Yh(t))throw Error(U(418));t.flags=t.flags&-4097|2,Re=!1,Vt=t}}}function My(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Vt=t}function kl(t){if(t!==Vt)return!1;if(!Re)return My(t),Re=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!qh(t.type,t.memoizedProps)),e&&(e=Mt)){if(Yh(t))throw ww(),Error(U(418));for(;e;)_w(t,e),e=$r(e.nextSibling)}if(My(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Mt=$r(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Mt=null}}else Mt=Vt?$r(t.stateNode.nextSibling):null;return!0}function ww(){for(var t=Mt;t;)t=$r(t.nextSibling)}function No(){Mt=Vt=null,Re=!1}function Ep(t){sn===null?sn=[t]:sn.push(t)}var oA=lr.ReactCurrentBatchConfig;function ks(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function bl(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Vy(t){var e=t._init;return e(t._payload)}function xw(t){function e(_,y){if(t){var S=_.deletions;S===null?(_.deletions=[y],_.flags|=16):S.push(y)}}function n(_,y){if(!t)return null;for(;y!==null;)e(_,y),y=y.sibling;return null}function r(_,y){for(_=new Map;y!==null;)y.key!==null?_.set(y.key,y):_.set(y.index,y),y=y.sibling;return _}function i(_,y){return _=Fr(_,y),_.index=0,_.sibling=null,_}function o(_,y,S){return _.index=S,t?(S=_.alternate,S!==null?(S=S.index,S<y?(_.flags|=2,y):S):(_.flags|=2,y)):(_.flags|=1048576,y)}function s(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,y,S,b){return y===null||y.tag!==6?(y=Yd(S,_.mode,b),y.return=_,y):(y=i(y,S),y.return=_,y)}function l(_,y,S,b){var O=S.type;return O===oo?d(_,y,S.props.children,b,S.key):y!==null&&(y.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===wr&&Vy(O)===y.type)?(b=i(y,S.props),b.ref=ks(_,y,S),b.return=_,b):(b=uu(S.type,S.key,S.props,null,_.mode,b),b.ref=ks(_,y,S),b.return=_,b)}function c(_,y,S,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==S.containerInfo||y.stateNode.implementation!==S.implementation?(y=Xd(S,_.mode,b),y.return=_,y):(y=i(y,S.children||[]),y.return=_,y)}function d(_,y,S,b,O){return y===null||y.tag!==7?(y=xi(S,_.mode,b,O),y.return=_,y):(y=i(y,S),y.return=_,y)}function f(_,y,S){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Yd(""+y,_.mode,S),y.return=_,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case wl:return S=uu(y.type,y.key,y.props,null,_.mode,S),S.ref=ks(_,null,y),S.return=_,S;case io:return y=Xd(y,_.mode,S),y.return=_,y;case wr:var b=y._init;return f(_,b(y._payload),S)}if(Vs(y)||Cs(y))return y=xi(y,_.mode,S,null),y.return=_,y;bl(_,y)}return null}function p(_,y,S,b){var O=y!==null?y.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return O!==null?null:a(_,y,""+S,b);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case wl:return S.key===O?l(_,y,S,b):null;case io:return S.key===O?c(_,y,S,b):null;case wr:return O=S._init,p(_,y,O(S._payload),b)}if(Vs(S)||Cs(S))return O!==null?null:d(_,y,S,b,null);bl(_,S)}return null}function g(_,y,S,b,O){if(typeof b=="string"&&b!==""||typeof b=="number")return _=_.get(S)||null,a(y,_,""+b,O);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case wl:return _=_.get(b.key===null?S:b.key)||null,l(y,_,b,O);case io:return _=_.get(b.key===null?S:b.key)||null,c(y,_,b,O);case wr:var D=b._init;return g(_,y,S,D(b._payload),O)}if(Vs(b)||Cs(b))return _=_.get(S)||null,d(y,_,b,O,null);bl(y,b)}return null}function E(_,y,S,b){for(var O=null,D=null,I=y,T=y=0,R=null;I!==null&&T<S.length;T++){I.index>T?(R=I,I=null):R=I.sibling;var P=p(_,I,S[T],b);if(P===null){I===null&&(I=R);break}t&&I&&P.alternate===null&&e(_,I),y=o(P,y,T),D===null?O=P:D.sibling=P,D=P,I=R}if(T===S.length)return n(_,I),Re&&di(_,T),O;if(I===null){for(;T<S.length;T++)I=f(_,S[T],b),I!==null&&(y=o(I,y,T),D===null?O=I:D.sibling=I,D=I);return Re&&di(_,T),O}for(I=r(_,I);T<S.length;T++)R=g(I,_,T,S[T],b),R!==null&&(t&&R.alternate!==null&&I.delete(R.key===null?T:R.key),y=o(R,y,T),D===null?O=R:D.sibling=R,D=R);return t&&I.forEach(function(N){return e(_,N)}),Re&&di(_,T),O}function v(_,y,S,b){var O=Cs(S);if(typeof O!="function")throw Error(U(150));if(S=O.call(S),S==null)throw Error(U(151));for(var D=O=null,I=y,T=y=0,R=null,P=S.next();I!==null&&!P.done;T++,P=S.next()){I.index>T?(R=I,I=null):R=I.sibling;var N=p(_,I,P.value,b);if(N===null){I===null&&(I=R);break}t&&I&&N.alternate===null&&e(_,I),y=o(N,y,T),D===null?O=N:D.sibling=N,D=N,I=R}if(P.done)return n(_,I),Re&&di(_,T),O;if(I===null){for(;!P.done;T++,P=S.next())P=f(_,P.value,b),P!==null&&(y=o(P,y,T),D===null?O=P:D.sibling=P,D=P);return Re&&di(_,T),O}for(I=r(_,I);!P.done;T++,P=S.next())P=g(I,_,T,P.value,b),P!==null&&(t&&P.alternate!==null&&I.delete(P.key===null?T:P.key),y=o(P,y,T),D===null?O=P:D.sibling=P,D=P);return t&&I.forEach(function($){return e(_,$)}),Re&&di(_,T),O}function A(_,y,S,b){if(typeof S=="object"&&S!==null&&S.type===oo&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case wl:e:{for(var O=S.key,D=y;D!==null;){if(D.key===O){if(O=S.type,O===oo){if(D.tag===7){n(_,D.sibling),y=i(D,S.props.children),y.return=_,_=y;break e}}else if(D.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===wr&&Vy(O)===D.type){n(_,D.sibling),y=i(D,S.props),y.ref=ks(_,D,S),y.return=_,_=y;break e}n(_,D);break}else e(_,D);D=D.sibling}S.type===oo?(y=xi(S.props.children,_.mode,b,S.key),y.return=_,_=y):(b=uu(S.type,S.key,S.props,null,_.mode,b),b.ref=ks(_,y,S),b.return=_,_=b)}return s(_);case io:e:{for(D=S.key;y!==null;){if(y.key===D)if(y.tag===4&&y.stateNode.containerInfo===S.containerInfo&&y.stateNode.implementation===S.implementation){n(_,y.sibling),y=i(y,S.children||[]),y.return=_,_=y;break e}else{n(_,y);break}else e(_,y);y=y.sibling}y=Xd(S,_.mode,b),y.return=_,_=y}return s(_);case wr:return D=S._init,A(_,y,D(S._payload),b)}if(Vs(S))return E(_,y,S,b);if(Cs(S))return v(_,y,S,b);bl(_,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,y!==null&&y.tag===6?(n(_,y.sibling),y=i(y,S),y.return=_,_=y):(n(_,y),y=Yd(S,_.mode,b),y.return=_,_=y),s(_)):n(_,y)}return A}var $o=xw(!0),Ew=xw(!1),Fu=ti(null),Mu=null,po=null,Tp=null;function Sp(){Tp=po=Mu=null}function Cp(t){var e=Fu.current;Ae(Fu),t._currentValue=e}function Jh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function xo(t,e){Mu=t,Tp=po=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(bt=!0),t.firstContext=null)}function Jt(t){var e=t._currentValue;if(Tp!==t)if(t={context:t,memoizedValue:e,next:null},po===null){if(Mu===null)throw Error(U(308));po=t,Mu.dependencies={lanes:0,firstContext:t}}else po=po.next=t;return e}var gi=null;function Ip(t){gi===null?gi=[t]:gi.push(t)}function Tw(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Ip(e)):(n.next=i.next,i.next=n),e.interleaved=n,Xn(t,r)}function Xn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var xr=!1;function Ap(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Gn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Or(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,pe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Xn(t,n)}return i=r.interleaved,i===null?(e.next=e,Ip(r)):(e.next=i.next,i.next=e),r.interleaved=e,Xn(t,n)}function ru(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hp(t,n)}}function jy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Vu(t,e,n,r){var i=t.updateQueue;xr=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,s===null?o=c:s.next=c,s=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==s&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(o!==null){var f=i.baseState;s=0,d=c=l=null,a=o;do{var p=a.lane,g=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var E=t,v=a;switch(p=e,g=n,v.tag){case 1:if(E=v.payload,typeof E=="function"){f=E.call(g,f,p);break e}f=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=v.payload,p=typeof E=="function"?E.call(g,f,p):E,p==null)break e;f=$e({},f,p);break e;case 2:xr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=g,l=f):d=d.next=g,s|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(d===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Ai|=s,t.lanes=s,t.memoizedState=f}}function Uy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(U(191,i));i.call(r)}}}var Va={},xn=ti(Va),ya=ti(Va),va=ti(Va);function yi(t){if(t===Va)throw Error(U(174));return t}function Rp(t,e){switch(Te(va,e),Te(ya,t),Te(xn,Va),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Nh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Nh(e,t)}Ae(xn),Te(xn,e)}function Oo(){Ae(xn),Ae(ya),Ae(va)}function Cw(t){yi(va.current);var e=yi(xn.current),n=Nh(e,t.type);e!==n&&(Te(ya,t),Te(xn,n))}function Pp(t){ya.current===t&&(Ae(xn),Ae(ya))}var ke=ti(0);function ju(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Wd=[];function kp(){for(var t=0;t<Wd.length;t++)Wd[t]._workInProgressVersionPrimary=null;Wd.length=0}var iu=lr.ReactCurrentDispatcher,Hd=lr.ReactCurrentBatchConfig,Ii=0,be=null,We=null,Je=null,Uu=!1,Xs=!1,_a=0,sA=0;function pt(){throw Error(U(321))}function bp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!dn(t[n],e[n]))return!1;return!0}function Np(t,e,n,r,i,o){if(Ii=o,be=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,iu.current=t===null||t.memoizedState===null?cA:dA,t=n(r,i),Xs){o=0;do{if(Xs=!1,_a=0,25<=o)throw Error(U(301));o+=1,Je=We=null,e.updateQueue=null,iu.current=hA,t=n(r,i)}while(Xs)}if(iu.current=Bu,e=We!==null&&We.next!==null,Ii=0,Je=We=be=null,Uu=!1,e)throw Error(U(300));return t}function $p(){var t=_a!==0;return _a=0,t}function yn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?be.memoizedState=Je=t:Je=Je.next=t,Je}function Zt(){if(We===null){var t=be.alternate;t=t!==null?t.memoizedState:null}else t=We.next;var e=Je===null?be.memoizedState:Je.next;if(e!==null)Je=e,We=t;else{if(t===null)throw Error(U(310));We=t,t={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Je===null?be.memoizedState=Je=t:Je=Je.next=t}return Je}function wa(t,e){return typeof e=="function"?e(t):e}function qd(t){var e=Zt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=We,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,c=o;do{var d=c.lane;if((Ii&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,s=r):l=l.next=f,be.lanes|=d,Ai|=d}c=c.next}while(c!==null&&c!==o);l===null?s=r:l.next=a,dn(r,e.memoizedState)||(bt=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,be.lanes|=o,Ai|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Gd(t){var e=Zt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);dn(o,e.memoizedState)||(bt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function Iw(){}function Aw(t,e){var n=be,r=Zt(),i=e(),o=!dn(r.memoizedState,i);if(o&&(r.memoizedState=i,bt=!0),r=r.queue,Op(kw.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Je!==null&&Je.memoizedState.tag&1){if(n.flags|=2048,xa(9,Pw.bind(null,n,r,i,e),void 0,null),Ze===null)throw Error(U(349));Ii&30||Rw(n,e,i)}return i}function Rw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Pw(t,e,n,r){e.value=n,e.getSnapshot=r,bw(e)&&Nw(t)}function kw(t,e,n){return n(function(){bw(e)&&Nw(t)})}function bw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!dn(t,n)}catch{return!0}}function Nw(t){var e=Xn(t,1);e!==null&&un(e,t,1,-1)}function By(t){var e=yn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:t},e.queue=t,t=t.dispatch=uA.bind(null,be,t),[e.memoizedState,t]}function xa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function $w(){return Zt().memoizedState}function ou(t,e,n,r){var i=yn();be.flags|=t,i.memoizedState=xa(1|e,n,void 0,r===void 0?null:r)}function Sc(t,e,n,r){var i=Zt();r=r===void 0?null:r;var o=void 0;if(We!==null){var s=We.memoizedState;if(o=s.destroy,r!==null&&bp(r,s.deps)){i.memoizedState=xa(e,n,o,r);return}}be.flags|=t,i.memoizedState=xa(1|e,n,o,r)}function zy(t,e){return ou(8390656,8,t,e)}function Op(t,e){return Sc(2048,8,t,e)}function Ow(t,e){return Sc(4,2,t,e)}function Lw(t,e){return Sc(4,4,t,e)}function Dw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Fw(t,e,n){return n=n!=null?n.concat([t]):null,Sc(4,4,Dw.bind(null,e,t),n)}function Lp(){}function Mw(t,e){var n=Zt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Vw(t,e){var n=Zt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function jw(t,e,n){return Ii&21?(dn(n,e)||(n=H_(),be.lanes|=n,Ai|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,bt=!0),t.memoizedState=n)}function aA(t,e){var n=we;we=n!==0&&4>n?n:4,t(!0);var r=Hd.transition;Hd.transition={};try{t(!1),e()}finally{we=n,Hd.transition=r}}function Uw(){return Zt().memoizedState}function lA(t,e,n){var r=Dr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Bw(t))zw(e,n);else if(n=Tw(t,e,n,r),n!==null){var i=Ct();un(n,t,r,i),Ww(n,e,r)}}function uA(t,e,n){var r=Dr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Bw(t))zw(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,dn(a,s)){var l=e.interleaved;l===null?(i.next=i,Ip(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=Tw(t,e,i,r),n!==null&&(i=Ct(),un(n,t,r,i),Ww(n,e,r))}}function Bw(t){var e=t.alternate;return t===be||e!==null&&e===be}function zw(t,e){Xs=Uu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ww(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hp(t,n)}}var Bu={readContext:Jt,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useInsertionEffect:pt,useLayoutEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useMutableSource:pt,useSyncExternalStore:pt,useId:pt,unstable_isNewReconciler:!1},cA={readContext:Jt,useCallback:function(t,e){return yn().memoizedState=[t,e===void 0?null:e],t},useContext:Jt,useEffect:zy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ou(4194308,4,Dw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ou(4194308,4,t,e)},useInsertionEffect:function(t,e){return ou(4,2,t,e)},useMemo:function(t,e){var n=yn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=yn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=lA.bind(null,be,t),[r.memoizedState,t]},useRef:function(t){var e=yn();return t={current:t},e.memoizedState=t},useState:By,useDebugValue:Lp,useDeferredValue:function(t){return yn().memoizedState=t},useTransition:function(){var t=By(!1),e=t[0];return t=aA.bind(null,t[1]),yn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=be,i=yn();if(Re){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Ze===null)throw Error(U(349));Ii&30||Rw(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,zy(kw.bind(null,r,o,t),[t]),r.flags|=2048,xa(9,Pw.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=yn(),e=Ze.identifierPrefix;if(Re){var n=Bn,r=Un;n=(r&~(1<<32-ln(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=_a++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=sA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},dA={readContext:Jt,useCallback:Mw,useContext:Jt,useEffect:Op,useImperativeHandle:Fw,useInsertionEffect:Ow,useLayoutEffect:Lw,useMemo:Vw,useReducer:qd,useRef:$w,useState:function(){return qd(wa)},useDebugValue:Lp,useDeferredValue:function(t){var e=Zt();return jw(e,We.memoizedState,t)},useTransition:function(){var t=qd(wa)[0],e=Zt().memoizedState;return[t,e]},useMutableSource:Iw,useSyncExternalStore:Aw,useId:Uw,unstable_isNewReconciler:!1},hA={readContext:Jt,useCallback:Mw,useContext:Jt,useEffect:Op,useImperativeHandle:Fw,useInsertionEffect:Ow,useLayoutEffect:Lw,useMemo:Vw,useReducer:Gd,useRef:$w,useState:function(){return Gd(wa)},useDebugValue:Lp,useDeferredValue:function(t){var e=Zt();return We===null?e.memoizedState=t:jw(e,We.memoizedState,t)},useTransition:function(){var t=Gd(wa)[0],e=Zt().memoizedState;return[t,e]},useMutableSource:Iw,useSyncExternalStore:Aw,useId:Uw,unstable_isNewReconciler:!1};function rn(t,e){if(t&&t.defaultProps){e=$e({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Zh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:$e({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Cc={isMounted:function(t){return(t=t._reactInternals)?Di(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ct(),i=Dr(t),o=Gn(r,i);o.payload=e,n!=null&&(o.callback=n),e=Or(t,o,i),e!==null&&(un(e,t,i,r),ru(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ct(),i=Dr(t),o=Gn(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Or(t,o,i),e!==null&&(un(e,t,i,r),ru(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ct(),r=Dr(t),i=Gn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Or(t,i,r),e!==null&&(un(e,t,r,n),ru(e,t,r))}};function Wy(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!fa(n,r)||!fa(i,o):!0}function Hw(t,e,n){var r=!1,i=Wr,o=e.contextType;return typeof o=="object"&&o!==null?o=Jt(o):(i=$t(e)?Si:wt.current,r=e.contextTypes,o=(r=r!=null)?bo(t,i):Wr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Cc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Hy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Cc.enqueueReplaceState(e,e.state,null)}function ef(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Ap(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Jt(o):(o=$t(e)?Si:wt.current,i.context=bo(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Zh(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Cc.enqueueReplaceState(i,i.state,null),Vu(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Lo(t,e){try{var n="",r=e;do n+=j1(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Kd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function tf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var fA=typeof WeakMap=="function"?WeakMap:Map;function qw(t,e,n){n=Gn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Wu||(Wu=!0,hf=r),tf(t,e)},n}function Gw(t,e,n){n=Gn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){tf(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){tf(t,e),typeof r!="function"&&(Lr===null?Lr=new Set([this]):Lr.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function qy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new fA;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=AA.bind(null,t,e,n),e.then(t,t))}function Gy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ky(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Gn(-1,1),e.tag=2,Or(n,e,1))),n.lanes|=1),t)}var pA=lr.ReactCurrentOwner,bt=!1;function St(t,e,n,r){e.child=t===null?Ew(e,null,n,r):$o(e,t.child,n,r)}function Qy(t,e,n,r,i){n=n.render;var o=e.ref;return xo(e,i),r=Np(t,e,n,r,o,i),n=$p(),t!==null&&!bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Jn(t,e,i)):(Re&&n&&wp(e),e.flags|=1,St(t,e,r,i),e.child)}function Yy(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!zp(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Kw(t,e,o,r,i)):(t=uu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:fa,n(s,r)&&t.ref===e.ref)return Jn(t,e,i)}return e.flags|=1,t=Fr(o,r),t.ref=e.ref,t.return=e,e.child=t}function Kw(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(fa(o,r)&&t.ref===e.ref)if(bt=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(bt=!0);else return e.lanes=t.lanes,Jn(t,e,i)}return nf(t,e,n,r,i)}function Qw(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(go,Dt),Dt|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Te(go,Dt),Dt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Te(go,Dt),Dt|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Te(go,Dt),Dt|=r;return St(t,e,i,n),e.child}function Yw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function nf(t,e,n,r,i){var o=$t(n)?Si:wt.current;return o=bo(e,o),xo(e,i),n=Np(t,e,n,r,o,i),r=$p(),t!==null&&!bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Jn(t,e,i)):(Re&&r&&wp(e),e.flags|=1,St(t,e,n,i),e.child)}function Xy(t,e,n,r,i){if($t(n)){var o=!0;Ou(e)}else o=!1;if(xo(e,i),e.stateNode===null)su(t,e),Hw(e,n,r),ef(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=Jt(c):(c=$t(n)?Si:wt.current,c=bo(e,c));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Hy(e,s,r,c),xr=!1;var p=e.memoizedState;s.state=p,Vu(e,r,s,i),l=e.memoizedState,a!==r||p!==l||Nt.current||xr?(typeof d=="function"&&(Zh(e,n,d,r),l=e.memoizedState),(a=xr||Wy(e,n,a,r,p,l,c))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,Sw(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:rn(e.type,a),s.props=c,f=e.pendingProps,p=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=Jt(l):(l=$t(n)?Si:wt.current,l=bo(e,l));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==f||p!==l)&&Hy(e,s,r,l),xr=!1,p=e.memoizedState,s.state=p,Vu(e,r,s,i);var E=e.memoizedState;a!==f||p!==E||Nt.current||xr?(typeof g=="function"&&(Zh(e,n,g,r),E=e.memoizedState),(c=xr||Wy(e,n,c,r,p,E,l)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,E,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,E,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),s.props=r,s.state=E,s.context=l,r=c):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return rf(t,e,n,r,o,i)}function rf(t,e,n,r,i,o){Yw(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&Dy(e,n,!1),Jn(t,e,o);r=e.stateNode,pA.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=$o(e,t.child,null,o),e.child=$o(e,null,a,o)):St(t,e,a,o),e.memoizedState=r.state,i&&Dy(e,n,!0),e.child}function Xw(t){var e=t.stateNode;e.pendingContext?Ly(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ly(t,e.context,!1),Rp(t,e.containerInfo)}function Jy(t,e,n,r,i){return No(),Ep(i),e.flags|=256,St(t,e,n,r),e.child}var of={dehydrated:null,treeContext:null,retryLane:0};function sf(t){return{baseLanes:t,cachePool:null,transitions:null}}function Jw(t,e,n){var r=e.pendingProps,i=ke.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Te(ke,i&1),t===null)return Xh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Rc(s,r,0,null),t=xi(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=sf(n),e.memoizedState=of,t):Dp(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return mA(t,e,s,r,a,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Fr(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=Fr(a,o):(o=xi(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?sf(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=of,r}return o=t.child,t=o.sibling,r=Fr(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Dp(t,e){return e=Rc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Nl(t,e,n,r){return r!==null&&Ep(r),$o(e,t.child,null,n),t=Dp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function mA(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=Kd(Error(U(422))),Nl(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Rc({mode:"visible",children:r.children},i,0,null),o=xi(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&$o(e,t.child,null,s),e.child.memoizedState=sf(s),e.memoizedState=of,o);if(!(e.mode&1))return Nl(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(U(419)),r=Kd(o,r,void 0),Nl(t,e,s,r)}if(a=(s&t.childLanes)!==0,bt||a){if(r=Ze,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Xn(t,i),un(r,t,i,-1))}return Bp(),r=Kd(Error(U(421))),Nl(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=RA.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Mt=$r(i.nextSibling),Vt=e,Re=!0,sn=null,t!==null&&(Gt[Kt++]=Un,Gt[Kt++]=Bn,Gt[Kt++]=Ci,Un=t.id,Bn=t.overflow,Ci=e),e=Dp(e,r.children),e.flags|=4096,e)}function Zy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Jh(t.return,e,n)}function Qd(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Zw(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(St(t,e,r.children,n),r=ke.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Zy(t,n,e);else if(t.tag===19)Zy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Te(ke,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ju(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Qd(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ju(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Qd(e,!0,n,null,o);break;case"together":Qd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function su(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Jn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ai|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Fr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Fr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function gA(t,e,n){switch(e.tag){case 3:Xw(e),No();break;case 5:Cw(e);break;case 1:$t(e.type)&&Ou(e);break;case 4:Rp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Te(Fu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Te(ke,ke.current&1),e.flags|=128,null):n&e.child.childLanes?Jw(t,e,n):(Te(ke,ke.current&1),t=Jn(t,e,n),t!==null?t.sibling:null);Te(ke,ke.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Zw(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Te(ke,ke.current),r)break;return null;case 22:case 23:return e.lanes=0,Qw(t,e,n)}return Jn(t,e,n)}var ex,af,tx,nx;ex=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};af=function(){};tx=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,yi(xn.current);var o=null;switch(n){case"input":i=Rh(t,i),r=Rh(t,r),o=[];break;case"select":i=$e({},i,{value:void 0}),r=$e({},r,{value:void 0}),o=[];break;case"textarea":i=bh(t,i),r=bh(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Nu)}$h(n,r);var s;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(sa.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(sa.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ie("scroll",t),o||a===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};nx=function(t,e,n,r){n!==r&&(e.flags|=4)};function bs(t,e){if(!Re)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function yA(t,e,n){var r=e.pendingProps;switch(xp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(e),null;case 1:return $t(e.type)&&$u(),mt(e),null;case 3:return r=e.stateNode,Oo(),Ae(Nt),Ae(wt),kp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(kl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,sn!==null&&(mf(sn),sn=null))),af(t,e),mt(e),null;case 5:Pp(e);var i=yi(va.current);if(n=e.type,t!==null&&e.stateNode!=null)tx(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return mt(e),null}if(t=yi(xn.current),kl(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[vn]=e,r[ga]=o,t=(e.mode&1)!==0,n){case"dialog":Ie("cancel",r),Ie("close",r);break;case"iframe":case"object":case"embed":Ie("load",r);break;case"video":case"audio":for(i=0;i<Us.length;i++)Ie(Us[i],r);break;case"source":Ie("error",r);break;case"img":case"image":case"link":Ie("error",r),Ie("load",r);break;case"details":Ie("toggle",r);break;case"input":ly(r,o),Ie("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ie("invalid",r);break;case"textarea":cy(r,o),Ie("invalid",r)}$h(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&Pl(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Pl(r.textContent,a,t),i=["children",""+a]):sa.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Ie("scroll",r)}switch(n){case"input":xl(r),uy(r,o,!0);break;case"textarea":xl(r),dy(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Nu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=k_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[vn]=e,t[ga]=r,ex(t,e,!1,!1),e.stateNode=t;e:{switch(s=Oh(n,r),n){case"dialog":Ie("cancel",t),Ie("close",t),i=r;break;case"iframe":case"object":case"embed":Ie("load",t),i=r;break;case"video":case"audio":for(i=0;i<Us.length;i++)Ie(Us[i],t);i=r;break;case"source":Ie("error",t),i=r;break;case"img":case"image":case"link":Ie("error",t),Ie("load",t),i=r;break;case"details":Ie("toggle",t),i=r;break;case"input":ly(t,r),i=Rh(t,r),Ie("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=$e({},r,{value:void 0}),Ie("invalid",t);break;case"textarea":cy(t,r),i=bh(t,r),Ie("invalid",t);break;default:i=r}$h(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?$_(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&b_(t,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&aa(t,l):typeof l=="number"&&aa(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(sa.hasOwnProperty(o)?l!=null&&o==="onScroll"&&Ie("scroll",t):l!=null&&sp(t,o,l,s))}switch(n){case"input":xl(t),uy(t,r,!1);break;case"textarea":xl(t),dy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+zr(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?yo(t,!!r.multiple,o,!1):r.defaultValue!=null&&yo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Nu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return mt(e),null;case 6:if(t&&e.stateNode!=null)nx(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=yi(va.current),yi(xn.current),kl(e)){if(r=e.stateNode,n=e.memoizedProps,r[vn]=e,(o=r.nodeValue!==n)&&(t=Vt,t!==null))switch(t.tag){case 3:Pl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Pl(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[vn]=e,e.stateNode=r}return mt(e),null;case 13:if(Ae(ke),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Re&&Mt!==null&&e.mode&1&&!(e.flags&128))ww(),No(),e.flags|=98560,o=!1;else if(o=kl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(U(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(U(317));o[vn]=e}else No(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;mt(e),o=!1}else sn!==null&&(mf(sn),sn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ke.current&1?qe===0&&(qe=3):Bp())),e.updateQueue!==null&&(e.flags|=4),mt(e),null);case 4:return Oo(),af(t,e),t===null&&pa(e.stateNode.containerInfo),mt(e),null;case 10:return Cp(e.type._context),mt(e),null;case 17:return $t(e.type)&&$u(),mt(e),null;case 19:if(Ae(ke),o=e.memoizedState,o===null)return mt(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)bs(o,!1);else{if(qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=ju(t),s!==null){for(e.flags|=128,bs(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Te(ke,ke.current&1|2),e.child}t=t.sibling}o.tail!==null&&Me()>Do&&(e.flags|=128,r=!0,bs(o,!1),e.lanes=4194304)}else{if(!r)if(t=ju(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),bs(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Re)return mt(e),null}else 2*Me()-o.renderingStartTime>Do&&n!==1073741824&&(e.flags|=128,r=!0,bs(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Me(),e.sibling=null,n=ke.current,Te(ke,r?n&1|2:n&1),e):(mt(e),null);case 22:case 23:return Up(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Dt&1073741824&&(mt(e),e.subtreeFlags&6&&(e.flags|=8192)):mt(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function vA(t,e){switch(xp(e),e.tag){case 1:return $t(e.type)&&$u(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Oo(),Ae(Nt),Ae(wt),kp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Pp(e),null;case 13:if(Ae(ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));No()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ae(ke),null;case 4:return Oo(),null;case 10:return Cp(e.type._context),null;case 22:case 23:return Up(),null;case 24:return null;default:return null}}var $l=!1,vt=!1,_A=typeof WeakSet=="function"?WeakSet:Set,q=null;function mo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){De(t,e,r)}else n.current=null}function lf(t,e,n){try{n()}catch(r){De(t,e,r)}}var ev=!1;function wA(t,e){if(Wh=Pu,t=aw(),_p(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,c=0,d=0,f=t,p=null;t:for(;;){for(var g;f!==n||i!==0&&f.nodeType!==3||(a=s+i),f!==o||r!==0&&f.nodeType!==3||(l=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(g=f.firstChild)!==null;)p=f,f=g;for(;;){if(f===t)break t;if(p===n&&++c===i&&(a=s),p===o&&++d===r&&(l=s),(g=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Hh={focusedElem:t,selectionRange:n},Pu=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var v=E.memoizedProps,A=E.memoizedState,_=e.stateNode,y=_.getSnapshotBeforeUpdate(e.elementType===e.type?v:rn(e.type,v),A);_.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(b){De(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return E=ev,ev=!1,E}function Js(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&lf(e,n,o)}i=i.next}while(i!==r)}}function Ic(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function uf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function rx(t){var e=t.alternate;e!==null&&(t.alternate=null,rx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[vn],delete e[ga],delete e[Kh],delete e[nA],delete e[rA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ix(t){return t.tag===5||t.tag===3||t.tag===4}function tv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ix(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function cf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Nu));else if(r!==4&&(t=t.child,t!==null))for(cf(t,e,n),t=t.sibling;t!==null;)cf(t,e,n),t=t.sibling}function df(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(df(t,e,n),t=t.sibling;t!==null;)df(t,e,n),t=t.sibling}var rt=null,on=!1;function mr(t,e,n){for(n=n.child;n!==null;)ox(t,e,n),n=n.sibling}function ox(t,e,n){if(wn&&typeof wn.onCommitFiberUnmount=="function")try{wn.onCommitFiberUnmount(vc,n)}catch{}switch(n.tag){case 5:vt||mo(n,e);case 6:var r=rt,i=on;rt=null,mr(t,e,n),rt=r,on=i,rt!==null&&(on?(t=rt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):rt.removeChild(n.stateNode));break;case 18:rt!==null&&(on?(t=rt,n=n.stateNode,t.nodeType===8?Bd(t.parentNode,n):t.nodeType===1&&Bd(t,n),da(t)):Bd(rt,n.stateNode));break;case 4:r=rt,i=on,rt=n.stateNode.containerInfo,on=!0,mr(t,e,n),rt=r,on=i;break;case 0:case 11:case 14:case 15:if(!vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&lf(n,e,s),i=i.next}while(i!==r)}mr(t,e,n);break;case 1:if(!vt&&(mo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){De(n,e,a)}mr(t,e,n);break;case 21:mr(t,e,n);break;case 22:n.mode&1?(vt=(r=vt)||n.memoizedState!==null,mr(t,e,n),vt=r):mr(t,e,n);break;default:mr(t,e,n)}}function nv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new _A),e.forEach(function(r){var i=PA.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function tn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:rt=a.stateNode,on=!1;break e;case 3:rt=a.stateNode.containerInfo,on=!0;break e;case 4:rt=a.stateNode.containerInfo,on=!0;break e}a=a.return}if(rt===null)throw Error(U(160));ox(o,s,i),rt=null,on=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){De(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)sx(e,t),e=e.sibling}function sx(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(tn(e,t),gn(t),r&4){try{Js(3,t,t.return),Ic(3,t)}catch(v){De(t,t.return,v)}try{Js(5,t,t.return)}catch(v){De(t,t.return,v)}}break;case 1:tn(e,t),gn(t),r&512&&n!==null&&mo(n,n.return);break;case 5:if(tn(e,t),gn(t),r&512&&n!==null&&mo(n,n.return),t.flags&32){var i=t.stateNode;try{aa(i,"")}catch(v){De(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&R_(i,o),Oh(a,s);var c=Oh(a,o);for(s=0;s<l.length;s+=2){var d=l[s],f=l[s+1];d==="style"?$_(i,f):d==="dangerouslySetInnerHTML"?b_(i,f):d==="children"?aa(i,f):sp(i,d,f,c)}switch(a){case"input":Ph(i,o);break;case"textarea":P_(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var g=o.value;g!=null?yo(i,!!o.multiple,g,!1):p!==!!o.multiple&&(o.defaultValue!=null?yo(i,!!o.multiple,o.defaultValue,!0):yo(i,!!o.multiple,o.multiple?[]:"",!1))}i[ga]=o}catch(v){De(t,t.return,v)}}break;case 6:if(tn(e,t),gn(t),r&4){if(t.stateNode===null)throw Error(U(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(v){De(t,t.return,v)}}break;case 3:if(tn(e,t),gn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{da(e.containerInfo)}catch(v){De(t,t.return,v)}break;case 4:tn(e,t),gn(t);break;case 13:tn(e,t),gn(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Vp=Me())),r&4&&nv(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(vt=(c=vt)||d,tn(e,t),vt=c):tn(e,t),gn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(q=t,d=t.child;d!==null;){for(f=q=d;q!==null;){switch(p=q,g=p.child,p.tag){case 0:case 11:case 14:case 15:Js(4,p,p.return);break;case 1:mo(p,p.return);var E=p.stateNode;if(typeof E.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(v){De(r,n,v)}}break;case 5:mo(p,p.return);break;case 22:if(p.memoizedState!==null){iv(f);continue}}g!==null?(g.return=p,q=g):iv(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=f.stateNode,l=f.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=N_("display",s))}catch(v){De(t,t.return,v)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(v){De(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:tn(e,t),gn(t),r&4&&nv(t);break;case 21:break;default:tn(e,t),gn(t)}}function gn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ix(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(aa(i,""),r.flags&=-33);var o=tv(t);df(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=tv(t);cf(t,a,s);break;default:throw Error(U(161))}}catch(l){De(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function xA(t,e,n){q=t,ax(t)}function ax(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var i=q,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||$l;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||vt;a=$l;var c=vt;if($l=s,(vt=l)&&!c)for(q=i;q!==null;)s=q,l=s.child,s.tag===22&&s.memoizedState!==null?ov(i):l!==null?(l.return=s,q=l):ov(i);for(;o!==null;)q=o,ax(o),o=o.sibling;q=i,$l=a,vt=c}rv(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,q=o):rv(t)}}function rv(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:vt||Ic(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!vt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:rn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Uy(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Uy(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&da(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}vt||e.flags&512&&uf(e)}catch(p){De(e,e.return,p)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function iv(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function ov(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ic(4,e)}catch(l){De(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){De(e,i,l)}}var o=e.return;try{uf(e)}catch(l){De(e,o,l)}break;case 5:var s=e.return;try{uf(e)}catch(l){De(e,s,l)}}}catch(l){De(e,e.return,l)}if(e===t){q=null;break}var a=e.sibling;if(a!==null){a.return=e.return,q=a;break}q=e.return}}var EA=Math.ceil,zu=lr.ReactCurrentDispatcher,Fp=lr.ReactCurrentOwner,Xt=lr.ReactCurrentBatchConfig,pe=0,Ze=null,Be=null,st=0,Dt=0,go=ti(0),qe=0,Ea=null,Ai=0,Ac=0,Mp=0,Zs=null,kt=null,Vp=0,Do=1/0,Mn=null,Wu=!1,hf=null,Lr=null,Ol=!1,Rr=null,Hu=0,ea=0,ff=null,au=-1,lu=0;function Ct(){return pe&6?Me():au!==-1?au:au=Me()}function Dr(t){return t.mode&1?pe&2&&st!==0?st&-st:oA.transition!==null?(lu===0&&(lu=H_()),lu):(t=we,t!==0||(t=window.event,t=t===void 0?16:J_(t.type)),t):1}function un(t,e,n,r){if(50<ea)throw ea=0,ff=null,Error(U(185));Da(t,n,r),(!(pe&2)||t!==Ze)&&(t===Ze&&(!(pe&2)&&(Ac|=n),qe===4&&Tr(t,st)),Ot(t,r),n===1&&pe===0&&!(e.mode&1)&&(Do=Me()+500,Tc&&ni()))}function Ot(t,e){var n=t.callbackNode;oI(t,e);var r=Ru(t,t===Ze?st:0);if(r===0)n!==null&&py(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&py(n),e===1)t.tag===0?iA(sv.bind(null,t)):yw(sv.bind(null,t)),eA(function(){!(pe&6)&&ni()}),n=null;else{switch(q_(r)){case 1:n=dp;break;case 4:n=z_;break;case 16:n=Au;break;case 536870912:n=W_;break;default:n=Au}n=mx(n,lx.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function lx(t,e){if(au=-1,lu=0,pe&6)throw Error(U(327));var n=t.callbackNode;if(Eo()&&t.callbackNode!==n)return null;var r=Ru(t,t===Ze?st:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=qu(t,r);else{e=r;var i=pe;pe|=2;var o=cx();(Ze!==t||st!==e)&&(Mn=null,Do=Me()+500,wi(t,e));do try{CA();break}catch(a){ux(t,a)}while(!0);Sp(),zu.current=o,pe=i,Be!==null?e=0:(Ze=null,st=0,e=qe)}if(e!==0){if(e===2&&(i=Vh(t),i!==0&&(r=i,e=pf(t,i))),e===1)throw n=Ea,wi(t,0),Tr(t,r),Ot(t,Me()),n;if(e===6)Tr(t,r);else{if(i=t.current.alternate,!(r&30)&&!TA(i)&&(e=qu(t,r),e===2&&(o=Vh(t),o!==0&&(r=o,e=pf(t,o))),e===1))throw n=Ea,wi(t,0),Tr(t,r),Ot(t,Me()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:hi(t,kt,Mn);break;case 3:if(Tr(t,r),(r&130023424)===r&&(e=Vp+500-Me(),10<e)){if(Ru(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ct(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Gh(hi.bind(null,t,kt,Mn),e);break}hi(t,kt,Mn);break;case 4:if(Tr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-ln(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=Me()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*EA(r/1960))-r,10<r){t.timeoutHandle=Gh(hi.bind(null,t,kt,Mn),r);break}hi(t,kt,Mn);break;case 5:hi(t,kt,Mn);break;default:throw Error(U(329))}}}return Ot(t,Me()),t.callbackNode===n?lx.bind(null,t):null}function pf(t,e){var n=Zs;return t.current.memoizedState.isDehydrated&&(wi(t,e).flags|=256),t=qu(t,e),t!==2&&(e=kt,kt=n,e!==null&&mf(e)),t}function mf(t){kt===null?kt=t:kt.push.apply(kt,t)}function TA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!dn(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Tr(t,e){for(e&=~Mp,e&=~Ac,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ln(e),r=1<<n;t[n]=-1,e&=~r}}function sv(t){if(pe&6)throw Error(U(327));Eo();var e=Ru(t,0);if(!(e&1))return Ot(t,Me()),null;var n=qu(t,e);if(t.tag!==0&&n===2){var r=Vh(t);r!==0&&(e=r,n=pf(t,r))}if(n===1)throw n=Ea,wi(t,0),Tr(t,e),Ot(t,Me()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,hi(t,kt,Mn),Ot(t,Me()),null}function jp(t,e){var n=pe;pe|=1;try{return t(e)}finally{pe=n,pe===0&&(Do=Me()+500,Tc&&ni())}}function Ri(t){Rr!==null&&Rr.tag===0&&!(pe&6)&&Eo();var e=pe;pe|=1;var n=Xt.transition,r=we;try{if(Xt.transition=null,we=1,t)return t()}finally{we=r,Xt.transition=n,pe=e,!(pe&6)&&ni()}}function Up(){Dt=go.current,Ae(go)}function wi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ZI(n)),Be!==null)for(n=Be.return;n!==null;){var r=n;switch(xp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&$u();break;case 3:Oo(),Ae(Nt),Ae(wt),kp();break;case 5:Pp(r);break;case 4:Oo();break;case 13:Ae(ke);break;case 19:Ae(ke);break;case 10:Cp(r.type._context);break;case 22:case 23:Up()}n=n.return}if(Ze=t,Be=t=Fr(t.current,null),st=Dt=e,qe=0,Ea=null,Mp=Ac=Ai=0,kt=Zs=null,gi!==null){for(e=0;e<gi.length;e++)if(n=gi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}gi=null}return t}function ux(t,e){do{var n=Be;try{if(Sp(),iu.current=Bu,Uu){for(var r=be.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Uu=!1}if(Ii=0,Je=We=be=null,Xs=!1,_a=0,Fp.current=null,n===null||n.return===null){qe=1,Ea=e,Be=null;break}e:{var o=t,s=n.return,a=n,l=e;if(e=st,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=Gy(s);if(g!==null){g.flags&=-257,Ky(g,s,a,o,e),g.mode&1&&qy(o,c,e),e=g,l=c;var E=e.updateQueue;if(E===null){var v=new Set;v.add(l),e.updateQueue=v}else E.add(l);break e}else{if(!(e&1)){qy(o,c,e),Bp();break e}l=Error(U(426))}}else if(Re&&a.mode&1){var A=Gy(s);if(A!==null){!(A.flags&65536)&&(A.flags|=256),Ky(A,s,a,o,e),Ep(Lo(l,a));break e}}o=l=Lo(l,a),qe!==4&&(qe=2),Zs===null?Zs=[o]:Zs.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var _=qw(o,l,e);jy(o,_);break e;case 1:a=l;var y=o.type,S=o.stateNode;if(!(o.flags&128)&&(typeof y.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Lr===null||!Lr.has(S)))){o.flags|=65536,e&=-e,o.lanes|=e;var b=Gw(o,a,e);jy(o,b);break e}}o=o.return}while(o!==null)}hx(n)}catch(O){e=O,Be===n&&n!==null&&(Be=n=n.return);continue}break}while(!0)}function cx(){var t=zu.current;return zu.current=Bu,t===null?Bu:t}function Bp(){(qe===0||qe===3||qe===2)&&(qe=4),Ze===null||!(Ai&268435455)&&!(Ac&268435455)||Tr(Ze,st)}function qu(t,e){var n=pe;pe|=2;var r=cx();(Ze!==t||st!==e)&&(Mn=null,wi(t,e));do try{SA();break}catch(i){ux(t,i)}while(!0);if(Sp(),pe=n,zu.current=r,Be!==null)throw Error(U(261));return Ze=null,st=0,qe}function SA(){for(;Be!==null;)dx(Be)}function CA(){for(;Be!==null&&!Y1();)dx(Be)}function dx(t){var e=px(t.alternate,t,Dt);t.memoizedProps=t.pendingProps,e===null?hx(t):Be=e,Fp.current=null}function hx(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=vA(n,e),n!==null){n.flags&=32767,Be=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qe=6,Be=null;return}}else if(n=yA(n,e,Dt),n!==null){Be=n;return}if(e=e.sibling,e!==null){Be=e;return}Be=e=t}while(e!==null);qe===0&&(qe=5)}function hi(t,e,n){var r=we,i=Xt.transition;try{Xt.transition=null,we=1,IA(t,e,n,r)}finally{Xt.transition=i,we=r}return null}function IA(t,e,n,r){do Eo();while(Rr!==null);if(pe&6)throw Error(U(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(sI(t,o),t===Ze&&(Be=Ze=null,st=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ol||(Ol=!0,mx(Au,function(){return Eo(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Xt.transition,Xt.transition=null;var s=we;we=1;var a=pe;pe|=4,Fp.current=null,wA(t,n),sx(n,t),qI(Hh),Pu=!!Wh,Hh=Wh=null,t.current=n,xA(n),X1(),pe=a,we=s,Xt.transition=o}else t.current=n;if(Ol&&(Ol=!1,Rr=t,Hu=i),o=t.pendingLanes,o===0&&(Lr=null),eI(n.stateNode),Ot(t,Me()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wu)throw Wu=!1,t=hf,hf=null,t;return Hu&1&&t.tag!==0&&Eo(),o=t.pendingLanes,o&1?t===ff?ea++:(ea=0,ff=t):ea=0,ni(),null}function Eo(){if(Rr!==null){var t=q_(Hu),e=Xt.transition,n=we;try{if(Xt.transition=null,we=16>t?16:t,Rr===null)var r=!1;else{if(t=Rr,Rr=null,Hu=0,pe&6)throw Error(U(331));var i=pe;for(pe|=4,q=t.current;q!==null;){var o=q,s=o.child;if(q.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(q=c;q!==null;){var d=q;switch(d.tag){case 0:case 11:case 15:Js(8,d,o)}var f=d.child;if(f!==null)f.return=d,q=f;else for(;q!==null;){d=q;var p=d.sibling,g=d.return;if(rx(d),d===c){q=null;break}if(p!==null){p.return=g,q=p;break}q=g}}}var E=o.alternate;if(E!==null){var v=E.child;if(v!==null){E.child=null;do{var A=v.sibling;v.sibling=null,v=A}while(v!==null)}}q=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,q=s;else e:for(;q!==null;){if(o=q,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Js(9,o,o.return)}var _=o.sibling;if(_!==null){_.return=o.return,q=_;break e}q=o.return}}var y=t.current;for(q=y;q!==null;){s=q;var S=s.child;if(s.subtreeFlags&2064&&S!==null)S.return=s,q=S;else e:for(s=y;q!==null;){if(a=q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ic(9,a)}}catch(O){De(a,a.return,O)}if(a===s){q=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,q=b;break e}q=a.return}}if(pe=i,ni(),wn&&typeof wn.onPostCommitFiberRoot=="function")try{wn.onPostCommitFiberRoot(vc,t)}catch{}r=!0}return r}finally{we=n,Xt.transition=e}}return!1}function av(t,e,n){e=Lo(n,e),e=qw(t,e,1),t=Or(t,e,1),e=Ct(),t!==null&&(Da(t,1,e),Ot(t,e))}function De(t,e,n){if(t.tag===3)av(t,t,n);else for(;e!==null;){if(e.tag===3){av(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Lr===null||!Lr.has(r))){t=Lo(n,t),t=Gw(e,t,1),e=Or(e,t,1),t=Ct(),e!==null&&(Da(e,1,t),Ot(e,t));break}}e=e.return}}function AA(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ct(),t.pingedLanes|=t.suspendedLanes&n,Ze===t&&(st&n)===n&&(qe===4||qe===3&&(st&130023424)===st&&500>Me()-Vp?wi(t,0):Mp|=n),Ot(t,e)}function fx(t,e){e===0&&(t.mode&1?(e=Sl,Sl<<=1,!(Sl&130023424)&&(Sl=4194304)):e=1);var n=Ct();t=Xn(t,e),t!==null&&(Da(t,e,n),Ot(t,n))}function RA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),fx(t,n)}function PA(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),fx(t,n)}var px;px=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Nt.current)bt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return bt=!1,gA(t,e,n);bt=!!(t.flags&131072)}else bt=!1,Re&&e.flags&1048576&&vw(e,Du,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;su(t,e),t=e.pendingProps;var i=bo(e,wt.current);xo(e,n),i=Np(null,e,r,t,i,n);var o=$p();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$t(r)?(o=!0,Ou(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ap(e),i.updater=Cc,e.stateNode=i,i._reactInternals=e,ef(e,r,t,n),e=rf(null,e,r,!0,o,n)):(e.tag=0,Re&&o&&wp(e),St(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(su(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=bA(r),t=rn(r,t),i){case 0:e=nf(null,e,r,t,n);break e;case 1:e=Xy(null,e,r,t,n);break e;case 11:e=Qy(null,e,r,t,n);break e;case 14:e=Yy(null,e,r,rn(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rn(r,i),nf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rn(r,i),Xy(t,e,r,i,n);case 3:e:{if(Xw(e),t===null)throw Error(U(387));r=e.pendingProps,o=e.memoizedState,i=o.element,Sw(t,e),Vu(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Lo(Error(U(423)),e),e=Jy(t,e,r,n,i);break e}else if(r!==i){i=Lo(Error(U(424)),e),e=Jy(t,e,r,n,i);break e}else for(Mt=$r(e.stateNode.containerInfo.firstChild),Vt=e,Re=!0,sn=null,n=Ew(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(No(),r===i){e=Jn(t,e,n);break e}St(t,e,r,n)}e=e.child}return e;case 5:return Cw(e),t===null&&Xh(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,qh(r,i)?s=null:o!==null&&qh(r,o)&&(e.flags|=32),Yw(t,e),St(t,e,s,n),e.child;case 6:return t===null&&Xh(e),null;case 13:return Jw(t,e,n);case 4:return Rp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=$o(e,null,r,n):St(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rn(r,i),Qy(t,e,r,i,n);case 7:return St(t,e,e.pendingProps,n),e.child;case 8:return St(t,e,e.pendingProps.children,n),e.child;case 12:return St(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,Te(Fu,r._currentValue),r._currentValue=s,o!==null)if(dn(o.value,s)){if(o.children===i.children&&!Nt.current){e=Jn(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=Gn(-1,n&-n),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Jh(o.return,n,e),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(U(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Jh(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}St(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,xo(e,n),i=Jt(i),r=r(i),e.flags|=1,St(t,e,r,n),e.child;case 14:return r=e.type,i=rn(r,e.pendingProps),i=rn(r.type,i),Yy(t,e,r,i,n);case 15:return Kw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rn(r,i),su(t,e),e.tag=1,$t(r)?(t=!0,Ou(e)):t=!1,xo(e,n),Hw(e,r,i),ef(e,r,i,n),rf(null,e,r,!0,t,n);case 19:return Zw(t,e,n);case 22:return Qw(t,e,n)}throw Error(U(156,e.tag))};function mx(t,e){return B_(t,e)}function kA(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(t,e,n,r){return new kA(t,e,n,r)}function zp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function bA(t){if(typeof t=="function")return zp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===lp)return 11;if(t===up)return 14}return 2}function Fr(t,e){var n=t.alternate;return n===null?(n=Yt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function uu(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")zp(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case oo:return xi(n.children,i,o,e);case ap:s=8,i|=8;break;case Sh:return t=Yt(12,n,e,i|2),t.elementType=Sh,t.lanes=o,t;case Ch:return t=Yt(13,n,e,i),t.elementType=Ch,t.lanes=o,t;case Ih:return t=Yt(19,n,e,i),t.elementType=Ih,t.lanes=o,t;case C_:return Rc(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case T_:s=10;break e;case S_:s=9;break e;case lp:s=11;break e;case up:s=14;break e;case wr:s=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Yt(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function xi(t,e,n,r){return t=Yt(7,t,r,e),t.lanes=n,t}function Rc(t,e,n,r){return t=Yt(22,t,r,e),t.elementType=C_,t.lanes=n,t.stateNode={isHidden:!1},t}function Yd(t,e,n){return t=Yt(6,t,null,e),t.lanes=n,t}function Xd(t,e,n){return e=Yt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function NA(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bd(0),this.expirationTimes=bd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Wp(t,e,n,r,i,o,s,a,l){return t=new NA(t,e,n,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Yt(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ap(o),t}function $A(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:io,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function gx(t){if(!t)return Wr;t=t._reactInternals;e:{if(Di(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($t(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if($t(n))return gw(t,n,e)}return e}function yx(t,e,n,r,i,o,s,a,l){return t=Wp(n,r,!0,t,i,o,s,a,l),t.context=gx(null),n=t.current,r=Ct(),i=Dr(n),o=Gn(r,i),o.callback=e??null,Or(n,o,i),t.current.lanes=i,Da(t,i,r),Ot(t,r),t}function Pc(t,e,n,r){var i=e.current,o=Ct(),s=Dr(i);return n=gx(n),e.context===null?e.context=n:e.pendingContext=n,e=Gn(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Or(i,e,s),t!==null&&(un(t,i,s,o),ru(t,i,s)),s}function Gu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function lv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Hp(t,e){lv(t,e),(t=t.alternate)&&lv(t,e)}function OA(){return null}var vx=typeof reportError=="function"?reportError:function(t){console.error(t)};function qp(t){this._internalRoot=t}kc.prototype.render=qp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Pc(t,e,null,null)};kc.prototype.unmount=qp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ri(function(){Pc(null,t,null,null)}),e[Yn]=null}};function kc(t){this._internalRoot=t}kc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Q_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Er.length&&e!==0&&e<Er[n].priority;n++);Er.splice(n,0,t),n===0&&X_(t)}};function Gp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function bc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function uv(){}function LA(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=Gu(s);o.call(c)}}var s=yx(e,r,t,0,null,!1,!1,"",uv);return t._reactRootContainer=s,t[Yn]=s.current,pa(t.nodeType===8?t.parentNode:t),Ri(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Gu(l);a.call(c)}}var l=Wp(t,0,!1,null,null,!1,!1,"",uv);return t._reactRootContainer=l,t[Yn]=l.current,pa(t.nodeType===8?t.parentNode:t),Ri(function(){Pc(e,l,n,r)}),l}function Nc(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=Gu(s);a.call(l)}}Pc(e,s,t,i)}else s=LA(n,e,t,i,r);return Gu(s)}G_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=js(e.pendingLanes);n!==0&&(hp(e,n|1),Ot(e,Me()),!(pe&6)&&(Do=Me()+500,ni()))}break;case 13:Ri(function(){var r=Xn(t,1);if(r!==null){var i=Ct();un(r,t,1,i)}}),Hp(t,1)}};fp=function(t){if(t.tag===13){var e=Xn(t,134217728);if(e!==null){var n=Ct();un(e,t,134217728,n)}Hp(t,134217728)}};K_=function(t){if(t.tag===13){var e=Dr(t),n=Xn(t,e);if(n!==null){var r=Ct();un(n,t,e,r)}Hp(t,e)}};Q_=function(){return we};Y_=function(t,e){var n=we;try{return we=t,e()}finally{we=n}};Dh=function(t,e,n){switch(e){case"input":if(Ph(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ec(r);if(!i)throw Error(U(90));A_(r),Ph(r,i)}}}break;case"textarea":P_(t,n);break;case"select":e=n.value,e!=null&&yo(t,!!n.multiple,e,!1)}};D_=jp;F_=Ri;var DA={usingClientEntryPoint:!1,Events:[Ma,uo,Ec,O_,L_,jp]},Ns={findFiberByHostInstance:mi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},FA={bundleType:Ns.bundleType,version:Ns.version,rendererPackageName:Ns.rendererPackageName,rendererConfig:Ns.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:lr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=j_(t),t===null?null:t.stateNode},findFiberByHostInstance:Ns.findFiberByHostInstance||OA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ll=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ll.isDisabled&&Ll.supportsFiber)try{vc=Ll.inject(FA),wn=Ll}catch{}}Ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DA;Ht.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gp(e))throw Error(U(200));return $A(t,e,null,n)};Ht.createRoot=function(t,e){if(!Gp(t))throw Error(U(299));var n=!1,r="",i=vx;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Wp(t,1,!1,null,null,n,!1,r,i),t[Yn]=e.current,pa(t.nodeType===8?t.parentNode:t),new qp(e)};Ht.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=j_(e),t=t===null?null:t.stateNode,t};Ht.flushSync=function(t){return Ri(t)};Ht.hydrate=function(t,e,n){if(!bc(e))throw Error(U(200));return Nc(null,t,e,!0,n)};Ht.hydrateRoot=function(t,e,n){if(!Gp(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=vx;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=yx(e,null,t,1,n??null,i,!1,o,s),t[Yn]=e.current,pa(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new kc(e)};Ht.render=function(t,e,n){if(!bc(e))throw Error(U(200));return Nc(null,t,e,!1,n)};Ht.unmountComponentAtNode=function(t){if(!bc(t))throw Error(U(40));return t._reactRootContainer?(Ri(function(){Nc(null,null,t,!1,function(){t._reactRootContainer=null,t[Yn]=null})}),!0):!1};Ht.unstable_batchedUpdates=jp;Ht.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!bc(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Nc(t,e,n,!1,r)};Ht.version="18.3.1-next-f1338f8080-20240426";function _x(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_x)}catch(t){console.error(t)}}_x(),__.exports=Ht;var Jo=__.exports;const MA=a_(Jo);var cv=Jo;Eh.createRoot=cv.createRoot,Eh.hydrateRoot=cv.hydrateRoot;var Kp={};Object.defineProperty(Kp,"__esModule",{value:!0});Kp.parse=HA;Kp.serialize=qA;const VA=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,jA=/^[\u0021-\u003A\u003C-\u007E]*$/,UA=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,BA=/^[\u0020-\u003A\u003D-\u007E]*$/,zA=Object.prototype.toString,WA=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function HA(t,e){const n=new WA,r=t.length;if(r<2)return n;const i=(e==null?void 0:e.decode)||GA;let o=0;do{const s=t.indexOf("=",o);if(s===-1)break;const a=t.indexOf(";",o),l=a===-1?r:a;if(s>l){o=t.lastIndexOf(";",s-1)+1;continue}const c=dv(t,o,s),d=hv(t,s,c),f=t.slice(c,d);if(n[f]===void 0){let p=dv(t,s+1,l),g=hv(t,l,p);const E=i(t.slice(p,g));n[f]=E}o=l+1}while(o<r);return n}function dv(t,e,n){do{const r=t.charCodeAt(e);if(r!==32&&r!==9)return e}while(++e<n);return n}function hv(t,e,n){for(;e>n;){const r=t.charCodeAt(--e);if(r!==32&&r!==9)return e+1}return n}function qA(t,e,n){const r=(n==null?void 0:n.encode)||encodeURIComponent;if(!VA.test(t))throw new TypeError(`argument name is invalid: ${t}`);const i=r(e);if(!jA.test(i))throw new TypeError(`argument val is invalid: ${e}`);let o=t+"="+i;if(!n)return o;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);o+="; Max-Age="+n.maxAge}if(n.domain){if(!UA.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);o+="; Domain="+n.domain}if(n.path){if(!BA.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);o+="; Path="+n.path}if(n.expires){if(!KA(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);o+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(o+="; HttpOnly"),n.secure&&(o+="; Secure"),n.partitioned&&(o+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"none":o+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return o}function GA(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function KA(t){return zA.call(t)==="[object Date]"}/**
 * react-router v7.1.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var fv="popstate";function QA(t={}){function e(i,o){let{pathname:s="/",search:a="",hash:l=""}=Fi(i.location.hash.substring(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),gf("",{pathname:s,search:a,hash:l},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){let s=i.document.querySelector("base"),a="";if(s&&s.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof o=="string"?o:Ta(o))}function r(i,o){hn(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return XA(e,n,r,t)}function Ne(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function hn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function YA(){return Math.random().toString(36).substring(2,10)}function pv(t,e){return{usr:t.state,key:t.key,idx:e}}function gf(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Fi(e):e,state:n,key:e&&e.key||r||YA()}}function Ta({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Fi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function XA(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a="POP",l=null,c=d();c==null&&(c=0,s.replaceState({...s.state,idx:c},""));function d(){return(s.state||{idx:null}).idx}function f(){a="POP";let A=d(),_=A==null?null:A-c;c=A,l&&l({action:a,location:v.location,delta:_})}function p(A,_){a="PUSH";let y=gf(v.location,A,_);n&&n(y,A),c=d()+1;let S=pv(y,c),b=v.createHref(y);try{s.pushState(S,"",b)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(b)}o&&l&&l({action:a,location:v.location,delta:1})}function g(A,_){a="REPLACE";let y=gf(v.location,A,_);n&&n(y,A),c=d();let S=pv(y,c),b=v.createHref(y);s.replaceState(S,"",b),o&&l&&l({action:a,location:v.location,delta:0})}function E(A){let _=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof A=="string"?A:Ta(A);return y=y.replace(/ $/,"%20"),Ne(_,`No window.location.(origin|href) available to create URL for href: ${y}`),new URL(y,_)}let v={get action(){return a},get location(){return t(i,s)},listen(A){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(fv,f),l=A,()=>{i.removeEventListener(fv,f),l=null}},createHref(A){return e(i,A)},createURL:E,encodeLocation(A){let _=E(A);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:p,replace:g,go(A){return s.go(A)}};return v}function wx(t,e,n="/"){return JA(t,e,n,!1)}function JA(t,e,n,r){let i=typeof e=="string"?Fi(e):e,o=Hr(i.pathname||"/",n);if(o==null)return null;let s=xx(t);ZA(s);let a=null;for(let l=0;a==null&&l<s.length;++l){let c=cR(o);a=lR(s[l],c,r)}return a}function xx(t,e=[],n=[],r=""){let i=(o,s,a)=>{let l={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};l.relativePath.startsWith("/")&&(Ne(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let c=Kn([r,l.relativePath]),d=n.concat(l);o.children&&o.children.length>0&&(Ne(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),xx(o.children,e,d,c)),!(o.path==null&&!o.index)&&e.push({path:c,score:sR(c,o.index),routesMeta:d})};return t.forEach((o,s)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))i(o,s);else for(let l of Ex(o.path))i(o,s,l)}),e}function Ex(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=Ex(r.join("/")),a=[];return a.push(...s.map(l=>l===""?o:[o,l].join("/"))),i&&a.push(...s),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function ZA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:aR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var eR=/^:[\w-]+$/,tR=3,nR=2,rR=1,iR=10,oR=-2,mv=t=>t==="*";function sR(t,e){let n=t.split("/"),r=n.length;return n.some(mv)&&(r+=oR),e&&(r+=nR),n.filter(i=>!mv(i)).reduce((i,o)=>i+(eR.test(o)?tR:o===""?rR:iR),r)}function aR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function lR(t,e,n=!1){let{routesMeta:r}=t,i={},o="/",s=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=o==="/"?e:e.slice(o.length)||"/",f=Ku({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),p=l.route;if(!f&&c&&n&&!r[r.length-1].route.index&&(f=Ku({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!f)return null;Object.assign(i,f.params),s.push({params:i,pathname:Kn([o,f.pathname]),pathnameBase:pR(Kn([o,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(o=Kn([o,f.pathnameBase]))}return s}function Ku(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=uR(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,{paramName:d,isOptional:f},p)=>{if(d==="*"){let E=a[p]||"";s=o.slice(0,o.length-E.length).replace(/(.)\/+$/,"$1")}const g=a[p];return f&&!g?c[d]=void 0:c[d]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:s,pattern:t}}function uR(t,e=!1,n=!0){hn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function cR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return hn(!1,`The URL path "${t}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Hr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function dR(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Fi(t):t;return{pathname:n?n.startsWith("/")?n:hR(n,e):e,search:mR(r),hash:gR(i)}}function hR(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Jd(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function fR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Tx(t){let e=fR(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Sx(t,e,n,r=!1){let i;typeof t=="string"?i=Fi(t):(i={...t},Ne(!i.pathname||!i.pathname.includes("?"),Jd("?","pathname","search",i)),Ne(!i.pathname||!i.pathname.includes("#"),Jd("#","pathname","hash",i)),Ne(!i.search||!i.search.includes("#"),Jd("#","search","hash",i)));let o=t===""||i.pathname==="",s=o?"/":i.pathname,a;if(s==null)a=n;else{let f=e.length-1;if(!r&&s.startsWith("..")){let p=s.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=dR(i,a),c=s&&s!=="/"&&s.endsWith("/"),d=(o||s===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}var Kn=t=>t.join("/").replace(/\/\/+/g,"/"),pR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),mR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,gR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function yR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var Cx=["POST","PUT","PATCH","DELETE"];new Set(Cx);var vR=["GET",...Cx];new Set(vR);var Zo=w.createContext(null);Zo.displayName="DataRouter";var $c=w.createContext(null);$c.displayName="DataRouterState";var Ix=w.createContext({isTransitioning:!1});Ix.displayName="ViewTransition";var _R=w.createContext(new Map);_R.displayName="Fetchers";var wR=w.createContext(null);wR.displayName="Await";var bn=w.createContext(null);bn.displayName="Navigation";var ja=w.createContext(null);ja.displayName="Location";var ur=w.createContext({outlet:null,matches:[],isDataRoute:!1});ur.displayName="Route";var Qp=w.createContext(null);Qp.displayName="RouteError";function xR(t,{relative:e}={}){Ne(Ua(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=w.useContext(bn),{hash:i,pathname:o,search:s}=Ba(t,{relative:e}),a=o;return n!=="/"&&(a=o==="/"?n:Kn([n,o])),r.createHref({pathname:a,search:s,hash:i})}function Ua(){return w.useContext(ja)!=null}function Mi(){return Ne(Ua(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(ja).location}var Ax="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Rx(t){w.useContext(bn).static||w.useLayoutEffect(t)}function Px(){let{isDataRoute:t}=w.useContext(ur);return t?OR():ER()}function ER(){Ne(Ua(),"useNavigate() may be used only in the context of a <Router> component.");let t=w.useContext(Zo),{basename:e,navigator:n}=w.useContext(bn),{matches:r}=w.useContext(ur),{pathname:i}=Mi(),o=JSON.stringify(Tx(r)),s=w.useRef(!1);return Rx(()=>{s.current=!0}),w.useCallback((l,c={})=>{if(hn(s.current,Ax),!s.current)return;if(typeof l=="number"){n.go(l);return}let d=Sx(l,JSON.parse(o),i,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Kn([e,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[e,n,o,i,t])}w.createContext(null);function Ba(t,{relative:e}={}){let{matches:n}=w.useContext(ur),{pathname:r}=Mi(),i=JSON.stringify(Tx(n));return w.useMemo(()=>Sx(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function TR(t,e){return kx(t,e)}function kx(t,e,n,r){var _;Ne(Ua(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=w.useContext(bn),{matches:o}=w.useContext(ur),s=o[o.length-1],a=s?s.params:{},l=s?s.pathname:"/",c=s?s.pathnameBase:"/",d=s&&s.route;{let y=d&&d.path||"";bx(l,!d||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let f=Mi(),p;if(e){let y=typeof e=="string"?Fi(e):e;Ne(c==="/"||((_=y.pathname)==null?void 0:_.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${y.pathname}" was given in the \`location\` prop.`),p=y}else p=f;let g=p.pathname||"/",E=g;if(c!=="/"){let y=c.replace(/^\//,"").split("/");E="/"+g.replace(/^\//,"").split("/").slice(y.length).join("/")}let v=wx(t,{pathname:E});hn(d||v!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),hn(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let A=RR(v&&v.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:Kn([c,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:Kn([c,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),o,n,r);return e&&A?w.createElement(ja.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},A):A}function SR(){let t=$R(),e=yR(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=w.createElement(w.Fragment,null,w.createElement("p",null,"💿 Hey developer 👋"),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:o},"ErrorBoundary")," or"," ",w.createElement("code",{style:o},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),n?w.createElement("pre",{style:i},n):null,s)}var CR=w.createElement(SR,null),IR=class extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?w.createElement(ur.Provider,{value:this.props.routeContext},w.createElement(Qp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function AR({routeContext:t,match:e,children:n}){let r=w.useContext(Zo);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),w.createElement(ur.Provider,{value:t},n)}function RR(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=n==null?void 0:n.errors;if(o!=null){let l=i.findIndex(c=>c.route.id&&(o==null?void 0:o[c.route.id])!==void 0);Ne(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let s=!1,a=-1;if(n)for(let l=0;l<i.length;l++){let c=i[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(a=l),c.route.id){let{loaderData:d,errors:f}=n,p=c.route.loader&&!d.hasOwnProperty(c.route.id)&&(!f||f[c.route.id]===void 0);if(c.route.lazy||p){s=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((l,c,d)=>{let f,p=!1,g=null,E=null;n&&(f=o&&c.route.id?o[c.route.id]:void 0,g=c.route.errorElement||CR,s&&(a<0&&d===0?(bx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,E=null):a===d&&(p=!0,E=c.route.hydrateFallbackElement||null)));let v=e.concat(i.slice(0,d+1)),A=()=>{let _;return f?_=g:p?_=E:c.route.Component?_=w.createElement(c.route.Component,null):c.route.element?_=c.route.element:_=l,w.createElement(AR,{match:c,routeContext:{outlet:l,matches:v,isDataRoute:n!=null},children:_})};return n&&(c.route.ErrorBoundary||c.route.errorElement||d===0)?w.createElement(IR,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:A(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):A()},null)}function Yp(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function PR(t){let e=w.useContext(Zo);return Ne(e,Yp(t)),e}function kR(t){let e=w.useContext($c);return Ne(e,Yp(t)),e}function bR(t){let e=w.useContext(ur);return Ne(e,Yp(t)),e}function Xp(t){let e=bR(t),n=e.matches[e.matches.length-1];return Ne(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function NR(){return Xp("useRouteId")}function $R(){var r;let t=w.useContext(Qp),e=kR("useRouteError"),n=Xp("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function OR(){let{router:t}=PR("useNavigate"),e=Xp("useNavigate"),n=w.useRef(!1);return Rx(()=>{n.current=!0}),w.useCallback(async(i,o={})=>{hn(n.current,Ax),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...o}))},[t,e])}var gv={};function bx(t,e,n){!e&&!gv[t]&&(gv[t]=!0,hn(!1,n))}w.memo(LR);function LR({routes:t,future:e,state:n}){return kx(t,void 0,n,e)}function yf(t){Ne(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function DR({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:o=!1}){Ne(!Ua(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=t.replace(/^\/*/,"/"),a=w.useMemo(()=>({basename:s,navigator:i,static:o,future:{}}),[s,i,o]);typeof n=="string"&&(n=Fi(n));let{pathname:l="/",search:c="",hash:d="",state:f=null,key:p="default"}=n,g=w.useMemo(()=>{let E=Hr(l,s);return E==null?null:{location:{pathname:E,search:c,hash:d,state:f,key:p},navigationType:r}},[s,l,c,d,f,p,r]);return hn(g!=null,`<Router basename="${s}"> is not able to match the URL "${l}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:w.createElement(bn.Provider,{value:a},w.createElement(ja.Provider,{children:e,value:g}))}function FR({children:t,location:e}){return TR(vf(t),e)}function vf(t,e=[]){let n=[];return w.Children.forEach(t,(r,i)=>{if(!w.isValidElement(r))return;let o=[...e,i];if(r.type===w.Fragment){n.push.apply(n,vf(r.props.children,o));return}Ne(r.type===yf,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ne(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=vf(r.props.children,o)),n.push(s)}),n}var cu="get",du="application/x-www-form-urlencoded";function Oc(t){return t!=null&&typeof t.tagName=="string"}function MR(t){return Oc(t)&&t.tagName.toLowerCase()==="button"}function VR(t){return Oc(t)&&t.tagName.toLowerCase()==="form"}function jR(t){return Oc(t)&&t.tagName.toLowerCase()==="input"}function UR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function BR(t,e){return t.button===0&&(!e||e==="_self")&&!UR(t)}var Dl=null;function zR(){if(Dl===null)try{new FormData(document.createElement("form"),0),Dl=!1}catch{Dl=!0}return Dl}var WR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Zd(t){return t!=null&&!WR.has(t)?(hn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${du}"`),null):t}function HR(t,e){let n,r,i,o,s;if(VR(t)){let a=t.getAttribute("action");r=a?Hr(a,e):null,n=t.getAttribute("method")||cu,i=Zd(t.getAttribute("enctype"))||du,o=new FormData(t)}else if(MR(t)||jR(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?Hr(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||cu,i=Zd(t.getAttribute("formenctype"))||Zd(a.getAttribute("enctype"))||du,o=new FormData(a,t),!zR()){let{name:c,type:d,value:f}=t;if(d==="image"){let p=c?`${c}.`:"";o.append(`${p}x`,"0"),o.append(`${p}y`,"0")}else c&&o.append(c,f)}}else{if(Oc(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=cu,r=null,i=du,s=t}return o&&i==="text/plain"&&(s=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:s}}function Jp(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function qR(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function GR(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function KR(t,e,n){let r=await Promise.all(t.map(async i=>{let o=e.routes[i.route.id];if(o){let s=await qR(o,n);return s.links?s.links():[]}return[]}));return JR(r.flat(1).filter(GR).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function yv(t,e,n,r,i,o){let s=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,a=(l,c)=>{var d;return n[c].pathname!==l.pathname||((d=n[c].route.path)==null?void 0:d.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return o==="assets"?e.filter((l,c)=>s(l,c)||a(l,c)):o==="data"?e.filter((l,c)=>{var f;let d=r.routes[l.route.id];if(!d||!d.hasLoader)return!1;if(s(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let p=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function QR(t,e){return YR(t.map(n=>{let r=e.routes[n.route.id];if(!r)return[];let i=[r.module];return r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function YR(t){return[...new Set(t)]}function XR(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function JR(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let o=JSON.stringify(XR(i));return n.has(o)||(n.add(o),r.push({key:o,link:i})),r},[])}function ZR(t){let e=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function eP(){let t=w.useContext(Zo);return Jp(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function tP(){let t=w.useContext($c);return Jp(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Zp=w.createContext(void 0);Zp.displayName="FrameworkContext";function Nx(){let t=w.useContext(Zp);return Jp(t,"You must render this element inside a <HydratedRouter> element"),t}function nP(t,e){let n=w.useContext(Zp),[r,i]=w.useState(!1),[o,s]=w.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:d,onTouchStart:f}=e,p=w.useRef(null);w.useEffect(()=>{if(t==="render"&&s(!0),t==="viewport"){let v=_=>{_.forEach(y=>{s(y.isIntersecting)})},A=new IntersectionObserver(v,{threshold:.5});return p.current&&A.observe(p.current),()=>{A.disconnect()}}},[t]),w.useEffect(()=>{if(r){let v=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(v)}}},[r]);let g=()=>{i(!0)},E=()=>{i(!1),s(!1)};return n?t!=="intent"?[o,p,{}]:[o,p,{onFocus:$s(a,g),onBlur:$s(l,E),onMouseEnter:$s(c,g),onMouseLeave:$s(d,E),onTouchStart:$s(f,g)}]:[!1,p,{}]}function $s(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function rP({page:t,...e}){let{router:n}=eP(),r=w.useMemo(()=>wx(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?w.createElement(oP,{page:t,matches:r,...e}):null}function iP(t){let{manifest:e,routeModules:n}=Nx(),[r,i]=w.useState([]);return w.useEffect(()=>{let o=!1;return KR(t,e,n).then(s=>{o||i(s)}),()=>{o=!0}},[t,e,n]),r}function oP({page:t,matches:e,...n}){let r=Mi(),{manifest:i,routeModules:o}=Nx(),{loaderData:s,matches:a}=tP(),l=w.useMemo(()=>yv(t,e,a,i,r,"data"),[t,e,a,i,r]),c=w.useMemo(()=>yv(t,e,a,i,r,"assets"),[t,e,a,i,r]),d=w.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let g=new Set,E=!1;if(e.forEach(A=>{var y;let _=i.routes[A.route.id];!_||!_.hasLoader||(!l.some(S=>S.route.id===A.route.id)&&A.route.id in s&&((y=o[A.route.id])!=null&&y.shouldRevalidate)||_.hasClientLoader?E=!0:g.add(A.route.id))}),g.size===0)return[];let v=ZR(t);return E&&g.size>0&&v.searchParams.set("_routes",e.filter(A=>g.has(A.route.id)).map(A=>A.route.id).join(",")),[v.pathname+v.search]},[s,r,i,l,e,t,o]),f=w.useMemo(()=>QR(c,i),[c,i]),p=iP(c);return w.createElement(w.Fragment,null,d.map(g=>w.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...n})),f.map(g=>w.createElement("link",{key:g,rel:"modulepreload",href:g,...n})),p.map(({key:g,link:E})=>w.createElement("link",{key:g,...E})))}function sP(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var $x=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{$x&&(window.__reactRouterVersion="7.1.1")}catch{}function aP({basename:t,children:e,window:n}){let r=w.useRef();r.current==null&&(r.current=QA({window:n,v5Compat:!0}));let i=r.current,[o,s]=w.useState({action:i.action,location:i.location}),a=w.useCallback(l=>{w.startTransition(()=>s(l))},[s]);return w.useLayoutEffect(()=>i.listen(a),[i,a]),w.createElement(DR,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:i})}var Ox=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Lx=w.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:s,state:a,target:l,to:c,preventScrollReset:d,viewTransition:f,...p},g){let{basename:E}=w.useContext(bn),v=typeof c=="string"&&Ox.test(c),A,_=!1;if(typeof c=="string"&&v&&(A=c,$x))try{let R=new URL(window.location.href),P=c.startsWith("//")?new URL(R.protocol+c):new URL(c),N=Hr(P.pathname,E);P.origin===R.origin&&N!=null?c=N+P.search+P.hash:_=!0}catch{hn(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=xR(c,{relative:i}),[S,b,O]=nP(r,p),D=dP(c,{replace:s,state:a,target:l,preventScrollReset:d,relative:i,viewTransition:f});function I(R){e&&e(R),R.defaultPrevented||D(R)}let T=w.createElement("a",{...p,...O,href:A||y,onClick:_||o?e:I,ref:sP(g,b),target:l,"data-discover":!v&&n==="render"?"true":void 0});return S&&!v?w.createElement(w.Fragment,null,T,w.createElement(rP,{page:y})):T});Lx.displayName="Link";var lP=w.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:s,viewTransition:a,children:l,...c},d){let f=Ba(s,{relative:c.relative}),p=Mi(),g=w.useContext($c),{navigator:E,basename:v}=w.useContext(bn),A=g!=null&&gP(f)&&a===!0,_=E.encodeLocation?E.encodeLocation(f).pathname:f.pathname,y=p.pathname,S=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;n||(y=y.toLowerCase(),S=S?S.toLowerCase():null,_=_.toLowerCase()),S&&v&&(S=Hr(S,v)||S);const b=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let O=y===_||!i&&y.startsWith(_)&&y.charAt(b)==="/",D=S!=null&&(S===_||!i&&S.startsWith(_)&&S.charAt(_.length)==="/"),I={isActive:O,isPending:D,isTransitioning:A},T=O?e:void 0,R;typeof r=="function"?R=r(I):R=[r,O?"active":null,D?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let P=typeof o=="function"?o(I):o;return w.createElement(Lx,{...c,"aria-current":T,className:R,ref:d,style:P,to:s,viewTransition:a},typeof l=="function"?l(I):l)});lP.displayName="NavLink";var uP=w.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:o,method:s=cu,action:a,onSubmit:l,relative:c,preventScrollReset:d,viewTransition:f,...p},g)=>{let E=pP(),v=mP(a,{relative:c}),A=s.toLowerCase()==="get"?"get":"post",_=typeof a=="string"&&Ox.test(a),y=S=>{if(l&&l(S),S.defaultPrevented)return;S.preventDefault();let b=S.nativeEvent.submitter,O=(b==null?void 0:b.getAttribute("formmethod"))||s;E(b||S.currentTarget,{fetcherKey:e,method:O,navigate:n,replace:i,state:o,relative:c,preventScrollReset:d,viewTransition:f})};return w.createElement("form",{ref:g,method:A,action:v,onSubmit:r?l:y,...p,"data-discover":!_&&t==="render"?"true":void 0})});uP.displayName="Form";function cP(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Dx(t){let e=w.useContext(Zo);return Ne(e,cP(t)),e}function dP(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:s}={}){let a=Px(),l=Mi(),c=Ba(t,{relative:o});return w.useCallback(d=>{if(BR(d,e)){d.preventDefault();let f=n!==void 0?n:Ta(l)===Ta(c);a(t,{replace:f,state:r,preventScrollReset:i,relative:o,viewTransition:s})}},[l,a,c,n,r,e,t,i,o,s])}var hP=0,fP=()=>`__${String(++hP)}__`;function pP(){let{router:t}=Dx("useSubmit"),{basename:e}=w.useContext(bn),n=NR();return w.useCallback(async(r,i={})=>{let{action:o,method:s,encType:a,formData:l,body:c}=HR(r,e);if(i.navigate===!1){let d=i.fetcherKey||fP();await t.fetch(d,n,i.action||o,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||s,formEncType:i.encType||a,flushSync:i.flushSync})}else await t.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||s,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function mP(t,{relative:e}={}){let{basename:n}=w.useContext(bn),r=w.useContext(ur);Ne(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...Ba(t||".",{relative:e})},s=Mi();if(t==null){o.search=s.search;let a=new URLSearchParams(o.search),l=a.getAll("index");if(l.some(d=>d==="")){a.delete("index"),l.filter(f=>f).forEach(f=>a.append("index",f));let d=a.toString();o.search=d?`?${d}`:""}}return(!t||t===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Kn([n,o.pathname])),Ta(o)}function gP(t,e={}){let n=w.useContext(Ix);Ne(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Dx("useViewTransitionState"),i=Ba(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=Hr(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=Hr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Ku(i.pathname,s)!=null||Ku(i.pathname,o)!=null}new TextEncoder;var vv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},yP=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],s=t[n++],a=t[n++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Mx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,a=s?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,d=o>>2,f=(o&3)<<4|a>>4;let p=(a&15)<<2|c>>6,g=c&63;l||(g=64,s||(p=64)),r.push(n[d],n[f],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Fx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||c==null||f==null)throw new vP;const p=o<<2|a>>4;if(r.push(p),c!==64){const g=a<<4&240|c>>2;if(r.push(g),f!==64){const E=c<<6&192|f;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class vP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _P=function(t){const e=Fx(t);return Mx.encodeByteArray(e,!0)},Qu=function(t){return _P(t).replace(/\./g,"")},Vx=function(t){try{return Mx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xP=()=>wP().__FIREBASE_DEFAULTS__,EP=()=>{if(typeof process>"u"||typeof vv>"u")return;const t=vv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},TP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Vx(t[1]);return e&&JSON.parse(e)},Lc=()=>{try{return xP()||EP()||TP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},jx=t=>{var e,n;return(n=(e=Lc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},SP=t=>{const e=jx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Ux=()=>{var t;return(t=Lc())===null||t===void 0?void 0:t.config},Bx=t=>{var e;return(e=Lc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Qu(JSON.stringify(n)),Qu(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xt())}function RP(){var t;const e=(t=Lc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function PP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function kP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function bP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function NP(){const t=xt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function $P(){return!RP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function OP(){try{return typeof indexedDB=="object"}catch{return!1}}function LP(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP="FirebaseError";class cr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=DP,Object.setPrototypeOf(this,cr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,za.prototype.create)}}class za{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?FP(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new cr(i,a,r)}}function FP(t,e){return t.replace(MP,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const MP=/\{\$([^}]+)}/g;function VP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Yu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(_v(o)&&_v(s)){if(!Yu(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function _v(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function jP(t,e){const n=new UP(t,e);return n.subscribe.bind(n)}class UP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");BP(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=eh),i.error===void 0&&(i.error=eh),i.complete===void 0&&(i.complete=eh);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function eh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(t){return t&&t._delegate?t._delegate:t}class Pi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new CP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HP(e))try{this.getOrInitializeService({instanceIdentifier:fi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=fi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fi){return this.instances.has(e)}getOptions(e=fi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:WP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=fi){return this.component?this.component.multipleInstances?e:fi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function WP(t){return t===fi?void 0:t}function HP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new zP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var le;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(le||(le={}));const GP={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},KP=le.INFO,QP={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},YP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=QP[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class em{constructor(e){this.name=e,this._logLevel=KP,this._logHandler=YP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?GP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}}const XP=(t,e)=>e.some(n=>t instanceof n);let wv,xv;function JP(){return wv||(wv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZP(){return xv||(xv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zx=new WeakMap,_f=new WeakMap,Wx=new WeakMap,th=new WeakMap,tm=new WeakMap;function ek(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Mr(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&zx.set(n,t)}).catch(()=>{}),tm.set(e,t),e}function tk(t){if(_f.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});_f.set(t,e)}let wf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return _f.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Wx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Mr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function nk(t){wf=t(wf)}function rk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(nh(this),e,...n);return Wx.set(r,e.sort?e.sort():[e]),Mr(r)}:ZP().includes(t)?function(...e){return t.apply(nh(this),e),Mr(zx.get(this))}:function(...e){return Mr(t.apply(nh(this),e))}}function ik(t){return typeof t=="function"?rk(t):(t instanceof IDBTransaction&&tk(t),XP(t,JP())?new Proxy(t,wf):t)}function Mr(t){if(t instanceof IDBRequest)return ek(t);if(th.has(t))return th.get(t);const e=ik(t);return e!==t&&(th.set(t,e),tm.set(e,t)),e}const nh=t=>tm.get(t);function ok(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=Mr(s);return r&&s.addEventListener("upgradeneeded",l=>{r(Mr(s.result),l.oldVersion,l.newVersion,Mr(s.transaction),l)}),n&&s.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const sk=["get","getKey","getAll","getAllKeys","count"],ak=["put","add","delete","clear"],rh=new Map;function Ev(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(rh.get(e))return rh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=ak.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||sk.includes(n)))return;const o=async function(s,...a){const l=this.transaction(s,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return rh.set(e,o),o}nk(t=>({...t,get:(e,n,r)=>Ev(e,n)||t.get(e,n,r),has:(e,n)=>!!Ev(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(uk(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function uk(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xf="@firebase/app",Tv="0.10.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zn=new em("@firebase/app"),ck="@firebase/app-compat",dk="@firebase/analytics-compat",hk="@firebase/analytics",fk="@firebase/app-check-compat",pk="@firebase/app-check",mk="@firebase/auth",gk="@firebase/auth-compat",yk="@firebase/database",vk="@firebase/data-connect",_k="@firebase/database-compat",wk="@firebase/functions",xk="@firebase/functions-compat",Ek="@firebase/installations",Tk="@firebase/installations-compat",Sk="@firebase/messaging",Ck="@firebase/messaging-compat",Ik="@firebase/performance",Ak="@firebase/performance-compat",Rk="@firebase/remote-config",Pk="@firebase/remote-config-compat",kk="@firebase/storage",bk="@firebase/storage-compat",Nk="@firebase/firestore",$k="@firebase/vertexai",Ok="@firebase/firestore-compat",Lk="firebase",Dk="11.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ef="[DEFAULT]",Fk={[xf]:"fire-core",[ck]:"fire-core-compat",[hk]:"fire-analytics",[dk]:"fire-analytics-compat",[pk]:"fire-app-check",[fk]:"fire-app-check-compat",[mk]:"fire-auth",[gk]:"fire-auth-compat",[yk]:"fire-rtdb",[vk]:"fire-data-connect",[_k]:"fire-rtdb-compat",[wk]:"fire-fn",[xk]:"fire-fn-compat",[Ek]:"fire-iid",[Tk]:"fire-iid-compat",[Sk]:"fire-fcm",[Ck]:"fire-fcm-compat",[Ik]:"fire-perf",[Ak]:"fire-perf-compat",[Rk]:"fire-rc",[Pk]:"fire-rc-compat",[kk]:"fire-gcs",[bk]:"fire-gcs-compat",[Nk]:"fire-fst",[Ok]:"fire-fst-compat",[$k]:"fire-vertex","fire-js":"fire-js",[Lk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xu=new Map,Mk=new Map,Tf=new Map;function Sv(t,e){try{t.container.addComponent(e)}catch(n){Zn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Fo(t){const e=t.name;if(Tf.has(e))return Zn.debug(`There were multiple attempts to register component ${e}.`),!1;Tf.set(e,t);for(const n of Xu.values())Sv(n,t);for(const n of Mk.values())Sv(n,t);return!0}function nm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function zn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vr=new za("app","Firebase",Vk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Pi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es=Dk;function Hx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ef,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Vr.create("bad-app-name",{appName:String(i)});if(n||(n=Ux()),!n)throw Vr.create("no-options");const o=Xu.get(i);if(o){if(Yu(n,o.options)&&Yu(r,o.config))return o;throw Vr.create("duplicate-app",{appName:i})}const s=new qP(i);for(const l of Tf.values())s.addComponent(l);const a=new jk(n,r,s);return Xu.set(i,a),a}function qx(t=Ef){const e=Xu.get(t);if(!e&&t===Ef&&Ux())return Hx();if(!e)throw Vr.create("no-app",{appName:t});return e}function jr(t,e,n){var r;let i=(r=Fk[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zn.warn(a.join(" "));return}Fo(new Pi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk="firebase-heartbeat-database",Bk=1,Sa="firebase-heartbeat-store";let ih=null;function Gx(){return ih||(ih=ok(Uk,Bk,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Sa)}catch(n){console.warn(n)}}}}).catch(t=>{throw Vr.create("idb-open",{originalErrorMessage:t.message})})),ih}async function zk(t){try{const n=(await Gx()).transaction(Sa),r=await n.objectStore(Sa).get(Kx(t));return await n.done,r}catch(e){if(e instanceof cr)Zn.warn(e.message);else{const n=Vr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Zn.warn(n.message)}}}async function Cv(t,e){try{const r=(await Gx()).transaction(Sa,"readwrite");await r.objectStore(Sa).put(e,Kx(t)),await r.done}catch(n){if(n instanceof cr)Zn.warn(n.message);else{const r=Vr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Zn.warn(r.message)}}}function Kx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk=1024,Hk=30*24*60*60*1e3;class qk{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Kk(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Iv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const a=new Date(s.date).valueOf();return Date.now()-a<=Hk}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Zn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Iv(),{heartbeatsToSend:r,unsentEntries:i}=Gk(this._heartbeatsCache.heartbeats),o=Qu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Zn.warn(n),""}}}function Iv(){return new Date().toISOString().substring(0,10)}function Gk(t,e=Wk){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Av(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Av(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Kk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return OP()?LP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await zk(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Cv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Cv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Av(t){return Qu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qk(t){Fo(new Pi("platform-logger",e=>new lk(e),"PRIVATE")),Fo(new Pi("heartbeat",e=>new qk(e),"PRIVATE")),jr(xf,Tv,t),jr(xf,Tv,"esm2017"),jr("fire-js","")}Qk("");var Yk="firebase",Xk="11.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jr(Yk,Xk,"app");var _n=function(){return _n=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_n.apply(this,arguments)};function Ha(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Jk(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}function Qx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Zk=Qx,Yx=new za("auth","Firebase",Qx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju=new em("@firebase/auth");function eb(t,...e){Ju.logLevel<=le.WARN&&Ju.warn(`Auth (${es}): ${t}`,...e)}function hu(t,...e){Ju.logLevel<=le.ERROR&&Ju.error(`Auth (${es}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(t,...e){throw im(t,...e)}function cn(t,...e){return im(t,...e)}function rm(t,e,n){const r=Object.assign(Object.assign({},Zk()),{[e]:n});return new za("auth","Firebase",r).create(e,{appName:t.name})}function Ei(t){return rm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function tb(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&An(t,"argument-error"),rm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function im(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Yx.create(t,...e)}function te(t,e,...n){if(!t)throw im(e,...n)}function Wn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw hu(e),new Error(e)}function er(t,e){t||Wn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function nb(){return Rv()==="http:"||Rv()==="https:"}function Rv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nb()||kP()||"connection"in navigator)?navigator.onLine:!0}function ib(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e,n){this.shortDelay=e,this.longDelay=n,er(n>e,"Short delay should be less than long delay!"),this.isMobile=AP()||bP()}get(){return rb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(t,e){er(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb=new qa(3e4,6e4);function sm(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ts(t,e,n,r,i={}){return Jx(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});const a=Wa(Object.assign({key:t.config.apiKey},s)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},o);return PP()||(c.referrerPolicy="no-referrer"),Xx.fetch()(Zx(t,t.config.apiHost,n,a),c)})}async function Jx(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},ob),e);try{const i=new lb(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw Fl(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fl(t,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw Fl(t,"email-already-in-use",s);if(l==="USER_DISABLED")throw Fl(t,"user-disabled",s);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw rm(t,d,c);An(t,d)}}catch(i){if(i instanceof cr)throw i;An(t,"network-request-failed",{message:String(i)})}}async function ab(t,e,n,r,i={}){const o=await ts(t,e,n,r,i);return"mfaPendingCredential"in o&&An(t,"multi-factor-auth-required",{_serverResponse:o}),o}function Zx(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?om(t.config,i):`${t.config.apiScheme}://${i}`}class lb{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(cn(this.auth,"network-request-failed")),sb.get())})}}function Fl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=cn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ub(t,e){return ts(t,"POST","/v1/accounts:delete",e)}async function eE(t,e){return ts(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ta(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function cb(t,e=!1){const n=zt(t),r=await n.getIdToken(e),i=am(r);te(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:ta(oh(i.auth_time)),issuedAtTime:ta(oh(i.iat)),expirationTime:ta(oh(i.exp)),signInProvider:s||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function oh(t){return Number(t)*1e3}function am(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return hu("JWT malformed, contained fewer than 3 sections"),null;try{const i=Vx(n);return i?JSON.parse(i):(hu("Failed to decode base64 JWT payload"),null)}catch(i){return hu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Pv(t){const e=am(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ca(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof cr&&db(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function db({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ta(this.lastLoginAt),this.creationTime=ta(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zu(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Ca(t,eE(n,{idToken:r}));te(i==null?void 0:i.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?tE(o.providerUserInfo):[],a=pb(t.providerData,s),l=t.isAnonymous,c=!(t.email&&o.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Cf(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function fb(t){const e=zt(t);await Zu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pb(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function tE(t){return t.map(e=>{var{providerId:n}=e,r=Ha(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mb(t,e){const n=await Jx(t,{},async()=>{const r=Wa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=Zx(t,i,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Xx.fetch()(s,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function gb(t,e){return ts(t,"POST","/v2/accounts:revokeToken",sm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Pv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){te(e.length!==0,"internal-error");const n=Pv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await mb(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new To;return r&&(te(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(te(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(te(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new To,this.toJSON())}_performRefresh(){return Wn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Hn{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Ha(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Cf(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Ca(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return cb(this,e)}reload(){return fb(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Hn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Zu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zn(this.auth.app))return Promise.reject(Ei(this.auth));const e=await this.getIdToken();return await Ca(this,ub(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,l,c,d;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,g=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,E=(s=n.photoURL)!==null&&s!==void 0?s:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,A=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,_=(c=n.createdAt)!==null&&c!==void 0?c:void 0,y=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:S,emailVerified:b,isAnonymous:O,providerData:D,stsTokenManager:I}=n;te(S&&I,e,"internal-error");const T=To.fromJSON(this.name,I);te(typeof S=="string",e,"internal-error"),gr(f,e.name),gr(p,e.name),te(typeof b=="boolean",e,"internal-error"),te(typeof O=="boolean",e,"internal-error"),gr(g,e.name),gr(E,e.name),gr(v,e.name),gr(A,e.name),gr(_,e.name),gr(y,e.name);const R=new Hn({uid:S,auth:e,email:p,emailVerified:b,displayName:f,isAnonymous:O,photoURL:E,phoneNumber:g,tenantId:v,stsTokenManager:T,createdAt:_,lastLoginAt:y});return D&&Array.isArray(D)&&(R.providerData=D.map(P=>Object.assign({},P))),A&&(R._redirectEventId=A),R}static async _fromIdTokenResponse(e,n,r=!1){const i=new To;i.updateFromServerResponse(n);const o=new Hn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Zu(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];te(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?tE(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),a=new To;a.updateFromIdToken(r);const l=new Hn({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Cf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv=new Map;function qn(t){er(t instanceof Function,"Expected a class definition");let e=kv.get(t);return e?(er(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,kv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}nE.type="NONE";const bv=nE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(t,e,n){return`firebase:${t}:${e}:${n}`}class So{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=fu(this.userKey,i.apiKey,o),this.fullPersistenceKey=fu("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Hn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new So(qn(bv),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let o=i[0]||qn(bv);const s=fu(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(s);if(d){const f=Hn._fromJSON(e,d);c!==o&&(a=f),o=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!o._shouldAllowMigration||!l.length?new So(o,e,r):(o=l[0],a&&await o._set(s,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==o)try{await c._remove(s)}catch{}})),new So(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lE(e))return"Blackberry";if(uE(e))return"Webos";if(iE(e))return"Safari";if((e.includes("chrome/")||oE(e))&&!e.includes("edge/"))return"Chrome";if(aE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function rE(t=xt()){return/firefox\//i.test(t)}function iE(t=xt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function oE(t=xt()){return/crios\//i.test(t)}function sE(t=xt()){return/iemobile/i.test(t)}function aE(t=xt()){return/android/i.test(t)}function lE(t=xt()){return/blackberry/i.test(t)}function uE(t=xt()){return/webos/i.test(t)}function lm(t=xt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function yb(t=xt()){var e;return lm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function vb(){return NP()&&document.documentMode===10}function cE(t=xt()){return lm(t)||aE(t)||uE(t)||lE(t)||/windows phone/i.test(t)||sE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(t,e=[]){let n;switch(t){case"Browser":n=Nv(xt());break;case"Worker":n=`${Nv(xt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${es}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,a)=>{try{const l=e(o);s(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wb(t,e={}){return ts(t,"GET","/v2/passwordPolicy",sm(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb=6;class Eb{constructor(e){var n,r,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:xb,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsUppercaseLetter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(s=l.containsNumericCharacter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $v(this),this.idTokenSubscription=new $v(this),this.beforeStateQueue=new _b(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Yx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=qn(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await So.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await eE(this,{idToken:e}),r=await Hn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(zn(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!s||s===a)&&(l!=null&&l.user)&&(i=l.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Zu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ib()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(zn(this.app))return Promise.reject(Ei(this));const n=e?zt(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return zn(this.app)?Promise.reject(Ei(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return zn(this.app)?Promise.reject(Ei(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wb(this),n=new Eb(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new za("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await gb(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&qn(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await So.create(this,[qn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{s=!0,l()}}else{const l=e.addObserver(n);return()=>{s=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=dE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&eb(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Dc(t){return zt(t)}class $v{constructor(e){this.auth=e,this.observer=null,this.addObserver=jP(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let um={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Sb(t){um=t}function Cb(t){return um.loadJS(t)}function Ib(){return um.gapiScript}function Ab(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(t,e){const n=nm(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(Yu(o,e??{}))return i;An(i,"already-initialized")}return n.initialize({options:e})}function Pb(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(qn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function kb(t,e,n){const r=Dc(t);te(r._canInitEmulator,r,"emulator-config-failed"),te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=hE(e),{host:s,port:a}=bb(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),Nb()}function hE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function bb(t){const e=hE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:Ov(r.substr(o.length+1))}}else{const[o,s]=r.split(":");return{host:o,port:Ov(s)}}}function Ov(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Nb(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Wn("not implemented")}_getIdTokenResponse(e){return Wn("not implemented")}_linkToIdToken(e,n){return Wn("not implemented")}_getReauthenticationResolver(e){return Wn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Co(t,e){return ab(t,"POST","/v1/accounts:signInWithIdp",sm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b="http://localhost";class ki extends fE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ki(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):An("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=Ha(n,["providerId","signInMethod"]);if(!r||!i)return null;const s=new ki(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return Co(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Co(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Co(e,n)}buildRequest(){const e={requestUri:$b,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Wa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga extends cm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends Ga{constructor(){super("facebook.com")}static credential(e){return ki._fromParams({providerId:Sr.PROVIDER_ID,signInMethod:Sr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sr.credentialFromTaggedObject(e)}static credentialFromError(e){return Sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sr.credential(e.oauthAccessToken)}catch{return null}}}Sr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Sr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn extends Ga{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ki._fromParams({providerId:jn.PROVIDER_ID,signInMethod:jn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return jn.credentialFromTaggedObject(e)}static credentialFromError(e){return jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return jn.credential(n,r)}catch{return null}}}jn.GOOGLE_SIGN_IN_METHOD="google.com";jn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends Ga{constructor(){super("github.com")}static credential(e){return ki._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cr.credentialFromTaggedObject(e)}static credentialFromError(e){return Cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cr.credential(e.oauthAccessToken)}catch{return null}}}Cr.GITHUB_SIGN_IN_METHOD="github.com";Cr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir extends Ga{constructor(){super("twitter.com")}static credential(e,n){return ki._fromParams({providerId:Ir.PROVIDER_ID,signInMethod:Ir.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ir.credentialFromTaggedObject(e)}static credentialFromError(e){return Ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ir.credential(n,r)}catch{return null}}}Ir.TWITTER_SIGN_IN_METHOD="twitter.com";Ir.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await Hn._fromIdTokenResponse(e,r,i),s=Lv(r);return new Mo({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Lv(r);return new Mo({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Lv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec extends cr{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ec.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new ec(e,n,r,i)}}function pE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?ec._fromErrorAndOperation(t,o,e,r):o})}async function Ob(t,e,n=!1){const r=await Ca(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Mo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lb(t,e,n=!1){const{auth:r}=t;if(zn(r.app))return Promise.reject(Ei(r));const i="reauthenticate";try{const o=await Ca(t,pE(r,i,e,t),n);te(o.idToken,r,"internal-error");const s=am(o.idToken);te(s,r,"internal-error");const{sub:a}=s;return te(t.uid===a,r,"user-mismatch"),Mo._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&An(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Db(t,e,n=!1){if(zn(t.app))return Promise.reject(Ei(t));const r="signIn",i=await pE(t,r,e),o=await Mo._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}function Fb(t,e,n,r){return zt(t).onIdTokenChanged(e,n,r)}function Mb(t,e,n){return zt(t).beforeAuthStateChanged(e,n)}function Vb(t,e,n,r){return zt(t).onAuthStateChanged(e,n,r)}function jb(t){return zt(t).signOut()}const tc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(tc,"1"),this.storage.removeItem(tc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub=1e3,Bb=10;class gE extends mE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,a,l)=>{this.notifyListeners(s,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},o=this.storage.getItem(r);vb()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Bb):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Ub)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}gE.type="LOCAL";const zb=gE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE extends mE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}yE.type="SESSION";const vE=yE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Fc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(s).map(async c=>c(n.origin,o)),l=await Wb(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,l)=>{const c=dm("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(p.data.response);break;default:clearTimeout(d),clearTimeout(o),l(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(){return window}function qb(t){En().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(){return typeof En().WorkerGlobalScope<"u"&&typeof En().importScripts=="function"}async function Gb(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Kb(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Qb(){return _E()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE="firebaseLocalStorageDb",Yb=1,nc="firebaseLocalStorage",xE="fbase_key";class Ka{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Mc(t,e){return t.transaction([nc],e?"readwrite":"readonly").objectStore(nc)}function Xb(){const t=indexedDB.deleteDatabase(wE);return new Ka(t).toPromise()}function If(){const t=indexedDB.open(wE,Yb);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(nc,{keyPath:xE})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(nc)?e(r):(r.close(),await Xb(),e(await If()))})})}async function Dv(t,e,n){const r=Mc(t,!0).put({[xE]:e,value:n});return new Ka(r).toPromise()}async function Jb(t,e){const n=Mc(t,!1).get(e),r=await new Ka(n).toPromise();return r===void 0?null:r.value}function Fv(t,e){const n=Mc(t,!0).delete(e);return new Ka(n).toPromise()}const Zb=800,e2=3;class EE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await If(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>e2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _E()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fc._getInstance(Qb()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Gb(),!this.activeServiceWorker)return;this.sender=new Hb(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Kb()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await If();return await Dv(e,tc,"1"),await Fv(e,tc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Dv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Jb(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Fv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Mc(i,!1).getAll();return new Ka(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Zb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}EE.type="LOCAL";const t2=EE;new qa(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(t,e){return e?qn(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm extends fE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Co(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Co(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Co(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function n2(t){return Db(t.auth,new hm(t),t.bypassAuthState)}function r2(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),Lb(n,new hm(t),t.bypassAuthState)}async function i2(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),Ob(n,new hm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return n2;case"linkViaPopup":case"linkViaRedirect":return i2;case"reauthViaPopup":case"reauthViaRedirect":return r2;default:An(this.auth,"internal-error")}}resolve(e){er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2=new qa(2e3,1e4);async function s2(t,e,n){if(zn(t.app))return Promise.reject(cn(t,"operation-not-supported-in-this-environment"));const r=Dc(t);tb(t,e,cm);const i=TE(r,n);return new vi(r,"signInViaPopup",e,i).executeNotNull()}class vi extends SE{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,vi.currentPopupAction&&vi.currentPopupAction.cancel(),vi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){er(this.filter.length===1,"Popup operations only handle one event");const e=dm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(cn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(cn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,o2.get())};e()}}vi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2="pendingRedirect",pu=new Map;class l2 extends SE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=pu.get(this.auth._key());if(!e){try{const r=await u2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}pu.set(this.auth._key(),e)}return this.bypassAuthState||pu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function u2(t,e){const n=h2(e),r=d2(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function c2(t,e){pu.set(t._key(),e)}function d2(t){return qn(t._redirectPersistence)}function h2(t){return fu(a2,t.config.apiKey,t.name)}async function f2(t,e,n=!1){if(zn(t.app))return Promise.reject(Ei(t));const r=Dc(t),i=TE(r,e),s=await new l2(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2=10*60*1e3;class m2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!g2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!CE(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(cn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=p2&&this.cachedEventUids.clear(),this.cachedEventUids.has(Mv(e))}saveEventToCache(e){this.cachedEventUids.add(Mv(e)),this.lastProcessedEventTime=Date.now()}}function Mv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function CE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function g2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return CE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y2(t,e={}){return ts(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_2=/^https?/;async function w2(t){if(t.config.emulator)return;const{authorizedDomains:e}=await y2(t);for(const n of e)try{if(x2(n))return}catch{}An(t,"unauthorized-domain")}function x2(t){const e=Sf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!_2.test(n))return!1;if(v2.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2=new qa(3e4,6e4);function Vv(){const t=En().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function T2(t){return new Promise((e,n)=>{var r,i,o;function s(){Vv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Vv(),n(cn(t,"network-request-failed"))},timeout:E2.get()})}if(!((i=(r=En().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=En().gapi)===null||o===void 0)&&o.load)s();else{const a=Ab("iframefcb");return En()[a]=()=>{gapi.load?s():n(cn(t,"network-request-failed"))},Cb(`${Ib()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw mu=null,e})}let mu=null;function S2(t){return mu=mu||T2(t),mu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2=new qa(5e3,15e3),I2="__/auth/iframe",A2="emulator/auth/iframe",R2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},P2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function k2(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?om(e,A2):`https://${t.config.authDomain}/${I2}`,r={apiKey:e.apiKey,appName:t.name,v:es},i=P2.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Wa(r).slice(1)}`}async function b2(t){const e=await S2(t),n=En().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:k2(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:R2,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const s=cn(t,"network-request-failed"),a=En().setTimeout(()=>{o(s)},C2.get());function l(){En().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$2=500,O2=600,L2="_blank",D2="http://localhost";class jv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function F2(t,e,n,r=$2,i=O2){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},N2),{width:r.toString(),height:i.toString(),top:o,left:s}),c=xt().toLowerCase();n&&(a=oE(c)?L2:n),rE(c)&&(e=e||D2,l.scrollbars="yes");const d=Object.entries(l).reduce((p,[g,E])=>`${p}${g}=${E},`,"");if(yb(c)&&a!=="_self")return M2(e||"",a),new jv(null);const f=window.open(e||"",a,d);te(f,t,"popup-blocked");try{f.focus()}catch{}return new jv(f)}function M2(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2="__/auth/handler",j2="emulator/auth/handler",U2=encodeURIComponent("fac");async function Uv(t,e,n,r,i,o){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:es,eventId:i};if(e instanceof cm){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",VP(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))s[d]=f}if(e instanceof Ga){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(s.scopes=d.join(","))}t.tenantId&&(s.tid=t.tenantId);const a=s;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${U2}=${encodeURIComponent(l)}`:"";return`${B2(t)}?${Wa(a).slice(1)}${c}`}function B2({config:t}){return t.emulator?om(t,j2):`https://${t.authDomain}/${V2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh="webStorageSupport";class z2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vE,this._completeRedirectFn=f2,this._overrideRedirectResult=c2}async _openPopup(e,n,r,i){var o;er((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await Uv(e,n,r,Sf(),i);return F2(e,s,dm())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await Uv(e,n,r,Sf(),i);return qb(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(er(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await b2(e),r=new m2(e);return n.register("authEvent",i=>(te(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(sh,{type:sh},i=>{var o;const s=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[sh];s!==void 0&&n(!!s),An(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=w2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return cE()||iE()||lm()}}const W2=z2;var Bv="@firebase/auth",zv="1.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function G2(t){Fo(new Pi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;te(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dE(t)},c=new Tb(r,i,o,l);return Pb(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Fo(new Pi("auth-internal",e=>{const n=Dc(e.getProvider("auth").getImmediate());return(r=>new H2(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),jr(Bv,zv,q2(t)),jr(Bv,zv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2=5*60,Q2=Bx("authIdTokenMaxAge")||K2;let Wv=null;const Y2=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Q2)return;const i=n==null?void 0:n.token;Wv!==i&&(Wv=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function X2(t=qx()){const e=nm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Rb(t,{popupRedirectResolver:W2,persistence:[t2,zb,vE]}),r=Bx("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=Y2(o.toString());Mb(n,s,()=>s(n.currentUser)),Fb(n,a=>s(a))}}const i=jx("auth");return i&&kb(n,`http://${i}`),n}function J2(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Sb({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=cn("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",J2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});G2("Browser");var Hv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ti,IE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,T){function R(){}R.prototype=T.prototype,I.D=T.prototype,I.prototype=new R,I.prototype.constructor=I,I.C=function(P,N,$){for(var k=Array(arguments.length-2),W=2;W<arguments.length;W++)k[W-2]=arguments[W];return T.prototype[N].apply(P,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,T,R){R||(R=0);var P=Array(16);if(typeof T=="string")for(var N=0;16>N;++N)P[N]=T.charCodeAt(R++)|T.charCodeAt(R++)<<8|T.charCodeAt(R++)<<16|T.charCodeAt(R++)<<24;else for(N=0;16>N;++N)P[N]=T[R++]|T[R++]<<8|T[R++]<<16|T[R++]<<24;T=I.g[0],R=I.g[1],N=I.g[2];var $=I.g[3],k=T+($^R&(N^$))+P[0]+3614090360&4294967295;T=R+(k<<7&4294967295|k>>>25),k=$+(N^T&(R^N))+P[1]+3905402710&4294967295,$=T+(k<<12&4294967295|k>>>20),k=N+(R^$&(T^R))+P[2]+606105819&4294967295,N=$+(k<<17&4294967295|k>>>15),k=R+(T^N&($^T))+P[3]+3250441966&4294967295,R=N+(k<<22&4294967295|k>>>10),k=T+($^R&(N^$))+P[4]+4118548399&4294967295,T=R+(k<<7&4294967295|k>>>25),k=$+(N^T&(R^N))+P[5]+1200080426&4294967295,$=T+(k<<12&4294967295|k>>>20),k=N+(R^$&(T^R))+P[6]+2821735955&4294967295,N=$+(k<<17&4294967295|k>>>15),k=R+(T^N&($^T))+P[7]+4249261313&4294967295,R=N+(k<<22&4294967295|k>>>10),k=T+($^R&(N^$))+P[8]+1770035416&4294967295,T=R+(k<<7&4294967295|k>>>25),k=$+(N^T&(R^N))+P[9]+2336552879&4294967295,$=T+(k<<12&4294967295|k>>>20),k=N+(R^$&(T^R))+P[10]+4294925233&4294967295,N=$+(k<<17&4294967295|k>>>15),k=R+(T^N&($^T))+P[11]+2304563134&4294967295,R=N+(k<<22&4294967295|k>>>10),k=T+($^R&(N^$))+P[12]+1804603682&4294967295,T=R+(k<<7&4294967295|k>>>25),k=$+(N^T&(R^N))+P[13]+4254626195&4294967295,$=T+(k<<12&4294967295|k>>>20),k=N+(R^$&(T^R))+P[14]+2792965006&4294967295,N=$+(k<<17&4294967295|k>>>15),k=R+(T^N&($^T))+P[15]+1236535329&4294967295,R=N+(k<<22&4294967295|k>>>10),k=T+(N^$&(R^N))+P[1]+4129170786&4294967295,T=R+(k<<5&4294967295|k>>>27),k=$+(R^N&(T^R))+P[6]+3225465664&4294967295,$=T+(k<<9&4294967295|k>>>23),k=N+(T^R&($^T))+P[11]+643717713&4294967295,N=$+(k<<14&4294967295|k>>>18),k=R+($^T&(N^$))+P[0]+3921069994&4294967295,R=N+(k<<20&4294967295|k>>>12),k=T+(N^$&(R^N))+P[5]+3593408605&4294967295,T=R+(k<<5&4294967295|k>>>27),k=$+(R^N&(T^R))+P[10]+38016083&4294967295,$=T+(k<<9&4294967295|k>>>23),k=N+(T^R&($^T))+P[15]+3634488961&4294967295,N=$+(k<<14&4294967295|k>>>18),k=R+($^T&(N^$))+P[4]+3889429448&4294967295,R=N+(k<<20&4294967295|k>>>12),k=T+(N^$&(R^N))+P[9]+568446438&4294967295,T=R+(k<<5&4294967295|k>>>27),k=$+(R^N&(T^R))+P[14]+3275163606&4294967295,$=T+(k<<9&4294967295|k>>>23),k=N+(T^R&($^T))+P[3]+4107603335&4294967295,N=$+(k<<14&4294967295|k>>>18),k=R+($^T&(N^$))+P[8]+1163531501&4294967295,R=N+(k<<20&4294967295|k>>>12),k=T+(N^$&(R^N))+P[13]+2850285829&4294967295,T=R+(k<<5&4294967295|k>>>27),k=$+(R^N&(T^R))+P[2]+4243563512&4294967295,$=T+(k<<9&4294967295|k>>>23),k=N+(T^R&($^T))+P[7]+1735328473&4294967295,N=$+(k<<14&4294967295|k>>>18),k=R+($^T&(N^$))+P[12]+2368359562&4294967295,R=N+(k<<20&4294967295|k>>>12),k=T+(R^N^$)+P[5]+4294588738&4294967295,T=R+(k<<4&4294967295|k>>>28),k=$+(T^R^N)+P[8]+2272392833&4294967295,$=T+(k<<11&4294967295|k>>>21),k=N+($^T^R)+P[11]+1839030562&4294967295,N=$+(k<<16&4294967295|k>>>16),k=R+(N^$^T)+P[14]+4259657740&4294967295,R=N+(k<<23&4294967295|k>>>9),k=T+(R^N^$)+P[1]+2763975236&4294967295,T=R+(k<<4&4294967295|k>>>28),k=$+(T^R^N)+P[4]+1272893353&4294967295,$=T+(k<<11&4294967295|k>>>21),k=N+($^T^R)+P[7]+4139469664&4294967295,N=$+(k<<16&4294967295|k>>>16),k=R+(N^$^T)+P[10]+3200236656&4294967295,R=N+(k<<23&4294967295|k>>>9),k=T+(R^N^$)+P[13]+681279174&4294967295,T=R+(k<<4&4294967295|k>>>28),k=$+(T^R^N)+P[0]+3936430074&4294967295,$=T+(k<<11&4294967295|k>>>21),k=N+($^T^R)+P[3]+3572445317&4294967295,N=$+(k<<16&4294967295|k>>>16),k=R+(N^$^T)+P[6]+76029189&4294967295,R=N+(k<<23&4294967295|k>>>9),k=T+(R^N^$)+P[9]+3654602809&4294967295,T=R+(k<<4&4294967295|k>>>28),k=$+(T^R^N)+P[12]+3873151461&4294967295,$=T+(k<<11&4294967295|k>>>21),k=N+($^T^R)+P[15]+530742520&4294967295,N=$+(k<<16&4294967295|k>>>16),k=R+(N^$^T)+P[2]+3299628645&4294967295,R=N+(k<<23&4294967295|k>>>9),k=T+(N^(R|~$))+P[0]+4096336452&4294967295,T=R+(k<<6&4294967295|k>>>26),k=$+(R^(T|~N))+P[7]+1126891415&4294967295,$=T+(k<<10&4294967295|k>>>22),k=N+(T^($|~R))+P[14]+2878612391&4294967295,N=$+(k<<15&4294967295|k>>>17),k=R+($^(N|~T))+P[5]+4237533241&4294967295,R=N+(k<<21&4294967295|k>>>11),k=T+(N^(R|~$))+P[12]+1700485571&4294967295,T=R+(k<<6&4294967295|k>>>26),k=$+(R^(T|~N))+P[3]+2399980690&4294967295,$=T+(k<<10&4294967295|k>>>22),k=N+(T^($|~R))+P[10]+4293915773&4294967295,N=$+(k<<15&4294967295|k>>>17),k=R+($^(N|~T))+P[1]+2240044497&4294967295,R=N+(k<<21&4294967295|k>>>11),k=T+(N^(R|~$))+P[8]+1873313359&4294967295,T=R+(k<<6&4294967295|k>>>26),k=$+(R^(T|~N))+P[15]+4264355552&4294967295,$=T+(k<<10&4294967295|k>>>22),k=N+(T^($|~R))+P[6]+2734768916&4294967295,N=$+(k<<15&4294967295|k>>>17),k=R+($^(N|~T))+P[13]+1309151649&4294967295,R=N+(k<<21&4294967295|k>>>11),k=T+(N^(R|~$))+P[4]+4149444226&4294967295,T=R+(k<<6&4294967295|k>>>26),k=$+(R^(T|~N))+P[11]+3174756917&4294967295,$=T+(k<<10&4294967295|k>>>22),k=N+(T^($|~R))+P[2]+718787259&4294967295,N=$+(k<<15&4294967295|k>>>17),k=R+($^(N|~T))+P[9]+3951481745&4294967295,I.g[0]=I.g[0]+T&4294967295,I.g[1]=I.g[1]+(N+(k<<21&4294967295|k>>>11))&4294967295,I.g[2]=I.g[2]+N&4294967295,I.g[3]=I.g[3]+$&4294967295}r.prototype.u=function(I,T){T===void 0&&(T=I.length);for(var R=T-this.blockSize,P=this.B,N=this.h,$=0;$<T;){if(N==0)for(;$<=R;)i(this,I,$),$+=this.blockSize;if(typeof I=="string"){for(;$<T;)if(P[N++]=I.charCodeAt($++),N==this.blockSize){i(this,P),N=0;break}}else for(;$<T;)if(P[N++]=I[$++],N==this.blockSize){i(this,P),N=0;break}}this.h=N,this.o+=T},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var T=1;T<I.length-8;++T)I[T]=0;var R=8*this.o;for(T=I.length-8;T<I.length;++T)I[T]=R&255,R/=256;for(this.u(I),I=Array(16),T=R=0;4>T;++T)for(var P=0;32>P;P+=8)I[R++]=this.g[T]>>>P&255;return I};function o(I,T){var R=a;return Object.prototype.hasOwnProperty.call(R,I)?R[I]:R[I]=T(I)}function s(I,T){this.h=T;for(var R=[],P=!0,N=I.length-1;0<=N;N--){var $=I[N]|0;P&&$==T||(R[N]=$,P=!1)}this.g=R}var a={};function l(I){return-128<=I&&128>I?o(I,function(T){return new s([T|0],0>T?-1:0)}):new s([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return f;if(0>I)return A(c(-I));for(var T=[],R=1,P=0;I>=R;P++)T[P]=I/R|0,R*=4294967296;return new s(T,0)}function d(I,T){if(I.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(I.charAt(0)=="-")return A(d(I.substring(1),T));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=c(Math.pow(T,8)),P=f,N=0;N<I.length;N+=8){var $=Math.min(8,I.length-N),k=parseInt(I.substring(N,N+$),T);8>$?($=c(Math.pow(T,$)),P=P.j($).add(c(k))):(P=P.j(R),P=P.add(c(k)))}return P}var f=l(0),p=l(1),g=l(16777216);t=s.prototype,t.m=function(){if(v(this))return-A(this).m();for(var I=0,T=1,R=0;R<this.g.length;R++){var P=this.i(R);I+=(0<=P?P:4294967296+P)*T,T*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(E(this))return"0";if(v(this))return"-"+A(this).toString(I);for(var T=c(Math.pow(I,6)),R=this,P="";;){var N=b(R,T).g;R=_(R,N.j(T));var $=((0<R.g.length?R.g[0]:R.h)>>>0).toString(I);if(R=N,E(R))return $+P;for(;6>$.length;)$="0"+$;P=$+P}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function E(I){if(I.h!=0)return!1;for(var T=0;T<I.g.length;T++)if(I.g[T]!=0)return!1;return!0}function v(I){return I.h==-1}t.l=function(I){return I=_(this,I),v(I)?-1:E(I)?0:1};function A(I){for(var T=I.g.length,R=[],P=0;P<T;P++)R[P]=~I.g[P];return new s(R,~I.h).add(p)}t.abs=function(){return v(this)?A(this):this},t.add=function(I){for(var T=Math.max(this.g.length,I.g.length),R=[],P=0,N=0;N<=T;N++){var $=P+(this.i(N)&65535)+(I.i(N)&65535),k=($>>>16)+(this.i(N)>>>16)+(I.i(N)>>>16);P=k>>>16,$&=65535,k&=65535,R[N]=k<<16|$}return new s(R,R[R.length-1]&-2147483648?-1:0)};function _(I,T){return I.add(A(T))}t.j=function(I){if(E(this)||E(I))return f;if(v(this))return v(I)?A(this).j(A(I)):A(A(this).j(I));if(v(I))return A(this.j(A(I)));if(0>this.l(g)&&0>I.l(g))return c(this.m()*I.m());for(var T=this.g.length+I.g.length,R=[],P=0;P<2*T;P++)R[P]=0;for(P=0;P<this.g.length;P++)for(var N=0;N<I.g.length;N++){var $=this.i(P)>>>16,k=this.i(P)&65535,W=I.i(N)>>>16,oe=I.i(N)&65535;R[2*P+2*N]+=k*oe,y(R,2*P+2*N),R[2*P+2*N+1]+=$*oe,y(R,2*P+2*N+1),R[2*P+2*N+1]+=k*W,y(R,2*P+2*N+1),R[2*P+2*N+2]+=$*W,y(R,2*P+2*N+2)}for(P=0;P<T;P++)R[P]=R[2*P+1]<<16|R[2*P];for(P=T;P<2*T;P++)R[P]=0;return new s(R,0)};function y(I,T){for(;(I[T]&65535)!=I[T];)I[T+1]+=I[T]>>>16,I[T]&=65535,T++}function S(I,T){this.g=I,this.h=T}function b(I,T){if(E(T))throw Error("division by zero");if(E(I))return new S(f,f);if(v(I))return T=b(A(I),T),new S(A(T.g),A(T.h));if(v(T))return T=b(I,A(T)),new S(A(T.g),T.h);if(30<I.g.length){if(v(I)||v(T))throw Error("slowDivide_ only works with positive integers.");for(var R=p,P=T;0>=P.l(I);)R=O(R),P=O(P);var N=D(R,1),$=D(P,1);for(P=D(P,2),R=D(R,2);!E(P);){var k=$.add(P);0>=k.l(I)&&(N=N.add(R),$=k),P=D(P,1),R=D(R,1)}return T=_(I,N.j(T)),new S(N,T)}for(N=f;0<=I.l(T);){for(R=Math.max(1,Math.floor(I.m()/T.m())),P=Math.ceil(Math.log(R)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),$=c(R),k=$.j(T);v(k)||0<k.l(I);)R-=P,$=c(R),k=$.j(T);E($)&&($=p),N=N.add($),I=_(I,k)}return new S(N,I)}t.A=function(I){return b(this,I).h},t.and=function(I){for(var T=Math.max(this.g.length,I.g.length),R=[],P=0;P<T;P++)R[P]=this.i(P)&I.i(P);return new s(R,this.h&I.h)},t.or=function(I){for(var T=Math.max(this.g.length,I.g.length),R=[],P=0;P<T;P++)R[P]=this.i(P)|I.i(P);return new s(R,this.h|I.h)},t.xor=function(I){for(var T=Math.max(this.g.length,I.g.length),R=[],P=0;P<T;P++)R[P]=this.i(P)^I.i(P);return new s(R,this.h^I.h)};function O(I){for(var T=I.g.length+1,R=[],P=0;P<T;P++)R[P]=I.i(P)<<1|I.i(P-1)>>>31;return new s(R,I.h)}function D(I,T){var R=T>>5;T%=32;for(var P=I.g.length-R,N=[],$=0;$<P;$++)N[$]=0<T?I.i($+R)>>>T|I.i($+R+1)<<32-T:I.i($+R);return new s(N,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,IE=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=c,s.fromString=d,Ti=s}).apply(typeof Hv<"u"?Hv:typeof self<"u"?self:typeof window<"u"?window:{});var Ml=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var AE,Bs,RE,gu,Af,PE,kE,bE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,h,m){return u==Array.prototype||u==Object.prototype||(u[h]=m.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ml=="object"&&Ml];for(var h=0;h<u.length;++h){var m=u[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(u,h){if(h)e:{var m=r;u=u.split(".");for(var C=0;C<u.length-1;C++){var L=u[C];if(!(L in m))break e;m=m[L]}u=u[u.length-1],C=m[u],h=h(C),h!=C&&h!=null&&e(m,u,{configurable:!0,writable:!0,value:h})}}function o(u,h){u instanceof String&&(u+="");var m=0,C=!1,L={next:function(){if(!C&&m<u.length){var F=m++;return{value:h(F,u[F]),done:!1}}return C=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(u){return u||function(){return o(this,function(h,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function l(u){var h=typeof u;return h=h!="object"?h:u?Array.isArray(u)?"array":h:"null",h=="array"||h=="object"&&typeof u.length=="number"}function c(u){var h=typeof u;return h=="object"&&u!=null||h=="function"}function d(u,h,m){return u.call.apply(u.bind,arguments)}function f(u,h,m){if(!u)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,C),u.apply(h,L)}}return function(){return u.apply(h,arguments)}}function p(u,h,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,p.apply(null,arguments)}function g(u,h){var m=Array.prototype.slice.call(arguments,1);return function(){var C=m.slice();return C.push.apply(C,arguments),u.apply(this,C)}}function E(u,h){function m(){}m.prototype=h.prototype,u.aa=h.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(C,L,F){for(var B=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)B[Ee-2]=arguments[Ee];return h.prototype[L].apply(C,B)}}function v(u){const h=u.length;if(0<h){const m=Array(h);for(let C=0;C<h;C++)m[C]=u[C];return m}return[]}function A(u,h){for(let m=1;m<arguments.length;m++){const C=arguments[m];if(l(C)){const L=u.length||0,F=C.length||0;u.length=L+F;for(let B=0;B<F;B++)u[L+B]=C[B]}else u.push(C)}}class _{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function y(u){return/^[\s\xa0]*$/.test(u)}function S(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function b(u){return b[" "](u),u}b[" "]=function(){};var O=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function D(u,h,m){for(const C in u)h.call(m,u[C],C,u)}function I(u,h){for(const m in u)h.call(void 0,u[m],m,u)}function T(u){const h={};for(const m in u)h[m]=u[m];return h}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(u,h){let m,C;for(let L=1;L<arguments.length;L++){C=arguments[L];for(m in C)u[m]=C[m];for(let F=0;F<R.length;F++)m=R[F],Object.prototype.hasOwnProperty.call(C,m)&&(u[m]=C[m])}}function N(u){var h=1;u=u.split(":");const m=[];for(;0<h&&u.length;)m.push(u.shift()),h--;return u.length&&m.push(u.join(":")),m}function $(u){a.setTimeout(()=>{throw u},0)}function k(){var u=z;let h=null;return u.g&&(h=u.g,u.g=u.g.next,u.g||(u.h=null),h.next=null),h}class W{constructor(){this.h=this.g=null}add(h,m){const C=oe.get();C.set(h,m),this.h?this.h.next=C:this.g=C,this.h=C}}var oe=new _(()=>new K,u=>u.reset());class K{constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,M=!1,z=new W,G=()=>{const u=a.Promise.resolve(void 0);Y=()=>{u.then(ee)}};var ee=()=>{for(var u;u=k();){try{u.h.call(u.g)}catch(m){$(m)}var h=oe;h.j(u),100>h.h&&(h.h++,u.next=h.g,h.g=u)}M=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _e(u,h){this.type=u,this.g=this.target=h,this.defaultPrevented=!1}_e.prototype.h=function(){this.defaultPrevented=!0};var Qe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,h=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};a.addEventListener("test",m,h),a.removeEventListener("test",m,h)}catch{}return u}();function ct(u,h){if(_e.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,C=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=h,h=u.relatedTarget){if(O){e:{try{b(h.nodeName);var L=!0;break e}catch{}L=!1}L||(h=null)}}else m=="mouseover"?h=u.fromElement:m=="mouseout"&&(h=u.toElement);this.relatedTarget=h,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:et[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ct.aa.h.call(this)}}E(ct,_e);var et={2:"touch",3:"pen",4:"mouse"};ct.prototype.h=function(){ct.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var X="closure_listenable_"+(1e6*Math.random()|0),xe=0;function Ye(u,h,m,C,L){this.listener=u,this.proxy=null,this.src=h,this.type=m,this.capture=!!C,this.ha=L,this.key=++xe,this.da=this.fa=!1}function ye(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function fe(u){this.src=u,this.g={},this.h=0}fe.prototype.add=function(u,h,m,C,L){var F=u.toString();u=this.g[F],u||(u=this.g[F]=[],this.h++);var B=tt(u,h,C,L);return-1<B?(h=u[B],m||(h.fa=!1)):(h=new Ye(h,this.src,F,!!C,L),h.fa=m,u.push(h)),h};function me(u,h){var m=h.type;if(m in u.g){var C=u.g[m],L=Array.prototype.indexOf.call(C,h,void 0),F;(F=0<=L)&&Array.prototype.splice.call(C,L,1),F&&(ye(h),u.g[m].length==0&&(delete u.g[m],u.h--))}}function tt(u,h,m,C){for(var L=0;L<u.length;++L){var F=u[L];if(!F.da&&F.listener==h&&F.capture==!!m&&F.ha==C)return L}return-1}var Rt="closure_lm_"+(1e6*Math.random()|0),$n={};function dr(u,h,m,C,L){if(Array.isArray(h)){for(var F=0;F<h.length;F++)dr(u,h[F],m,C,L);return null}return m=sg(m),u&&u[X]?u.K(h,m,c(C)?!!C.capture:!!C,L):oi(u,h,m,!1,C,L)}function oi(u,h,m,C,L,F){if(!h)throw Error("Invalid event type");var B=c(L)?!!L.capture:!!L,Ee=ld(u);if(Ee||(u[Rt]=Ee=new fe(u)),m=Ee.add(h,m,C,B,F),m.proxy)return m;if(C=sd(),m.proxy=C,C.src=u,C.listener=m,u.addEventListener)Qe||(L=B),L===void 0&&(L=!1),u.addEventListener(h.toString(),C,L);else if(u.attachEvent)u.attachEvent(og(h.toString()),C);else if(u.addListener&&u.removeListener)u.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return m}function sd(){function u(m){return h.call(u.src,u.listener,m)}const h=MC;return u}function si(u,h,m,C,L){if(Array.isArray(h))for(var F=0;F<h.length;F++)si(u,h[F],m,C,L);else C=c(C)?!!C.capture:!!C,m=sg(m),u&&u[X]?(u=u.i,h=String(h).toString(),h in u.g&&(F=u.g[h],m=tt(F,m,C,L),-1<m&&(ye(F[m]),Array.prototype.splice.call(F,m,1),F.length==0&&(delete u.g[h],u.h--)))):u&&(u=ld(u))&&(h=u.g[h.toString()],u=-1,h&&(u=tt(h,m,C,L)),(m=-1<u?h[u]:null)&&ad(m))}function ad(u){if(typeof u!="number"&&u&&!u.da){var h=u.src;if(h&&h[X])me(h.i,u);else{var m=u.type,C=u.proxy;h.removeEventListener?h.removeEventListener(m,C,u.capture):h.detachEvent?h.detachEvent(og(m),C):h.addListener&&h.removeListener&&h.removeListener(C),(m=ld(h))?(me(m,u),m.h==0&&(m.src=null,h[Rt]=null)):ye(u)}}}function og(u){return u in $n?$n[u]:$n[u]="on"+u}function MC(u,h){if(u.da)u=!0;else{h=new ct(h,this);var m=u.listener,C=u.ha||u.src;u.fa&&ad(u),u=m.call(C,h)}return u}function ld(u){return u=u[Rt],u instanceof fe?u:null}var ud="__closure_events_fn_"+(1e9*Math.random()>>>0);function sg(u){return typeof u=="function"?u:(u[ud]||(u[ud]=function(h){return u.handleEvent(h)}),u[ud])}function dt(){ce.call(this),this.i=new fe(this),this.M=this,this.F=null}E(dt,ce),dt.prototype[X]=!0,dt.prototype.removeEventListener=function(u,h,m,C){si(this,u,h,m,C)};function Et(u,h){var m,C=u.F;if(C)for(m=[];C;C=C.F)m.push(C);if(u=u.M,C=h.type||h,typeof h=="string")h=new _e(h,u);else if(h instanceof _e)h.target=h.target||u;else{var L=h;h=new _e(C,u),P(h,L)}if(L=!0,m)for(var F=m.length-1;0<=F;F--){var B=h.g=m[F];L=rl(B,C,!0,h)&&L}if(B=h.g=u,L=rl(B,C,!0,h)&&L,L=rl(B,C,!1,h)&&L,m)for(F=0;F<m.length;F++)B=h.g=m[F],L=rl(B,C,!1,h)&&L}dt.prototype.N=function(){if(dt.aa.N.call(this),this.i){var u=this.i,h;for(h in u.g){for(var m=u.g[h],C=0;C<m.length;C++)ye(m[C]);delete u.g[h],u.h--}}this.F=null},dt.prototype.K=function(u,h,m,C){return this.i.add(String(u),h,!1,m,C)},dt.prototype.L=function(u,h,m,C){return this.i.add(String(u),h,!0,m,C)};function rl(u,h,m,C){if(h=u.i.g[String(h)],!h)return!0;h=h.concat();for(var L=!0,F=0;F<h.length;++F){var B=h[F];if(B&&!B.da&&B.capture==m){var Ee=B.listener,nt=B.ha||B.src;B.fa&&me(u.i,B),L=Ee.call(nt,C)!==!1&&L}}return L&&!C.defaultPrevented}function ag(u,h,m){if(typeof u=="function")m&&(u=p(u,m));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(u,h||0)}function lg(u){u.g=ag(()=>{u.g=null,u.i&&(u.i=!1,lg(u))},u.l);const h=u.h;u.h=null,u.m.apply(null,h)}class VC extends ce{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:lg(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hs(u){ce.call(this),this.h=u,this.g={}}E(hs,ce);var ug=[];function cg(u){D(u.g,function(h,m){this.g.hasOwnProperty(m)&&ad(h)},u),u.g={}}hs.prototype.N=function(){hs.aa.N.call(this),cg(this)},hs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var cd=a.JSON.stringify,jC=a.JSON.parse,UC=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function dd(){}dd.prototype.h=null;function dg(u){return u.h||(u.h=u.i())}function hg(){}var fs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function hd(){_e.call(this,"d")}E(hd,_e);function fd(){_e.call(this,"c")}E(fd,_e);var ai={},fg=null;function il(){return fg=fg||new dt}ai.La="serverreachability";function pg(u){_e.call(this,ai.La,u)}E(pg,_e);function ps(u){const h=il();Et(h,new pg(h))}ai.STAT_EVENT="statevent";function mg(u,h){_e.call(this,ai.STAT_EVENT,u),this.stat=h}E(mg,_e);function Tt(u){const h=il();Et(h,new mg(h,u))}ai.Ma="timingevent";function gg(u,h){_e.call(this,ai.Ma,u),this.size=h}E(gg,_e);function ms(u,h){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},h)}function gs(){this.g=!0}gs.prototype.xa=function(){this.g=!1};function BC(u,h,m,C,L,F){u.info(function(){if(u.g)if(F)for(var B="",Ee=F.split("&"),nt=0;nt<Ee.length;nt++){var ge=Ee[nt].split("=");if(1<ge.length){var ht=ge[0];ge=ge[1];var ft=ht.split("_");B=2<=ft.length&&ft[1]=="type"?B+(ht+"="+ge+"&"):B+(ht+"=redacted&")}}else B=null;else B=F;return"XMLHTTP REQ ("+C+") [attempt "+L+"]: "+h+`
`+m+`
`+B})}function zC(u,h,m,C,L,F,B){u.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+L+"]: "+h+`
`+m+`
`+F+" "+B})}function Hi(u,h,m,C){u.info(function(){return"XMLHTTP TEXT ("+h+"): "+HC(u,m)+(C?" "+C:"")})}function WC(u,h){u.info(function(){return"TIMEOUT: "+h})}gs.prototype.info=function(){};function HC(u,h){if(!u.g)return h;if(!h)return null;try{var m=JSON.parse(h);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var C=m[u];if(!(2>C.length)){var L=C[1];if(Array.isArray(L)&&!(1>L.length)){var F=L[0];if(F!="noop"&&F!="stop"&&F!="close")for(var B=1;B<L.length;B++)L[B]=""}}}}return cd(m)}catch{return h}}var ol={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},yg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},pd;function sl(){}E(sl,dd),sl.prototype.g=function(){return new XMLHttpRequest},sl.prototype.i=function(){return{}},pd=new sl;function hr(u,h,m,C){this.j=u,this.i=h,this.l=m,this.R=C||1,this.U=new hs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vg}function vg(){this.i=null,this.g="",this.h=!1}var _g={},md={};function gd(u,h,m){u.L=1,u.v=cl(On(h)),u.m=m,u.P=!0,wg(u,null)}function wg(u,h){u.F=Date.now(),al(u),u.A=On(u.v);var m=u.A,C=u.R;Array.isArray(C)||(C=[String(C)]),Og(m.i,"t",C),u.C=0,m=u.j.J,u.h=new vg,u.g=Jg(u.j,m?h:null,!u.m),0<u.O&&(u.M=new VC(p(u.Y,u,u.g),u.O)),h=u.U,m=u.g,C=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(ug[0]=L.toString()),L=ug);for(var F=0;F<L.length;F++){var B=dr(m,L[F],C||h.handleEvent,!1,h.h||h);if(!B)break;h.g[B.key]=B}h=u.H?T(u.H):{},u.m?(u.u||(u.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,h)):(u.u="GET",u.g.ea(u.A,u.u,null,h)),ps(),BC(u.i,u.u,u.A,u.l,u.R,u.m)}hr.prototype.ca=function(u){u=u.target;const h=this.M;h&&Ln(u)==3?h.j():this.Y(u)},hr.prototype.Y=function(u){try{if(u==this.g)e:{const ft=Ln(this.g);var h=this.g.Ba();const Ki=this.g.Z();if(!(3>ft)&&(ft!=3||this.g&&(this.h.h||this.g.oa()||Ug(this.g)))){this.J||ft!=4||h==7||(h==8||0>=Ki?ps(3):ps(2)),yd(this);var m=this.g.Z();this.X=m;t:if(xg(this)){var C=Ug(this.g);u="";var L=C.length,F=Ln(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){li(this),ys(this);var B="";break t}this.h.i=new a.TextDecoder}for(h=0;h<L;h++)this.h.h=!0,u+=this.h.i.decode(C[h],{stream:!(F&&h==L-1)});C.length=0,this.h.g+=u,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=m==200,zC(this.i,this.u,this.A,this.l,this.R,ft,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ee,nt=this.g;if((Ee=nt.g?nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(Ee)){var ge=Ee;break t}}ge=null}if(m=ge)Hi(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vd(this,m);else{this.o=!1,this.s=3,Tt(12),li(this),ys(this);break e}}if(this.P){m=!0;let en;for(;!this.J&&this.C<B.length;)if(en=qC(this,B),en==md){ft==4&&(this.s=4,Tt(14),m=!1),Hi(this.i,this.l,null,"[Incomplete Response]");break}else if(en==_g){this.s=4,Tt(15),Hi(this.i,this.l,B,"[Invalid Chunk]"),m=!1;break}else Hi(this.i,this.l,en,null),vd(this,en);if(xg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ft!=4||B.length!=0||this.h.h||(this.s=1,Tt(16),m=!1),this.o=this.o&&m,!m)Hi(this.i,this.l,B,"[Invalid Chunked Response]"),li(this),ys(this);else if(0<B.length&&!this.W){this.W=!0;var ht=this.j;ht.g==this&&ht.ba&&!ht.M&&(ht.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),Sd(ht),ht.M=!0,Tt(11))}}else Hi(this.i,this.l,B,null),vd(this,B);ft==4&&li(this),this.o&&!this.J&&(ft==4?Kg(this.j,this):(this.o=!1,al(this)))}else u1(this.g),m==400&&0<B.indexOf("Unknown SID")?(this.s=3,Tt(12)):(this.s=0,Tt(13)),li(this),ys(this)}}}catch{}finally{}};function xg(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function qC(u,h){var m=u.C,C=h.indexOf(`
`,m);return C==-1?md:(m=Number(h.substring(m,C)),isNaN(m)?_g:(C+=1,C+m>h.length?md:(h=h.slice(C,C+m),u.C=C+m,h)))}hr.prototype.cancel=function(){this.J=!0,li(this)};function al(u){u.S=Date.now()+u.I,Eg(u,u.I)}function Eg(u,h){if(u.B!=null)throw Error("WatchDog timer not null");u.B=ms(p(u.ba,u),h)}function yd(u){u.B&&(a.clearTimeout(u.B),u.B=null)}hr.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(WC(this.i,this.A),this.L!=2&&(ps(),Tt(17)),li(this),this.s=2,ys(this)):Eg(this,this.S-u)};function ys(u){u.j.G==0||u.J||Kg(u.j,u)}function li(u){yd(u);var h=u.M;h&&typeof h.ma=="function"&&h.ma(),u.M=null,cg(u.U),u.g&&(h=u.g,u.g=null,h.abort(),h.ma())}function vd(u,h){try{var m=u.j;if(m.G!=0&&(m.g==u||_d(m.h,u))){if(!u.K&&_d(m.h,u)&&m.G==3){try{var C=m.Da.g.parse(h)}catch{C=null}if(Array.isArray(C)&&C.length==3){var L=C;if(L[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)gl(m),pl(m);else break e;Td(m),Tt(18)}}else m.za=L[1],0<m.za-m.T&&37500>L[2]&&m.F&&m.v==0&&!m.C&&(m.C=ms(p(m.Za,m),6e3));if(1>=Cg(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else ci(m,11)}else if((u.K||m.g==u)&&gl(m),!y(h))for(L=m.Da.g.parse(h),h=0;h<L.length;h++){let ge=L[h];if(m.T=ge[0],ge=ge[1],m.G==2)if(ge[0]=="c"){m.K=ge[1],m.ia=ge[2];const ht=ge[3];ht!=null&&(m.la=ht,m.j.info("VER="+m.la));const ft=ge[4];ft!=null&&(m.Aa=ft,m.j.info("SVER="+m.Aa));const Ki=ge[5];Ki!=null&&typeof Ki=="number"&&0<Ki&&(C=1.5*Ki,m.L=C,m.j.info("backChannelRequestTimeoutMs_="+C)),C=m;const en=u.g;if(en){const vl=en.g?en.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vl){var F=C.h;F.g||vl.indexOf("spdy")==-1&&vl.indexOf("quic")==-1&&vl.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(wd(F,F.h),F.h=null))}if(C.D){const Cd=en.g?en.g.getResponseHeader("X-HTTP-Session-Id"):null;Cd&&(C.ya=Cd,Se(C.I,C.D,Cd))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),C=m;var B=u;if(C.qa=Xg(C,C.J?C.ia:null,C.W),B.K){Ig(C.h,B);var Ee=B,nt=C.L;nt&&(Ee.I=nt),Ee.B&&(yd(Ee),al(Ee)),C.g=B}else qg(C);0<m.i.length&&ml(m)}else ge[0]!="stop"&&ge[0]!="close"||ci(m,7);else m.G==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?ci(m,7):Ed(m):ge[0]!="noop"&&m.l&&m.l.ta(ge),m.v=0)}}ps(4)}catch{}}var GC=class{constructor(u,h){this.g=u,this.map=h}};function Tg(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Sg(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Cg(u){return u.h?1:u.g?u.g.size:0}function _d(u,h){return u.h?u.h==h:u.g?u.g.has(h):!1}function wd(u,h){u.g?u.g.add(h):u.h=h}function Ig(u,h){u.h&&u.h==h?u.h=null:u.g&&u.g.has(h)&&u.g.delete(h)}Tg.prototype.cancel=function(){if(this.i=Ag(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ag(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let h=u.i;for(const m of u.g.values())h=h.concat(m.D);return h}return v(u.i)}function KC(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var h=[],m=u.length,C=0;C<m;C++)h.push(u[C]);return h}h=[],m=0;for(C in u)h[m++]=u[C];return h}function QC(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var h=[];u=u.length;for(var m=0;m<u;m++)h.push(m);return h}h=[],m=0;for(const C in u)h[m++]=C;return h}}}function Rg(u,h){if(u.forEach&&typeof u.forEach=="function")u.forEach(h,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,h,void 0);else for(var m=QC(u),C=KC(u),L=C.length,F=0;F<L;F++)h.call(void 0,C[F],m&&m[F],u)}var Pg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function YC(u,h){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var C=u[m].indexOf("="),L=null;if(0<=C){var F=u[m].substring(0,C);L=u[m].substring(C+1)}else F=u[m];h(F,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function ui(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ui){this.h=u.h,ll(this,u.j),this.o=u.o,this.g=u.g,ul(this,u.s),this.l=u.l;var h=u.i,m=new ws;m.i=h.i,h.g&&(m.g=new Map(h.g),m.h=h.h),kg(this,m),this.m=u.m}else u&&(h=String(u).match(Pg))?(this.h=!1,ll(this,h[1]||"",!0),this.o=vs(h[2]||""),this.g=vs(h[3]||"",!0),ul(this,h[4]),this.l=vs(h[5]||"",!0),kg(this,h[6]||"",!0),this.m=vs(h[7]||"")):(this.h=!1,this.i=new ws(null,this.h))}ui.prototype.toString=function(){var u=[],h=this.j;h&&u.push(_s(h,bg,!0),":");var m=this.g;return(m||h=="file")&&(u.push("//"),(h=this.o)&&u.push(_s(h,bg,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(_s(m,m.charAt(0)=="/"?ZC:JC,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",_s(m,t1)),u.join("")};function On(u){return new ui(u)}function ll(u,h,m){u.j=m?vs(h,!0):h,u.j&&(u.j=u.j.replace(/:$/,""))}function ul(u,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);u.s=h}else u.s=null}function kg(u,h,m){h instanceof ws?(u.i=h,n1(u.i,u.h)):(m||(h=_s(h,e1)),u.i=new ws(h,u.h))}function Se(u,h,m){u.i.set(h,m)}function cl(u){return Se(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function vs(u,h){return u?h?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function _s(u,h,m){return typeof u=="string"?(u=encodeURI(u).replace(h,XC),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function XC(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var bg=/[#\/\?@]/g,JC=/[#\?:]/g,ZC=/[#\?]/g,e1=/[#\?@]/g,t1=/#/g;function ws(u,h){this.h=this.g=null,this.i=u||null,this.j=!!h}function fr(u){u.g||(u.g=new Map,u.h=0,u.i&&YC(u.i,function(h,m){u.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}t=ws.prototype,t.add=function(u,h){fr(this),this.i=null,u=qi(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(h),this.h+=1,this};function Ng(u,h){fr(u),h=qi(u,h),u.g.has(h)&&(u.i=null,u.h-=u.g.get(h).length,u.g.delete(h))}function $g(u,h){return fr(u),h=qi(u,h),u.g.has(h)}t.forEach=function(u,h){fr(this),this.g.forEach(function(m,C){m.forEach(function(L){u.call(h,L,C,this)},this)},this)},t.na=function(){fr(this);const u=Array.from(this.g.values()),h=Array.from(this.g.keys()),m=[];for(let C=0;C<h.length;C++){const L=u[C];for(let F=0;F<L.length;F++)m.push(h[C])}return m},t.V=function(u){fr(this);let h=[];if(typeof u=="string")$g(this,u)&&(h=h.concat(this.g.get(qi(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)h=h.concat(u[m])}return h},t.set=function(u,h){return fr(this),this.i=null,u=qi(this,u),$g(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[h]),this.h+=1,this},t.get=function(u,h){return u?(u=this.V(u),0<u.length?String(u[0]):h):h};function Og(u,h,m){Ng(u,h),0<m.length&&(u.i=null,u.g.set(qi(u,h),v(m)),u.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],h=Array.from(this.g.keys());for(var m=0;m<h.length;m++){var C=h[m];const F=encodeURIComponent(String(C)),B=this.V(C);for(C=0;C<B.length;C++){var L=F;B[C]!==""&&(L+="="+encodeURIComponent(String(B[C]))),u.push(L)}}return this.i=u.join("&")};function qi(u,h){return h=String(h),u.j&&(h=h.toLowerCase()),h}function n1(u,h){h&&!u.j&&(fr(u),u.i=null,u.g.forEach(function(m,C){var L=C.toLowerCase();C!=L&&(Ng(this,C),Og(this,L,m))},u)),u.j=h}function r1(u,h){const m=new gs;if(a.Image){const C=new Image;C.onload=g(pr,m,"TestLoadImage: loaded",!0,h,C),C.onerror=g(pr,m,"TestLoadImage: error",!1,h,C),C.onabort=g(pr,m,"TestLoadImage: abort",!1,h,C),C.ontimeout=g(pr,m,"TestLoadImage: timeout",!1,h,C),a.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=u}else h(!1)}function i1(u,h){const m=new gs,C=new AbortController,L=setTimeout(()=>{C.abort(),pr(m,"TestPingServer: timeout",!1,h)},1e4);fetch(u,{signal:C.signal}).then(F=>{clearTimeout(L),F.ok?pr(m,"TestPingServer: ok",!0,h):pr(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(L),pr(m,"TestPingServer: error",!1,h)})}function pr(u,h,m,C,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),C(m)}catch{}}function o1(){this.g=new UC}function s1(u,h,m){const C=m||"";try{Rg(u,function(L,F){let B=L;c(L)&&(B=cd(L)),h.push(C+F+"="+encodeURIComponent(B))})}catch(L){throw h.push(C+"type="+encodeURIComponent("_badmap")),L}}function dl(u){this.l=u.Ub||null,this.j=u.eb||!1}E(dl,dd),dl.prototype.g=function(){return new hl(this.l,this.j)},dl.prototype.i=function(u){return function(){return u}}({});function hl(u,h){dt.call(this),this.D=u,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(hl,dt),t=hl.prototype,t.open=function(u,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=h,this.readyState=1,Es(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(h.body=u),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xs(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Es(this)),this.g&&(this.readyState=3,Es(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Lg(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Lg(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var h=u.value?u.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!u.done}))&&(this.response=this.responseText+=h)}u.done?xs(this):Es(this),this.readyState==3&&Lg(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,xs(this))},t.Qa=function(u){this.g&&(this.response=u,xs(this))},t.ga=function(){this.g&&xs(this)};function xs(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Es(u)}t.setRequestHeader=function(u,h){this.u.append(u,h)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=h.next();return u.join(`\r
`)};function Es(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(hl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Dg(u){let h="";return D(u,function(m,C){h+=C,h+=":",h+=m,h+=`\r
`}),h}function xd(u,h,m){e:{for(C in m){var C=!1;break e}C=!0}C||(m=Dg(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):Se(u,h,m))}function Le(u){dt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(Le,dt);var a1=/^https?$/i,l1=["POST","PUT"];t=Le.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,h,m,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);h=h?h.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():pd.g(),this.v=this.o?dg(this.o):dg(pd),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(h,String(u),!0),this.B=!1}catch(F){Fg(this,F);return}if(u=m||"",m=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var L in C)m.set(L,C[L]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const F of C.keys())m.set(F,C.get(F));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(m.keys()).find(F=>F.toLowerCase()=="content-type"),L=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(l1,h,void 0))||C||L||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,B]of m)this.g.setRequestHeader(F,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{jg(this),this.u=!0,this.g.send(u),this.u=!1}catch(F){Fg(this,F)}};function Fg(u,h){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=h,u.m=5,Mg(u),fl(u)}function Mg(u){u.A||(u.A=!0,Et(u,"complete"),Et(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Et(this,"complete"),Et(this,"abort"),fl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fl(this,!0)),Le.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Vg(this):this.bb())},t.bb=function(){Vg(this)};function Vg(u){if(u.h&&typeof s<"u"&&(!u.v[1]||Ln(u)!=4||u.Z()!=2)){if(u.u&&Ln(u)==4)ag(u.Ea,0,u);else if(Et(u,"readystatechange"),Ln(u)==4){u.h=!1;try{const B=u.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var C;if(C=B===0){var L=String(u.D).match(Pg)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),C=!a1.test(L?L.toLowerCase():"")}m=C}if(m)Et(u,"complete"),Et(u,"success");else{u.m=6;try{var F=2<Ln(u)?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.Z()+"]",Mg(u)}}finally{fl(u)}}}}function fl(u,h){if(u.g){jg(u);const m=u.g,C=u.v[0]?()=>{}:null;u.g=null,u.v=null,h||Et(u,"ready");try{m.onreadystatechange=C}catch{}}}function jg(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Ln(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Ln(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var h=this.g.responseText;return u&&h.indexOf(u)==0&&(h=h.substring(u.length)),jC(h)}};function Ug(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function u1(u){const h={};u=(u.g&&2<=Ln(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<u.length;C++){if(y(u[C]))continue;var m=N(u[C]);const L=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const F=h[L]||[];h[L]=F,F.push(m)}I(h,function(C){return C.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ts(u,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||h}function Bg(u){this.Aa=0,this.i=[],this.j=new gs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ts("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ts("baseRetryDelayMs",5e3,u),this.cb=Ts("retryDelaySeedMs",1e4,u),this.Wa=Ts("forwardChannelMaxRetries",2,u),this.wa=Ts("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Tg(u&&u.concurrentRequestLimit),this.Da=new o1,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Bg.prototype,t.la=8,t.G=1,t.connect=function(u,h,m,C){Tt(0),this.W=u,this.H=h||{},m&&C!==void 0&&(this.H.OSID=m,this.H.OAID=C),this.F=this.X,this.I=Xg(this,null,this.W),ml(this)};function Ed(u){if(zg(u),u.G==3){var h=u.U++,m=On(u.I);if(Se(m,"SID",u.K),Se(m,"RID",h),Se(m,"TYPE","terminate"),Ss(u,m),h=new hr(u,u.j,h),h.L=2,h.v=cl(On(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=h.v,m=!0),m||(h.g=Jg(h.j,null),h.g.ea(h.v)),h.F=Date.now(),al(h)}Yg(u)}function pl(u){u.g&&(Sd(u),u.g.cancel(),u.g=null)}function zg(u){pl(u),u.u&&(a.clearTimeout(u.u),u.u=null),gl(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function ml(u){if(!Sg(u.h)&&!u.s){u.s=!0;var h=u.Ga;Y||G(),M||(Y(),M=!0),z.add(h,u),u.B=0}}function c1(u,h){return Cg(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=h.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=ms(p(u.Ga,u,h),Qg(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const L=new hr(this,this.j,u);let F=this.o;if(this.S&&(F?(F=T(F),P(F,this.S)):F=this.S),this.m!==null||this.O||(L.H=F,F=null),this.P)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var C=this.i[m];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(h+=C,4096<h){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=Hg(this,L,h),m=On(this.I),Se(m,"RID",u),Se(m,"CVER",22),this.D&&Se(m,"X-HTTP-Session-Id",this.D),Ss(this,m),F&&(this.O?h="headers="+encodeURIComponent(String(Dg(F)))+"&"+h:this.m&&xd(m,this.m,F)),wd(this.h,L),this.Ua&&Se(m,"TYPE","init"),this.P?(Se(m,"$req",h),Se(m,"SID","null"),L.T=!0,gd(L,m,null)):gd(L,m,h),this.G=2}}else this.G==3&&(u?Wg(this,u):this.i.length==0||Sg(this.h)||Wg(this))};function Wg(u,h){var m;h?m=h.l:m=u.U++;const C=On(u.I);Se(C,"SID",u.K),Se(C,"RID",m),Se(C,"AID",u.T),Ss(u,C),u.m&&u.o&&xd(C,u.m,u.o),m=new hr(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),h&&(u.i=h.D.concat(u.i)),h=Hg(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),wd(u.h,m),gd(m,C,h)}function Ss(u,h){u.H&&D(u.H,function(m,C){Se(h,C,m)}),u.l&&Rg({},function(m,C){Se(h,C,m)})}function Hg(u,h,m){m=Math.min(u.i.length,m);var C=u.l?p(u.l.Na,u.l,u):null;e:{var L=u.i;let F=-1;for(;;){const B=["count="+m];F==-1?0<m?(F=L[0].g,B.push("ofs="+F)):F=0:B.push("ofs="+F);let Ee=!0;for(let nt=0;nt<m;nt++){let ge=L[nt].g;const ht=L[nt].map;if(ge-=F,0>ge)F=Math.max(0,L[nt].g-100),Ee=!1;else try{s1(ht,B,"req"+ge+"_")}catch{C&&C(ht)}}if(Ee){C=B.join("&");break e}}}return u=u.i.splice(0,m),h.D=u,C}function qg(u){if(!u.g&&!u.u){u.Y=1;var h=u.Fa;Y||G(),M||(Y(),M=!0),z.add(h,u),u.v=0}}function Td(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=ms(p(u.Fa,u),Qg(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Gg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=ms(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Tt(10),pl(this),Gg(this))};function Sd(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Gg(u){u.g=new hr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var h=On(u.qa);Se(h,"RID","rpc"),Se(h,"SID",u.K),Se(h,"AID",u.T),Se(h,"CI",u.F?"0":"1"),!u.F&&u.ja&&Se(h,"TO",u.ja),Se(h,"TYPE","xmlhttp"),Ss(u,h),u.m&&u.o&&xd(h,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=cl(On(h)),m.m=null,m.P=!0,wg(m,u)}t.Za=function(){this.C!=null&&(this.C=null,pl(this),Td(this),Tt(19))};function gl(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Kg(u,h){var m=null;if(u.g==h){gl(u),Sd(u),u.g=null;var C=2}else if(_d(u.h,h))m=h.D,Ig(u.h,h),C=1;else return;if(u.G!=0){if(h.o)if(C==1){m=h.m?h.m.length:0,h=Date.now()-h.F;var L=u.B;C=il(),Et(C,new gg(C,m)),ml(u)}else qg(u);else if(L=h.s,L==3||L==0&&0<h.X||!(C==1&&c1(u,h)||C==2&&Td(u)))switch(m&&0<m.length&&(h=u.h,h.i=h.i.concat(m)),L){case 1:ci(u,5);break;case 4:ci(u,10);break;case 3:ci(u,6);break;default:ci(u,2)}}}function Qg(u,h){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*h}function ci(u,h){if(u.j.info("Error code "+h),h==2){var m=p(u.fb,u),C=u.Xa;const L=!C;C=new ui(C||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ll(C,"https"),cl(C),L?r1(C.toString(),m):i1(C.toString(),m)}else Tt(2);u.G=0,u.l&&u.l.sa(h),Yg(u),zg(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function Yg(u){if(u.G=0,u.ka=[],u.l){const h=Ag(u.h);(h.length!=0||u.i.length!=0)&&(A(u.ka,h),A(u.ka,u.i),u.h.i.length=0,v(u.i),u.i.length=0),u.l.ra()}}function Xg(u,h,m){var C=m instanceof ui?On(m):new ui(m);if(C.g!="")h&&(C.g=h+"."+C.g),ul(C,C.s);else{var L=a.location;C=L.protocol,h=h?h+"."+L.hostname:L.hostname,L=+L.port;var F=new ui(null);C&&ll(F,C),h&&(F.g=h),L&&ul(F,L),m&&(F.l=m),C=F}return m=u.D,h=u.ya,m&&h&&Se(C,m,h),Se(C,"VER",u.la),Ss(u,C),C}function Jg(u,h,m){if(h&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=u.Ca&&!u.pa?new Le(new dl({eb:m})):new Le(u.pa),h.Ha(u.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zg(){}t=Zg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function yl(){}yl.prototype.g=function(u,h){return new Lt(u,h)};function Lt(u,h){dt.call(this),this.g=new Bg(h),this.l=u,this.h=h&&h.messageUrlParams||null,u=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(u?u["X-WebChannel-Content-Type"]=h.messageContentType:u={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(u?u["X-WebChannel-Client-Profile"]=h.va:u={"X-WebChannel-Client-Profile":h.va}),this.g.S=u,(u=h&&h.Sb)&&!y(u)&&(this.g.m=u),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!y(h)&&(this.g.D=h,u=this.h,u!==null&&h in u&&(u=this.h,h in u&&delete u[h])),this.j=new Gi(this)}E(Lt,dt),Lt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Lt.prototype.close=function(){Ed(this.g)},Lt.prototype.o=function(u){var h=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=cd(u),u=m);h.i.push(new GC(h.Ya++,u)),h.G==3&&ml(h)},Lt.prototype.N=function(){this.g.l=null,delete this.j,Ed(this.g),delete this.g,Lt.aa.N.call(this)};function ey(u){hd.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var h=u.__sm__;if(h){e:{for(const m in h){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,h=h!==null&&u in h?h[u]:void 0),this.data=h}else this.data=u}E(ey,hd);function ty(){fd.call(this),this.status=1}E(ty,fd);function Gi(u){this.g=u}E(Gi,Zg),Gi.prototype.ua=function(){Et(this.g,"a")},Gi.prototype.ta=function(u){Et(this.g,new ey(u))},Gi.prototype.sa=function(u){Et(this.g,new ty)},Gi.prototype.ra=function(){Et(this.g,"b")},yl.prototype.createWebChannel=yl.prototype.g,Lt.prototype.send=Lt.prototype.o,Lt.prototype.open=Lt.prototype.m,Lt.prototype.close=Lt.prototype.close,bE=function(){return new yl},kE=function(){return il()},PE=ai,Af={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ol.NO_ERROR=0,ol.TIMEOUT=8,ol.HTTP_ERROR=6,gu=ol,yg.COMPLETE="complete",RE=yg,hg.EventType=fs,fs.OPEN="a",fs.CLOSE="b",fs.ERROR="c",fs.MESSAGE="d",dt.prototype.listen=dt.prototype.K,Bs=hg,Le.prototype.listenOnce=Le.prototype.L,Le.prototype.getLastError=Le.prototype.Ka,Le.prototype.getLastErrorCode=Le.prototype.Ba,Le.prototype.getStatus=Le.prototype.Z,Le.prototype.getResponseJson=Le.prototype.Oa,Le.prototype.getResponseText=Le.prototype.oa,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Ha,AE=Le}).apply(typeof Ml<"u"?Ml:typeof self<"u"?self:typeof window<"u"?window:{});const qv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ns="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi=new em("@firebase/firestore");function eo(){return bi.logLevel}function H(t,...e){if(bi.logLevel<=le.DEBUG){const n=e.map(fm);bi.debug(`Firestore (${ns}): ${t}`,...n)}}function tr(t,...e){if(bi.logLevel<=le.ERROR){const n=e.map(fm);bi.error(`Firestore (${ns}): ${t}`,...n)}}function Vo(t,...e){if(bi.logLevel<=le.WARN){const n=e.map(fm);bi.warn(`Firestore (${ns}): ${t}`,...n)}}function fm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t="Unexpected state"){const e=`FIRESTORE (${ns}) INTERNAL ASSERTION FAILED: `+t;throw tr(e),new Error(e)}function ve(t,e){t||ne()}function ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends cr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Z2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(yt.UNAUTHENTICATED))}shutdown(){}}class eN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class tN{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ve(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let o=new Ur;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ur,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const l=o;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ur)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string"),new NE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string"),new yt(e)}}class nN{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class rN{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new nN(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class iN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oN{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ve(this.o===void 0);const r=o=>{o.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,H("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ve(typeof n.token=="string"),this.R=n.token,new iN(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=sN(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}}function de(t,e){return t<e?-1:t>e?1:0}function jo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{static now(){return Ge.fromMillis(Date.now())}static fromDate(e){return Ge.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ge(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new J(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?de(this.nanoseconds,e.nanoseconds):de(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{static fromTimestamp(e){return new re(e)}static min(){return new re(new Ge(0,0))}static max(){return new re(new Ge(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(),r===void 0?r=e.length-n:r>e.length-n&&ne(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ia.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ia?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Pe extends Ia{construct(e,n,r){return new Pe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new J(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Pe(n)}static emptyPath(){return new Pe([])}}const aN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ot extends Ia{construct(e,n,r){return new ot(e,n,r)}static isValidIdentifier(e){return aN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ot(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new J(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new J(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new J(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new J(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ot(n)}static emptyPath(){return new ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.path=e}static fromPath(e){return new Z(Pe.fromString(e))}static fromName(e){return new Z(Pe.fromString(e).popFirst(5))}static empty(){return new Z(Pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Z(new Pe(e.slice()))}}function lN(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=re.fromTimestamp(r===1e9?new Ge(n+1,0):new Ge(n,r));return new qr(i,Z.empty(),e)}function uN(t){return new qr(t.readTime,t.key,-1)}class qr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new qr(re.min(),Z.empty(),-1)}static max(){return new qr(re.max(),Z.empty(),-1)}}function cN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Z.comparator(t.documentKey,e.documentKey),n!==0?n:de(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rs(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==dN)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new V((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):V.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):V.reject(n)}static resolve(e){return new V((n,r)=>{n(e)})}static reject(e){return new V((n,r)=>{r(e)})}static waitFor(e){return new V((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},l=>r(l))}),s=!0,o===i&&n()})}static or(e){let n=V.resolve(!1);for(const r of e)n=n.next(i=>i?V.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new V((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let l=0;l<o;l++){const c=l;n(e[c]).next(d=>{s[c]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,n){return new V((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function fN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function is(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Vc.oe=-1;function jc(t){return t==null}function rc(t){return t===0&&1/t==-1/0}function pN(t){return typeof t=="number"&&Number.isInteger(t)&&!rc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Gv(e)),e=gN(t.get(n),e);return Gv(e)}function gN(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Gv(t){return t+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Vi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function OE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e,n){this.comparator=e,this.root=n||it.EMPTY}insert(e,n){return new Oe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,it.BLACK,null,null))}remove(e){return new Oe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,it.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vl(this.root,e,this.comparator,!0)}}class Vl{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class it{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??it.RED,this.left=i??it.EMPTY,this.right=o??it.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new it(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return it.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return it.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,it.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,it.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ne();const e=this.left.check();if(e!==this.right.check())throw ne();return e+(this.isRed()?0:1)}}it.EMPTY=null,it.RED=!0,it.BLACK=!1;it.EMPTY=new class{constructor(){this.size=0}get key(){throw ne()}get value(){throw ne()}get color(){throw ne()}get left(){throw ne()}get right(){throw ne()}copy(e,n,r,i,o){return this}insert(e,n,r){return new it(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Qv(this.data.getIterator())}getIteratorFrom(e){return new Qv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ke)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ke(this.comparator);return n.data=e,n}}class Qv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.fields=e,e.sort(ot.comparator)}static empty(){return new an([])}unionWith(e){let n=new Ke(ot.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new an(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return jo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new LE("Invalid base64 string: "+o):o}}(e);return new lt(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new lt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return de(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}lt.EMPTY_BYTE_STRING=new lt("");const yN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gr(t){if(ve(!!t),typeof t=="string"){let e=0;const n=yN.exec(t);if(ve(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fe(t.seconds),nanos:Fe(t.nanos)}}function Fe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Kr(t){return typeof t=="string"?lt.fromBase64String(t):lt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Uc(t){const e=t.mapValue.fields.__previous_value__;return pm(e)?Uc(e):e}function Aa(t){const e=Gr(t.mapValue.fields.__local_write_time__.timestampValue);return new Ge(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e,n,r,i,o,s,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Ra{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ra("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ra&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Qr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?pm(t)?4:wN(t)?9007199254740991:_N(t)?10:11:ne()}function Rn(t,e){if(t===e)return!0;const n=Qr(t);if(n!==Qr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Aa(t).isEqual(Aa(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Gr(i.timestampValue),a=Gr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Kr(i.bytesValue).isEqual(Kr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Fe(i.geoPointValue.latitude)===Fe(o.geoPointValue.latitude)&&Fe(i.geoPointValue.longitude)===Fe(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Fe(i.integerValue)===Fe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=Fe(i.doubleValue),a=Fe(o.doubleValue);return s===a?rc(s)===rc(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return jo(t.arrayValue.values||[],e.arrayValue.values||[],Rn);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(Kv(s)!==Kv(a))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!Rn(s[l],a[l])))return!1;return!0}(t,e);default:return ne()}}function Pa(t,e){return(t.values||[]).find(n=>Rn(n,e))!==void 0}function Uo(t,e){if(t===e)return 0;const n=Qr(t),r=Qr(e);if(n!==r)return de(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return de(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=Fe(o.integerValue||o.doubleValue),l=Fe(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Yv(t.timestampValue,e.timestampValue);case 4:return Yv(Aa(t),Aa(e));case 5:return de(t.stringValue,e.stringValue);case 6:return function(o,s){const a=Kr(o),l=Kr(s);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),l=s.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=de(a[c],l[c]);if(d!==0)return d}return de(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=de(Fe(o.latitude),Fe(s.latitude));return a!==0?a:de(Fe(o.longitude),Fe(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Xv(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,l,c,d;const f=o.fields||{},p=s.fields||{},g=(a=f.value)===null||a===void 0?void 0:a.arrayValue,E=(l=p.value)===null||l===void 0?void 0:l.arrayValue,v=de(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((d=E==null?void 0:E.values)===null||d===void 0?void 0:d.length)||0);return v!==0?v:Xv(g,E)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===jl.mapValue&&s===jl.mapValue)return 0;if(o===jl.mapValue)return 1;if(s===jl.mapValue)return-1;const a=o.fields||{},l=Object.keys(a),c=s.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let f=0;f<l.length&&f<d.length;++f){const p=de(l[f],d[f]);if(p!==0)return p;const g=Uo(a[l[f]],c[d[f]]);if(g!==0)return g}return de(l.length,d.length)}(t.mapValue,e.mapValue);default:throw ne()}}function Yv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return de(t,e);const n=Gr(t),r=Gr(e),i=de(n.seconds,r.seconds);return i!==0?i:de(n.nanos,r.nanos)}function Xv(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=Uo(n[i],r[i]);if(o)return o}return de(n.length,r.length)}function Bo(t){return Rf(t)}function Rf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Gr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Kr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Z.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=Rf(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${Rf(n.fields[s])}`;return i+"}"}(t.mapValue):ne()}function yu(t){switch(Qr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Uc(t);return e?16+yu(e):16;case 5:return 2*t.stringValue.length;case 6:return Kr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+yu(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Vi(r.fields,(o,s)=>{i+=o.length+yu(s)}),i}(t.mapValue);default:throw ne()}}function Pf(t){return!!t&&"integerValue"in t}function mm(t){return!!t&&"arrayValue"in t}function Jv(t){return!!t&&"nullValue"in t}function Zv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function vu(t){return!!t&&"mapValue"in t}function _N(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function na(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Vi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=na(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=na(t.arrayValue.values[n]);return e}return Object.assign({},t)}function wN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.value=e}static empty(){return new Qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!vu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=na(n)}setAll(e){let n=ot.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=na(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());vu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Rn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];vu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Vi(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Qt(na(this.value))}}function DE(t){const e=[];return Vi(t.fields,(n,r)=>{const i=new ot([n]);if(vu(r)){const o=DE(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new an(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new _t(e,0,re.min(),re.min(),re.min(),Qt.empty(),0)}static newFoundDocument(e,n,r,i){return new _t(e,1,n,re.min(),r,i,0)}static newNoDocument(e,n){return new _t(e,2,n,re.min(),re.min(),Qt.empty(),0)}static newUnknownDocument(e,n){return new _t(e,3,n,re.min(),re.min(),Qt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,n){this.position=e,this.inclusive=n}}function e0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?r=Z.comparator(Z.fromName(s.referenceValue),n.key):r=Uo(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function t0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Rn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,n="asc"){this.field=e,this.dir=n}}function xN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{}class He extends FE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new TN(e,n,r):n==="array-contains"?new IN(e,r):n==="in"?new AN(e,r):n==="not-in"?new RN(e,r):n==="array-contains-any"?new PN(e,r):new He(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new SN(e,r):new CN(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Uo(n,this.value)):n!==null&&Qr(this.value)===Qr(n)&&this.matchesComparison(Uo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pn extends FE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Pn(e,n)}matches(e){return ME(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ME(t){return t.op==="and"}function VE(t){return EN(t)&&ME(t)}function EN(t){for(const e of t.filters)if(e instanceof Pn)return!1;return!0}function kf(t){if(t instanceof He)return t.field.canonicalString()+t.op.toString()+Bo(t.value);if(VE(t))return t.filters.map(e=>kf(e)).join(",");{const e=t.filters.map(n=>kf(n)).join(",");return`${t.op}(${e})`}}function jE(t,e){return t instanceof He?function(r,i){return i instanceof He&&r.op===i.op&&r.field.isEqual(i.field)&&Rn(r.value,i.value)}(t,e):t instanceof Pn?function(r,i){return i instanceof Pn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&jE(s,i.filters[a]),!0):!1}(t,e):void ne()}function UE(t){return t instanceof He?function(n){return`${n.field.canonicalString()} ${n.op} ${Bo(n.value)}`}(t):t instanceof Pn?function(n){return n.op.toString()+" {"+n.getFilters().map(UE).join(" ,")+"}"}(t):"Filter"}class TN extends He{constructor(e,n,r){super(e,n,r),this.key=Z.fromName(r.referenceValue)}matches(e){const n=Z.comparator(e.key,this.key);return this.matchesComparison(n)}}class SN extends He{constructor(e,n){super(e,"in",n),this.keys=BE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class CN extends He{constructor(e,n){super(e,"not-in",n),this.keys=BE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function BE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Z.fromName(r.referenceValue))}class IN extends He{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return mm(n)&&Pa(n.arrayValue,this.value)}}class AN extends He{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Pa(this.value.arrayValue,n)}}class RN extends He{constructor(e,n){super(e,"not-in",n)}matches(e){if(Pa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Pa(this.value.arrayValue,n)}}class PN extends He{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!mm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Pa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}}function n0(t,e=null,n=[],r=[],i=null,o=null,s=null){return new kN(t,e,n,r,i,o,s)}function gm(t){const e=ie(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>kf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),jc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Bo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Bo(r)).join(",")),e.ue=n}return e.ue}function ym(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!xN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!jE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!t0(t.startAt,e.startAt)&&t0(t.endAt,e.endAt)}function bf(t){return Z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function bN(t,e,n,r,i,o,s,a){return new Bc(t,e,n,r,i,o,s,a)}function vm(t){return new Bc(t)}function r0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function NN(t){return t.collectionGroup!==null}function ra(t){const e=ie(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ke(ot.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new oc(o,r))}),n.has(ot.keyField().canonicalString())||e.ce.push(new oc(ot.keyField(),r))}return e.ce}function Tn(t){const e=ie(t);return e.le||(e.le=$N(e,ra(t))),e.le}function $N(t,e){if(t.limitType==="F")return n0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new oc(i.field,o)});const n=t.endAt?new ic(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ic(t.startAt.position,t.startAt.inclusive):null;return n0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Nf(t,e,n){return new Bc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function zc(t,e){return ym(Tn(t),Tn(e))&&t.limitType===e.limitType}function zE(t){return`${gm(Tn(t))}|lt:${t.limitType}`}function to(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>UE(i)).join(", ")}]`),jc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Bo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Bo(i)).join(",")),`Target(${r})`}(Tn(t))}; limitType=${t.limitType})`}function Wc(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Z.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of ra(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,l){const c=e0(s,a,l);return s.inclusive?c<=0:c<0}(r.startAt,ra(r),i)||r.endAt&&!function(s,a,l){const c=e0(s,a,l);return s.inclusive?c>=0:c>0}(r.endAt,ra(r),i))}(t,e)}function ON(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function WE(t){return(e,n)=>{let r=!1;for(const i of ra(t)){const o=LN(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function LN(t,e,n){const r=t.field.isKeyField()?Z.comparator(e.key,n.key):function(o,s,a){const l=s.data.field(o),c=a.data.field(o);return l!==null&&c!==null?Uo(l,c):ne()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Vi(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return OE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN=new Oe(Z.comparator);function nr(){return DN}const HE=new Oe(Z.comparator);function zs(...t){let e=HE;for(const n of t)e=e.insert(n.key,n);return e}function qE(t){let e=HE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function _i(){return ia()}function GE(){return ia()}function ia(){return new ji(t=>t.toString(),(t,e)=>t.isEqual(e))}const FN=new Oe(Z.comparator),MN=new Ke(Z.comparator);function ue(...t){let e=MN;for(const n of t)e=e.add(n);return e}const VN=new Ke(de);function jN(){return VN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rc(e)?"-0":e}}function KE(t){return{integerValue:""+t}}function UN(t,e){return pN(e)?KE(e):_m(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(){this._=void 0}}function BN(t,e,n){return t instanceof ka?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&pm(o)&&(o=Uc(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof ba?YE(t,e):t instanceof Na?XE(t,e):function(i,o){const s=QE(i,o),a=i0(s)+i0(i.Pe);return Pf(s)&&Pf(i.Pe)?KE(a):_m(i.serializer,a)}(t,e)}function zN(t,e,n){return t instanceof ba?YE(t,e):t instanceof Na?XE(t,e):n}function QE(t,e){return t instanceof sc?function(r){return Pf(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class ka extends Hc{}class ba extends Hc{constructor(e){super(),this.elements=e}}function YE(t,e){const n=JE(e);for(const r of t.elements)n.some(i=>Rn(i,r))||n.push(r);return{arrayValue:{values:n}}}class Na extends Hc{constructor(e){super(),this.elements=e}}function XE(t,e){let n=JE(e);for(const r of t.elements)n=n.filter(i=>!Rn(i,r));return{arrayValue:{values:n}}}class sc extends Hc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function i0(t){return Fe(t.integerValue||t.doubleValue)}function JE(t){return mm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e,n){this.field=e,this.transform=n}}function HN(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ba&&i instanceof ba||r instanceof Na&&i instanceof Na?jo(r.elements,i.elements,Rn):r instanceof sc&&i instanceof sc?Rn(r.Pe,i.Pe):r instanceof ka&&i instanceof ka}(t.transform,e.transform)}class qN{constructor(e,n){this.version=e,this.transformResults=n}}class Sn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Sn}static exists(e){return new Sn(void 0,e)}static updateTime(e){return new Sn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _u(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class qc{}function ZE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new tT(t.key,Sn.none()):new Qa(t.key,t.data,Sn.none());{const n=t.data,r=Qt.empty();let i=new Ke(ot.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Ui(t.key,r,new an(i.toArray()),Sn.none())}}function GN(t,e,n){t instanceof Qa?function(i,o,s){const a=i.value.clone(),l=s0(i.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ui?function(i,o,s){if(!_u(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=s0(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(eT(i)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function oa(t,e,n,r){return t instanceof Qa?function(o,s,a,l){if(!_u(o.precondition,s))return a;const c=o.value.clone(),d=a0(o.fieldTransforms,l,s);return c.setAll(d),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ui?function(o,s,a,l){if(!_u(o.precondition,s))return a;const c=a0(o.fieldTransforms,l,s),d=s.data;return d.setAll(eT(o)),d.setAll(c),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(o,s,a){return _u(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function KN(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=QE(r.transform,i||null);o!=null&&(n===null&&(n=Qt.empty()),n.set(r.field,o))}return n||null}function o0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&jo(r,i,(o,s)=>HN(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Qa extends qc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ui extends qc{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function eT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function s0(t,e,n){const r=new Map;ve(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,zN(s,a,n[i]))}return r}function a0(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,BN(o,s,e))}return r}class tT extends qc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class QN extends qc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&GN(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=oa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=oa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=GE();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const l=ZE(s,a);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ue())}isEqual(e){return this.batchId===e.batchId&&jo(this.mutations,e.mutations,(n,r)=>o0(n,r))&&jo(this.baseMutations,e.baseMutations,(n,r)=>o0(n,r))}}class wm{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ve(e.mutations.length===r.length);let i=function(){return FN}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new wm(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je,he;function ZN(t){switch(t){default:return ne();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function nT(t){if(t===void 0)return tr("GRPC error has no .code"),j.UNKNOWN;switch(t){case je.OK:return j.OK;case je.CANCELLED:return j.CANCELLED;case je.UNKNOWN:return j.UNKNOWN;case je.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case je.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case je.INTERNAL:return j.INTERNAL;case je.UNAVAILABLE:return j.UNAVAILABLE;case je.UNAUTHENTICATED:return j.UNAUTHENTICATED;case je.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case je.NOT_FOUND:return j.NOT_FOUND;case je.ALREADY_EXISTS:return j.ALREADY_EXISTS;case je.PERMISSION_DENIED:return j.PERMISSION_DENIED;case je.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case je.ABORTED:return j.ABORTED;case je.OUT_OF_RANGE:return j.OUT_OF_RANGE;case je.UNIMPLEMENTED:return j.UNIMPLEMENTED;case je.DATA_LOSS:return j.DATA_LOSS;default:return ne()}}(he=je||(je={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e$(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t$=new Ti([4294967295,4294967295],0);function l0(t){const e=e$().encode(t),n=new IE;return n.update(e),new Uint8Array(n.digest())}function u0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ti([n,r],0),new Ti([i,o],0)]}class xm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ws(`Invalid padding: ${n}`);if(r<0)throw new Ws(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ws(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ws(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ie=Ti.fromNumber(this.Te)}Ee(e,n,r){let i=e.add(n.multiply(Ti.fromNumber(r)));return i.compare(t$)===1&&(i=new Ti([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=l0(e),[r,i]=u0(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new xm(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Te===0)return;const n=l0(e),[r,i]=u0(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ws extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ya.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Gc(re.min(),i,new Oe(de),nr(),ue())}}class Ya{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ya(r,n,ue(),ue(),ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class rT{constructor(e,n){this.targetId=e,this.me=n}}class iT{constructor(e,n,r=lt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class c0{constructor(){this.fe=0,this.ge=d0(),this.pe=lt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ue(),n=ue(),r=ue();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ne()}}),new Ya(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=d0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ve(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class n${constructor(e){this.Le=e,this.Be=new Map,this.ke=nr(),this.qe=Ul(),this.Qe=Ul(),this.Ke=new Oe(de)}$e(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(n,e.Ve):this.We(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.We(n,e.key,e.Ve)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.je(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.De(e.resumeToken));break;default:ne()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.me.count,i=this.Ye(n);if(i){const o=i.target;if(bf(o))if(r===0){const s=new Z(o.path);this.We(n,s,_t.newNoDocument(s,re.min()))}else ve(r===1);else{const s=this.Ze(n);if(s!==r){const a=this.Xe(e),l=a?this.et(a,e,s):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=Kr(r).toUint8Array()}catch(l){if(l instanceof LE)return Vo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new xm(s,i,o)}catch(l){return Vo(l instanceof Ws?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,r){return n.me.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Le.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(n,o,null),i++)}),i}it(e){const n=new Map;this.Be.forEach((o,s)=>{const a=this.Ye(s);if(a){if(o.current&&bf(a.target)){const l=new Z(a.target.path);this.st(l).has(s)||this.ot(s,l)||this.We(s,l,_t.newNoDocument(l,e))}o.be&&(n.set(s,o.ve()),o.Ce())}});let r=ue();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));const i=new Gc(e,n,this.Ke,this.ke,r);return this.ke=nr(),this.qe=Ul(),this.Qe=Ul(),this.Ke=new Oe(de),i}Ue(e,n){if(!this.je(e))return;const r=this.ot(e,n.key)?2:0;this.ze(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.ot(e,n)?i.Fe(n,1):i.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(e)),this.Qe=this.Qe.insert(n,this._t(n).add(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let n=this.Be.get(e);return n||(n=new c0,this.Be.set(e,n)),n}_t(e){let n=this.Qe.get(e);return n||(n=new Ke(de),this.Qe=this.Qe.insert(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ke(de),this.qe=this.qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new c0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}ot(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Ul(){return new Oe(Z.comparator)}function d0(){return new Oe(Z.comparator)}const r$={asc:"ASCENDING",desc:"DESCENDING"},i$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},o$={and:"AND",or:"OR"};class s${constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function $f(t,e){return t.useProto3Json||jc(e)?e:{value:e}}function ac(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function a$(t,e){return ac(t,e.toTimestamp())}function Cn(t){return ve(!!t),re.fromTimestamp(function(n){const r=Gr(n);return new Ge(r.seconds,r.nanos)}(t))}function Em(t,e){return Of(t,e).canonicalString()}function Of(t,e){const n=function(i){return new Pe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function sT(t){const e=Pe.fromString(t);return ve(dT(e)),e}function Lf(t,e){return Em(t.databaseId,e.path)}function ah(t,e){const n=sT(e);if(n.get(1)!==t.databaseId.projectId)throw new J(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new J(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Z(lT(n))}function aT(t,e){return Em(t.databaseId,e)}function l$(t){const e=sT(t);return e.length===4?Pe.emptyPath():lT(e)}function Df(t){return new Pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function lT(t){return ve(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function h0(t,e,n){return{name:Lf(t,e),fields:n.value.mapValue.fields}}function u$(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(c,d){return c.useProto3Json?(ve(d===void 0||typeof d=="string"),lt.fromBase64String(d||"")):(ve(d===void 0||d instanceof Buffer||d instanceof Uint8Array),lt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(c){const d=c.code===void 0?j.UNKNOWN:nT(c.code);return new J(d,c.message||"")}(s);n=new iT(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ah(t,r.document.name),o=Cn(r.document.updateTime),s=r.document.createTime?Cn(r.document.createTime):re.min(),a=new Qt({mapValue:{fields:r.document.fields}}),l=_t.newFoundDocument(i,o,s,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new wu(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ah(t,r.document),o=r.readTime?Cn(r.readTime):re.min(),s=_t.newNoDocument(i,o),a=r.removedTargetIds||[];n=new wu([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ah(t,r.document),o=r.removedTargetIds||[];n=new wu([],o,i,null)}else{if(!("filter"in e))return ne();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new JN(i,o),a=r.targetId;n=new rT(a,s)}}return n}function c$(t,e){let n;if(e instanceof Qa)n={update:h0(t,e.key,e.value)};else if(e instanceof tT)n={delete:Lf(t,e.key)};else if(e instanceof Ui)n={update:h0(t,e.key,e.data),updateMask:_$(e.fieldMask)};else{if(!(e instanceof QN))return ne();n={verify:Lf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof ka)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ba)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Na)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof sc)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw ne()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:a$(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ne()}(t,e.precondition)),n}function d$(t,e){return t&&t.length>0?(ve(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?Cn(i.updateTime):Cn(o);return s.isEqual(re.min())&&(s=Cn(o)),new qN(s,i.transformResults||[])}(n,e))):[]}function h$(t,e){return{documents:[aT(t,e.path)]}}function f$(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=aT(t,i);const o=function(c){if(c.length!==0)return cT(Pn.create(c,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(c){if(c.length!==0)return c.map(d=>function(p){return{field:no(p.field),direction:g$(p.dir)}}(d))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=$f(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ct:n,parent:i}}function p$(t){let e=l$(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ve(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];n.where&&(o=function(f){const p=uT(f);return p instanceof Pn&&VE(p)?p.getFilters():[p]}(n.where));let s=[];n.orderBy&&(s=function(f){return f.map(p=>function(E){return new oc(ro(E.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,jc(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,g=f.values||[];return new ic(g,p)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const p=!f.before,g=f.values||[];return new ic(g,p)}(n.endAt)),bN(e,i,s,o,a,"F",l,c)}function m$(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function uT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ro(n.unaryFilter.field);return He.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ro(n.unaryFilter.field);return He.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ro(n.unaryFilter.field);return He.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=ro(n.unaryFilter.field);return He.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ne()}}(t):t.fieldFilter!==void 0?function(n){return He.create(ro(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ne()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Pn.create(n.compositeFilter.filters.map(r=>uT(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ne()}}(n.compositeFilter.op))}(t):ne()}function g$(t){return r$[t]}function y$(t){return i$[t]}function v$(t){return o$[t]}function no(t){return{fieldPath:t.canonicalString()}}function ro(t){return ot.fromServerFormat(t.fieldPath)}function cT(t){return t instanceof He?function(n){if(n.op==="=="){if(Zv(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NAN"}};if(Jv(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Zv(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NOT_NAN"}};if(Jv(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:no(n.field),op:y$(n.op),value:n.value}}}(t):t instanceof Pn?function(n){const r=n.getFilters().map(i=>cT(i));return r.length===1?r[0]:{compositeFilter:{op:v$(n.op),filters:r}}}(t):ne()}function _$(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function dT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e,n,r,i,o=re.min(),s=re.min(),a=lt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Pr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Pr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w${constructor(e){this.ht=e}}function x$(t){const e=p$({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Nf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E${constructor(){this.ln=new T$}addToCollectionParentIndex(e,n){return this.ln.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this.ln.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(qr.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(qr.min())}updateCollectionGroup(e,n,r){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}}class T${constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ke(Pe.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ke(Pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Pt{static withCacheSize(e){return new Pt(e,Pt.DEFAULT_COLLECTION_PERCENTILE,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pt.DEFAULT_COLLECTION_PERCENTILE=10,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pt.DEFAULT=new Pt(41943040,Pt.DEFAULT_COLLECTION_PERCENTILE,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pt.DISABLED=new Pt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new zo(0)}static Qn(){return new zo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0([t,e],[n,r]){const i=de(t,n);return i===0?de(e,r):i}class S${constructor(e){this.Gn=e,this.buffer=new Ke(p0),this.zn=0}jn(){return++this.zn}Hn(e){const n=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();p0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class C${constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){H("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){is(n)?H("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await rs(n)}await this.Yn(3e5)})}}class I${constructor(e,n){this.Zn=e,this.params=n}calculateTargetCount(e,n){return this.Zn.Xn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return V.resolve(Vc.oe);const r=new S$(n);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(f0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),f0):this.tr(e,n))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,n){let r,i,o,s,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(o=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(c=Date.now(),eo()<=le.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}}function A$(t,e){return new I$(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R${constructor(){this.changes=new ji(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,_t.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?V.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P${constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k${constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&oa(r.mutation,i,an.empty(),Ge.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ue()){const i=_i();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=zs();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=_i();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ue()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=nr();const s=ia(),a=function(){return ia()}();return n.forEach((l,c)=>{const d=r.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof Ui)?o=o.insert(c.key,c):d!==void 0?(s.set(c.key,d.mutation.getFieldMask()),oa(d.mutation,c,d.mutation.getFieldMask(),Ge.now())):s.set(c.key,an.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((c,d)=>s.set(c,d)),n.forEach((c,d)=>{var f;return a.set(c,new P$(d,(f=s.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=ia();let i=new Oe((s,a)=>s-a),o=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const a of s)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||an.empty();d=a.applyToLocalView(c,d),r.set(l,d);const f=(i.get(a.batchId)||ue()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,f=GE();d.forEach(p=>{if(!o.has(p)){const g=ZE(n.get(p),r.get(p));g!==null&&f.set(p,g),o=o.add(p)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,f))}return V.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return Z.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):NN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):V.resolve(_i());let a=-1,l=o;return s.next(c=>V.forEach(c,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?V.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,l,c,ue())).next(d=>({batchId:a,changes:qE(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Z(n)).next(r=>{let i=zs();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=zs();return this.indexManager.getCollectionParents(e,o).next(a=>V.forEach(a,l=>{const c=function(f,p){return new Bc(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(d=>{d.forEach((f,p)=>{s=s.insert(f,p)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((l,c)=>{const d=c.getKey();s.get(d)===null&&(s=s.insert(d,_t.newInvalidDocument(d)))});let a=zs();return s.forEach((l,c)=>{const d=o.get(l);d!==void 0&&oa(d.mutation,c,an.empty(),Ge.now()),Wc(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b${constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,n){return V.resolve(this.Tr.get(n))}saveBundleMetadata(e,n){return this.Tr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Cn(i.createTime)}}(n)),V.resolve()}getNamedQuery(e,n){return V.resolve(this.Ir.get(n))}saveNamedQuery(e,n){return this.Ir.set(n.name,function(i){return{name:i.name,query:x$(i.bundledQuery),readTime:Cn(i.readTime)}}(n)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N${constructor(){this.overlays=new Oe(Z.comparator),this.Er=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){const r=_i();return V.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.Tt(e,n,o)}),V.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Er.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Er.delete(r)),V.resolve()}getOverlaysForCollection(e,n,r){const i=_i(),o=n.length+1,s=new Z(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return V.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Oe((c,d)=>c-d);const s=this.overlays.getIterator();for(;s.hasNext();){const c=s.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=o.get(c.largestBatchId);d===null&&(d=_i(),o=o.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=_i(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=i)););return V.resolve(a)}Tt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.Er.get(i.largestBatchId).delete(r.key);this.Er.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new XN(n,r));let o=this.Er.get(n);o===void 0&&(o=ue(),this.Er.set(n,o)),this.Er.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $${constructor(){this.sessionToken=lt.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,V.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(){this.dr=new Ke(Xe.Ar),this.Rr=new Ke(Xe.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,n){const r=new Xe(e,n);this.dr=this.dr.add(r),this.Rr=this.Rr.add(r)}mr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.gr(new Xe(e,n))}pr(e,n){e.forEach(r=>this.removeReference(r,n))}yr(e){const n=new Z(new Pe([])),r=new Xe(n,e),i=new Xe(n,e+1),o=[];return this.Rr.forEachInRange([r,i],s=>{this.gr(s),o.push(s.key)}),o}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const n=new Z(new Pe([])),r=new Xe(n,e),i=new Xe(n,e+1);let o=ue();return this.Rr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new Xe(e,0),r=this.dr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Xe{constructor(e,n){this.key=e,this.br=n}static Ar(e,n){return Z.comparator(e.key,n.key)||de(e.br,n.br)}static Vr(e,n){return de(e.br,n.br)||Z.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O${constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new Ke(Xe.Ar)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new YN(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.vr=this.vr.add(new Xe(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(s)}lookupMutationBatch(e,n){return V.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Fr(r),o=i<0?0:i;return V.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Xe(n,0),i=new Xe(n,Number.POSITIVE_INFINITY),o=[];return this.vr.forEachInRange([r,i],s=>{const a=this.Cr(s.br);o.push(a)}),V.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ke(de);return n.forEach(i=>{const o=new Xe(i,0),s=new Xe(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([o,s],a=>{r=r.add(a.br)})}),V.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;Z.isDocumentKey(o)||(o=o.child(""));const s=new Xe(new Z(o),0);let a=new Ke(de);return this.vr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.br)),!0)},s),V.resolve(this.Mr(a))}Mr(e){const n=[];return e.forEach(r=>{const i=this.Cr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ve(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return V.forEach(n.mutations,i=>{const o=new Xe(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Ln(e){}containsKey(e,n){const r=new Xe(n,0),i=this.vr.firstAfterOrEqual(r);return V.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}Or(e,n){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const n=this.Fr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L${constructor(e){this.Nr=e,this.docs=function(){return new Oe(Z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Nr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():_t.newInvalidDocument(n))}getEntries(e,n){let r=nr();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():_t.newInvalidDocument(i))}),V.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=nr();const s=n.path,a=new Z(s.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||cN(uN(d),r)<=0||(i.has(d.key)||Wc(n,d))&&(o=o.insert(d.key,d.mutableCopy()))}return V.resolve(o)}getAllFromCollectionGroup(e,n,r,i){ne()}Lr(e,n){return V.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new D$(this)}getSize(e){return V.resolve(this.size)}}class D$ extends R${constructor(e){super(),this.hr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),V.waitFor(n)}getFromCache(e,n){return this.hr.getEntry(e,n)}getAllFromCache(e,n){return this.hr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F${constructor(e){this.persistence=e,this.Br=new ji(n=>gm(n),ym),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.kr=0,this.qr=new Tm,this.targetCount=0,this.Qr=zo.qn()}forEachTarget(e,n){return this.Br.forEach((r,i)=>n(i)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.kr&&(this.kr=n),V.resolve()}Un(e){this.Br.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Qr=new zo(n),this.highestTargetId=n),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,n){return this.Un(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.Un(n),V.resolve()}removeTargetData(e,n){return this.Br.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Br.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Br.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),V.waitFor(o).next(()=>i)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){const r=this.Br.get(n)||null;return V.resolve(r)}addMatchingKeys(e,n,r){return this.qr.mr(n,r),V.resolve()}removeMatchingKeys(e,n,r){this.qr.pr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),V.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.qr.yr(n),V.resolve()}getMatchingKeysForTargetId(e,n){const r=this.qr.Sr(n);return V.resolve(r)}containsKey(e,n){return V.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e,n){this.Kr={},this.overlays={},this.$r=new Vc(0),this.Ur=!1,this.Ur=!0,this.Wr=new $$,this.referenceDelegate=e(this),this.Gr=new F$(this),this.indexManager=new E$,this.remoteDocumentCache=function(i){return new L$(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new w$(n),this.jr=new b$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new N$,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Kr[e.toKey()];return r||(r=new O$(n,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const i=new M$(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(o=>this.referenceDelegate.Jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Yr(e,n){return V.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,n)))}}class M$ extends hN{constructor(e){super(),this.currentSequenceNumber=e}}class Sm{constructor(e){this.persistence=e,this.Zr=new Tm,this.Xr=null}static ei(e){return new Sm(e)}get ti(){if(this.Xr)return this.Xr;throw ne()}addReference(e,n,r){return this.Zr.addReference(r,n),this.ti.delete(r.toString()),V.resolve()}removeReference(e,n,r){return this.Zr.removeReference(r,n),this.ti.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.ti.add(n.toString()),V.resolve()}removeTarget(e,n){this.Zr.yr(n.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.ti.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Hr(){this.Xr=new Set}Jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.ti,r=>{const i=Z.fromPath(r);return this.ni(e,i).next(o=>{o||n.removeEntry(i,re.min())})}).next(()=>(this.Xr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ni(e,n).next(r=>{r?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(e){return 0}ni(e,n){return V.or([()=>V.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Yr(e,n)])}}class lc{constructor(e,n){this.persistence=e,this.ri=new ji(r=>mN(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=A$(this,n)}static ei(e,n){return new lc(e,n)}Hr(){}Jr(e){return V.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Xn(e){const n=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}nr(e){let n=0;return this.er(e,r=>{n++}).next(()=>n)}er(e,n){return V.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(o=>o?V.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.Lr(e,s=>this.ir(e,s,n).next(a=>{a||(r++,o.removeEntry(s,re.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.ri.set(n,e.currentSequenceNumber),V.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),V.resolve()}removeReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),V.resolve()}updateLimboDocument(e,n){return this.ri.set(n,e.currentSequenceNumber),V.resolve()}zr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=yu(e.data.value)),n}ir(e,n,r){return V.or([()=>this.persistence.Yr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.ri.get(n);return V.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Wi=r,this.Gi=i}static zi(e,n){let r=ue(),i=ue();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Cm(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V${constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j${constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return $P()?8:fN(xt())>0?6:4}()}initialize(e,n){this.Zi=e,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.Xi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.es(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new V$;return this.ts(e,n,s).next(a=>{if(o.result=a,this.Hi)return this.ns(e,n,s,a.size)})}).next(()=>o.result)}ns(e,n,r,i){return r.documentReadCount<this.Ji?(eo()<=le.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",to(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),V.resolve()):(eo()<=le.DEBUG&&H("QueryEngine","Query:",to(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(eo()<=le.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",to(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tn(n))):V.resolve())}Xi(e,n){if(r0(n))return V.resolve(null);let r=Tn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Nf(n,null,"F"),r=Tn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=ue(...o);return this.Zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.rs(n,a);return this.ss(n,c,s,l.readTime)?this.Xi(e,Nf(n,null,"F")):this.os(e,c,n,l)}))})))}es(e,n,r,i){return r0(n)||i.isEqual(re.min())?V.resolve(null):this.Zi.getDocuments(e,r).next(o=>{const s=this.rs(n,o);return this.ss(n,s,r,i)?V.resolve(null):(eo()<=le.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),to(n)),this.os(e,s,n,lN(i,-1)).next(a=>a))})}rs(e,n){let r=new Ke(WE(e));return n.forEach((i,o)=>{Wc(e,o)&&(r=r.add(o))}),r}ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ts(e,n,r){return eo()<=le.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",to(n)),this.Zi.getDocumentsMatchingQuery(e,n,qr.min(),r)}os(e,n,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U${constructor(e,n,r,i){this.persistence=e,this._s=n,this.serializer=i,this.us=new Oe(de),this.cs=new ji(o=>gm(o),ym),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new k$(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.us))}}function B$(t,e,n,r){return new U$(t,e,n,r)}async function fT(t,e){const n=ie(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ps(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let l=ue();for(const c of i){s.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of o){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ts:c,removedBatchIds:s,addedBatchIds:a}))})})}function z$(t,e){const n=ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.hs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const f=c.batch,p=f.keys();let g=V.resolve();return p.forEach(E=>{g=g.next(()=>d.getEntry(l,E)).next(v=>{const A=c.docVersions.get(E);ve(A!==null),v.version.compareTo(A)<0&&(f.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),d.addEntry(v)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ue();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function pT(t){const e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Gr.getLastRemoteSnapshotVersion(n))}function W$(t,e){const n=ie(t),r=e.snapshotVersion;let i=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.hs.newChangeBuffer({trackRemovals:!0});i=n.us;const a=[];e.targetChanges.forEach((d,f)=>{const p=i.get(f);if(!p)return;a.push(n.Gr.removeMatchingKeys(o,d.removedDocuments,f).next(()=>n.Gr.addMatchingKeys(o,d.addedDocuments,f)));let g=p.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(lt.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),i=i.insert(f,g),function(v,A,_){return v.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(p,g,d)&&a.push(n.Gr.updateTargetData(o,g))});let l=nr(),c=ue();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(H$(o,s,e.documentUpdates).next(d=>{l=d.Is,c=d.Es})),!r.isEqual(re.min())){const d=n.Gr.getLastRemoteSnapshotVersion(o).next(f=>n.Gr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return V.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,l,c)).next(()=>l)}).then(o=>(n.us=i,o))}function H$(t,e,n){let r=ue(),i=ue();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=nr();return n.forEach((a,l)=>{const c=o.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(re.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):H("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Is:s,Es:i}})}function q$(t,e){const n=ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function G$(t,e){const n=ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Gr.getTargetData(r,e).next(o=>o?(i=o,V.resolve(i)):n.Gr.allocateTargetId(r).next(s=>(i=new Pr(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.us=n.us.insert(r.targetId,r),n.cs.set(e,r.targetId)),r})}async function Ff(t,e,n){const r=ie(t),i=r.us.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!is(s))throw s;H("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.us=r.us.remove(e),r.cs.delete(i.target)}function m0(t,e,n){const r=ie(t);let i=re.min(),o=ue();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,c,d){const f=ie(l),p=f.cs.get(d);return p!==void 0?V.resolve(f.us.get(p)):f.Gr.getTargetData(c,d)}(r,s,Tn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>r._s.getDocumentsMatchingQuery(s,e,n?i:re.min(),n?o:ue())).next(a=>(K$(r,ON(e),a),{documents:a,ds:o})))}function K$(t,e,n){let r=t.ls.get(e)||re.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.ls.set(e,r)}class g0{constructor(){this.activeTargetIds=jN()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Q${constructor(){this._o=new g0,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,n,r){this.ao[e]=n}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new g0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y${uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){H("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){H("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bl=null;function lh(){return Bl===null?Bl=function(){return 268435456+Math.round(2147483648*Math.random())}():Bl++,"0x"+Bl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J${constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gt="WebChannelConnection";class Z$ extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+n.host,this.Mo=`projects/${i}/databases/${o}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Oo(n,r,i,o,s){const a=lh(),l=this.No(n,r.toUriEncodedString());H("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(c,o,s),this.Bo(n,l,c,i).then(d=>(H("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Vo("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}ko(n,r,i,o,s,a){return this.Oo(n,r,i,o,s)}Lo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ns}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}No(n,r){const i=X$[n];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,n,r,i){const o=lh();return new Promise((s,a)=>{const l=new AE;l.setWithCredentials(!0),l.listenOnce(RE.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case gu.NO_ERROR:const d=l.getResponseJson();H(gt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),s(d);break;case gu.TIMEOUT:H(gt,`RPC '${e}' ${o} timed out`),a(new J(j.DEADLINE_EXCEEDED,"Request time out"));break;case gu.HTTP_ERROR:const f=l.getStatus();if(H(gt,`RPC '${e}' ${o} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const E=function(A){const _=A.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(_)>=0?_:j.UNKNOWN}(g.status);a(new J(E,g.message))}else a(new J(j.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new J(j.UNAVAILABLE,"Connection failed."));break;default:ne()}}finally{H(gt,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(i);H(gt,`RPC '${e}' ${o} sending request:`,i),l.send(n,"POST",c,r,15)})}qo(e,n,r){const i=lh(),o=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=bE(),a=kE(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Lo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=o.join("");H(gt,`Creating RPC '${e}' stream ${i}: ${d}`,l);const f=s.createWebChannel(d,l);let p=!1,g=!1;const E=new J$({Eo:A=>{g?H(gt,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(p||(H(gt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),H(gt,`RPC '${e}' stream ${i} sending:`,A),f.send(A))},Ao:()=>f.close()}),v=(A,_,y)=>{A.listen(_,S=>{try{y(S)}catch(b){setTimeout(()=>{throw b},0)}})};return v(f,Bs.EventType.OPEN,()=>{g||(H(gt,`RPC '${e}' stream ${i} transport opened.`),E.So())}),v(f,Bs.EventType.CLOSE,()=>{g||(g=!0,H(gt,`RPC '${e}' stream ${i} transport closed`),E.Do())}),v(f,Bs.EventType.ERROR,A=>{g||(g=!0,Vo(gt,`RPC '${e}' stream ${i} transport errored:`,A),E.Do(new J(j.UNAVAILABLE,"The operation could not be completed")))}),v(f,Bs.EventType.MESSAGE,A=>{var _;if(!g){const y=A.data[0];ve(!!y);const S=y,b=(S==null?void 0:S.error)||((_=S[0])===null||_===void 0?void 0:_.error);if(b){H(gt,`RPC '${e}' stream ${i} received error:`,b);const O=b.status;let D=function(R){const P=je[R];if(P!==void 0)return nT(P)}(O),I=b.message;D===void 0&&(D=j.INTERNAL,I="Unknown error status: "+O+" with message "+b.message),g=!0,E.Do(new J(D,I)),f.close()}else H(gt,`RPC '${e}' stream ${i} received:`,y),E.vo(y)}}),v(a,PE.STAT_EVENT,A=>{A.stat===Af.PROXY?H(gt,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===Af.NOPROXY&&H(gt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.bo()},0),E}}function uh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(t){return new s$(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e,n,r=1e3,i=1.5,o=6e4){this.li=e,this.timerId=n,this.Qo=r,this.Ko=i,this.$o=o,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const n=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,n-r);i>0&&H("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e,n,r,i,o,s,a,l){this.li=e,this.Yo=r,this.Zo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new mT(e,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(tr(n.toString()),tr("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(n)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===n&&this.I_(r,i)},r=>{e(()=>{const i=new J(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.E_(i)})})}I_(e,n){const r=this.T_(this.Xo);this.stream=this.d_(e,n),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.E_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return H("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return n=>{this.li.enqueueAndForget(()=>this.Xo===e?n():(H("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eO extends gT{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}d_(e,n){return this.connection.qo("Listen",e,n)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const n=u$(this.serializer,e),r=function(o){if(!("targetChange"in o))return re.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?re.min():s.readTime?Cn(s.readTime):re.min()}(e);return this.listener.R_(n,r)}V_(e){const n={};n.database=Df(this.serializer),n.addTarget=function(o,s){let a;const l=s.target;if(a=bf(l)?{documents:h$(o,l)}:{query:f$(o,l).ct},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=oT(o,s.resumeToken);const c=$f(o,s.expectedCount);c!==null&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(re.min())>0){a.readTime=ac(o,s.snapshotVersion.toTimestamp());const c=$f(o,s.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=m$(this.serializer,e);r&&(n.labels=r),this.c_(n)}m_(e){const n={};n.database=Df(this.serializer),n.removeTarget=e,this.c_(n)}}class tO extends gT{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,n){return this.connection.qo("Write",e,n)}A_(e){return ve(!!e.streamToken),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){ve(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const n=d$(e.writeResults,e.commitTime),r=Cn(e.commitTime);return this.listener.y_(r,n)}w_(){const e={};e.database=Df(this.serializer),this.c_(e)}g_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>c$(this.serializer,r))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new J(j.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,n,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Oo(e,Of(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new J(j.UNKNOWN,o.toString())})}ko(e,n,r,i,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.ko(e,Of(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new J(j.UNKNOWN,s.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class rO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(tr(n),this.C_=!1):H("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=o,this.Q_.uo(s=>{r.enqueueAndForget(async()=>{Bi(this)&&(H("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ie(l);c.k_.add(4),await Xa(c),c.K_.set("Unknown"),c.k_.delete(4),await Qc(c)}(this))})}),this.K_=new rO(r,i)}}async function Qc(t){if(Bi(t))for(const e of t.q_)await e(!0)}async function Xa(t){for(const e of t.q_)await e(!1)}function yT(t,e){const n=ie(t);n.B_.has(e.targetId)||(n.B_.set(e.targetId,e),Pm(n)?Rm(n):os(n).s_()&&Am(n,e))}function Im(t,e){const n=ie(t),r=os(n);n.B_.delete(e),r.s_()&&vT(n,e),n.B_.size===0&&(r.s_()?r.a_():Bi(n)&&n.K_.set("Unknown"))}function Am(t,e){if(t.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}os(t).V_(e)}function vT(t,e){t.U_.xe(e),os(t).m_(e)}function Rm(t){t.U_=new n$({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>t.B_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),os(t).start(),t.K_.F_()}function Pm(t){return Bi(t)&&!os(t).i_()&&t.B_.size>0}function Bi(t){return ie(t).k_.size===0}function _T(t){t.U_=void 0}async function oO(t){t.K_.set("Online")}async function sO(t){t.B_.forEach((e,n)=>{Am(t,e)})}async function aO(t,e){_T(t),Pm(t)?(t.K_.O_(e),Rm(t)):t.K_.set("Unknown")}async function lO(t,e,n){if(t.K_.set("Online"),e instanceof iT&&e.state===2&&e.cause)try{await async function(i,o){const s=o.cause;for(const a of o.targetIds)i.B_.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.B_.delete(a),i.U_.removeTarget(a))}(t,e)}catch(r){H("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await uc(t,r)}else if(e instanceof wu?t.U_.$e(e):e instanceof rT?t.U_.Je(e):t.U_.Ge(e),!n.isEqual(re.min()))try{const r=await pT(t.localStore);n.compareTo(r)>=0&&await function(o,s){const a=o.U_.it(s);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=o.B_.get(c);d&&o.B_.set(c,d.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,c)=>{const d=o.B_.get(l);if(!d)return;o.B_.set(l,d.withResumeToken(lt.EMPTY_BYTE_STRING,d.snapshotVersion)),vT(o,l);const f=new Pr(d.target,l,c,d.sequenceNumber);Am(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){H("RemoteStore","Failed to raise snapshot:",r),await uc(t,r)}}async function uc(t,e,n){if(!is(e))throw e;t.k_.add(1),await Xa(t),t.K_.set("Offline"),n||(n=()=>pT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H("RemoteStore","Retrying IndexedDB access"),await n(),t.k_.delete(1),await Qc(t)})}function wT(t,e){return e().catch(n=>uc(t,n,e))}async function Yc(t){const e=ie(t),n=Yr(e);let r=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;uO(e);)try{const i=await q$(e.localStore,r);if(i===null){e.L_.length===0&&n.a_();break}r=i.batchId,cO(e,i)}catch(i){await uc(e,i)}xT(e)&&ET(e)}function uO(t){return Bi(t)&&t.L_.length<10}function cO(t,e){t.L_.push(e);const n=Yr(t);n.s_()&&n.f_&&n.g_(e.mutations)}function xT(t){return Bi(t)&&!Yr(t).i_()&&t.L_.length>0}function ET(t){Yr(t).start()}async function dO(t){Yr(t).w_()}async function hO(t){const e=Yr(t);for(const n of t.L_)e.g_(n.mutations)}async function fO(t,e,n){const r=t.L_.shift(),i=wm.from(r,e,n);await wT(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Yc(t)}async function pO(t,e){e&&Yr(t).f_&&await async function(r,i){if(function(s){return ZN(s)&&s!==j.ABORTED}(i.code)){const o=r.L_.shift();Yr(r).__(),await wT(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Yc(r)}}(t,e),xT(t)&&ET(t)}async function v0(t,e){const n=ie(t);n.asyncQueue.verifyOperationInProgress(),H("RemoteStore","RemoteStore received new credentials");const r=Bi(n);n.k_.add(3),await Xa(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.k_.delete(3),await Qc(n)}async function mO(t,e){const n=ie(t);e?(n.k_.delete(2),await Qc(n)):e||(n.k_.add(2),await Xa(n),n.K_.set("Unknown"))}function os(t){return t.W_||(t.W_=function(n,r,i){const o=ie(n);return o.b_(),new eO(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Ro:oO.bind(null,t),mo:sO.bind(null,t),po:aO.bind(null,t),R_:lO.bind(null,t)}),t.q_.push(async e=>{e?(t.W_.__(),Pm(t)?Rm(t):t.K_.set("Unknown")):(await t.W_.stop(),_T(t))})),t.W_}function Yr(t){return t.G_||(t.G_=function(n,r,i){const o=ie(n);return o.b_(),new tO(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Ro:()=>Promise.resolve(),mo:dO.bind(null,t),po:pO.bind(null,t),p_:hO.bind(null,t),y_:fO.bind(null,t)}),t.q_.push(async e=>{e?(t.G_.__(),await Yc(t)):(await t.G_.stop(),t.L_.length>0&&(H("RemoteStore",`Stopping write stream with ${t.L_.length} pending writes`),t.L_=[]))})),t.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,a=new km(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bm(t,e){if(tr("AsyncQueue",`${e}: ${t}`),is(t))return new J(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{static emptySet(e){return new Io(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Z.comparator(n.key,r.key):(n,r)=>Z.comparator(n.key,r.key),this.keyedMap=zs(),this.sortedSet=new Oe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Io)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Io;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(){this.z_=new Oe(Z.comparator)}track(e){const n=e.doc.key,r=this.z_.get(n);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(n,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(n):e.type===1&&r.type===2?this.z_=this.z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):ne():this.z_=this.z_.insert(n,e)}j_(){const e=[];return this.z_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Wo{constructor(e,n,r,i,o,s,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new Wo(e,n,Io.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class yO{constructor(){this.queries=w0(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,r){const i=ie(n),o=i.queries;i.queries=w0(),o.forEach((s,a)=>{for(const l of a.J_)l.onError(r)})})(this,new J(j.ABORTED,"Firestore shutting down"))}}function w0(){return new ji(t=>zE(t),zc)}async function vO(t,e){const n=ie(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.Y_()&&e.Z_()&&(r=2):(o=new gO,r=e.Z_()?0:1);try{switch(r){case 0:o.H_=await n.onListen(i,!0);break;case 1:o.H_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const a=bm(s,`Initialization of query '${to(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.J_.push(e),e.ea(n.onlineState),o.H_&&e.ta(o.H_)&&Nm(n)}async function _O(t,e){const n=ie(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.J_.indexOf(e);s>=0&&(o.J_.splice(s,1),o.J_.length===0?i=e.Z_()?0:1:!o.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function wO(t,e){const n=ie(t);let r=!1;for(const i of e){const o=i.query,s=n.queries.get(o);if(s){for(const a of s.J_)a.ta(i)&&(r=!0);s.H_=i}}r&&Nm(n)}function xO(t,e,n){const r=ie(t),i=r.queries.get(e);if(i)for(const o of i.J_)o.onError(n);r.queries.delete(e)}function Nm(t){t.X_.forEach(e=>{e.next()})}var Mf,x0;(x0=Mf||(Mf={})).na="default",x0.Cache="cache";class EO{constructor(e,n,r){this.query=e,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Wo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ia?this.oa(e)&&(this.ra.next(e),n=!0):this._a(e,this.onlineState)&&(this.aa(e),n=!0),this.sa=e,n}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),n=!0),n}_a(e,n){if(!e.fromCache||!this.Z_())return!0;const r=n!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(e){e=Wo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==Mf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e){this.key=e}}class ST{constructor(e){this.key=e}}class TO{constructor(e,n){this.query=e,this.da=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=ue(),this.mutatedKeys=ue(),this.Va=WE(e),this.ma=new Io(this.Va)}get fa(){return this.da}ga(e,n){const r=n?n.pa:new _0,i=n?n.ma:this.ma;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{const p=i.get(d),g=Wc(this.query,f)?f:null,E=!!p&&this.mutatedKeys.has(p.key),v=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let A=!1;p&&g?p.data.isEqual(g.data)?E!==v&&(r.track({type:3,doc:g}),A=!0):this.ya(p,g)||(r.track({type:2,doc:g}),A=!0,(l&&this.Va(g,l)>0||c&&this.Va(g,c)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),A=!0):p&&!g&&(r.track({type:1,doc:p}),A=!0,(l||c)&&(a=!0)),A&&(g?(s=s.add(g),o=v?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{ma:s,pa:r,ss:a,mutatedKeys:o}}ya(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const s=e.pa.j_();s.sort((d,f)=>function(g,E){const v=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne()}};return v(g)-v(E)}(d.type,f.type)||this.Va(d.doc,f.doc)),this.wa(r),i=i!=null&&i;const a=n&&!i?this.Sa():[],l=this.Ra.size===0&&this.current&&!i?1:0,c=l!==this.Aa;return this.Aa=l,s.length!==0||c?{snapshot:new Wo(this.query,e.ma,o,s,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new _0,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(n=>this.da=this.da.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.da=this.da.delete(n)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=ue(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const n=[];return e.forEach(r=>{this.Ra.has(r)||n.push(new ST(r))}),this.Ra.forEach(r=>{e.has(r)||n.push(new TT(r))}),n}va(e){this.da=e.ds,this.Ra=ue();const n=this.ga(e.documents);return this.applyChanges(n,!0)}Ca(){return Wo.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class SO{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class CO{constructor(e){this.key=e,this.Fa=!1}}class IO{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ma={},this.xa=new ji(a=>zE(a),zc),this.Oa=new Map,this.Na=new Set,this.La=new Oe(Z.comparator),this.Ba=new Map,this.ka=new Tm,this.qa={},this.Qa=new Map,this.Ka=zo.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function AO(t,e,n=!0){const r=kT(t);let i;const o=r.xa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Ca()):i=await CT(r,e,n,!0),i}async function RO(t,e){const n=kT(t);await CT(n,e,!0,!1)}async function CT(t,e,n,r){const i=await G$(t.localStore,Tn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=await PO(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&yT(t.remoteStore,i),a}async function PO(t,e,n,r,i){t.Ua=(f,p,g)=>async function(v,A,_,y){let S=A.view.ga(_);S.ss&&(S=await m0(v.localStore,A.query,!1).then(({documents:I})=>A.view.ga(I,S)));const b=y&&y.targetChanges.get(A.targetId),O=y&&y.targetMismatches.get(A.targetId)!=null,D=A.view.applyChanges(S,v.isPrimaryClient,b,O);return T0(v,A.targetId,D.ba),D.snapshot}(t,f,p,g);const o=await m0(t.localStore,e,!0),s=new TO(e,o.ds),a=s.ga(o.documents),l=Ya.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=s.applyChanges(a,t.isPrimaryClient,l);T0(t,n,c.ba);const d=new SO(e,n,s);return t.xa.set(e,d),t.Oa.has(n)?t.Oa.get(n).push(e):t.Oa.set(n,[e]),c.snapshot}async function kO(t,e,n){const r=ie(t),i=r.xa.get(e),o=r.Oa.get(i.targetId);if(o.length>1)return r.Oa.set(i.targetId,o.filter(s=>!zc(s,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ff(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Im(r.remoteStore,i.targetId),Vf(r,i.targetId)}).catch(rs)):(Vf(r,i.targetId),await Ff(r.localStore,i.targetId,!0))}async function bO(t,e){const n=ie(t),r=n.xa.get(e),i=n.Oa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Im(n.remoteStore,r.targetId))}async function NO(t,e,n){const r=VO(t);try{const i=await function(s,a){const l=ie(s),c=Ge.now(),d=a.reduce((g,E)=>g.add(E.key),ue());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let E=nr(),v=ue();return l.hs.getEntries(g,d).next(A=>{E=A,E.forEach((_,y)=>{y.isValidDocument()||(v=v.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,E)).next(A=>{f=A;const _=[];for(const y of a){const S=KN(y,f.get(y.key).overlayedDocument);S!=null&&_.push(new Ui(y.key,S,DE(S.value.mapValue),Sn.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,_,a)}).next(A=>{p=A;const _=A.applyToLocalDocumentSet(f,v);return l.documentOverlayCache.saveOverlays(g,A.batchId,_)})}).then(()=>({batchId:p.batchId,changes:qE(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,l){let c=s.qa[s.currentUser.toKey()];c||(c=new Oe(de)),c=c.insert(a,l),s.qa[s.currentUser.toKey()]=c}(r,i.batchId,n),await Ja(r,i.changes),await Yc(r.remoteStore)}catch(i){const o=bm(i,"Failed to persist write");n.reject(o)}}async function IT(t,e){const n=ie(t);try{const r=await W$(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Ba.get(o);s&&(ve(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Fa=!0:i.modifiedDocuments.size>0?ve(s.Fa):i.removedDocuments.size>0&&(ve(s.Fa),s.Fa=!1))}),await Ja(n,r,e)}catch(r){await rs(r)}}function E0(t,e,n){const r=ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.xa.forEach((o,s)=>{const a=s.view.ea(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const l=ie(s);l.onlineState=a;let c=!1;l.queries.forEach((d,f)=>{for(const p of f.J_)p.ea(a)&&(c=!0)}),c&&Nm(l)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function $O(t,e,n){const r=ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Ba.get(e),o=i&&i.key;if(o){let s=new Oe(Z.comparator);s=s.insert(o,_t.newNoDocument(o,re.min()));const a=ue().add(o),l=new Gc(re.min(),new Map,new Oe(de),s,a);await IT(r,l),r.La=r.La.remove(o),r.Ba.delete(e),$m(r)}else await Ff(r.localStore,e,!1).then(()=>Vf(r,e,n)).catch(rs)}async function OO(t,e){const n=ie(t),r=e.batch.batchId;try{const i=await z$(n.localStore,e);RT(n,r,null),AT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ja(n,i)}catch(i){await rs(i)}}async function LO(t,e,n){const r=ie(t);try{const i=await function(s,a){const l=ie(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(ve(f!==null),d=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);RT(r,e,n),AT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ja(r,i)}catch(i){await rs(i)}}function AT(t,e){(t.Qa.get(e)||[]).forEach(n=>{n.resolve()}),t.Qa.delete(e)}function RT(t,e,n){const r=ie(t);let i=r.qa[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.qa[r.currentUser.toKey()]=i}}function Vf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Oa.get(e))t.xa.delete(r),n&&t.Ma.Wa(r,n);t.Oa.delete(e),t.isPrimaryClient&&t.ka.yr(e).forEach(r=>{t.ka.containsKey(r)||PT(t,r)})}function PT(t,e){t.Na.delete(e.path.canonicalString());const n=t.La.get(e);n!==null&&(Im(t.remoteStore,n),t.La=t.La.remove(e),t.Ba.delete(n),$m(t))}function T0(t,e,n){for(const r of n)r instanceof TT?(t.ka.addReference(r.key,e),DO(t,r)):r instanceof ST?(H("SyncEngine","Document no longer in limbo: "+r.key),t.ka.removeReference(r.key,e),t.ka.containsKey(r.key)||PT(t,r.key)):ne()}function DO(t,e){const n=e.key,r=n.path.canonicalString();t.La.get(n)||t.Na.has(r)||(H("SyncEngine","New document in limbo: "+n),t.Na.add(r),$m(t))}function $m(t){for(;t.Na.size>0&&t.La.size<t.maxConcurrentLimboResolutions;){const e=t.Na.values().next().value;t.Na.delete(e);const n=new Z(Pe.fromString(e)),r=t.Ka.next();t.Ba.set(r,new CO(n)),t.La=t.La.insert(n,r),yT(t.remoteStore,new Pr(Tn(vm(n.path)),r,"TargetPurposeLimboResolution",Vc.oe))}}async function Ja(t,e,n){const r=ie(t),i=[],o=[],s=[];r.xa.isEmpty()||(r.xa.forEach((a,l)=>{s.push(r.Ua(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){i.push(c);const f=Cm.zi(l.targetId,c);o.push(f)}}))}),await Promise.all(s),r.Ma.R_(i),await async function(l,c){const d=ie(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>V.forEach(c,p=>V.forEach(p.Wi,g=>d.persistence.referenceDelegate.addReference(f,p.targetId,g)).next(()=>V.forEach(p.Gi,g=>d.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))}catch(f){if(!is(f))throw f;H("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const g=d.us.get(p),E=g.snapshotVersion,v=g.withLastLimboFreeSnapshotVersion(E);d.us=d.us.insert(p,v)}}}(r.localStore,o))}async function FO(t,e){const n=ie(t);if(!n.currentUser.isEqual(e)){H("SyncEngine","User change. New user:",e.toKey());const r=await fT(n.localStore,e);n.currentUser=e,function(o,s){o.Qa.forEach(a=>{a.forEach(l=>{l.reject(new J(j.CANCELLED,s))})}),o.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ja(n,r.Ts)}}function MO(t,e){const n=ie(t),r=n.Ba.get(e);if(r&&r.Fa)return ue().add(r.key);{let i=ue();const o=n.Oa.get(e);if(!o)return i;for(const s of o){const a=n.xa.get(s);i=i.unionWith(a.view.fa)}return i}}function kT(t){const e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=IT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$O.bind(null,e),e.Ma.R_=wO.bind(null,e.eventManager),e.Ma.Wa=xO.bind(null,e.eventManager),e}function VO(t){const e=ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LO.bind(null,e),e}class cc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Kc(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,n){return null}Ya(e,n){return null}Ha(e){return B$(this.persistence,new j$,e.initialUser,this.serializer)}ja(e){return new hT(Sm.ei,this.serializer)}za(e){return new Q$}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}cc.provider={build:()=>new cc};class jO extends cc{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,n){ve(this.persistence.referenceDelegate instanceof lc);const r=this.persistence.referenceDelegate.garbageCollector;return new C$(r,e.asyncQueue,n)}ja(e){const n=this.cacheSizeBytes!==void 0?Pt.withCacheSize(this.cacheSizeBytes):Pt.DEFAULT;return new hT(r=>lc.ei(r,n),this.serializer)}}class jf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>E0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=FO.bind(null,this.syncEngine),await mO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new yO}()}createDatastore(e){const n=Kc(e.databaseInfo.databaseId),r=function(o){return new Z$(o)}(e.databaseInfo);return function(o,s,a,l){return new nO(o,s,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new iO(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>E0(this.syncEngine,n,0),function(){return y0.p()?new y0:new Y$}())}createSyncEngine(e,n){return function(i,o,s,a,l,c,d){const f=new IO(i,o,s,a,l,c);return d&&(f.$a=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=ie(i);H("RemoteStore","RemoteStore shutting down."),o.k_.add(5),await Xa(o),o.Q_.shutdown(),o.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}jf.provider={build:()=>new jf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):tr("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=yt.UNAUTHENTICATED,this.clientId=$E.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{H("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(H("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=bm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ch(t,e){t.asyncQueue.verifyOperationInProgress(),H("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await fT(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function S0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await zO(t);H("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>v0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>v0(e.remoteStore,i)),t._onlineComponents=e}async function zO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H("FirestoreClient","Using user provided OfflineComponentProvider");try{await ch(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===j.FAILED_PRECONDITION||i.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Vo("Error using user provided cache. Falling back to memory cache: "+n),await ch(t,new cc)}}else H("FirestoreClient","Using default OfflineComponentProvider"),await ch(t,new jO(void 0));return t._offlineComponents}async function bT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H("FirestoreClient","Using user provided OnlineComponentProvider"),await S0(t,t._uninitializedComponentsProvider._online)):(H("FirestoreClient","Using default OnlineComponentProvider"),await S0(t,new jf))),t._onlineComponents}function WO(t){return bT(t).then(e=>e.syncEngine)}async function HO(t){const e=await bT(t),n=e.eventManager;return n.onListen=AO.bind(null,e.syncEngine),n.onUnlisten=kO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=RO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=bO.bind(null,e.syncEngine),n}function qO(t,e,n={}){const r=new Ur;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,a,l,c){const d=new UO({next:p=>{d.eu(),s.enqueueAndForget(()=>_O(o,f));const g=p.docs.has(a);!g&&p.fromCache?c.reject(new J(j.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&l&&l.source==="server"?c.reject(new J(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new EO(vm(a.path),d,{includeMetadataChanges:!0,ua:!0});return vO(o,f)}(await HO(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(t,e,n){if(!n)throw new J(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function GO(t,e,n,r){if(e===!0&&r===!0)throw new J(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function I0(t){if(!Z.isDocumentKey(t))throw new J(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function A0(t){if(Z.isDocumentKey(t))throw new J(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Om(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne()}function Ho(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Om(t);throw new J(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new J(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new J(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new J(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new J(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new J(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xc{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new R0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new J(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new J(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new R0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Z2;switch(r.type){case"firstParty":return new rN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=C0.get(n);r&&(H("ComponentProvider","Removing Datastore"),C0.delete(n),r.terminate())}(this),Promise.resolve()}}function KO(t,e,n,r={}){var i;const o=(t=Ho(t,Xc))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Vo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=yt.MOCK_USER;else{a=IP(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new J(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new yt(c)}t._authCredentials=new eN(new NE(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Lm(this.firestore,e,this._query)}}class jt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Br(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jt(this.firestore,e,this._key)}}class Br extends Lm{constructor(e,n,r){super(e,n,vm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jt(this.firestore,null,new Z(e))}withConverter(e){return new Br(this.firestore,e,this._path)}}function QO(t,e,...n){if(t=zt(t),$T("collection","path",e),t instanceof Xc){const r=Pe.fromString(e,...n);return A0(r),new Br(t,null,r)}{if(!(t instanceof jt||t instanceof Br))throw new J(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Pe.fromString(e,...n));return A0(r),new Br(t.firestore,null,r)}}function Dm(t,e,...n){if(t=zt(t),arguments.length===1&&(e=$E.newId()),$T("doc","path",e),t instanceof Xc){const r=Pe.fromString(e,...n);return I0(r),new jt(t,null,new Z(r))}{if(!(t instanceof jt||t instanceof Br))throw new J(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Pe.fromString(e,...n));return I0(r),new jt(t.firestore,t instanceof Br?t.converter:null,new Z(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new mT(this,"async_queue_retry"),this.fu=()=>{const r=uh();r&&H("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const n=uh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const n=uh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const n=new Ur;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!is(e))throw e;H("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const n=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw tr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=n,n}enqueueAfterDelay(e,n,r){this.pu(),this.mu.indexOf(e)>-1&&(n=0);const i=km.createAndSchedule(this,e,n,r,o=>this.Su(o));return this.du.push(i),i}pu(){this.Au&&ne()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const n of this.du)if(n.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.du)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const n=this.du.indexOf(e);this.du.splice(n,1)}}class Jc extends Xc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new P0,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new P0(e),this._firestoreClient=void 0,await e}}}function YO(t,e){const n=typeof t=="object"?t:qx(),r=typeof t=="string"?t:"(default)",i=nm(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=SP("firestore");o&&KO(i,...o)}return i}function OT(t){if(t._terminated)throw new J(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||XO(t),t._firestoreClient}function XO(t){var e,n,r;const i=t._freezeSettings(),o=function(a,l,c,d){return new vN(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,NT(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new BO(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qo(lt.fromBase64String(e))}catch(n){throw new J(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new qo(lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new J(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return de(this._lat,e._lat)||de(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO=/^__.*__$/;class ZO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ui(e,this.data,this.fieldMask,n,this.fieldTransforms):new Qa(e,this.data,n,this.fieldTransforms)}}function LT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne()}}class Um{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Fu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new Um(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Lu(e),i}Bu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return dc(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(LT(this.Mu)&&JO.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class eL{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Kc(e)}$u(e,n,r,i=!1){return new Um({Mu:e,methodName:n,Ku:r,path:ot.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function DT(t){const e=t._freezeSettings(),n=Kc(t._databaseId);return new eL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function FT(t,e,n,r,i,o={}){const s=t.$u(o.merge||o.mergeFields?2:0,e,n,i);UT("Data must be an object, but it was:",s,r);const a=VT(r,s);let l,c;if(o.merge)l=new an(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const d=[];for(const f of o.mergeFields){const p=tL(e,f,n);if(!s.contains(p))throw new J(j.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);rL(d,p)||d.push(p)}l=new an(d),c=s.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=s.fieldTransforms;return new ZO(new Qt(a),l,c)}class Bm extends Mm{_toFieldTransform(e){return new WN(e.path,new ka)}isEqual(e){return e instanceof Bm}}function MT(t,e){if(jT(t=zt(t)))return UT("Unsupported field value:",e,t),VT(t,e);if(t instanceof Mm)return function(r,i){if(!LT(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let l=MT(a,i.ku(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=zt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return UN(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Ge.fromDate(r);return{timestampValue:ac(i.serializer,o)}}if(r instanceof Ge){const o=new Ge(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ac(i.serializer,o)}}if(r instanceof Vm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof qo)return{bytesValue:oT(i.serializer,r._byteString)};if(r instanceof jt){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.qu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Em(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof jm)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.qu("VectorValues must only contain numeric values.");return _m(a.serializer,l)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${Om(r)}`)}(t,e)}function VT(t,e){const n={};return OE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vi(t,(r,i)=>{const o=MT(i,e.Ou(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function jT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ge||t instanceof Vm||t instanceof qo||t instanceof jt||t instanceof Mm||t instanceof jm)}function UT(t,e,n){if(!jT(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Om(n);throw r==="an object"?e.qu(t+" a custom object"):e.qu(t+" "+r)}}function tL(t,e,n){if((e=zt(e))instanceof Fm)return e._internalPath;if(typeof e=="string")return BT(t,e);throw dc("Field path arguments must be of type string or ",t,!1,void 0,n)}const nL=new RegExp("[~\\*/\\[\\]]");function BT(t,e,n){if(e.search(nL)>=0)throw dc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Fm(...e.split("."))._internalPath}catch{throw dc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function dc(t,e,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new J(j.INVALID_ARGUMENT,a+t+l)}function rL(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new iL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(WT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class iL extends zT{data(){return super.data()}}function WT(t,e){return typeof e=="string"?BT(t,e):e instanceof Fm?e._internalPath:e._delegate._internalPath}class oL{convertValue(e,n="none"){switch(Qr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Kr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ne()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Vi(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Fe(s.doubleValue));return new jm(o)}convertGeoPoint(e){return new Vm(Fe(e.latitude),Fe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Uc(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Aa(e));default:return null}}convertTimestamp(e){const n=Gr(e);return new Ge(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Pe.fromString(e);ve(dT(r));const i=new Ra(r.get(1),r.get(3)),o=new Z(r.popFirst(5));return i.isEqual(n)||tr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qT extends zT{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new aL(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(WT("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class aL extends qT{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(t){t=Ho(t,jt);const e=Ho(t.firestore,Jc);return qO(OT(e),t._key).then(n=>dL(e,t,n))}class lL extends oL{constructor(e){super(),this.firestore=e}convertBytes(e){return new qo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,n)}}function uL(t,e,n){t=Ho(t,jt);const r=Ho(t.firestore,Jc),i=HT(t.converter,e);return KT(r,[FT(DT(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Sn.none())])}function cL(t,e){const n=Ho(t.firestore,Jc),r=Dm(t),i=HT(t.converter,e);return KT(n,[FT(DT(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Sn.exists(!1))]).then(()=>r)}function KT(t,e){return function(r,i){const o=new Ur;return r.asyncQueue.enqueueAndForget(async()=>NO(await WO(r),i,o)),o.promise}(OT(t),e)}function dL(t,e,n){const r=n.docs.get(e._key),i=new lL(t);return new qT(t,i,e._key,r,new sL(n.hasPendingWrites,n.fromCache),e.converter)}function hL(){return new Bm("serverTimestamp")}(function(e,n=!0){(function(i){ns=i})(es),Fo(new Pi("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new Jc(new tN(r.getProvider("auth-internal")),new oN(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new J(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ra(c.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),jr(qv,"4.7.5",e),jr(qv,"4.7.5","esm2017")})();console.log("Current mode:","production");const Uf={apiKey:"AIzaSyBKI6MDjPopM298T9QnhnqHQhg_xF3gEEQ",authDomain:"optionsquiz.firebaseapp.com",projectId:"optionsquiz",storageBucket:"optionsquiz.firebasestorage.app",messagingSenderId:"163287932453",appId:"1:163287932453:web:a00cde77ac0cc01884a9cc"},QT=Hx(Uf),dh=X2(QT),zm=YO(QT);console.log("Using Firebase config for:","production",{projectId:Uf.projectId,authDomain:Uf.authDomain});const YT=w.createContext(),ss=()=>w.useContext(YT),fL=({children:t})=>{const[e,n]=w.useState(null),[r,i]=w.useState(!0),o=async()=>{const l=new jn;try{await s2(dh,l)}catch(c){console.error("Error signing in with Google:",c)}},s=async()=>{try{await jb(dh)}catch(l){console.error("Error signing out:",l)}};w.useEffect(()=>Vb(dh,c=>{n(c),i(!1)}),[]);const a={user:e,signInWithGoogle:o,logout:s};return x.jsx(YT.Provider,{value:a,children:!r&&t})},pL=async t=>{console.log("Checking subscription status for userId:",t);try{const e=await GT(Dm(zm,"subscriptions",t));if(console.log("Firestore subscription data:",e.data()),!e.exists())return console.log("No subscription document found"),{isPremium:!1};const n=e.data(),r=n.status==="active";return console.log("Subscription status:",{isActive:r,status:n.status}),{isPremium:r}}catch(e){throw console.error("Error checking subscription:",e),e}},mL=async(t,e)=>{console.log("Updating subscription status:",{userId:t,status:e});try{const n=Dm(zm,"subscriptions",t),r={status:e,updatedAt:hL()};await uL(n,r),console.log("Successfully updated subscription in Firestore");const i=await GT(n);return console.log("Verified Firestore data:",i.data()),!0}catch(n){throw console.error("Error updating subscription status:",n),n}},XT=w.createContext(),Wm=()=>w.useContext(XT),gL=({children:t})=>{const{user:e}=ss(),[n,r]=w.useState(!1),[i,o]=w.useState(!0);w.useEffect(()=>{(async()=>{if(console.log("PaymentContext: Checking status, current user:",e==null?void 0:e.uid),e)try{const c=`premium_status_${e.uid}`;console.log("Checking localStorage with key:",c);const d=localStorage.getItem(c);if(console.log("Cached status found:",d),d){const g=JSON.parse(d);if(console.log("Parsed cached status:",g),Date.now()-g.timestamp<36e5){console.log("Using cached premium status:",g.isPremium),r(g.isPremium),o(!1);return}else console.log("Cache expired, checking Firestore")}const f=await pL(e.uid);console.log("Firestore status result:",f),r(f.isPremium),console.log("Updated isPremium state to:",f.isPremium);const p={isPremium:f.isPremium,timestamp:Date.now()};localStorage.setItem(c,JSON.stringify(p)),console.log("Updated localStorage cache:",p)}catch(c){console.error("Error in PaymentContext:",c)}else console.log("No user found, setting isPremium to false"),r(!1);o(!1)})()},[e]);const s=async l=>{if(console.log("Updating premium status to:",l),r(l),e){const c={isPremium:l,timestamp:Date.now()},d=`premium_status_${e.uid}`;localStorage.setItem(d,JSON.stringify(c)),console.log("Updated cache in updatePremiumStatus:",c)}};console.log("PaymentContext current state:",{isPremium:n,loading:i});const a={isPremium:n,setIsPremium:s,loading:i};return x.jsx(XT.Provider,{value:a,children:!i&&t})};function JT(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=JT(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function ZT(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=JT(t))&&(r&&(r+=" "),r+=e);return r}const Hm="-",yL=t=>{const e=_L(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:s=>{const a=s.split(Hm);return a[0]===""&&a.length!==1&&a.shift(),eS(a,e)||vL(s)},getConflictingClassGroupIds:(s,a)=>{const l=n[s]||[];return a&&r[s]?[...l,...r[s]]:l}}},eS=(t,e)=>{var s;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?eS(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const o=t.join(Hm);return(s=e.validators.find(({validator:a})=>a(o)))==null?void 0:s.classGroupId},k0=/^\[(.+)\]$/,vL=t=>{if(k0.test(t)){const e=k0.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},_L=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return xL(Object.entries(t.classGroups),n).forEach(([o,s])=>{Bf(s,r,o,e)}),r},Bf=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const o=i===""?e:b0(e,i);o.classGroupId=n;return}if(typeof i=="function"){if(wL(i)){Bf(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([o,s])=>{Bf(s,b0(e,o),n,r)})})},b0=(t,e)=>{let n=t;return e.split(Hm).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},wL=t=>t.isThemeGetter,xL=(t,e)=>e?t.map(([n,r])=>{const i=r.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([s,a])=>[e+s,a])):o);return[n,i]}):t,EL=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(o,s)=>{n.set(o,s),e++,e>t&&(e=0,r=n,n=new Map)};return{get(o){let s=n.get(o);if(s!==void 0)return s;if((s=r.get(o))!==void 0)return i(o,s),s},set(o,s){n.has(o)?n.set(o,s):i(o,s)}}},tS="!",TL=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],o=e.length,s=a=>{const l=[];let c=0,d=0,f;for(let A=0;A<a.length;A++){let _=a[A];if(c===0){if(_===i&&(r||a.slice(A,A+o)===e)){l.push(a.slice(d,A)),d=A+o;continue}if(_==="/"){f=A;continue}}_==="["?c++:_==="]"&&c--}const p=l.length===0?a:a.substring(d),g=p.startsWith(tS),E=g?p.substring(1):p,v=f&&f>d?f-d:void 0;return{modifiers:l,hasImportantModifier:g,baseClassName:E,maybePostfixModifierPosition:v}};return n?a=>n({className:a,parseClassName:s}):s},SL=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},CL=t=>({cache:EL(t.cacheSize),parseClassName:TL(t),...yL(t)}),IL=/\s+/,AL=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,o=[],s=t.trim().split(IL);let a="";for(let l=s.length-1;l>=0;l-=1){const c=s[l],{modifiers:d,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:g}=n(c);let E=!!g,v=r(E?p.substring(0,g):p);if(!v){if(!E){a=c+(a.length>0?" "+a:a);continue}if(v=r(p),!v){a=c+(a.length>0?" "+a:a);continue}E=!1}const A=SL(d).join(":"),_=f?A+tS:A,y=_+v;if(o.includes(y))continue;o.push(y);const S=i(v,E);for(let b=0;b<S.length;++b){const O=S[b];o.push(_+O)}a=c+(a.length>0?" "+a:a)}return a};function RL(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=nS(e))&&(r&&(r+=" "),r+=n);return r}const nS=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=nS(t[r]))&&(n&&(n+=" "),n+=e);return n};function PL(t,...e){let n,r,i,o=s;function s(l){const c=e.reduce((d,f)=>f(d),t());return n=CL(c),r=n.cache.get,i=n.cache.set,o=a,a(l)}function a(l){const c=r(l);if(c)return c;const d=AL(l,n);return i(l,d),d}return function(){return o(RL.apply(null,arguments))}}const Ce=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},rS=/^\[(?:([a-z-]+):)?(.+)\]$/i,kL=/^\d+\/\d+$/,bL=new Set(["px","full","screen"]),NL=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,$L=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,OL=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,LL=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,DL=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Dn=t=>Ao(t)||bL.has(t)||kL.test(t),yr=t=>as(t,"length",WL),Ao=t=>!!t&&!Number.isNaN(Number(t)),hh=t=>as(t,"number",Ao),Os=t=>!!t&&Number.isInteger(Number(t)),FL=t=>t.endsWith("%")&&Ao(t.slice(0,-1)),se=t=>rS.test(t),vr=t=>NL.test(t),ML=new Set(["length","size","percentage"]),VL=t=>as(t,ML,iS),jL=t=>as(t,"position",iS),UL=new Set(["image","url"]),BL=t=>as(t,UL,qL),zL=t=>as(t,"",HL),Ls=()=>!0,as=(t,e,n)=>{const r=rS.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},WL=t=>$L.test(t)&&!OL.test(t),iS=()=>!1,HL=t=>LL.test(t),qL=t=>DL.test(t),GL=()=>{const t=Ce("colors"),e=Ce("spacing"),n=Ce("blur"),r=Ce("brightness"),i=Ce("borderColor"),o=Ce("borderRadius"),s=Ce("borderSpacing"),a=Ce("borderWidth"),l=Ce("contrast"),c=Ce("grayscale"),d=Ce("hueRotate"),f=Ce("invert"),p=Ce("gap"),g=Ce("gradientColorStops"),E=Ce("gradientColorStopPositions"),v=Ce("inset"),A=Ce("margin"),_=Ce("opacity"),y=Ce("padding"),S=Ce("saturate"),b=Ce("scale"),O=Ce("sepia"),D=Ce("skew"),I=Ce("space"),T=Ce("translate"),R=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],N=()=>["auto",se,e],$=()=>[se,e],k=()=>["",Dn,yr],W=()=>["auto",Ao,se],oe=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],K=()=>["solid","dashed","dotted","double","none"],Y=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],M=()=>["start","end","center","between","around","evenly","stretch"],z=()=>["","0",se],G=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ee=()=>[Ao,se];return{cacheSize:500,separator:":",theme:{colors:[Ls],spacing:[Dn,yr],blur:["none","",vr,se],brightness:ee(),borderColor:[t],borderRadius:["none","","full",vr,se],borderSpacing:$(),borderWidth:k(),contrast:ee(),grayscale:z(),hueRotate:ee(),invert:z(),gap:$(),gradientColorStops:[t],gradientColorStopPositions:[FL,yr],inset:N(),margin:N(),opacity:ee(),padding:$(),saturate:ee(),scale:ee(),sepia:z(),skew:ee(),space:$(),translate:$()},classGroups:{aspect:[{aspect:["auto","square","video",se]}],container:["container"],columns:[{columns:[vr]}],"break-after":[{"break-after":G()}],"break-before":[{"break-before":G()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...oe(),se]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Os,se]}],basis:[{basis:N()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",se]}],grow:[{grow:z()}],shrink:[{shrink:z()}],order:[{order:["first","last","none",Os,se]}],"grid-cols":[{"grid-cols":[Ls]}],"col-start-end":[{col:["auto",{span:["full",Os,se]},se]}],"col-start":[{"col-start":W()}],"col-end":[{"col-end":W()}],"grid-rows":[{"grid-rows":[Ls]}],"row-start-end":[{row:["auto",{span:[Os,se]},se]}],"row-start":[{"row-start":W()}],"row-end":[{"row-end":W()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",se]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",se]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...M()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...M(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...M(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[A]}],mx:[{mx:[A]}],my:[{my:[A]}],ms:[{ms:[A]}],me:[{me:[A]}],mt:[{mt:[A]}],mr:[{mr:[A]}],mb:[{mb:[A]}],ml:[{ml:[A]}],"space-x":[{"space-x":[I]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[I]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",se,e]}],"min-w":[{"min-w":[se,e,"min","max","fit"]}],"max-w":[{"max-w":[se,e,"none","full","min","max","fit","prose",{screen:[vr]},vr]}],h:[{h:[se,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[se,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[se,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[se,e,"auto","min","max","fit"]}],"font-size":[{text:["base",vr,yr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",hh]}],"font-family":[{font:[Ls]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",se]}],"line-clamp":[{"line-clamp":["none",Ao,hh]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Dn,se]}],"list-image":[{"list-image":["none",se]}],"list-style-type":[{list:["none","disc","decimal",se]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...K(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Dn,yr]}],"underline-offset":[{"underline-offset":["auto",Dn,se]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:$()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",se]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",se]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...oe(),jL]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",VL]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},BL]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[E]}],"gradient-via-pos":[{via:[E]}],"gradient-to-pos":[{to:[E]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...K(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:K()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...K()]}],"outline-offset":[{"outline-offset":[Dn,se]}],"outline-w":[{outline:[Dn,yr]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:k()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[Dn,yr]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",vr,zL]}],"shadow-color":[{shadow:[Ls]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...Y(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Y()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",vr,se]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[S]}],sepia:[{sepia:[O]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[O]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",se]}],duration:[{duration:ee()}],ease:[{ease:["linear","in","out","in-out",se]}],delay:[{delay:ee()}],animate:[{animate:["none","spin","ping","pulse","bounce",se]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[Os,se]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[D]}],"skew-y":[{"skew-y":[D]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",se]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",se]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":$()}],"scroll-mx":[{"scroll-mx":$()}],"scroll-my":[{"scroll-my":$()}],"scroll-ms":[{"scroll-ms":$()}],"scroll-me":[{"scroll-me":$()}],"scroll-mt":[{"scroll-mt":$()}],"scroll-mr":[{"scroll-mr":$()}],"scroll-mb":[{"scroll-mb":$()}],"scroll-ml":[{"scroll-ml":$()}],"scroll-p":[{"scroll-p":$()}],"scroll-px":[{"scroll-px":$()}],"scroll-py":[{"scroll-py":$()}],"scroll-ps":[{"scroll-ps":$()}],"scroll-pe":[{"scroll-pe":$()}],"scroll-pt":[{"scroll-pt":$()}],"scroll-pr":[{"scroll-pr":$()}],"scroll-pb":[{"scroll-pb":$()}],"scroll-pl":[{"scroll-pl":$()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",se]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Dn,yr,hh]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},KL=PL(GL);function ze(...t){return KL(ZT(t))}const rr=w.forwardRef(({className:t,...e},n)=>x.jsx("div",{ref:n,className:ze("rounded-xl border bg-card text-card-foreground shadow",t),...e}));rr.displayName="Card";const zi=w.forwardRef(({className:t,...e},n)=>x.jsx("div",{ref:n,className:ze("flex flex-col space-y-1.5 p-6",t),...e}));zi.displayName="CardHeader";const Wi=w.forwardRef(({className:t,...e},n)=>x.jsx("h3",{ref:n,className:ze("font-semibold leading-none tracking-tight",t),...e}));Wi.displayName="CardTitle";const qm=w.forwardRef(({className:t,...e},n)=>x.jsx("p",{ref:n,className:ze("text-sm text-muted-foreground",t),...e}));qm.displayName="CardDescription";const ir=w.forwardRef(({className:t,...e},n)=>x.jsx("div",{ref:n,className:ze("p-6 pt-0",t),...e}));ir.displayName="CardContent";const QL=w.forwardRef(({className:t,...e},n)=>x.jsx("div",{ref:n,className:ze("flex items-center p-6 pt-0",t),...e}));QL.displayName="CardFooter";function N0(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function oS(...t){return e=>{let n=!1;const r=t.map(i=>{const o=N0(i,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():N0(t[i],null)}}}}function ut(...t){return w.useCallback(oS(...t),t)}var Go=w.forwardRef((t,e)=>{const{children:n,...r}=t,i=w.Children.toArray(n),o=i.find(XL);if(o){const s=o.props.children,a=i.map(l=>l===o?w.Children.count(s)>1?w.Children.only(null):w.isValidElement(s)?s.props.children:null:l);return x.jsx(zf,{...r,ref:e,children:w.isValidElement(s)?w.cloneElement(s,void 0,a):null})}return x.jsx(zf,{...r,ref:e,children:n})});Go.displayName="Slot";var zf=w.forwardRef((t,e)=>{const{children:n,...r}=t;if(w.isValidElement(n)){const i=ZL(n);return w.cloneElement(n,{...JL(r,n.props),ref:e?oS(e,i):i})}return w.Children.count(n)>1?w.Children.only(null):null});zf.displayName="SlotClone";var YL=({children:t})=>x.jsx(x.Fragment,{children:t});function XL(t){return w.isValidElement(t)&&t.type===YL}function JL(t,e){const n={...e};for(const r in e){const i=t[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...a)=>{o(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...t,...n}}function ZL(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}const $0=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,O0=ZT,sS=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return O0(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:o}=e,s=Object.keys(i).map(c=>{const d=n==null?void 0:n[c],f=o==null?void 0:o[c];if(d===null)return null;const p=$0(d)||$0(f);return i[c][p]}),a=n&&Object.entries(n).reduce((c,d)=>{let[f,p]=d;return p===void 0||(c[f]=p),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:f,className:p,...g}=d;return Object.entries(g).every(E=>{let[v,A]=E;return Array.isArray(A)?A.includes({...o,...a}[v]):{...o,...a}[v]===A})?[...c,f,p]:c},[]);return O0(t,s,l,n==null?void 0:n.class,n==null?void 0:n.className)},eD=sS("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Ni=w.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},o)=>{const s=r?Go:"button";return x.jsx(s,{className:ze(eD({variant:e,size:n,className:t})),ref:o,...i})});Ni.displayName="Button";var aS="https://js.stripe.com/v3",tD=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,L0="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",nD=function(){for(var e=document.querySelectorAll('script[src^="'.concat(aS,'"]')),n=0;n<e.length;n++){var r=e[n];if(tD.test(r.src))return r}return null},D0=function(e){var n="",r=document.createElement("script");r.src="".concat(aS).concat(n);var i=document.head||document.body;if(!i)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(r),r},rD=function(e,n){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"5.4.0",startTime:n})},Ds=null,zl=null,Wl=null,iD=function(e){return function(){e(new Error("Failed to load Stripe.js"))}},oD=function(e,n){return function(){window.Stripe?e(window.Stripe):n(new Error("Stripe.js not available"))}},sD=function(e){return Ds!==null?Ds:(Ds=new Promise(function(n,r){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe&&e&&console.warn(L0),window.Stripe){n(window.Stripe);return}try{var i=nD();if(i&&e)console.warn(L0);else if(!i)i=D0(e);else if(i&&Wl!==null&&zl!==null){var o;i.removeEventListener("load",Wl),i.removeEventListener("error",zl),(o=i.parentNode)===null||o===void 0||o.removeChild(i),i=D0(e)}Wl=oD(n,r),zl=iD(r),i.addEventListener("load",Wl),i.addEventListener("error",zl)}catch(s){r(s);return}}),Ds.catch(function(n){return Ds=null,Promise.reject(n)}))},aD=function(e,n,r){if(e===null)return null;var i=e.apply(void 0,n);return rD(i,r),i},Fs,lS=!1,uS=function(){return Fs||(Fs=sD(null).catch(function(e){return Fs=null,Promise.reject(e)}),Fs)};Promise.resolve().then(function(){return uS()}).catch(function(t){lS||console.warn(t)});var lD=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];lS=!0;var i=Date.now();return uS().then(function(o){return aD(o,n,i)})};const uD=lD("pk_test_51QZ41vGVXFEMO3WwuM00yaX8i8d24tRljolK8cEn9M2WMYlLx2flC6qCy2Qyido3Mr4re7ukhTmQ6OoyFDyxMQAk002uz5HTuW"),cD=async(t,e)=>{try{const n=await uD,{error:r}=await n.redirectToCheckout({lineItems:[{price:"price_1QZiAlGVXFEMO3Ww8XH3vqNS",quantity:1}],mode:"payment",successUrl:`${window.location.origin}/#/success?userId=${t}`,cancelUrl:`${window.location.origin}/`,customerEmail:e});if(r)throw console.error("Stripe error:",r),r}catch(n){throw console.error("Error initiating checkout:",n),n}},dD=sS("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Za=w.forwardRef(({className:t,variant:e,...n},r)=>x.jsx("div",{ref:r,role:"alert",className:ze(dD({variant:e}),t),...n}));Za.displayName="Alert";const cS=w.forwardRef(({className:t,...e},n)=>x.jsx("h5",{ref:n,className:ze("mb-1 font-medium leading-none tracking-tight",t),...e}));cS.displayName="AlertTitle";const el=w.forwardRef(({className:t,...e},n)=>x.jsx("div",{ref:n,className:ze("text-sm [&_p]:leading-relaxed",t),...e}));el.displayName="AlertDescription";/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var hD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),mn=(t,e)=>{const n=w.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:s,className:a="",children:l,...c},d)=>w.createElement("svg",{ref:d,...hD,width:i,height:i,stroke:r,strokeWidth:s?Number(o)*24/Number(i):o,className:["lucide",`lucide-${fD(t)}`,a].join(" "),...c},[...e.map(([f,p])=>w.createElement(f,p)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dS=mn("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pD=mn("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=mn("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=mn("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=mn("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=mn("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=mn("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hS=mn("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=mn("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=mn("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fS=mn("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),ED=()=>{const{user:t}=ss(),[e,n]=w.useState(!1),[r,i]=w.useState(null),o=async()=>{if(!t){i("Please sign in to continue");return}n(!0),i(null);try{console.log("Price ID:","price_1QZiAlGVXFEMO3Ww8XH3vqNS"),await cD(t.uid,t.email)}catch(s){console.error("Payment error:",s),i(s.message||"Unable to initiate checkout. Please try again."),n(!1)}};return x.jsxs(rr,{className:"max-w-md mx-auto",children:[x.jsx(zi,{children:x.jsx(Wi,{children:"Upgrade to Premium Access"})}),x.jsx(ir,{className:"space-y-6",children:x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("h3",{className:"font-medium",children:"Premium Features Include:"}),x.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[x.jsx("li",{children:"Access to Advanced Options Strategies"}),x.jsx("li",{children:"Long Call Strategy"}),x.jsx("li",{children:"Cash Secured Put Strategy"}),x.jsx("li",{children:"Protective Put Strategy"}),x.jsx("li",{children:"Collar Strategy"}),x.jsx("li",{children:"Detailed Strategy-Specific Practice Scenarios"})]})]}),x.jsxs("div",{className:"text-center py-4",children:[x.jsx("span",{className:"text-3xl font-bold",children:"$4.99"}),x.jsx("span",{className:"text-gray-500 ml-2",children:"one-time payment"})]}),r&&x.jsx(Za,{variant:"destructive",className:"bg-red-50",children:x.jsx(el,{children:r})}),x.jsx(Ni,{onClick:o,className:"w-full bg-blue-600 hover:bg-blue-700 text-white",disabled:e,children:e?x.jsxs(x.Fragment,{children:[x.jsx(fS,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):"Upgrade Now"}),x.jsx("p",{className:"text-sm text-gray-500 text-center",children:"Secure payment powered by Stripe"})]})})]})};function F0(t,[e,n]){return Math.min(n,Math.max(e,t))}function Ue(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function Gm(t,e=[]){let n=[];function r(o,s){const a=w.createContext(s),l=n.length;n=[...n,s];const c=f=>{var _;const{scope:p,children:g,...E}=f,v=((_=p==null?void 0:p[t])==null?void 0:_[l])||a,A=w.useMemo(()=>E,Object.values(E));return x.jsx(v.Provider,{value:A,children:g})};c.displayName=o+"Provider";function d(f,p){var v;const g=((v=p==null?void 0:p[t])==null?void 0:v[l])||a,E=w.useContext(g);if(E)return E;if(s!==void 0)return s;throw new Error(`\`${f}\` must be used within \`${o}\``)}return[c,d]}const i=()=>{const o=n.map(s=>w.createContext(s));return function(a){const l=(a==null?void 0:a[t])||o;return w.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,TD(i,...e)]}function TD(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const s=r.reduce((a,{useScope:l,scopeName:c})=>{const f=l(o)[`__scope${c}`];return{...a,...f}},{});return w.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return n.scopeName=e.scopeName,n}function SD(t){const e=t+"CollectionProvider",[n,r]=Gm(e),[i,o]=n(e,{collectionRef:{current:null},itemMap:new Map}),s=g=>{const{scope:E,children:v}=g,A=Fn.useRef(null),_=Fn.useRef(new Map).current;return x.jsx(i,{scope:E,itemMap:_,collectionRef:A,children:v})};s.displayName=e;const a=t+"CollectionSlot",l=Fn.forwardRef((g,E)=>{const{scope:v,children:A}=g,_=o(a,v),y=ut(E,_.collectionRef);return x.jsx(Go,{ref:y,children:A})});l.displayName=a;const c=t+"CollectionItemSlot",d="data-radix-collection-item",f=Fn.forwardRef((g,E)=>{const{scope:v,children:A,..._}=g,y=Fn.useRef(null),S=ut(E,y),b=o(c,v);return Fn.useEffect(()=>(b.itemMap.set(y,{ref:y,..._}),()=>void b.itemMap.delete(y))),x.jsx(Go,{[d]:"",ref:S,children:A})});f.displayName=c;function p(g){const E=o(t+"CollectionConsumer",g);return Fn.useCallback(()=>{const A=E.collectionRef.current;if(!A)return[];const _=Array.from(A.querySelectorAll(`[${d}]`));return Array.from(E.itemMap.values()).sort((b,O)=>_.indexOf(b.ref.current)-_.indexOf(O.ref.current))},[E.collectionRef,E.itemMap])}return[{Provider:s,Slot:l,ItemSlot:f},p,r]}var CD=w.createContext(void 0);function ID(t){const e=w.useContext(CD);return t||e||"ltr"}var AD=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ve=AD.reduce((t,e)=>{const n=w.forwardRef((r,i)=>{const{asChild:o,...s}=r,a=o?Go:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),x.jsx(a,{...s,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function RD(t,e){t&&Jo.flushSync(()=>t.dispatchEvent(e))}function or(t){const e=w.useRef(t);return w.useEffect(()=>{e.current=t}),w.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function PD(t,e=globalThis==null?void 0:globalThis.document){const n=or(t);w.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var kD="DismissableLayer",Wf="dismissableLayer.update",bD="dismissableLayer.pointerDownOutside",ND="dismissableLayer.focusOutside",M0,pS=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),mS=w.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:s,onDismiss:a,...l}=t,c=w.useContext(pS),[d,f]=w.useState(null),p=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=w.useState({}),E=ut(e,I=>f(I)),v=Array.from(c.layers),[A]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),_=v.indexOf(A),y=d?v.indexOf(d):-1,S=c.layersWithOutsidePointerEventsDisabled.size>0,b=y>=_,O=LD(I=>{const T=I.target,R=[...c.branches].some(P=>P.contains(T));!b||R||(i==null||i(I),s==null||s(I),I.defaultPrevented||a==null||a())},p),D=DD(I=>{const T=I.target;[...c.branches].some(P=>P.contains(T))||(o==null||o(I),s==null||s(I),I.defaultPrevented||a==null||a())},p);return PD(I=>{y===c.layers.size-1&&(r==null||r(I),!I.defaultPrevented&&a&&(I.preventDefault(),a()))},p),w.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(M0=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),V0(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=M0)}},[d,p,n,c]),w.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),V0())},[d,c]),w.useEffect(()=>{const I=()=>g({});return document.addEventListener(Wf,I),()=>document.removeEventListener(Wf,I)},[]),x.jsx(Ve.div,{...l,ref:E,style:{pointerEvents:S?b?"auto":"none":void 0,...t.style},onFocusCapture:Ue(t.onFocusCapture,D.onFocusCapture),onBlurCapture:Ue(t.onBlurCapture,D.onBlurCapture),onPointerDownCapture:Ue(t.onPointerDownCapture,O.onPointerDownCapture)})});mS.displayName=kD;var $D="DismissableLayerBranch",OD=w.forwardRef((t,e)=>{const n=w.useContext(pS),r=w.useRef(null),i=ut(e,r);return w.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),x.jsx(Ve.div,{...t,ref:i})});OD.displayName=$D;function LD(t,e=globalThis==null?void 0:globalThis.document){const n=or(t),r=w.useRef(!1),i=w.useRef(()=>{});return w.useEffect(()=>{const o=a=>{if(a.target&&!r.current){let l=function(){gS(bD,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},s=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(s),e.removeEventListener("pointerdown",o),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function DD(t,e=globalThis==null?void 0:globalThis.document){const n=or(t),r=w.useRef(!1);return w.useEffect(()=>{const i=o=>{o.target&&!r.current&&gS(ND,n,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function V0(){const t=new CustomEvent(Wf);document.dispatchEvent(t)}function gS(t,e,n,{discrete:r}){const i=n.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?RD(i,o):i.dispatchEvent(o)}var fh=0;function FD(){w.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??j0()),document.body.insertAdjacentElement("beforeend",t[1]??j0()),fh++,()=>{fh===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),fh--}},[])}function j0(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var ph="focusScope.autoFocusOnMount",mh="focusScope.autoFocusOnUnmount",U0={bubbles:!1,cancelable:!0},MD="FocusScope",yS=w.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...s}=t,[a,l]=w.useState(null),c=or(i),d=or(o),f=w.useRef(null),p=ut(e,v=>l(v)),g=w.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;w.useEffect(()=>{if(r){let v=function(S){if(g.paused||!a)return;const b=S.target;a.contains(b)?f.current=b:_r(f.current,{select:!0})},A=function(S){if(g.paused||!a)return;const b=S.relatedTarget;b!==null&&(a.contains(b)||_r(f.current,{select:!0}))},_=function(S){if(document.activeElement===document.body)for(const O of S)O.removedNodes.length>0&&_r(a)};document.addEventListener("focusin",v),document.addEventListener("focusout",A);const y=new MutationObserver(_);return a&&y.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",A),y.disconnect()}}},[r,a,g.paused]),w.useEffect(()=>{if(a){z0.add(g);const v=document.activeElement;if(!a.contains(v)){const _=new CustomEvent(ph,U0);a.addEventListener(ph,c),a.dispatchEvent(_),_.defaultPrevented||(VD(WD(vS(a)),{select:!0}),document.activeElement===v&&_r(a))}return()=>{a.removeEventListener(ph,c),setTimeout(()=>{const _=new CustomEvent(mh,U0);a.addEventListener(mh,d),a.dispatchEvent(_),_.defaultPrevented||_r(v??document.body,{select:!0}),a.removeEventListener(mh,d),z0.remove(g)},0)}}},[a,c,d,g]);const E=w.useCallback(v=>{if(!n&&!r||g.paused)return;const A=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,_=document.activeElement;if(A&&_){const y=v.currentTarget,[S,b]=jD(y);S&&b?!v.shiftKey&&_===b?(v.preventDefault(),n&&_r(S,{select:!0})):v.shiftKey&&_===S&&(v.preventDefault(),n&&_r(b,{select:!0})):_===y&&v.preventDefault()}},[n,r,g.paused]);return x.jsx(Ve.div,{tabIndex:-1,...s,ref:p,onKeyDown:E})});yS.displayName=MD;function VD(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(_r(r,{select:e}),document.activeElement!==n)return}function jD(t){const e=vS(t),n=B0(e,t),r=B0(e.reverse(),t);return[n,r]}function vS(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function B0(t,e){for(const n of t)if(!UD(n,{upTo:e}))return n}function UD(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function BD(t){return t instanceof HTMLInputElement&&"select"in t}function _r(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&BD(t)&&e&&t.select()}}var z0=zD();function zD(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=W0(t,e),t.unshift(e)},remove(e){var n;t=W0(t,e),(n=t[0])==null||n.resume()}}}function W0(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function WD(t){return t.filter(e=>e.tagName!=="A")}var Wt=globalThis!=null&&globalThis.document?w.useLayoutEffect:()=>{},HD=A1.useId||(()=>{}),qD=0;function Km(t){const[e,n]=w.useState(HD());return Wt(()=>{n(r=>r??String(qD++))},[t]),e?`radix-${e}`:""}const GD=["top","right","bottom","left"],Xr=Math.min,Ft=Math.max,hc=Math.round,Hl=Math.floor,In=t=>({x:t,y:t}),KD={left:"right",right:"left",bottom:"top",top:"bottom"},QD={start:"end",end:"start"};function Hf(t,e,n){return Ft(t,Xr(e,n))}function sr(t,e){return typeof t=="function"?t(e):t}function ar(t){return t.split("-")[0]}function ls(t){return t.split("-")[1]}function Qm(t){return t==="x"?"y":"x"}function Ym(t){return t==="y"?"height":"width"}function Jr(t){return["top","bottom"].includes(ar(t))?"y":"x"}function Xm(t){return Qm(Jr(t))}function YD(t,e,n){n===void 0&&(n=!1);const r=ls(t),i=Xm(t),o=Ym(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(s=fc(s)),[s,fc(s)]}function XD(t){const e=fc(t);return[qf(t),e,qf(e)]}function qf(t){return t.replace(/start|end/g,e=>QD[e])}function JD(t,e,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?o:s;default:return[]}}function ZD(t,e,n,r){const i=ls(t);let o=JD(ar(t),n==="start",r);return i&&(o=o.map(s=>s+"-"+i),e&&(o=o.concat(o.map(qf)))),o}function fc(t){return t.replace(/left|right|bottom|top/g,e=>KD[e])}function eF(t){return{top:0,right:0,bottom:0,left:0,...t}}function _S(t){return typeof t!="number"?eF(t):{top:t,right:t,bottom:t,left:t}}function pc(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function H0(t,e,n){let{reference:r,floating:i}=t;const o=Jr(e),s=Xm(e),a=Ym(s),l=ar(e),c=o==="y",d=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,p=r[a]/2-i[a]/2;let g;switch(l){case"top":g={x:d,y:r.y-i.height};break;case"bottom":g={x:d,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:f};break;case"left":g={x:r.x-i.width,y:f};break;default:g={x:r.x,y:r.y}}switch(ls(e)){case"start":g[s]-=p*(n&&c?-1:1);break;case"end":g[s]+=p*(n&&c?-1:1);break}return g}const tF=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(e));let c=await s.getElementRects({reference:t,floating:e,strategy:i}),{x:d,y:f}=H0(c,r,l),p=r,g={},E=0;for(let v=0;v<a.length;v++){const{name:A,fn:_}=a[v],{x:y,y:S,data:b,reset:O}=await _({x:d,y:f,initialPlacement:r,placement:p,strategy:i,middlewareData:g,rects:c,platform:s,elements:{reference:t,floating:e}});d=y??d,f=S??f,g={...g,[A]:{...g[A],...b}},O&&E<=50&&(E++,typeof O=="object"&&(O.placement&&(p=O.placement),O.rects&&(c=O.rects===!0?await s.getElementRects({reference:t,floating:e,strategy:i}):O.rects),{x:d,y:f}=H0(c,p,l)),v=-1)}return{x:d,y:f,placement:p,strategy:i,middlewareData:g}};async function $a(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:o,rects:s,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:p=!1,padding:g=0}=sr(e,t),E=_S(g),A=a[p?f==="floating"?"reference":"floating":f],_=pc(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(A)))==null||n?A:A.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),y=f==="floating"?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),b=await(o.isElement==null?void 0:o.isElement(S))?await(o.getScale==null?void 0:o.getScale(S))||{x:1,y:1}:{x:1,y:1},O=pc(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:S,strategy:l}):y);return{top:(_.top-O.top+E.top)/b.y,bottom:(O.bottom-_.bottom+E.bottom)/b.y,left:(_.left-O.left+E.left)/b.x,right:(O.right-_.right+E.right)/b.x}}const nF=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:o,platform:s,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=sr(t,e)||{};if(c==null)return{};const f=_S(d),p={x:n,y:r},g=Xm(i),E=Ym(g),v=await s.getDimensions(c),A=g==="y",_=A?"top":"left",y=A?"bottom":"right",S=A?"clientHeight":"clientWidth",b=o.reference[E]+o.reference[g]-p[g]-o.floating[E],O=p[g]-o.reference[g],D=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c));let I=D?D[S]:0;(!I||!await(s.isElement==null?void 0:s.isElement(D)))&&(I=a.floating[S]||o.floating[E]);const T=b/2-O/2,R=I/2-v[E]/2-1,P=Xr(f[_],R),N=Xr(f[y],R),$=P,k=I-v[E]-N,W=I/2-v[E]/2+T,oe=Hf($,W,k),K=!l.arrow&&ls(i)!=null&&W!==oe&&o.reference[E]/2-(W<$?P:N)-v[E]/2<0,Y=K?W<$?W-$:W-k:0;return{[g]:p[g]+Y,data:{[g]:oe,centerOffset:W-oe-Y,...K&&{alignmentOffset:Y}},reset:K}}}),rF=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:E="none",flipAlignment:v=!0,...A}=sr(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const _=ar(i),y=Jr(a),S=ar(a)===a,b=await(l.isRTL==null?void 0:l.isRTL(c.floating)),O=p||(S||!v?[fc(a)]:XD(a)),D=E!=="none";!p&&D&&O.push(...ZD(a,v,E,b));const I=[a,...O],T=await $a(e,A),R=[];let P=((r=o.flip)==null?void 0:r.overflows)||[];if(d&&R.push(T[_]),f){const W=YD(i,s,b);R.push(T[W[0]],T[W[1]])}if(P=[...P,{placement:i,overflows:R}],!R.every(W=>W<=0)){var N,$;const W=(((N=o.flip)==null?void 0:N.index)||0)+1,oe=I[W];if(oe)return{data:{index:W,overflows:P},reset:{placement:oe}};let K=($=P.filter(Y=>Y.overflows[0]<=0).sort((Y,M)=>Y.overflows[1]-M.overflows[1])[0])==null?void 0:$.placement;if(!K)switch(g){case"bestFit":{var k;const Y=(k=P.filter(M=>{if(D){const z=Jr(M.placement);return z===y||z==="y"}return!0}).map(M=>[M.placement,M.overflows.filter(z=>z>0).reduce((z,G)=>z+G,0)]).sort((M,z)=>M[1]-z[1])[0])==null?void 0:k[0];Y&&(K=Y);break}case"initialPlacement":K=a;break}if(i!==K)return{reset:{placement:K}}}return{}}}};function q0(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function G0(t){return GD.some(e=>t[e]>=0)}const iF=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=sr(t,e);switch(r){case"referenceHidden":{const o=await $a(e,{...i,elementContext:"reference"}),s=q0(o,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:G0(s)}}}case"escaped":{const o=await $a(e,{...i,altBoundary:!0}),s=q0(o,n.floating);return{data:{escapedOffsets:s,escaped:G0(s)}}}default:return{}}}}};async function oF(t,e){const{placement:n,platform:r,elements:i}=t,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=ar(n),a=ls(n),l=Jr(n)==="y",c=["left","top"].includes(s)?-1:1,d=o&&l?-1:1,f=sr(e,t);let{mainAxis:p,crossAxis:g,alignmentAxis:E}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof E=="number"&&(g=a==="end"?E*-1:E),l?{x:g*d,y:p*c}:{x:p*c,y:g*d}}const sF=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:o,placement:s,middlewareData:a}=e,l=await oF(e,t);return s===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:o+l.y,data:{...l,placement:s}}}}},aF=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:A=>{let{x:_,y}=A;return{x:_,y}}},...l}=sr(t,e),c={x:n,y:r},d=await $a(e,l),f=Jr(ar(i)),p=Qm(f);let g=c[p],E=c[f];if(o){const A=p==="y"?"top":"left",_=p==="y"?"bottom":"right",y=g+d[A],S=g-d[_];g=Hf(y,g,S)}if(s){const A=f==="y"?"top":"left",_=f==="y"?"bottom":"right",y=E+d[A],S=E-d[_];E=Hf(y,E,S)}const v=a.fn({...e,[p]:g,[f]:E});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[p]:o,[f]:s}}}}}},lF=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:o,middlewareData:s}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=sr(t,e),d={x:n,y:r},f=Jr(i),p=Qm(f);let g=d[p],E=d[f];const v=sr(a,e),A=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const S=p==="y"?"height":"width",b=o.reference[p]-o.floating[S]+A.mainAxis,O=o.reference[p]+o.reference[S]-A.mainAxis;g<b?g=b:g>O&&(g=O)}if(c){var _,y;const S=p==="y"?"width":"height",b=["top","left"].includes(ar(i)),O=o.reference[f]-o.floating[S]+(b&&((_=s.offset)==null?void 0:_[f])||0)+(b?0:A.crossAxis),D=o.reference[f]+o.reference[S]+(b?0:((y=s.offset)==null?void 0:y[f])||0)-(b?A.crossAxis:0);E<O?E=O:E>D&&(E=D)}return{[p]:g,[f]:E}}}},uF=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:o,platform:s,elements:a}=e,{apply:l=()=>{},...c}=sr(t,e),d=await $a(e,c),f=ar(i),p=ls(i),g=Jr(i)==="y",{width:E,height:v}=o.floating;let A,_;f==="top"||f==="bottom"?(A=f,_=p===(await(s.isRTL==null?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(_=f,A=p==="end"?"top":"bottom");const y=v-d.top-d.bottom,S=E-d.left-d.right,b=Xr(v-d[A],y),O=Xr(E-d[_],S),D=!e.middlewareData.shift;let I=b,T=O;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(T=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(I=y),D&&!p){const P=Ft(d.left,0),N=Ft(d.right,0),$=Ft(d.top,0),k=Ft(d.bottom,0);g?T=E-2*(P!==0||N!==0?P+N:Ft(d.left,d.right)):I=v-2*($!==0||k!==0?$+k:Ft(d.top,d.bottom))}await l({...e,availableWidth:T,availableHeight:I});const R=await s.getDimensions(a.floating);return E!==R.width||v!==R.height?{reset:{rects:!0}}:{}}}};function Zc(){return typeof window<"u"}function us(t){return wS(t)?(t.nodeName||"").toLowerCase():"#document"}function Ut(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Nn(t){var e;return(e=(wS(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function wS(t){return Zc()?t instanceof Node||t instanceof Ut(t).Node:!1}function fn(t){return Zc()?t instanceof Element||t instanceof Ut(t).Element:!1}function kn(t){return Zc()?t instanceof HTMLElement||t instanceof Ut(t).HTMLElement:!1}function K0(t){return!Zc()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ut(t).ShadowRoot}function tl(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=pn(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function cF(t){return["table","td","th"].includes(us(t))}function ed(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Jm(t){const e=Zm(),n=fn(t)?pn(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function dF(t){let e=Zr(t);for(;kn(e)&&!Ko(e);){if(Jm(e))return e;if(ed(e))return null;e=Zr(e)}return null}function Zm(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ko(t){return["html","body","#document"].includes(us(t))}function pn(t){return Ut(t).getComputedStyle(t)}function td(t){return fn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Zr(t){if(us(t)==="html")return t;const e=t.assignedSlot||t.parentNode||K0(t)&&t.host||Nn(t);return K0(e)?e.host:e}function xS(t){const e=Zr(t);return Ko(e)?t.ownerDocument?t.ownerDocument.body:t.body:kn(e)&&tl(e)?e:xS(e)}function Oa(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=xS(t),o=i===((r=t.ownerDocument)==null?void 0:r.body),s=Ut(i);if(o){const a=Gf(s);return e.concat(s,s.visualViewport||[],tl(i)?i:[],a&&n?Oa(a):[])}return e.concat(i,Oa(i,[],n))}function Gf(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function ES(t){const e=pn(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=kn(t),o=i?t.offsetWidth:n,s=i?t.offsetHeight:r,a=hc(n)!==o||hc(r)!==s;return a&&(n=o,r=s),{width:n,height:r,$:a}}function eg(t){return fn(t)?t:t.contextElement}function Ro(t){const e=eg(t);if(!kn(e))return In(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:o}=ES(e);let s=(o?hc(n.width):n.width)/r,a=(o?hc(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const hF=In(0);function TS(t){const e=Ut(t);return!Zm()||!e.visualViewport?hF:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function fF(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Ut(t)?!1:e}function $i(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),o=eg(t);let s=In(1);e&&(r?fn(r)&&(s=Ro(r)):s=Ro(t));const a=fF(o,n,r)?TS(o):In(0);let l=(i.left+a.x)/s.x,c=(i.top+a.y)/s.y,d=i.width/s.x,f=i.height/s.y;if(o){const p=Ut(o),g=r&&fn(r)?Ut(r):r;let E=p,v=Gf(E);for(;v&&r&&g!==E;){const A=Ro(v),_=v.getBoundingClientRect(),y=pn(v),S=_.left+(v.clientLeft+parseFloat(y.paddingLeft))*A.x,b=_.top+(v.clientTop+parseFloat(y.paddingTop))*A.y;l*=A.x,c*=A.y,d*=A.x,f*=A.y,l+=S,c+=b,E=Ut(v),v=Gf(E)}}return pc({width:d,height:f,x:l,y:c})}function tg(t,e){const n=td(t).scrollLeft;return e?e.left+n:$i(Nn(t)).left+n}function SS(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:tg(t,r)),o=r.top+e.scrollTop;return{x:i,y:o}}function pF(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const o=i==="fixed",s=Nn(r),a=e?ed(e.floating):!1;if(r===s||a&&o)return n;let l={scrollLeft:0,scrollTop:0},c=In(1);const d=In(0),f=kn(r);if((f||!f&&!o)&&((us(r)!=="body"||tl(s))&&(l=td(r)),kn(r))){const g=$i(r);c=Ro(r),d.x=g.x+r.clientLeft,d.y=g.y+r.clientTop}const p=s&&!f&&!o?SS(s,l,!0):In(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+p.x,y:n.y*c.y-l.scrollTop*c.y+d.y+p.y}}function mF(t){return Array.from(t.getClientRects())}function gF(t){const e=Nn(t),n=td(t),r=t.ownerDocument.body,i=Ft(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=Ft(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+tg(t);const a=-n.scrollTop;return pn(r).direction==="rtl"&&(s+=Ft(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}function yF(t,e){const n=Ut(t),r=Nn(t),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;const c=Zm();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a,y:l}}function vF(t,e){const n=$i(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,o=kn(t)?Ro(t):In(1),s=t.clientWidth*o.x,a=t.clientHeight*o.y,l=i*o.x,c=r*o.y;return{width:s,height:a,x:l,y:c}}function Q0(t,e,n){let r;if(e==="viewport")r=yF(t,n);else if(e==="document")r=gF(Nn(t));else if(fn(e))r=vF(e,n);else{const i=TS(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return pc(r)}function CS(t,e){const n=Zr(t);return n===e||!fn(n)||Ko(n)?!1:pn(n).position==="fixed"||CS(n,e)}function _F(t,e){const n=e.get(t);if(n)return n;let r=Oa(t,[],!1).filter(a=>fn(a)&&us(a)!=="body"),i=null;const o=pn(t).position==="fixed";let s=o?Zr(t):t;for(;fn(s)&&!Ko(s);){const a=pn(s),l=Jm(s);!l&&a.position==="fixed"&&(i=null),(o?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||tl(s)&&!l&&CS(t,s))?r=r.filter(d=>d!==s):i=a,s=Zr(s)}return e.set(t,r),r}function wF(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const s=[...n==="clippingAncestors"?ed(e)?[]:_F(e,this._c):[].concat(n),r],a=s[0],l=s.reduce((c,d)=>{const f=Q0(e,d,i);return c.top=Ft(f.top,c.top),c.right=Xr(f.right,c.right),c.bottom=Xr(f.bottom,c.bottom),c.left=Ft(f.left,c.left),c},Q0(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function xF(t){const{width:e,height:n}=ES(t);return{width:e,height:n}}function EF(t,e,n){const r=kn(e),i=Nn(e),o=n==="fixed",s=$i(t,!0,o,e);let a={scrollLeft:0,scrollTop:0};const l=In(0);if(r||!r&&!o)if((us(e)!=="body"||tl(i))&&(a=td(e)),r){const p=$i(e,!0,o,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else i&&(l.x=tg(i));const c=i&&!r&&!o?SS(i,a):In(0),d=s.left+a.scrollLeft-l.x-c.x,f=s.top+a.scrollTop-l.y-c.y;return{x:d,y:f,width:s.width,height:s.height}}function gh(t){return pn(t).position==="static"}function Y0(t,e){if(!kn(t)||pn(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Nn(t)===n&&(n=n.ownerDocument.body),n}function IS(t,e){const n=Ut(t);if(ed(t))return n;if(!kn(t)){let i=Zr(t);for(;i&&!Ko(i);){if(fn(i)&&!gh(i))return i;i=Zr(i)}return n}let r=Y0(t,e);for(;r&&cF(r)&&gh(r);)r=Y0(r,e);return r&&Ko(r)&&gh(r)&&!Jm(r)?n:r||dF(t)||n}const TF=async function(t){const e=this.getOffsetParent||IS,n=this.getDimensions,r=await n(t.floating);return{reference:EF(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function SF(t){return pn(t).direction==="rtl"}const CF={convertOffsetParentRelativeRectToViewportRelativeRect:pF,getDocumentElement:Nn,getClippingRect:wF,getOffsetParent:IS,getElementRects:TF,getClientRects:mF,getDimensions:xF,getScale:Ro,isElement:fn,isRTL:SF};function IF(t,e){let n=null,r;const i=Nn(t);function o(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function s(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();const{left:c,top:d,width:f,height:p}=t.getBoundingClientRect();if(a||e(),!f||!p)return;const g=Hl(d),E=Hl(i.clientWidth-(c+f)),v=Hl(i.clientHeight-(d+p)),A=Hl(c),y={rootMargin:-g+"px "+-E+"px "+-v+"px "+-A+"px",threshold:Ft(0,Xr(1,l))||1};let S=!0;function b(O){const D=O[0].intersectionRatio;if(D!==l){if(!S)return s();D?s(!1,D):r=setTimeout(()=>{s(!1,1e-7)},1e3)}S=!1}try{n=new IntersectionObserver(b,{...y,root:i.ownerDocument})}catch{n=new IntersectionObserver(b,y)}n.observe(t)}return s(!0),o}function AF(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=eg(t),d=i||o?[...c?Oa(c):[],...Oa(e)]:[];d.forEach(_=>{i&&_.addEventListener("scroll",n,{passive:!0}),o&&_.addEventListener("resize",n)});const f=c&&a?IF(c,n):null;let p=-1,g=null;s&&(g=new ResizeObserver(_=>{let[y]=_;y&&y.target===c&&g&&(g.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var S;(S=g)==null||S.observe(e)})),n()}),c&&!l&&g.observe(c),g.observe(e));let E,v=l?$i(t):null;l&&A();function A(){const _=$i(t);v&&(_.x!==v.x||_.y!==v.y||_.width!==v.width||_.height!==v.height)&&n(),v=_,E=requestAnimationFrame(A)}return n(),()=>{var _;d.forEach(y=>{i&&y.removeEventListener("scroll",n),o&&y.removeEventListener("resize",n)}),f==null||f(),(_=g)==null||_.disconnect(),g=null,l&&cancelAnimationFrame(E)}}const RF=sF,PF=aF,kF=rF,bF=uF,NF=iF,X0=nF,$F=lF,OF=(t,e,n)=>{const r=new Map,i={platform:CF,...n},o={...i.platform,_c:r};return tF(t,e,{...i,platform:o})};var xu=typeof document<"u"?w.useLayoutEffect:w.useEffect;function mc(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!mc(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&t.$$typeof)&&!mc(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function AS(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function J0(t,e){const n=AS(t);return Math.round(e*n)/n}function yh(t){const e=w.useRef(t);return xu(()=>{e.current=t}),e}function LF(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:s}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,f]=w.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,g]=w.useState(r);mc(p,r)||g(r);const[E,v]=w.useState(null),[A,_]=w.useState(null),y=w.useCallback(M=>{M!==D.current&&(D.current=M,v(M))},[]),S=w.useCallback(M=>{M!==I.current&&(I.current=M,_(M))},[]),b=o||E,O=s||A,D=w.useRef(null),I=w.useRef(null),T=w.useRef(d),R=l!=null,P=yh(l),N=yh(i),$=yh(c),k=w.useCallback(()=>{if(!D.current||!I.current)return;const M={placement:e,strategy:n,middleware:p};N.current&&(M.platform=N.current),OF(D.current,I.current,M).then(z=>{const G={...z,isPositioned:$.current!==!1};W.current&&!mc(T.current,G)&&(T.current=G,Jo.flushSync(()=>{f(G)}))})},[p,e,n,N,$]);xu(()=>{c===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,f(M=>({...M,isPositioned:!1})))},[c]);const W=w.useRef(!1);xu(()=>(W.current=!0,()=>{W.current=!1}),[]),xu(()=>{if(b&&(D.current=b),O&&(I.current=O),b&&O){if(P.current)return P.current(b,O,k);k()}},[b,O,k,P,R]);const oe=w.useMemo(()=>({reference:D,floating:I,setReference:y,setFloating:S}),[y,S]),K=w.useMemo(()=>({reference:b,floating:O}),[b,O]),Y=w.useMemo(()=>{const M={position:n,left:0,top:0};if(!K.floating)return M;const z=J0(K.floating,d.x),G=J0(K.floating,d.y);return a?{...M,transform:"translate("+z+"px, "+G+"px)",...AS(K.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:z,top:G}},[n,a,K.floating,d.x,d.y]);return w.useMemo(()=>({...d,update:k,refs:oe,elements:K,floatingStyles:Y}),[d,k,oe,K,Y])}const DF=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?X0({element:r.current,padding:i}).fn(n):{}:r?X0({element:r,padding:i}).fn(n):{}}}},FF=(t,e)=>({...RF(t),options:[t,e]}),MF=(t,e)=>({...PF(t),options:[t,e]}),VF=(t,e)=>({...$F(t),options:[t,e]}),jF=(t,e)=>({...kF(t),options:[t,e]}),UF=(t,e)=>({...bF(t),options:[t,e]}),BF=(t,e)=>({...NF(t),options:[t,e]}),zF=(t,e)=>({...DF(t),options:[t,e]});var WF="Arrow",RS=w.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...o}=t;return x.jsx(Ve.svg,{...o,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:x.jsx("polygon",{points:"0,0 30,0 15,10"})})});RS.displayName=WF;var HF=RS;function qF(t){const[e,n]=w.useState(void 0);return Wt(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let s,a;if("borderBoxSize"in o){const l=o.borderBoxSize,c=Array.isArray(l)?l[0]:l;s=c.inlineSize,a=c.blockSize}else s=t.offsetWidth,a=t.offsetHeight;n({width:s,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var ng="Popper",[PS,kS]=Gm(ng),[GF,bS]=PS(ng),NS=t=>{const{__scopePopper:e,children:n}=t,[r,i]=w.useState(null);return x.jsx(GF,{scope:e,anchor:r,onAnchorChange:i,children:n})};NS.displayName=ng;var $S="PopperAnchor",OS=w.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,o=bS($S,n),s=w.useRef(null),a=ut(e,s);return w.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||s.current)}),r?null:x.jsx(Ve.div,{...i,ref:a})});OS.displayName=$S;var rg="PopperContent",[KF,QF]=PS(rg),LS=w.forwardRef((t,e)=>{var X,xe,Ye,ye,fe,me;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:o="center",alignOffset:s=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:g="optimized",onPlaced:E,...v}=t,A=bS(rg,n),[_,y]=w.useState(null),S=ut(e,tt=>y(tt)),[b,O]=w.useState(null),D=qF(b),I=(D==null?void 0:D.width)??0,T=(D==null?void 0:D.height)??0,R=r+(o!=="center"?"-"+o:""),P=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},N=Array.isArray(c)?c:[c],$=N.length>0,k={padding:P,boundary:N.filter(XF),altBoundary:$},{refs:W,floatingStyles:oe,placement:K,isPositioned:Y,middlewareData:M}=LF({strategy:"fixed",placement:R,whileElementsMounted:(...tt)=>AF(...tt,{animationFrame:g==="always"}),elements:{reference:A.anchor},middleware:[FF({mainAxis:i+T,alignmentAxis:s}),l&&MF({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?VF():void 0,...k}),l&&jF({...k}),UF({...k,apply:({elements:tt,rects:Rt,availableWidth:$n,availableHeight:dr})=>{const{width:oi,height:sd}=Rt.reference,si=tt.floating.style;si.setProperty("--radix-popper-available-width",`${$n}px`),si.setProperty("--radix-popper-available-height",`${dr}px`),si.setProperty("--radix-popper-anchor-width",`${oi}px`),si.setProperty("--radix-popper-anchor-height",`${sd}px`)}}),b&&zF({element:b,padding:a}),JF({arrowWidth:I,arrowHeight:T}),p&&BF({strategy:"referenceHidden",...k})]}),[z,G]=MS(K),ee=or(E);Wt(()=>{Y&&(ee==null||ee())},[Y,ee]);const ce=(X=M.arrow)==null?void 0:X.x,_e=(xe=M.arrow)==null?void 0:xe.y,Qe=((Ye=M.arrow)==null?void 0:Ye.centerOffset)!==0,[ct,et]=w.useState();return Wt(()=>{_&&et(window.getComputedStyle(_).zIndex)},[_]),x.jsx("div",{ref:W.setFloating,"data-radix-popper-content-wrapper":"",style:{...oe,transform:Y?oe.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ct,"--radix-popper-transform-origin":[(ye=M.transformOrigin)==null?void 0:ye.x,(fe=M.transformOrigin)==null?void 0:fe.y].join(" "),...((me=M.hide)==null?void 0:me.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:x.jsx(KF,{scope:n,placedSide:z,onArrowChange:O,arrowX:ce,arrowY:_e,shouldHideArrow:Qe,children:x.jsx(Ve.div,{"data-side":z,"data-align":G,...v,ref:S,style:{...v.style,animation:Y?void 0:"none"}})})})});LS.displayName=rg;var DS="PopperArrow",YF={top:"bottom",right:"left",bottom:"top",left:"right"},FS=w.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,o=QF(DS,r),s=YF[o.placedSide];return x.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:x.jsx(HF,{...i,ref:n,style:{...i.style,display:"block"}})})});FS.displayName=DS;function XF(t){return t!==null}var JF=t=>({name:"transformOrigin",options:t,fn(e){var A,_,y;const{placement:n,rects:r,middlewareData:i}=e,s=((A=i.arrow)==null?void 0:A.centerOffset)!==0,a=s?0:t.arrowWidth,l=s?0:t.arrowHeight,[c,d]=MS(n),f={start:"0%",center:"50%",end:"100%"}[d],p=(((_=i.arrow)==null?void 0:_.x)??0)+a/2,g=(((y=i.arrow)==null?void 0:y.y)??0)+l/2;let E="",v="";return c==="bottom"?(E=s?f:`${p}px`,v=`${-l}px`):c==="top"?(E=s?f:`${p}px`,v=`${r.floating.height+l}px`):c==="right"?(E=`${-l}px`,v=s?f:`${g}px`):c==="left"&&(E=`${r.floating.width+l}px`,v=s?f:`${g}px`),{data:{x:E,y:v}}}});function MS(t){const[e,n="center"]=t.split("-");return[e,n]}var ZF=NS,eM=OS,tM=LS,nM=FS,rM="Portal",VS=w.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,o]=w.useState(!1);Wt(()=>o(!0),[]);const s=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return s?MA.createPortal(x.jsx(Ve.div,{...r,ref:e}),s):null});VS.displayName=rM;function Z0({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=iM({defaultProp:e,onChange:n}),o=t!==void 0,s=o?t:r,a=or(n),l=w.useCallback(c=>{if(o){const f=typeof c=="function"?c(t):c;f!==t&&a(f)}else i(c)},[o,t,i,a]);return[s,l]}function iM({defaultProp:t,onChange:e}){const n=w.useState(t),[r]=n,i=w.useRef(r),o=or(e);return w.useEffect(()=>{i.current!==r&&(o(r),i.current=r)},[r,i,o]),n}function oM(t){const e=w.useRef({value:t,previous:t});return w.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var sM="VisuallyHidden",jS=w.forwardRef((t,e)=>x.jsx(Ve.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));jS.displayName=sM;var aM=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Yi=new WeakMap,ql=new WeakMap,Gl={},vh=0,US=function(t){return t&&(t.host||US(t.parentNode))},lM=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=US(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},uM=function(t,e,n,r){var i=lM(e,Array.isArray(t)?t:[t]);Gl[n]||(Gl[n]=new WeakMap);var o=Gl[n],s=[],a=new Set,l=new Set(i),c=function(f){!f||a.has(f)||(a.add(f),c(f.parentNode))};i.forEach(c);var d=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(p){if(a.has(p))d(p);else try{var g=p.getAttribute(r),E=g!==null&&g!=="false",v=(Yi.get(p)||0)+1,A=(o.get(p)||0)+1;Yi.set(p,v),o.set(p,A),s.push(p),v===1&&E&&ql.set(p,!0),A===1&&p.setAttribute(n,"true"),E||p.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",p,_)}})};return d(e),a.clear(),vh++,function(){s.forEach(function(f){var p=Yi.get(f)-1,g=o.get(f)-1;Yi.set(f,p),o.set(f,g),p||(ql.has(f)||f.removeAttribute(r),ql.delete(f)),g||f.removeAttribute(n)}),vh--,vh||(Yi=new WeakMap,Yi=new WeakMap,ql=new WeakMap,Gl={})}},cM=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=aM(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),uM(r,i,n,"aria-hidden")):function(){return null}},Eu="right-scroll-bar-position",Tu="width-before-scroll-bar",dM="with-scroll-bars-hidden",hM="--removed-body-scroll-bar-size";function _h(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function fM(t,e){var n=w.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var pM=typeof window<"u"?w.useLayoutEffect:w.useEffect,e_=new WeakMap;function mM(t,e){var n=fM(null,function(r){return t.forEach(function(i){return _h(i,r)})});return pM(function(){var r=e_.get(n);if(r){var i=new Set(r),o=new Set(t),s=n.current;i.forEach(function(a){o.has(a)||_h(a,null)}),o.forEach(function(a){i.has(a)||_h(a,s)})}e_.set(n,t)},[t]),n}function gM(t){return t}function yM(t,e){e===void 0&&(e=gM);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(o){var s=e(o,r);return n.push(s),function(){n=n.filter(function(a){return a!==s})}},assignSyncMedium:function(o){for(r=!0;n.length;){var s=n;n=[],s.forEach(o)}n={push:function(a){return o(a)},filter:function(){return n}}},assignMedium:function(o){r=!0;var s=[];if(n.length){var a=n;n=[],a.forEach(o),s=n}var l=function(){var d=s;s=[],d.forEach(o)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(d){s.push(d),c()},filter:function(d){return s=s.filter(d),n}}}};return i}function vM(t){t===void 0&&(t={});var e=yM(null);return e.options=_n({async:!0,ssr:!1},t),e}var BS=function(t){var e=t.sideCar,n=Ha(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return w.createElement(r,_n({},n))};BS.isSideCarExport=!0;function _M(t,e){return t.useMedium(e),BS}var zS=vM(),wh=function(){},nd=w.forwardRef(function(t,e){var n=w.useRef(null),r=w.useState({onScrollCapture:wh,onWheelCapture:wh,onTouchMoveCapture:wh}),i=r[0],o=r[1],s=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,d=t.enabled,f=t.shards,p=t.sideCar,g=t.noIsolation,E=t.inert,v=t.allowPinchZoom,A=t.as,_=A===void 0?"div":A,y=t.gapMode,S=Ha(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),b=p,O=mM([n,e]),D=_n(_n({},S),i);return w.createElement(w.Fragment,null,d&&w.createElement(b,{sideCar:zS,removeScrollBar:c,shards:f,noIsolation:g,inert:E,setCallbacks:o,allowPinchZoom:!!v,lockRef:n,gapMode:y}),s?w.cloneElement(w.Children.only(a),_n(_n({},D),{ref:O})):w.createElement(_,_n({},D,{className:l,ref:O}),a))});nd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};nd.classNames={fullWidth:Tu,zeroRight:Eu};var wM=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function xM(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=wM();return e&&t.setAttribute("nonce",e),t}function EM(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function TM(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var SM=function(){var t=0,e=null;return{add:function(n){t==0&&(e=xM())&&(EM(e,n),TM(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},CM=function(){var t=SM();return function(e,n){w.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},WS=function(){var t=CM(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},IM={left:0,top:0,right:0,gap:0},xh=function(t){return parseInt(t||"",10)||0},AM=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[xh(n),xh(r),xh(i)]},RM=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return IM;var e=AM(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},PM=WS(),Po="data-scroll-locked",kM=function(t,e,n,r){var i=t.left,o=t.top,s=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(dM,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Po,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Eu,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Tu,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Eu," .").concat(Eu,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Tu," .").concat(Tu,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Po,`] {
    `).concat(hM,": ").concat(a,`px;
  }
`)},t_=function(){var t=parseInt(document.body.getAttribute(Po)||"0",10);return isFinite(t)?t:0},bM=function(){w.useEffect(function(){return document.body.setAttribute(Po,(t_()+1).toString()),function(){var t=t_()-1;t<=0?document.body.removeAttribute(Po):document.body.setAttribute(Po,t.toString())}},[])},NM=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;bM();var o=w.useMemo(function(){return RM(i)},[i]);return w.createElement(PM,{styles:kM(o,!e,i,n?"":"!important")})},Kf=!1;if(typeof window<"u")try{var Kl=Object.defineProperty({},"passive",{get:function(){return Kf=!0,!0}});window.addEventListener("test",Kl,Kl),window.removeEventListener("test",Kl,Kl)}catch{Kf=!1}var Xi=Kf?{passive:!1}:!1,$M=function(t){return t.tagName==="TEXTAREA"},HS=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!$M(t)&&n[e]==="visible")},OM=function(t){return HS(t,"overflowY")},LM=function(t){return HS(t,"overflowX")},n_=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=qS(t,r);if(i){var o=GS(t,r),s=o[1],a=o[2];if(s>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},DM=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},FM=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},qS=function(t,e){return t==="v"?OM(e):LM(e)},GS=function(t,e){return t==="v"?DM(e):FM(e)},MM=function(t,e){return t==="h"&&e==="rtl"?-1:1},VM=function(t,e,n,r,i){var o=MM(t,window.getComputedStyle(e).direction),s=o*r,a=n.target,l=e.contains(a),c=!1,d=s>0,f=0,p=0;do{var g=GS(t,a),E=g[0],v=g[1],A=g[2],_=v-A-o*E;(E||_)&&qS(t,a)&&(f+=_,p+=E),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&(Math.abs(f)<1||!i)||!d&&(Math.abs(p)<1||!i))&&(c=!0),c},Ql=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},r_=function(t){return[t.deltaX,t.deltaY]},i_=function(t){return t&&"current"in t?t.current:t},jM=function(t,e){return t[0]===e[0]&&t[1]===e[1]},UM=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},BM=0,Ji=[];function zM(t){var e=w.useRef([]),n=w.useRef([0,0]),r=w.useRef(),i=w.useState(BM++)[0],o=w.useState(WS)[0],s=w.useRef(t);w.useEffect(function(){s.current=t},[t]),w.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var v=Jk([t.lockRef.current],(t.shards||[]).map(i_),!0).filter(Boolean);return v.forEach(function(A){return A.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),v.forEach(function(A){return A.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=w.useCallback(function(v,A){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!s.current.allowPinchZoom;var _=Ql(v),y=n.current,S="deltaX"in v?v.deltaX:y[0]-_[0],b="deltaY"in v?v.deltaY:y[1]-_[1],O,D=v.target,I=Math.abs(S)>Math.abs(b)?"h":"v";if("touches"in v&&I==="h"&&D.type==="range")return!1;var T=n_(I,D);if(!T)return!0;if(T?O=I:(O=I==="v"?"h":"v",T=n_(I,D)),!T)return!1;if(!r.current&&"changedTouches"in v&&(S||b)&&(r.current=O),!O)return!0;var R=r.current||O;return VM(R,A,v,R==="h"?S:b,!0)},[]),l=w.useCallback(function(v){var A=v;if(!(!Ji.length||Ji[Ji.length-1]!==o)){var _="deltaY"in A?r_(A):Ql(A),y=e.current.filter(function(O){return O.name===A.type&&(O.target===A.target||A.target===O.shadowParent)&&jM(O.delta,_)})[0];if(y&&y.should){A.cancelable&&A.preventDefault();return}if(!y){var S=(s.current.shards||[]).map(i_).filter(Boolean).filter(function(O){return O.contains(A.target)}),b=S.length>0?a(A,S[0]):!s.current.noIsolation;b&&A.cancelable&&A.preventDefault()}}},[]),c=w.useCallback(function(v,A,_,y){var S={name:v,delta:A,target:_,should:y,shadowParent:WM(_)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(b){return b!==S})},1)},[]),d=w.useCallback(function(v){n.current=Ql(v),r.current=void 0},[]),f=w.useCallback(function(v){c(v.type,r_(v),v.target,a(v,t.lockRef.current))},[]),p=w.useCallback(function(v){c(v.type,Ql(v),v.target,a(v,t.lockRef.current))},[]);w.useEffect(function(){return Ji.push(o),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",l,Xi),document.addEventListener("touchmove",l,Xi),document.addEventListener("touchstart",d,Xi),function(){Ji=Ji.filter(function(v){return v!==o}),document.removeEventListener("wheel",l,Xi),document.removeEventListener("touchmove",l,Xi),document.removeEventListener("touchstart",d,Xi)}},[]);var g=t.removeScrollBar,E=t.inert;return w.createElement(w.Fragment,null,E?w.createElement(o,{styles:UM(i)}):null,g?w.createElement(NM,{gapMode:t.gapMode}):null)}function WM(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const HM=_M(zS,zM);var KS=w.forwardRef(function(t,e){return w.createElement(nd,_n({},t,{ref:e,sideCar:HM}))});KS.classNames=nd.classNames;var qM=[" ","Enter","ArrowUp","ArrowDown"],GM=[" ","Enter"],nl="Select",[rd,id,KM]=SD(nl),[cs,XV]=Gm(nl,[KM,kS]),od=kS(),[QM,ri]=cs(nl),[YM,XM]=cs(nl),QS=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:o,value:s,defaultValue:a,onValueChange:l,dir:c,name:d,autoComplete:f,disabled:p,required:g,form:E}=t,v=od(e),[A,_]=w.useState(null),[y,S]=w.useState(null),[b,O]=w.useState(!1),D=ID(c),[I=!1,T]=Z0({prop:r,defaultProp:i,onChange:o}),[R,P]=Z0({prop:s,defaultProp:a,onChange:l}),N=w.useRef(null),$=A?E||!!A.closest("form"):!0,[k,W]=w.useState(new Set),oe=Array.from(k).map(K=>K.props.value).join(";");return x.jsx(ZF,{...v,children:x.jsxs(QM,{required:g,scope:e,trigger:A,onTriggerChange:_,valueNode:y,onValueNodeChange:S,valueNodeHasChildren:b,onValueNodeHasChildrenChange:O,contentId:Km(),value:R,onValueChange:P,open:I,onOpenChange:T,dir:D,triggerPointerDownPosRef:N,disabled:p,children:[x.jsx(rd.Provider,{scope:e,children:x.jsx(YM,{scope:t.__scopeSelect,onNativeOptionAdd:w.useCallback(K=>{W(Y=>new Set(Y).add(K))},[]),onNativeOptionRemove:w.useCallback(K=>{W(Y=>{const M=new Set(Y);return M.delete(K),M})},[]),children:n})}),$?x.jsxs(wC,{"aria-hidden":!0,required:g,tabIndex:-1,name:d,autoComplete:f,value:R,onChange:K=>P(K.target.value),disabled:p,form:E,children:[R===void 0?x.jsx("option",{value:""}):null,Array.from(k)]},oe):null]})})};QS.displayName=nl;var YS="SelectTrigger",XS=w.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,o=od(n),s=ri(YS,n),a=s.disabled||r,l=ut(e,s.onTriggerChange),c=id(n),d=w.useRef("touch"),[f,p,g]=xC(v=>{const A=c().filter(S=>!S.disabled),_=A.find(S=>S.value===s.value),y=EC(A,v,_);y!==void 0&&s.onValueChange(y.value)}),E=v=>{a||(s.onOpenChange(!0),g()),v&&(s.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return x.jsx(eM,{asChild:!0,...o,children:x.jsx(Ve.button,{type:"button",role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":_C(s.value)?"":void 0,...i,ref:l,onClick:Ue(i.onClick,v=>{v.currentTarget.focus(),d.current!=="mouse"&&E(v)}),onPointerDown:Ue(i.onPointerDown,v=>{d.current=v.pointerType;const A=v.target;A.hasPointerCapture(v.pointerId)&&A.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(E(v),v.preventDefault())}),onKeyDown:Ue(i.onKeyDown,v=>{const A=f.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&p(v.key),!(A&&v.key===" ")&&qM.includes(v.key)&&(E(),v.preventDefault())})})})});XS.displayName=YS;var JS="SelectValue",ZS=w.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:o,placeholder:s="",...a}=t,l=ri(JS,n),{onValueNodeHasChildrenChange:c}=l,d=o!==void 0,f=ut(e,l.onValueNodeChange);return Wt(()=>{c(d)},[c,d]),x.jsx(Ve.span,{...a,ref:f,style:{pointerEvents:"none"},children:_C(l.value)?x.jsx(x.Fragment,{children:s}):o})});ZS.displayName=JS;var JM="SelectIcon",eC=w.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return x.jsx(Ve.span,{"aria-hidden":!0,...i,ref:e,children:r||"▼"})});eC.displayName=JM;var ZM="SelectPortal",tC=t=>x.jsx(VS,{asChild:!0,...t});tC.displayName=ZM;var Oi="SelectContent",nC=w.forwardRef((t,e)=>{const n=ri(Oi,t.__scopeSelect),[r,i]=w.useState();if(Wt(()=>{i(new DocumentFragment)},[]),!n.open){const o=r;return o?Jo.createPortal(x.jsx(rC,{scope:t.__scopeSelect,children:x.jsx(rd.Slot,{scope:t.__scopeSelect,children:x.jsx("div",{children:t.children})})}),o):null}return x.jsx(iC,{...t,ref:e})});nC.displayName=Oi;var nn=10,[rC,ii]=cs(Oi),eV="SelectContentImpl",iC=w.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:o,onPointerDownOutside:s,side:a,sideOffset:l,align:c,alignOffset:d,arrowPadding:f,collisionBoundary:p,collisionPadding:g,sticky:E,hideWhenDetached:v,avoidCollisions:A,..._}=t,y=ri(Oi,n),[S,b]=w.useState(null),[O,D]=w.useState(null),I=ut(e,X=>b(X)),[T,R]=w.useState(null),[P,N]=w.useState(null),$=id(n),[k,W]=w.useState(!1),oe=w.useRef(!1);w.useEffect(()=>{if(S)return cM(S)},[S]),FD();const K=w.useCallback(X=>{const[xe,...Ye]=$().map(me=>me.ref.current),[ye]=Ye.slice(-1),fe=document.activeElement;for(const me of X)if(me===fe||(me==null||me.scrollIntoView({block:"nearest"}),me===xe&&O&&(O.scrollTop=0),me===ye&&O&&(O.scrollTop=O.scrollHeight),me==null||me.focus(),document.activeElement!==fe))return},[$,O]),Y=w.useCallback(()=>K([T,S]),[K,T,S]);w.useEffect(()=>{k&&Y()},[k,Y]);const{onOpenChange:M,triggerPointerDownPosRef:z}=y;w.useEffect(()=>{if(S){let X={x:0,y:0};const xe=ye=>{var fe,me;X={x:Math.abs(Math.round(ye.pageX)-(((fe=z.current)==null?void 0:fe.x)??0)),y:Math.abs(Math.round(ye.pageY)-(((me=z.current)==null?void 0:me.y)??0))}},Ye=ye=>{X.x<=10&&X.y<=10?ye.preventDefault():S.contains(ye.target)||M(!1),document.removeEventListener("pointermove",xe),z.current=null};return z.current!==null&&(document.addEventListener("pointermove",xe),document.addEventListener("pointerup",Ye,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",xe),document.removeEventListener("pointerup",Ye,{capture:!0})}}},[S,M,z]),w.useEffect(()=>{const X=()=>M(!1);return window.addEventListener("blur",X),window.addEventListener("resize",X),()=>{window.removeEventListener("blur",X),window.removeEventListener("resize",X)}},[M]);const[G,ee]=xC(X=>{const xe=$().filter(fe=>!fe.disabled),Ye=xe.find(fe=>fe.ref.current===document.activeElement),ye=EC(xe,X,Ye);ye&&setTimeout(()=>ye.ref.current.focus())}),ce=w.useCallback((X,xe,Ye)=>{const ye=!oe.current&&!Ye;(y.value!==void 0&&y.value===xe||ye)&&(R(X),ye&&(oe.current=!0))},[y.value]),_e=w.useCallback(()=>S==null?void 0:S.focus(),[S]),Qe=w.useCallback((X,xe,Ye)=>{const ye=!oe.current&&!Ye;(y.value!==void 0&&y.value===xe||ye)&&N(X)},[y.value]),ct=r==="popper"?Qf:oC,et=ct===Qf?{side:a,sideOffset:l,align:c,alignOffset:d,arrowPadding:f,collisionBoundary:p,collisionPadding:g,sticky:E,hideWhenDetached:v,avoidCollisions:A}:{};return x.jsx(rC,{scope:n,content:S,viewport:O,onViewportChange:D,itemRefCallback:ce,selectedItem:T,onItemLeave:_e,itemTextRefCallback:Qe,focusSelectedItem:Y,selectedItemText:P,position:r,isPositioned:k,searchRef:G,children:x.jsx(KS,{as:Go,allowPinchZoom:!0,children:x.jsx(yS,{asChild:!0,trapped:y.open,onMountAutoFocus:X=>{X.preventDefault()},onUnmountAutoFocus:Ue(i,X=>{var xe;(xe=y.trigger)==null||xe.focus({preventScroll:!0}),X.preventDefault()}),children:x.jsx(mS,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:s,onFocusOutside:X=>X.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:x.jsx(ct,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:X=>X.preventDefault(),..._,...et,onPlaced:()=>W(!0),ref:I,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:Ue(_.onKeyDown,X=>{const xe=X.ctrlKey||X.altKey||X.metaKey;if(X.key==="Tab"&&X.preventDefault(),!xe&&X.key.length===1&&ee(X.key),["ArrowUp","ArrowDown","Home","End"].includes(X.key)){let ye=$().filter(fe=>!fe.disabled).map(fe=>fe.ref.current);if(["ArrowUp","End"].includes(X.key)&&(ye=ye.slice().reverse()),["ArrowUp","ArrowDown"].includes(X.key)){const fe=X.target,me=ye.indexOf(fe);ye=ye.slice(me+1)}setTimeout(()=>K(ye)),X.preventDefault()}})})})})})})});iC.displayName=eV;var tV="SelectItemAlignedPosition",oC=w.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,o=ri(Oi,n),s=ii(Oi,n),[a,l]=w.useState(null),[c,d]=w.useState(null),f=ut(e,I=>d(I)),p=id(n),g=w.useRef(!1),E=w.useRef(!0),{viewport:v,selectedItem:A,selectedItemText:_,focusSelectedItem:y}=s,S=w.useCallback(()=>{if(o.trigger&&o.valueNode&&a&&c&&v&&A&&_){const I=o.trigger.getBoundingClientRect(),T=c.getBoundingClientRect(),R=o.valueNode.getBoundingClientRect(),P=_.getBoundingClientRect();if(o.dir!=="rtl"){const fe=P.left-T.left,me=R.left-fe,tt=I.left-me,Rt=I.width+tt,$n=Math.max(Rt,T.width),dr=window.innerWidth-nn,oi=F0(me,[nn,Math.max(nn,dr-$n)]);a.style.minWidth=Rt+"px",a.style.left=oi+"px"}else{const fe=T.right-P.right,me=window.innerWidth-R.right-fe,tt=window.innerWidth-I.right-me,Rt=I.width+tt,$n=Math.max(Rt,T.width),dr=window.innerWidth-nn,oi=F0(me,[nn,Math.max(nn,dr-$n)]);a.style.minWidth=Rt+"px",a.style.right=oi+"px"}const N=p(),$=window.innerHeight-nn*2,k=v.scrollHeight,W=window.getComputedStyle(c),oe=parseInt(W.borderTopWidth,10),K=parseInt(W.paddingTop,10),Y=parseInt(W.borderBottomWidth,10),M=parseInt(W.paddingBottom,10),z=oe+K+k+M+Y,G=Math.min(A.offsetHeight*5,z),ee=window.getComputedStyle(v),ce=parseInt(ee.paddingTop,10),_e=parseInt(ee.paddingBottom,10),Qe=I.top+I.height/2-nn,ct=$-Qe,et=A.offsetHeight/2,X=A.offsetTop+et,xe=oe+K+X,Ye=z-xe;if(xe<=Qe){const fe=N.length>0&&A===N[N.length-1].ref.current;a.style.bottom="0px";const me=c.clientHeight-v.offsetTop-v.offsetHeight,tt=Math.max(ct,et+(fe?_e:0)+me+Y),Rt=xe+tt;a.style.height=Rt+"px"}else{const fe=N.length>0&&A===N[0].ref.current;a.style.top="0px";const tt=Math.max(Qe,oe+v.offsetTop+(fe?ce:0)+et)+Ye;a.style.height=tt+"px",v.scrollTop=xe-Qe+v.offsetTop}a.style.margin=`${nn}px 0`,a.style.minHeight=G+"px",a.style.maxHeight=$+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[p,o.trigger,o.valueNode,a,c,v,A,_,o.dir,r]);Wt(()=>S(),[S]);const[b,O]=w.useState();Wt(()=>{c&&O(window.getComputedStyle(c).zIndex)},[c]);const D=w.useCallback(I=>{I&&E.current===!0&&(S(),y==null||y(),E.current=!1)},[S,y]);return x.jsx(rV,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:g,onScrollButtonChange:D,children:x.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:b},children:x.jsx(Ve.div,{...i,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});oC.displayName=tV;var nV="SelectPopperPosition",Qf=w.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=nn,...o}=t,s=od(n);return x.jsx(tM,{...s,...o,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Qf.displayName=nV;var[rV,ig]=cs(Oi,{}),Yf="SelectViewport",sC=w.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,o=ii(Yf,n),s=ig(Yf,n),a=ut(e,o.onViewportChange),l=w.useRef(0);return x.jsxs(x.Fragment,{children:[x.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),x.jsx(rd.Slot,{scope:n,children:x.jsx(Ve.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Ue(i.onScroll,c=>{const d=c.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:p}=s;if(p!=null&&p.current&&f){const g=Math.abs(l.current-d.scrollTop);if(g>0){const E=window.innerHeight-nn*2,v=parseFloat(f.style.minHeight),A=parseFloat(f.style.height),_=Math.max(v,A);if(_<E){const y=_+g,S=Math.min(E,y),b=y-S;f.style.height=S+"px",f.style.bottom==="0px"&&(d.scrollTop=b>0?b:0,f.style.justifyContent="flex-end")}}}l.current=d.scrollTop})})})]})});sC.displayName=Yf;var aC="SelectGroup",[iV,oV]=cs(aC),sV=w.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Km();return x.jsx(iV,{scope:n,id:i,children:x.jsx(Ve.div,{role:"group","aria-labelledby":i,...r,ref:e})})});sV.displayName=aC;var lC="SelectLabel",uC=w.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=oV(lC,n);return x.jsx(Ve.div,{id:i.id,...r,ref:e})});uC.displayName=lC;var gc="SelectItem",[aV,cC]=cs(gc),dC=w.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:o,...s}=t,a=ri(gc,n),l=ii(gc,n),c=a.value===r,[d,f]=w.useState(o??""),[p,g]=w.useState(!1),E=ut(e,y=>{var S;return(S=l.itemRefCallback)==null?void 0:S.call(l,y,r,i)}),v=Km(),A=w.useRef("touch"),_=()=>{i||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return x.jsx(aV,{scope:n,value:r,disabled:i,textId:v,isSelected:c,onItemTextChange:w.useCallback(y=>{f(S=>S||((y==null?void 0:y.textContent)??"").trim())},[]),children:x.jsx(rd.ItemSlot,{scope:n,value:r,disabled:i,textValue:d,children:x.jsx(Ve.div,{role:"option","aria-labelledby":v,"data-highlighted":p?"":void 0,"aria-selected":c&&p,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...s,ref:E,onFocus:Ue(s.onFocus,()=>g(!0)),onBlur:Ue(s.onBlur,()=>g(!1)),onClick:Ue(s.onClick,()=>{A.current!=="mouse"&&_()}),onPointerUp:Ue(s.onPointerUp,()=>{A.current==="mouse"&&_()}),onPointerDown:Ue(s.onPointerDown,y=>{A.current=y.pointerType}),onPointerMove:Ue(s.onPointerMove,y=>{var S;A.current=y.pointerType,i?(S=l.onItemLeave)==null||S.call(l):A.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ue(s.onPointerLeave,y=>{var S;y.currentTarget===document.activeElement&&((S=l.onItemLeave)==null||S.call(l))}),onKeyDown:Ue(s.onKeyDown,y=>{var b;((b=l.searchRef)==null?void 0:b.current)!==""&&y.key===" "||(GM.includes(y.key)&&_(),y.key===" "&&y.preventDefault())})})})})});dC.displayName=gc;var Hs="SelectItemText",hC=w.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...o}=t,s=ri(Hs,n),a=ii(Hs,n),l=cC(Hs,n),c=XM(Hs,n),[d,f]=w.useState(null),p=ut(e,_=>f(_),l.onItemTextChange,_=>{var y;return(y=a.itemTextRefCallback)==null?void 0:y.call(a,_,l.value,l.disabled)}),g=d==null?void 0:d.textContent,E=w.useMemo(()=>x.jsx("option",{value:l.value,disabled:l.disabled,children:g},l.value),[l.disabled,l.value,g]),{onNativeOptionAdd:v,onNativeOptionRemove:A}=c;return Wt(()=>(v(E),()=>A(E)),[v,A,E]),x.jsxs(x.Fragment,{children:[x.jsx(Ve.span,{id:l.textId,...o,ref:p}),l.isSelected&&s.valueNode&&!s.valueNodeHasChildren?Jo.createPortal(o.children,s.valueNode):null]})});hC.displayName=Hs;var fC="SelectItemIndicator",pC=w.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return cC(fC,n).isSelected?x.jsx(Ve.span,{"aria-hidden":!0,...r,ref:e}):null});pC.displayName=fC;var Xf="SelectScrollUpButton",mC=w.forwardRef((t,e)=>{const n=ii(Xf,t.__scopeSelect),r=ig(Xf,t.__scopeSelect),[i,o]=w.useState(!1),s=ut(e,r.onScrollButtonChange);return Wt(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;o(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?x.jsx(yC,{...t,ref:s,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});mC.displayName=Xf;var Jf="SelectScrollDownButton",gC=w.forwardRef((t,e)=>{const n=ii(Jf,t.__scopeSelect),r=ig(Jf,t.__scopeSelect),[i,o]=w.useState(!1),s=ut(e,r.onScrollButtonChange);return Wt(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<c;o(d)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?x.jsx(yC,{...t,ref:s,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});gC.displayName=Jf;var yC=w.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,o=ii("SelectScrollButton",n),s=w.useRef(null),a=id(n),l=w.useCallback(()=>{s.current!==null&&(window.clearInterval(s.current),s.current=null)},[]);return w.useEffect(()=>()=>l(),[l]),Wt(()=>{var d;const c=a().find(f=>f.ref.current===document.activeElement);(d=c==null?void 0:c.ref.current)==null||d.scrollIntoView({block:"nearest"})},[a]),x.jsx(Ve.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:Ue(i.onPointerDown,()=>{s.current===null&&(s.current=window.setInterval(r,50))}),onPointerMove:Ue(i.onPointerMove,()=>{var c;(c=o.onItemLeave)==null||c.call(o),s.current===null&&(s.current=window.setInterval(r,50))}),onPointerLeave:Ue(i.onPointerLeave,()=>{l()})})}),lV="SelectSeparator",vC=w.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return x.jsx(Ve.div,{"aria-hidden":!0,...r,ref:e})});vC.displayName=lV;var Zf="SelectArrow",uV=w.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=od(n),o=ri(Zf,n),s=ii(Zf,n);return o.open&&s.position==="popper"?x.jsx(nM,{...i,...r,ref:e}):null});uV.displayName=Zf;function _C(t){return t===""||t===void 0}var wC=w.forwardRef((t,e)=>{const{value:n,...r}=t,i=w.useRef(null),o=ut(e,i),s=oM(n);return w.useEffect(()=>{const a=i.current,l=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==n&&d){const f=new Event("change",{bubbles:!0});d.call(a,n),a.dispatchEvent(f)}},[s,n]),x.jsx(jS,{asChild:!0,children:x.jsx("select",{...r,ref:o,defaultValue:n})})});wC.displayName="BubbleSelect";function xC(t){const e=or(t),n=w.useRef(""),r=w.useRef(0),i=w.useCallback(s=>{const a=n.current+s;e(a),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),o=w.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return w.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,o]}function EC(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,o=n?t.indexOf(n):-1;let s=cV(t,Math.max(o,0));i.length===1&&(s=s.filter(c=>c!==n));const l=s.find(c=>c.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function cV(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var dV=QS,TC=XS,hV=ZS,fV=eC,pV=tC,SC=nC,mV=sC,CC=uC,IC=dC,gV=hC,yV=pC,AC=mC,RC=gC,PC=vC;const vV=dV,_V=hV,kC=w.forwardRef(({className:t,children:e,...n},r)=>x.jsxs(TC,{ref:r,className:ze("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,x.jsx(fV,{asChild:!0,children:x.jsx(hS,{className:"h-4 w-4 opacity-50"})})]}));kC.displayName=TC.displayName;const bC=w.forwardRef(({className:t,...e},n)=>x.jsx(AC,{ref:n,className:ze("flex cursor-default items-center justify-center py-1",t),...e,children:x.jsx(wD,{className:"h-4 w-4"})}));bC.displayName=AC.displayName;const NC=w.forwardRef(({className:t,...e},n)=>x.jsx(RC,{ref:n,className:ze("flex cursor-default items-center justify-center py-1",t),...e,children:x.jsx(hS,{className:"h-4 w-4"})}));NC.displayName=RC.displayName;const $C=w.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>x.jsx(pV,{children:x.jsxs(SC,{ref:i,className:ze("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-white text-gray-900 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[x.jsx(bC,{}),x.jsx(mV,{className:ze("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),x.jsx(NC,{})]})}));$C.displayName=SC.displayName;const wV=w.forwardRef(({className:t,...e},n)=>x.jsx(CC,{ref:n,className:ze("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));wV.displayName=CC.displayName;const pi=w.forwardRef(({className:t,children:e,...n},r)=>x.jsxs(IC,{ref:r,className:ze("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[x.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:x.jsx(yV,{children:x.jsx(_D,{className:"h-4 w-4"})})}),x.jsx(gV,{children:e})]}));pi.displayName=IC.displayName;const xV=w.forwardRef(({className:t,...e},n)=>x.jsx(PC,{ref:n,className:ze("-mx-1 my-1 h-px bg-muted",t),...e}));xV.displayName=PC.displayName;const Q={LONG_CALL:"LONG_CALL",COVERED_CALL:"COVERED_CALL",CASH_SECURED_PUT:"CASH_SECURED_PUT",COLLAR_STRATEGY:"COLLAR_STRATEGY",OPTIONS_THEORY:"OPTIONS_THEORY",PROTECTIVE_PUT:"PROTECTIVE_PUT"},Zi={[Q.LONG_CALL]:"Long Call",[Q.COVERED_CALL]:"Covered Call",[Q.CASH_SECURED_PUT]:"Cash Secured Put",[Q.COLLAR_STRATEGY]:"Collar Strategy",[Q.OPTIONS_THEORY]:"Options Theory",[Q.PROTECTIVE_PUT]:"Protective Put"},EV={[Q.LONG_CALL]:"Learn how to profit from stock price increases with limited risk using long call options.",[Q.COVERED_CALL]:"Learn how to generate income by selling call options against stock you own.",[Q.CASH_SECURED_PUT]:"Selling the Cash Secured Put obligates you to buy stock at strike price if the option is assigned.",[Q.COLLAR_STRATEGY]:"Protect stock positions while generating income through a combined put and call strategy.",[Q.OPTIONS_THEORY]:"Learn Stock Options",[Q.PROTECTIVE_PUT]:"Purchasing a protective put gives you the right to sell stock you already own at strike price."},TV=({selectedStrategy:t,onStrategyChange:e})=>{const{isPremium:n}=Wm();return x.jsxs("div",{className:"space-y-4",children:[x.jsx("div",{className:"flex flex-col space-y-2",children:x.jsxs(vV,{value:t,onValueChange:r=>e(r),children:[x.jsx(kC,{className:"w-[280px]",children:x.jsx(_V,{placeholder:"Select a strategy"})}),x.jsxs($C,{children:[x.jsx(pi,{value:Q.OPTIONS_THEORY,children:Zi[Q.OPTIONS_THEORY]}),x.jsx(pi,{value:Q.COVERED_CALL,children:Zi[Q.COVERED_CALL]}),x.jsxs(pi,{value:Q.LONG_CALL,children:[Zi[Q.LONG_CALL]," ",!n&&"(Premium)"]}),x.jsxs(pi,{value:Q.CASH_SECURED_PUT,children:[Zi[Q.CASH_SECURED_PUT]," ",!n&&"(Premium)"]}),x.jsxs(pi,{value:Q.PROTECTIVE_PUT,children:[Zi[Q.PROTECTIVE_PUT]," ",!n&&"(Premium)"]}),x.jsxs(pi,{value:Q.COLLAR_STRATEGY,children:[Zi[Q.COLLAR_STRATEGY]," ",!n&&"(Premium)"]})]})]})}),t&&x.jsx("p",{className:"text-sm text-gray-600",children:EV[t]})]})},SV=()=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",className:"w-4 h-4 mr-2",children:[x.jsx("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),x.jsx("path",{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"}),x.jsx("path",{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}),x.jsx("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"}),x.jsx("path",{fill:"none",d:"M0 0h48v48H0z"})]}),CV=()=>{const{user:t,signInWithGoogle:e,logout:n}=ss();return x.jsx("div",{className:"flex items-center gap-4",children:t?x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("img",{src:t.photoURL,alt:t.displayName,className:"w-8 h-8 rounded-full"}),x.jsx("span",{className:"text-sm text-gray-700",children:t.displayName}),x.jsx(Ni,{onClick:n,variant:"outline",className:"text-sm",children:"Logout"})]}):x.jsxs(Ni,{onClick:e,className:"bg-white text-gray-600 border border-gray-300 hover:bg-gray-50",children:[x.jsx(SV,{}),"Sign in with Google"]})})},IV=async(t,e,n,r,i)=>{try{const o=QO(zm,"scores");await cL(o,{userId:t,score:e,totalQuestions:n,symbol:r,date:new Date,tradeDate:i})}catch(o){throw console.error("Error saving score:",o),o}},OC=w.forwardRef(({className:t,type:e,...n},r)=>x.jsx("input",{type:e,className:ze("flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));OC.displayName="Input";var AV="Label",LC=w.forwardRef((t,e)=>x.jsx(Ve.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));LC.displayName=AV;var DC=LC;const FC=w.forwardRef(({className:t,...e},n)=>x.jsx(DC,{ref:n,className:ze("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",t),...e}));FC.displayName=DC.displayName;const ds=t=>{const e=[...t];for(let n=e.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[e[n],e[r]]=[e[r],e[n]]}return e},RV=(t,e,n,r,i,o,s)=>{const a=parseFloat(t),l=parseFloat(e),c=parseFloat(n),d=parseFloat(i),f=l+c,p=c*100,g=a*1.1,E=a*.9;return[{id:1,question:`If ${r} rises to $${g.toFixed(2)} (10% increase) before expiration, what would be your profit?`,options:[{text:`$${((g-l)*100-p).toFixed(2)}`,isCorrect:!0},{text:`$${p.toFixed(2)}`,isCorrect:!1},{text:`$${((g-l)*100).toFixed(2)}`,isCorrect:!1},{text:`$${((g-a)*100).toFixed(2)}`,isCorrect:!1}],explanation:`At $${g.toFixed(2)}, the profit is: (Stock Price - Strike Price) × 100 shares - Premium Paid = ($${g.toFixed(2)} - $${l.toFixed(2)}) × 100 - $${p.toFixed(2)} = $${((g-l)*100-p).toFixed(2)}`},{id:2,question:`If ${r} drops to $${E.toFixed(2)} (10% decrease), what is your maximum loss?`,options:[{text:`$${((a-E)*100).toFixed(2)}`,isCorrect:!1},{text:`$${p.toFixed(2)}`,isCorrect:!0},{text:`$${(a*100).toFixed(2)}`,isCorrect:!1},{text:`$${((l-E)*100).toFixed(2)}`,isCorrect:!1}],explanation:`With a long call option, your maximum loss is limited to the premium paid ($${p.toFixed(2)}), no matter how low the stock price goes.`},{id:3,question:`For your ${r} call option, what is the break-even stock price at expiration?`,options:[{text:`$${a.toFixed(2)} (Current Price)`,isCorrect:!1},{text:`$${l.toFixed(2)} (Strike Price)`,isCorrect:!1},{text:`$${f.toFixed(2)} (Strike + Premium)`,isCorrect:!0},{text:`$${(l-c).toFixed(2)}`,isCorrect:!1}],explanation:`Break-even price at expiration = Strike Price + Premium per share = $${l.toFixed(2)} + $${c.toFixed(2)} = $${f.toFixed(2)}`},{id:4,question:`With ${r} currently at $${a.toFixed(2)}, what happens if the stock expires exactly at the strike price of $${l.toFixed(2)}?`,options:[{text:"You break even",isCorrect:!1},{text:`You lose $${p.toFixed(2)} (the premium paid)`,isCorrect:!0},{text:`You lose $${(p/2).toFixed(2)}`,isCorrect:!1},{text:"You make a small profit",isCorrect:!1}],explanation:`At expiration, if the stock price equals the strike price, the option expires at-the-money and worthless. You lose the entire premium paid ($${p.toFixed(2)}).`},{id:5,question:`On ${o}, ${r} closed at $${i}. What was your actual profit/loss on this trade?`,options:[{text:d>l?`Profit of $${((d-l)*100-p).toFixed(2)}`:`Loss of $${p.toFixed(2)}`,isCorrect:!0},{text:d>a?`Profit of $${((d-a)*100).toFixed(2)}`:`Loss of $${((a-d)*100).toFixed(2)}`,isCorrect:!1},{text:d>l?`Profit of $${((d-l)*100).toFixed(2)}`:`Loss of $${((l-d)*100).toFixed(2)}`,isCorrect:!1},{text:`Profit of $${p.toFixed(2)}`,isCorrect:!1}],explanation:d>l?`The stock closed above the strike price ($${l.toFixed(2)}), so your call option was in-the-money. Your profit calculation is:
           1. Option value at expiration = (Final Price - Strike Price) × 100 shares
           2. Option value = ($${d.toFixed(2)} - $${l.toFixed(2)}) × 100 = $${((d-l)*100).toFixed(2)}
           3. Final P/L = Option value - Premium paid
           4. P/L = $${((d-l)*100).toFixed(2)} - $${p.toFixed(2)} = $${((d-l)*100-p).toFixed(2)}`:`The stock closed below the strike price ($${l.toFixed(2)}), so your call option expired worthless (out-of-the-money). In this case, you lose the entire premium paid: -$${p.toFixed(2)}. This is the maximum loss possible on a long call option.`},{id:6,question:`Between ${s} and ${o}, ${r} moved from $${a} to $${i}. What was your return on investment (ROI) for this call option trade?`,options:[{text:d>l?`Gain of ${(((d-l)*100-p)/p*100).toFixed(2)}% (based on premium invested)`:"Loss of 100% (total premium lost)",isCorrect:!0},{text:`${((d-a)/a*100).toFixed(2)}% (stock price return)`,isCorrect:!1},{text:d>l?`Gain of ${((d-l)/l*100).toFixed(2)}% (from strike price)`:`Loss of ${((l-d)/l*100).toFixed(2)}% (from strike price)`,isCorrect:!1},{text:d>l?`Gain of ${((d-a)/p*100).toFixed(2)}% (price change / premium)`:`Loss of ${((a-d)/p*100).toFixed(2)}% (price change / premium)`,isCorrect:!1}],explanation:d>l?`ROI = (Profit / Premium Paid) × 100. With final value of $${((d-l)*100).toFixed(2)} and premium paid of $${p.toFixed(2)}, your ROI is ${(((d-l)*100-p)/p*100).toFixed(2)}%.`:`Since the option expired worthless, you lost your entire premium of $${p.toFixed(2)}, resulting in an ROI of -100%.`},{id:7,question:`Your ${r} long call with strike $${l.toFixed(2)} has gained value. The stock is at $${(l*1.15).toFixed(2)}, and your option can be sold for $${(l*.18).toFixed(2)} (original premium paid: $${c.toFixed(2)}). Should you close early?`,options:[{text:`Yes, lock in a profit of $${((l*.18-c)*100).toFixed(2)} now rather than risk time decay`,isCorrect:!0},{text:"No, hold until expiration for maximum profit potential",isCorrect:!1},{text:`No, wait for the stock to reach $${(l*1.25).toFixed(2)} first`,isCorrect:!1},{text:"Exercise the option immediately to own the shares",isCorrect:!1}],explanation:`With the option showing a profit of $${((l*.18-c)*100).toFixed(2)} (($${(l*.18).toFixed(2)} - $${c.toFixed(2)}) × 100), it's often wise to close early. This locks in gains and avoids theta decay, especially if implied volatility is high. Remember: you don't need to hold options to expiration to profit.`},{id:8,question:`Your ${r} call option has lost value, with the stock dropping to $${E.toFixed(2)}. The option now trades at $${(c*.4).toFixed(2)} (original premium: $${c.toFixed(2)}). What's the best action?`,options:[{text:`Sell the option to salvage $${(c*.4*100).toFixed(2)} of your initial investment`,isCorrect:!0},{text:"Hold until expiration hoping for recovery",isCorrect:!1},{text:"Buy another call to average down your cost",isCorrect:!1},{text:`Exercise the option to buy shares at $${l.toFixed(2)}`,isCorrect:!1}],explanation:`When a long call moves significantly out-of-the-money, selling to salvage remaining value ($${(c*.4*100).toFixed(2)}) can be prudent. This reduces your maximum loss from $${(c*100).toFixed(2)} to $${((c-c*.4)*100).toFixed(2)} and frees up capital for other opportunities.`},{id:9,question:`Your ${r} call has doubled in value due to increased volatility, trading at $${(c*2).toFixed(2)} (cost basis: $${c.toFixed(2)}). The stock price is still near $${(a*1.02).toFixed(2)}. What should you consider?`,options:[{text:`Sell the call to profit from the volatility spike, potential gain: $${(c*100).toFixed(2)}`,isCorrect:!0},{text:"Hold the position since the stock hasn't moved much",isCorrect:!1},{text:"Buy more calls at the higher premium",isCorrect:!1},{text:"Exercise the option early",isCorrect:!1}],explanation:`When implied volatility causes your option to double in value without significant stock movement, it's often profitable to sell. You're capturing $${(c*100).toFixed(2)} profit from volatility expansion alone, which could decrease even if the stock moves favorably later.`},{id:10,question:`You bought a ${r} $${l.toFixed(2)} call for $${c.toFixed(2)}. Now the stock is at $${(l*1.1).toFixed(2)}, and a major earnings report is coming. The call is worth $${(c*1.8).toFixed(2)}. What's the strategic consideration?`,options:[{text:`Sell before earnings to lock in $${((c*1.8-c)*100).toFixed(2)} profit and avoid earnings volatility risk`,isCorrect:!0},{text:"Hold through earnings for potentially larger gains",isCorrect:!1},{text:"Exercise the option before earnings",isCorrect:!1},{text:"Buy more calls to increase potential earnings gains",isCorrect:!1}],explanation:`With a profit of $${((c*1.8-c)*100).toFixed(2)} before earnings, selling is often prudent. Earnings events can cause dramatic moves in both stock price and volatility. Even if the stock rises, your option could lose value if implied volatility drops post-earnings (volatility crush).`}]},PV=(t,e,n,r,i,o,s)=>(console.log("Generating questions with:",{stockPrice:t,strikePrice:e,premium:n,symbol:r,futurePrice:i,expirationDate:o,selectedDate:s}),RV(t,e,n,r,i,o,s).map(l=>{const c=ds(l.options),d=c.findIndex(f=>f.isCorrect);return{id:l.id,question:l.question,options:c.map(f=>f.text),correctAnswer:d,explanation:l.explanation}})),kV=(t,e,n,r,i,o,s)=>{const a=parseFloat(t),l=parseFloat(e),c=parseFloat(n),d=parseFloat(i),f=a*1.1,p=a*.9,g=c*.3,E=(c-g)*100;return[{id:1,question:`For a covered call on ${r}, you own 100 shares at $${a} and sell a $${l} call for $${c} premium. What's your maximum profit if the stock is called away?`,options:[{text:`$${((l-a)*100+c*100).toFixed(2)}`,isCorrect:!0},{text:`$${(c*100).toFixed(2)}`,isCorrect:!1},{text:`$${((l-a)*100).toFixed(2)}`,isCorrect:!1},{text:`$${(l*100).toFixed(2)}`,isCorrect:!1}],explanation:`Maximum profit = (Strike Price - Purchase Price) × 100 + Premium = ($${l} - $${a}) × 100 + $${(c*100).toFixed(2)} = $${((l-a)*100+c*100).toFixed(2)}`},{id:2,question:`You bought ${r} at $${a} and sold a $${l} call for $${c} premium. If ${r} drops to $${(a*.8).toFixed(2)} at expiration, what's your actual loss per share compared to just holding the stock?`,options:[{text:`$${(a*.8-(a-c)).toFixed(2)} loss with covered call vs $${(a*.8-a).toFixed(2)} loss with stock only`,isCorrect:!0},{text:`$${(a*.8-a).toFixed(2)} loss for both strategies`,isCorrect:!1},{text:`$${c.toFixed(2)} profit with covered call vs $${(a*.8-a).toFixed(2)} loss with stock only`,isCorrect:!1},{text:`$${(a-a*.8).toFixed(2)} loss for both strategies`,isCorrect:!1}],explanation:`With a covered call, your cost basis is reduced from $${a} to $${(a-c).toFixed(2)} due to the premium received. At $${(a*.8).toFixed(2)}, your actual loss is $${(a*.8-(a-c)).toFixed(2)} per share. Without the covered call, you would lose $${(a*.8-a).toFixed(2)} per share. The premium received ($${c}) provides this much downside protection.`},{id:3,question:`If ${r} rises to $${d.toFixed(2)} by ${o}, what happens to your covered call position?`,options:[{text:`Your shares will be called away at $${l.toFixed(2)}, and you'll keep the $${(c*100).toFixed(2)} premium`,isCorrect:d>l},{text:`The option expires worthless, and you keep your shares and the $${(c*100).toFixed(2)} premium`,isCorrect:d<=l},{text:"You must buy back the option at a loss",isCorrect:!1},{text:"You can exercise your option",isCorrect:!1}],explanation:d>l?`Since the stock price ($${d.toFixed(2)}) is above the strike price ($${l.toFixed(2)}), your shares will be called away, but you keep the premium.`:`Since the stock price ($${d.toFixed(2)}) is below the strike price ($${l.toFixed(2)}), the option expires worthless and you keep both shares and premium.`},{id:4,question:`On ${s}, what's your break-even price point for this covered call position in ${r}?`,options:[{text:`$${(a-c).toFixed(2)}`,isCorrect:!0},{text:`$${a.toFixed(2)}`,isCorrect:!1},{text:`$${l.toFixed(2)}`,isCorrect:!1},{text:`$${(l+c).toFixed(2)}`,isCorrect:!1}],explanation:`Break-even = Stock Purchase Price - Premium Received = $${a.toFixed(2)} - $${c.toFixed(2)} = $${(a-c).toFixed(2)}`},{id:5,question:`What's your maximum potential loss on this ${r} covered call position?`,options:[{text:`$${((a-c)*100).toFixed(2)}`,isCorrect:!0},{text:`$${(c*100).toFixed(2)}`,isCorrect:!1},{text:`$${(a*100).toFixed(2)}`,isCorrect:!1},{text:"Unlimited loss",isCorrect:!1}],explanation:`Maximum loss occurs if stock goes to zero: (Stock price - Premium) × 100 = ($${a.toFixed(2)} - $${c.toFixed(2)}) × 100 = $${((a-c)*100).toFixed(2)}. The premium received reduces your potential loss.`},{id:6,question:`If ${r} changes from $${a.toFixed(2)} to $${Math.min(l-.01,f).toFixed(2)} (below the $${l} strike price), compare your returns: holding 100 shares versus a covered call strategy that collects $${(c*100).toFixed(2)} premium.`,options:[{text:`Stock only: $${((Math.min(l-.01,f)-a)*100).toFixed(2)} profit vs. Covered Call: $${((Math.min(l-.01,f)-a)*100+c*100).toFixed(2)} profit`,isCorrect:!0},{text:`Both strategies would earn $${((Math.min(l-.01,f)-a)*100).toFixed(2)}`,isCorrect:!1},{text:`Stock only: $${((Math.min(l-.01,f)-a)*100).toFixed(2)} profit vs. Covered Call: $${(c*100).toFixed(2)} profit`,isCorrect:!1},{text:`Stock only: $${(Math.min(l-.01,f)*100).toFixed(2)} profit vs. Covered Call: $${(l*100+c*100).toFixed(2)} profit`,isCorrect:!1}],explanation:`With stock only, your profit is the price increase: ($${Math.min(l-.01,f).toFixed(2)} - $${a.toFixed(2)}) × 100 = $${((Math.min(l-.01,f)-a)*100).toFixed(2)}. With a covered call, you keep both this stock appreciation AND the premium collected: $${((Math.min(l-.01,f)-a)*100).toFixed(2)} + $${(c*100).toFixed(2)} = $${((Math.min(l-.01,f)-a)*100+c*100).toFixed(2)}. This shows how covered calls can enhance returns when the stock price rises but stays below the strike price.`},{id:7,question:`${r} drops to $${p.toFixed(2)} halfway to expiration, and your sold call is now worth $${g.toFixed(2)}. Should you consider buying back the call?`,options:[{text:`Yes, buy it back and save $${E.toFixed(2)} in premium, potentially reselling a new call later`,isCorrect:!0},{text:"No, keep the original position as the stock might recover",isCorrect:!1},{text:"No, the loss on the stock negates any benefit from the call",isCorrect:!1},{text:"Yes, buy it back and sell the stock immediately",isCorrect:!1}],explanation:`With the stock down significantly, the call option's value has decreased to $${g.toFixed(2)}. Buying it back saves $${E.toFixed(2)} of the original premium, and you could potentially sell another call at a lower strike price to generate new premium income.`},{id:8,question:`In the scenario where ${r} drops to $${p.toFixed(2)}, let's analyze the covered call management. You originally sold the call for $${c.toFixed(2)} (premium received = $${(c*100).toFixed(2)}) and can now buy it back for $${g.toFixed(2)} (cost = $${(g*100).toFixed(2)}). What's the return on investment (ROI) if you buy back the call?`,options:[{text:`${(E/(c*100)*100).toFixed(2)}% on the option component ($${E.toFixed(2)} profit / $${(c*100).toFixed(2)} initial premium)`,isCorrect:!0},{text:`${((p-a)/a*100).toFixed(2)}% (stock loss only: $${((p-a)*100).toFixed(2)})`,isCorrect:!1},{text:`${((p-a+c)/a*100).toFixed(2)}% (stock loss plus original premium: $${((p-a)*100+c*100).toFixed(2)})`,isCorrect:!1},{text:"0% as the loss on stock offsets option gains",isCorrect:!1}],explanation:`Let's break down the ROI calculation:
1. Original premium received: $${(c*100).toFixed(2)}
2. Buy-back cost: $${(g*100).toFixed(2)}
3. Premium saved/profit: $${E.toFixed(2)}
4. ROI = (Premium Saved / Original Premium) × 100
   = ($${E.toFixed(2)} / $${(c*100).toFixed(2)}) × 100
   = ${(E/(c*100)*100).toFixed(2)}%

While the stock position shows a loss of ${((p-a)/a*100).toFixed(2)}%, managing the option position independently has resulted in a profit on the option component.`},{id:9,question:`If you buy back the ${r} call for $${g.toFixed(2)} when the stock is at $${p.toFixed(2)}, and you believe the stock will remain range-bound between $${(p*.95).toFixed(2)} and $${(p*1.05).toFixed(2)} for the next month, what's the most appropriate action to maximize income while holding the stock?`,options:[{text:`Sell a new covered call at a lower strike price (around $${(p*1.02).toFixed(2)}) to generate additional premium while the stock trades sideways`,isCorrect:!0},{text:`Wait for the stock to recover to $${a.toFixed(2)} before selling another call, missing out on potential premium in the meantime`,isCorrect:!1},{text:`Sell the stock immediately at $${p.toFixed(2)} and take the loss`,isCorrect:!1},{text:"Buy another call option, which would increase your risk and cost basis",isCorrect:!1}],explanation:`Given the expectation of range-bound trading, selling a new covered call at a lower strike price (around $${(p*1.02).toFixed(2)}) is optimal because: 1. It generates immediate premium income to help offset the stock decline. 2. With sideways trading expected, the new premium has a high probability of being retained. 3. The lower strike price reflects the new trading range while still allowing for some upside. 4. If the stock does recover sharply, you can manage the position again by rolling up. This strategy maximizes income potential while maintaining the position in a sideways market.`},{id:10,question:`For ${r}, you bought shares at $${a.toFixed(2)} and sold a call at strike $${l.toFixed(2)} for $${c.toFixed(2)} premium. The stock rises sharply to $${(l*1.2).toFixed(2)} (20% above strike), and the call now costs $${(l*.22).toFixed(2)} to buy back. What should you do?`,options:[{text:`Buy back the call despite a $${((l*.22-c)*100).toFixed(2)} loss to capture the stock's upside potential`,isCorrect:!0},{text:`Let the shares be called away at $${l.toFixed(2)}, limiting your profit to $${((l-a+c)*100).toFixed(2)}`,isCorrect:!1},{text:`Sell the stock at $${(l*1.2).toFixed(2)} while keeping the short call open`,isCorrect:!1},{text:"Wait until expiration, since the premium received offsets any lost stock gains",isCorrect:!1}],explanation:`When a stock shows strong upward momentum, it may be worth buying back the call even at a loss. Here, letting the stock be called away limits your profit to $${((l-a+c)*100).toFixed(2)}, while buying back the call for a $${((l*.22-c)*100).toFixed(2)} loss allows you to capture all future gains above $${(l*1.2).toFixed(2)}. The loss on the call could be recovered by just a small additional move higher in the stock.`}]},bV=(t,e,n,r,i,o,s)=>(console.log("Generating questions with:",{stockPrice:t,strikePrice:e,premium:n,symbol:r,futurePrice:i,expirationDate:o,selectedDate:s}),kV(t,e,n,r,i,o,s).map(l=>{const c=ds(l.options),d=c.findIndex(f=>f.isCorrect);return{id:l.id,question:l.question,options:c.map(f=>f.text),correctAnswer:d,explanation:l.explanation}})),NV=(t,e,n,r,i,o,s)=>{const a=parseFloat(t),l=parseFloat(e),c=parseFloat(n),d=parseFloat(i),f=l+c,p=100,g=c*p;return[{id:1,question:`For ${r} trading at $${a}, which best describes your rights if you buy a call option with strike price $${l}?`,options:[{text:`Right to buy ${r} at $${l} regardless of how high the stock price goes`,isCorrect:!0},{text:`Obligation to buy ${r} at $${l} if the stock goes up`,isCorrect:!1},{text:`Right to sell ${r} at $${l} if the stock goes down`,isCorrect:!1},{text:`Right to buy ${r} at $${a} anytime before expiration`,isCorrect:!1}],explanation:`When buying a call option on ${r}, you have the right (but not obligation) to buy the stock at the strike price of $${l}, even if the stock price rises significantly above this level. Your maximum loss is limited to the premium paid of $${g.toFixed(2)}.`},{id:2,question:`If ${r} is trading at $${a} now, when would the $${l} call option be considered in-the-money (ITM)?`,options:[{text:`When ${r} trades above $${l}`,isCorrect:!0},{text:`When ${r} trades below $${l}`,isCorrect:!1},{text:`When ${r} trades exactly at $${l}`,isCorrect:!1},{text:`When ${r} trades above $${f.toFixed(2)}`,isCorrect:!1}],explanation:`A call option is in-the-money when the stock price is above the strike price. For this ${r} option, any price above $${l} means the option has intrinsic value, though you need the price above $${f.toFixed(2)} to be profitable after considering the premium paid.`},{id:3,question:`Given the $${n} premium for this ${r} option, what's the break-even price at expiration?`,options:[{text:`$${f.toFixed(2)}`,isCorrect:!0},{text:`$${l}`,isCorrect:!1},{text:`$${a}`,isCorrect:!1},{text:`$${(l-c).toFixed(2)}`,isCorrect:!1}],explanation:`The break-even price for a call option at expiration is the strike price ($${l}) plus the premium paid per share ($${n}), which equals $${f.toFixed(2)}. At this price, the intrinsic value exactly equals the premium paid.`},{id:4,question:`If you sell a put option on ${r} with a $${l} strike price, what is your obligation?`,options:[{text:`To buy ${r} at $${l} if assigned, requiring $${(l*p).toFixed(2)} in cash`,isCorrect:!0},{text:`To sell ${r} at $${l} if the stock price rises`,isCorrect:!1},{text:`To pay the difference if ${r} falls below $${l}`,isCorrect:!1},{text:`To buy ${r} at the market price if assigned`,isCorrect:!1}],explanation:`When selling a put option on ${r}, you are obligated to buy 100 shares at the strike price ($${l}) if assigned, requiring $${(l*p).toFixed(2)} in cash. This is true regardless of how low the stock price might fall.`},{id:5,question:`For the ${r} option expiring on ${o}, what happens to the time value portion of the $${n} premium as we approach expiration?`,options:[{text:"Time value consistently decreases as expiration approaches",isCorrect:!0},{text:"Time value increases as expiration approaches",isCorrect:!1},{text:"Time value stays constant until expiration day",isCorrect:!1},{text:"Time value fluctuates randomly until expiration",isCorrect:!1}],explanation:`The time value portion of your $${n} premium will decay (decrease) as we approach the ${o} expiration, with the decay accelerating in the final weeks. At expiration, only intrinsic value (if any) remains.`},{id:6,question:`If implied volatility increases after you buy the ${r} $${l} call option for $${n}, what typically happens to the option's price?`,options:[{text:"The option's price typically increases",isCorrect:!0},{text:"The option's price typically decreases",isCorrect:!1},{text:"The option's price remains unchanged",isCorrect:!1},{text:"The option's intrinsic value changes",isCorrect:!1}],explanation:`An increase in implied volatility typically increases the option's price, assuming all other factors remain constant. This would increase the time value portion of your ${r} option above the initial $${n} premium paid.`},{id:7,question:`What is the maximum possible loss when buying this ${r} call option with $${l} strike price?`,options:[{text:`$${g.toFixed(2)} (the total premium paid)`,isCorrect:!0},{text:`$${(l*p).toFixed(2)} (the strike price value)`,isCorrect:!1},{text:`$${(a*p).toFixed(2)} (the current stock value)`,isCorrect:!1},{text:"Unlimited loss potential",isCorrect:!1}],explanation:`When buying this call option on ${r}, your maximum loss is limited to the total premium paid of $${g.toFixed(2)} ($${n} × 100 shares). This occurs if the stock is below $${l} at expiration.`},{id:8,question:`On ${o}, ${r} closed at $${i}. What term describes the $${l} call option's status?`,options:[{text:d>l?"In-the-money (ITM)":d<l?"Out-of-the-money (OTM)":"At-the-money (ATM)",isCorrect:!0},{text:d>l?"Out-of-the-money (OTM)":"In-the-money (ITM)",isCorrect:!1},{text:"Equal-to-the-money",isCorrect:!1},{text:d>f?"Profitable":"Unprofitable",isCorrect:!1}],explanation:`With ${r} closing at $${i} and the strike at $${l}, the option was ${d>l?"in-the-money by $"+(d-l).toFixed(2)+" per share":d<l?"out-of-the-money by $"+(l-d).toFixed(2)+" per share":"exactly at-the-money"}.`},{id:9,question:`From ${s} to ${o}, ${r} moved from $${a} to $${i}. What was the better choice?`,options:[{text:(()=>{const E=(d-a)*p,v=d>l?(d-l-c)*p:-g;return Math.abs(E)<Math.abs(v)||E>v?`Buying the stock directly (${E>=0?"profit":"loss"}: $${Math.abs(E).toFixed(2)})`:`Buying the call option (${v>=0?"profit":"loss"}: $${Math.abs(v).toFixed(2)})`})(),isCorrect:!0},{text:(()=>{const E=(d-a)*p,v=d>l?(d-l-c)*p:-g;return Math.abs(E)<Math.abs(v)||E>v?`Buying the call option (${v>=0?"profit":"loss"}: $${Math.abs(v).toFixed(2)})`:`Buying the stock directly (${E>=0?"profit":"loss"}: $${Math.abs(E).toFixed(2)})`})(),isCorrect:!1},{text:"Neither - staying in cash",isCorrect:!1},{text:"Both would have the same profit",isCorrect:!1}],explanation:`With ${r} moving from $${a} to $${i}:
    Stock P/L: ${(d-a)*p>=0?"Profit":"Loss"} of $${Math.abs((d-a)*p).toFixed(2)}
    Option P/L: ${d>l?`Profit of $${((d-l-c)*p).toFixed(2)}`:`Loss of $${g.toFixed(2)}`}
    
    In this case, ${Math.abs((d-a)*p)<Math.abs(d>l?(d-l-c)*p:-g)?"the stock position":"the options position"} had a smaller loss, making it the better choice.`},{id:10,question:`For your ${r} $${l} call option trading at $${c}, which statement best describes the impact of time value?`,options:[{text:l>a?`Since the option is out-of-the-money by $${(l-a).toFixed(2)}, time value represents 100% of the premium`:`With the option in-the-money by $${(a-l).toFixed(2)}, part of the premium is intrinsic value`,isCorrect:!0},{text:l>a?`The option has equal parts of time value and intrinsic value at $${(c/2).toFixed(2)} each`:"Time value and intrinsic value are always equal for in-the-money options",isCorrect:!1},{text:`Time value doesn't matter since expiration is ${Math.round((new Date(o)-new Date(s))/(1e3*60*60*24))} days away`,isCorrect:!1},{text:`Time value is only relevant if the stock price exceeds $${(a*1.1).toFixed(2)}`,isCorrect:!1}],explanation:l>a?`With ${r} at $${a} and the strike at $${l}, this call option is out-of-the-money. The entire premium of $${c} is time value, which will decay as expiration approaches. If the stock doesn't rise above $${l} by expiration, all time value will be lost.`:`With ${r} at $${a} and the strike at $${l}, this call has intrinsic value of $${(a-l).toFixed(2)} and time value of $${(c-(a-l)).toFixed(2)}. While intrinsic value remains as long as the stock stays above the strike, time value will decay to zero by expiration.`}]},$V=(t,e,n,r,i,o,s)=>(console.log("Generating questions with:",{stockPrice:t,strikePrice:e,premium:n,symbol:r,futurePrice:i,expirationDate:o,selectedDate:s}),NV(t,e,n,r,i,o,s).map(l=>{const c=ds(l.options),d=c.findIndex(f=>f.isCorrect);return{id:l.id,question:l.question,options:c.map(f=>f.text),correctAnswer:d,explanation:l.explanation}})),OV=(t,e,n,r,i,o,s)=>{const a=parseFloat(t),l=parseFloat(e),c=a*.9,d=parseFloat(n),f=parseFloat(n)*.8,p=parseFloat(i),g=f-d,E=l-a-g,v=a-c+g;return[{id:1,question:`You establish a collar on ${r} at $${a.toFixed(2)} by buying a put at $${c.toFixed(2)} and selling a call at $${l.toFixed(2)}. What's your maximum possible profit?`,options:[{text:`$${E.toFixed(2)}`,isCorrect:!0},{text:`$${(l-a).toFixed(2)}`,isCorrect:!1},{text:"Unlimited profit",isCorrect:!1},{text:`$${(c-a).toFixed(2)}`,isCorrect:!1}],explanation:`The maximum profit is limited to the call strike ($${l.toFixed(2)}) minus current stock price ($${a.toFixed(2)}) minus the net debit ($${g.toFixed(2)}) = $${E.toFixed(2)}`},{id:2,question:`For your ${r} collar, what is your maximum potential loss?`,options:[{text:`$${v.toFixed(2)}`,isCorrect:!0},{text:"Unlimited loss",isCorrect:!1},{text:`$${(a-c).toFixed(2)}`,isCorrect:!1},{text:`$${f.toFixed(2)}`,isCorrect:!1}],explanation:`The maximum loss is limited to the current stock price ($${a.toFixed(2)}) minus put strike ($${c.toFixed(2)}) plus the net debit ($${g.toFixed(2)}) = $${v.toFixed(2)}`},{id:3,question:`On ${r}, you paid $${f.toFixed(2)} for the put and received $${d.toFixed(2)} for the call. What was the net cost of establishing this collar?`,options:[{text:`Net debit of $${g.toFixed(2)}`,isCorrect:!0},{text:`Net credit of $${(d-f).toFixed(2)}`,isCorrect:!1},{text:`$${(f+d).toFixed(2)}`,isCorrect:!1},{text:"$0 (Zero-cost collar)",isCorrect:!1}],explanation:`The net cost is the put premium paid ($${f.toFixed(2)}) minus the call premium received ($${d.toFixed(2)}) = Net debit of $${g.toFixed(2)}`},{id:4,question:`At expiration, ${r} is at $${p.toFixed(2)}. What happened to your position?`,options:[{text:p>l?`Stock was called away at $${l.toFixed(2)}`:p<c?`Put protection kicked in at $${c.toFixed(2)}`:"Stock was retained, both options expired worthless",isCorrect:!0},{text:"You must sell the stock at market price",isCorrect:!1},{text:"You must buy more stock",isCorrect:!1},{text:"You lost both the stock and the premium",isCorrect:!1}],explanation:p>l?`Since the stock price ($${p.toFixed(2)}) exceeded the call strike ($${l.toFixed(2)}), your stock was called away at the strike price`:p<c?`Since the stock price ($${p.toFixed(2)}) fell below the put strike ($${c.toFixed(2)}), your put protection limited your losses`:`The stock price ($${p.toFixed(2)}) stayed between your put strike ($${c.toFixed(2)}) and call strike ($${l.toFixed(2)}), so both options expired worthless`},{id:5,question:`What is your profit/loss on ${r} at the current price of $${p.toFixed(2)}?`,options:[{text:`$${(p>l?E:p<c?-v:p-a-g).toFixed(2)}`,isCorrect:!0},{text:`$${(p-a).toFixed(2)}`,isCorrect:!1},{text:`$${(c-a).toFixed(2)}`,isCorrect:!1},{text:`$${g.toFixed(2)}`,isCorrect:!1}],explanation:p>l?`Stock was called away, resulting in maximum profit of $${E.toFixed(2)}`:p<c?`Put protection limited your loss to $${v.toFixed(2)}`:`Stock price movement ($${(p-a).toFixed(2)}) minus net debit ($${g.toFixed(2)}) = $${(p-a-g).toFixed(2)}`},{id:6,question:`If ${r} drops by 15% to $${(a*.85).toFixed(2)}, how does your collar compare to just owning the stock?`,options:[{text:`Collar limits loss to $${v.toFixed(2)} vs stock loss of $${(a*.15).toFixed(2)}`,isCorrect:!0},{text:"Both strategies lose the same amount",isCorrect:!1},{text:"Collar loses more due to premium paid",isCorrect:!1},{text:"Cannot be determined",isCorrect:!1}],explanation:`With just stock ownership, a 15% drop means a loss of $${(a*.15).toFixed(2)}. The collar's put strike at $${c.toFixed(2)} limits your loss to $${v.toFixed(2)}`}]},LV=(t,e,n,r,i,o,s)=>(console.log("Generating Collar Strategy questions with:",{stockPrice:t,strikePrice:e,premium:n,symbol:r,futurePrice:i,expirationDate:o,selectedDate:s}),OV(t,e,n,r,i).map(l=>{const c=ds(l.options),d=c.findIndex(f=>f.isCorrect);return{id:l.id,question:l.question,options:c.map(f=>f.text),correctAnswer:d,explanation:l.explanation}})),DV=(t,e,n,r,i,o,s)=>{const a=parseFloat(t),l=parseFloat(e),c=parseFloat(n),d=parseFloat(i),f=l-c,p=c*100,g=a*.9,E=l*100;return[{id:1,question:`You sold a cash secured put on ${r} with strike $${l} for $${c} premium. What is your break-even price?`,options:[{text:`$${f.toFixed(2)}`,isCorrect:!0},{text:`$${l.toFixed(2)}`,isCorrect:!1},{text:`$${(l+c).toFixed(2)}`,isCorrect:!1},{text:`$${a.toFixed(2)}`,isCorrect:!1}],explanation:`Break-even = Strike Price - Premium = $${l.toFixed(2)} - $${c.toFixed(2)} = $${f.toFixed(2)}. This is the price below which you start losing money if assigned.`},{id:2,question:`How much cash must you have secured for this ${r} put option?`,options:[{text:`$${E.toFixed(2)}`,isCorrect:!0},{text:`$${(E-p).toFixed(2)}`,isCorrect:!1},{text:`$${(a*100).toFixed(2)}`,isCorrect:!1},{text:`$${p.toFixed(2)}`,isCorrect:!1}],explanation:`You must secure $${E.toFixed(2)} (Strike Price × 100 shares) to cover potential assignment, regardless of the premium received.`},{id:3,question:`If ${r} drops to $${g.toFixed(2)} halfway to expiration, what's your unrealized loss if assigned?`,options:[{text:`$${((l-g-c)*100).toFixed(2)}`,isCorrect:!0},{text:`$${((l-g)*100).toFixed(2)}`,isCorrect:!1},{text:`$${p.toFixed(2)}`,isCorrect:!1},{text:`$${((a-g)*100).toFixed(2)}`,isCorrect:!1}],explanation:`Your loss would be: (Strike Price - Current Price - Premium) × 100 = ($${l.toFixed(2)} - $${g.toFixed(2)} - $${c.toFixed(2)}) × 100 = $${((l-g-c)*100).toFixed(2)}.`},{id:4,question:`${r} is now at $${g.toFixed(2)}. Should you consider closing the position early?`,options:[{text:"Yes, to avoid potential further losses if stock continues dropping",isCorrect:!0},{text:"No, always hold until expiration to keep full premium",isCorrect:!1},{text:"No, the loss is just on paper",isCorrect:!1},{text:"Yes, and sell another put at a lower strike",isCorrect:!1}],explanation:"With the stock below your strike price, closing early can prevent larger losses if the stock continues to fall. Managing risk is often more important than maximizing premium."},{id:5,question:`What's your maximum potential gain on this ${r} cash secured put?`,options:[{text:`$${p.toFixed(2)}`,isCorrect:!0},{text:`$${E.toFixed(2)}`,isCorrect:!1},{text:`$${(l*100).toFixed(2)}`,isCorrect:!1},{text:"Unlimited gain",isCorrect:!1}],explanation:`Maximum gain is limited to the premium received: $${c.toFixed(2)} × 100 shares = $${p.toFixed(2)}. This occurs if the stock stays above the strike price.`},{id:6,question:`If ${r} expires at $${d.toFixed(2)}, will you be assigned shares?`,options:[{text:`Yes, you'll buy 100 shares at $${l.toFixed(2)} per share`,isCorrect:d<l},{text:"No, you keep the premium and avoid assignment",isCorrect:d>=l},{text:"Maybe, it depends on the buyer's decision",isCorrect:!1},{text:"No, you can choose to decline assignment",isCorrect:!1}],explanation:d<l?`Since $${d.toFixed(2)} is below the strike price of $${l.toFixed(2)}, you'll be assigned and must buy 100 shares at the strike price.`:`Since $${d.toFixed(2)} is above the strike price of $${l.toFixed(2)}, the put expires worthless and you keep the full premium.`},{id:7,question:`What's your return on investment (ROI) if ${r} stays above $${l.toFixed(2)} until expiration?`,options:[{text:`${(p/E*100).toFixed(2)}%`,isCorrect:!0},{text:`${(p/(a*100)*100).toFixed(2)}%`,isCorrect:!1},{text:`${(c/l*100).toFixed(2)}%`,isCorrect:!1},{text:"100%",isCorrect:!1}],explanation:`ROI = (Premium / Cash Secured) × 100 = ($${p.toFixed(2)} / $${E.toFixed(2)}) × 100 = ${(p/E*100).toFixed(2)}%. This represents return on the cash you must set aside.`},{id:8,question:`If ${r} drops significantly below your put strike of $${l.toFixed(2)}, which action might be best?`,options:[{text:"Close the position and preserve capital",isCorrect:!0},{text:"Wait for assignment no matter what",isCorrect:!1},{text:"Sell another put at a lower strike",isCorrect:!1},{text:"Buy shares at market price",isCorrect:!1}],explanation:"When a stock drops significantly below your put strike, closing the position can prevent larger losses and free up capital for better opportunities. The premium received doesn't justify holding a losing position indefinitely."},{id:9,question:`How does your cost basis compare to the current market price if ${r} gets assigned at $${l.toFixed(2)}?`,options:[{text:`$${f.toFixed(2)} vs market price of $${d.toFixed(2)}`,isCorrect:!0},{text:`$${l.toFixed(2)} vs market price of $${d.toFixed(2)}`,isCorrect:!1},{text:`$${a.toFixed(2)} vs market price of $${d.toFixed(2)}`,isCorrect:!1},{text:`$${(l+c).toFixed(2)} vs market price of $${d.toFixed(2)}`,isCorrect:!1}],explanation:`Your effective cost basis is the strike price minus the premium received ($${f.toFixed(2)}). This is what you compare to the market price to determine your position's profit or loss.`},{id:10,question:`What percentage of your cash secured amount ($${E.toFixed(2)}) are you risking if ${r} goes to zero?`,options:[{text:`${((l-c)/l*100).toFixed(2)}%`,isCorrect:!0},{text:"100%",isCorrect:!1},{text:`${(c/l*100).toFixed(2)}%`,isCorrect:!1},{text:"0%",isCorrect:!1}],explanation:`Maximum risk is strike price minus premium ($${(l-c).toFixed(2)} per share or $${((l-c)*100).toFixed(2)} total), which is ${((l-c)/l*100).toFixed(2)}% of your secured cash. The premium received slightly reduces your total risk.`}]},FV=(t,e,n,r,i,o,s)=>(console.log("Generating Cash Secured Put questions with:",{stockPrice:t,strikePrice:e,premium:n,symbol:r,futurePrice:i,expirationDate:o,selectedDate:s}),DV(t,e,n,r,i).map(l=>{const c=ds(l.options),d=c.findIndex(f=>f.isCorrect);return{id:l.id,question:l.question,options:c.map(f=>f.text),correctAnswer:d,explanation:l.explanation}})),MV=(t,e,n,r,i,o,s)=>{const a=parseFloat(t),l=parseFloat(e),c=parseFloat(n),d=parseFloat(i),f=(a-l+c)*100,p=a*.8,g=a*1.1;return[{id:1,question:`You own 100 shares of ${r} at $${a.toFixed(2)} and buy a protective put at strike $${l.toFixed(2)} for $${c.toFixed(2)}. What's your maximum possible loss per share?`,options:[{text:`$${(a-l+c).toFixed(2)}`,isCorrect:!0},{text:`$${a.toFixed(2)}`,isCorrect:!1},{text:`$${c.toFixed(2)}`,isCorrect:!1},{text:`$${l.toFixed(2)}`,isCorrect:!1}],explanation:`Your maximum loss is limited to the difference between your stock purchase price ($${a.toFixed(2)}) and the put strike price ($${l.toFixed(2)}), plus the premium paid ($${c.toFixed(2)}). This equals $${(a-l+c).toFixed(2)} per share.`},{id:2,question:`If ${r} crashes to $${p.toFixed(2)} (20% drop), how much protection does your protective put provide?`,options:[{text:`$${((l-p)*100).toFixed(2)}`,isCorrect:!0},{text:`$${((a-p)*100).toFixed(2)}`,isCorrect:!1},{text:`$${(c*100).toFixed(2)}`,isCorrect:!1},{text:"$0.00",isCorrect:!1}],explanation:`The protective put allows you to sell at $${l.toFixed(2)} even though the market price is $${p.toFixed(2)}. This provides protection of $${((l-p)*100).toFixed(2)} for your 100 shares, offsetting much of the stock's decline.`},{id:3,question:`If ${r} rises to $${g.toFixed(2)} (10% increase), what's your net profit considering the cost of protection?`,options:[{text:`$${((g-a)*100-c*100).toFixed(2)}`,isCorrect:!0},{text:`$${((g-a)*100).toFixed(2)}`,isCorrect:!1},{text:`$${((g-l)*100).toFixed(2)}`,isCorrect:!1},{text:`$${(c*100).toFixed(2)}`,isCorrect:!1}],explanation:`Your profit is the stock's gain ($${((g-a)*100).toFixed(2)}) minus the cost of the put protection ($${(c*100).toFixed(2)}), resulting in a net profit of $${((g-a)*100-c*100).toFixed(2)}.`},{id:4,question:`When would be the most cost-effective time to buy this protective put for ${r}?`,options:[{text:"After the stock has had a significant rally and you want to protect gains",isCorrect:!0},{text:"When the stock is at its lowest point",isCorrect:!1},{text:"Right before earnings announcement",isCorrect:!1},{text:"When the stock is trending downward",isCorrect:!1}],explanation:"It's often most psychologically and financially optimal to buy protective puts after a stock has rallied. This way, you're using some of your paper profits to protect against a downturn, rather than spending additional capital when the stock is already down."},{id:5,question:`Comparing a protective put to a stop-loss order for ${r}, which statement is most accurate?`,options:[{text:"A protective put provides guaranteed protection at a specific price but costs a premium",isCorrect:!0},{text:"A stop-loss order is always more effective in a crash",isCorrect:!1},{text:"A protective put and stop-loss provide identical protection",isCorrect:!1},{text:"A stop-loss is more expensive but more reliable",isCorrect:!1}],explanation:"While a stop-loss order is free, it might execute at a much lower price if the stock gaps down overnight. A protective put guarantees your exit price regardless of how quickly the stock falls, though you pay a premium for this insurance."},{id:6,question:`What happens to your protective put strategy on ${r} if implied volatility increases significantly?`,options:[{text:"The put option becomes more valuable, offsetting some of its time decay",isCorrect:!0},{text:"The strategy becomes less effective",isCorrect:!1},{text:"There is no effect on the protective put",isCorrect:!1},{text:"The maximum loss increases",isCorrect:!1}],explanation:"An increase in implied volatility will increase the value of your put option. This is beneficial as it can help offset the negative effect of time decay and potentially allow you to sell the put for a profit if you no longer need the protection."},{id:7,question:`By ${o}, ${r} is at $${i}. What was the outcome of your protective put strategy?`,options:[{text:d>a?`Profit of $${((d-a)*100-c*100).toFixed(2)}`:d<l?`Loss limited to $${f.toFixed(2)}`:`Loss of $${((a-d)*100+c*100).toFixed(2)}`,isCorrect:!0},{text:"Loss of entire investment",isCorrect:!1},{text:"Profit equal to put premium",isCorrect:!1},{text:"Break-even regardless of stock price",isCorrect:!1}],explanation:d>a?`The stock rose, giving you a profit of $${((d-a)*100).toFixed(2)} minus the put cost of $${(c*100).toFixed(2)}.`:d<l?`The stock fell below the put strike, but your loss was limited to $${f.toFixed(2)} thanks to the protective put.`:"The stock fell but not below the put strike. Your loss is the stock decline plus the put premium."},{id:8,question:`In what market conditions would this protective put strategy on ${r} be most valuable?`,options:[{text:"During high market uncertainty or ahead of major events",isCorrect:!0},{text:"In a steadily rising market",isCorrect:!1},{text:"During low volatility periods",isCorrect:!1},{text:"When the stock is trending downward",isCorrect:!1}],explanation:"Protective puts are most valuable during periods of high uncertainty or before major events (earnings, FDA decisions, etc.) where the stock could gap down significantly. They provide insurance against sudden, sharp declines that might bypass stop-loss orders."},{id:9,question:`What's the break-even point for your ${r} position including the protective put?`,options:[{text:`$${(a+c).toFixed(2)}`,isCorrect:!0},{text:`$${a.toFixed(2)}`,isCorrect:!1},{text:`$${l.toFixed(2)}`,isCorrect:!1},{text:`$${(l+c).toFixed(2)}`,isCorrect:!1}],explanation:`Your break-even point is your stock purchase price ($${a.toFixed(2)}) plus the cost of the put protection ($${c.toFixed(2)}), or $${(a+c).toFixed(2)}. The stock needs to rise by at least the cost of the put for you to profit.`},{id:10,question:`If you're worried about a potential market correction, which strike price selection would provide the best protection for ${r}?`,options:[{text:`At-the-money strike near $${a.toFixed(2)}`,isCorrect:!0},{text:`Deep out-of-the-money strike at $${(a*.7).toFixed(2)}`,isCorrect:!1},{text:`Deep in-the-money strike at $${(a*1.3).toFixed(2)}`,isCorrect:!1},{text:"Multiple strikes at different prices",isCorrect:!1}],explanation:"An at-the-money protective put provides the best balance of cost and protection. While it's more expensive than an OTM put, it starts protecting your position immediately if the stock falls. ITM puts provide immediate protection but are unnecessarily expensive."}]},VV=(t,e,n,r,i,o,s)=>(console.log("Generating Protective Put questions with:",{stockPrice:t,strikePrice:e,premium:n,symbol:r,futurePrice:i,expirationDate:o,selectedDate:s}),MV(t,e,n,r,i,o).map(l=>{const c=ds(l.options),d=c.findIndex(f=>f.isCorrect);return{id:l.id,question:l.question,options:c.map(f=>f.text),correctAnswer:d,explanation:l.explanation}})),jV=({stockPrice:t,strikePrice:e,premium:n,symbol:r,futurePrice:i,expirationDate:o,selectedDate:s,strategy:a})=>{const{user:l}=ss(),[c,d]=w.useState(0),[f,p]=w.useState(!1),[g,E]=w.useState(null),[v,A]=w.useState(0);w.useEffect(()=>{console.log("ConceptQuiz received props:",{stockPrice:t,strikePrice:e,premium:n,symbol:r,futurePrice:i,expirationDate:o,selectedDate:s})},[t,e,n,r,i,o,s]);const _=w.useMemo(()=>{console.log("Generating questions with props:",{stockPrice:t,strikePrice:e,premium:n,symbol:r,futurePrice:i,expirationDate:o,selectedDate:s});const I=!!(t&&e&&n&&r&&i&&o&&s);if(console.log("All props available:",I),I)switch(console.log("All props available: ",I),a){case Q.LONG_CALL:return console.log("Selecting generate Long Call"),PV(t,e,n,r,i,o,s);case Q.COVERED_CALL:return console.log("Selecting Covered Call"),bV(t,e,n,r,i,o,s);case Q.OPTIONS_THEORY:return console.log("Selecting Options Theory"),$V(t,e,n,r,i,o,s);case Q.COLLAR_STRATEGY:return console.log("Selecting Collar Strategy"),LV(t,e,n,r,i,o,s);case Q.CASH_SECURED_PUT:return console.log("Selecting Cash Secured Put"),FV(t,e,n,r,i,o,s);case Q.PROTECTIVE_PUT:return console.log("Selecting Protectivated Put"),VV(t,e,n,r,i,o,s);default:return[]}return[]},[t,e,n,r,i,o,s,a]);w.useEffect(()=>{console.log("Questions array updated:",_)},[_]);const y=I=>{E(I),p(!0),I===_[c].correctAnswer&&A(v+1)},S=()=>{c<_.length-1&&(d(c+1),E(null),p(!1))},b=async()=>{if(l)try{await IV(l.uid,v,_.length,r,s)}catch(I){console.error("Error saving score:",I)}},O=()=>{d(0),E(null),p(!1),A(0)};if(w.useEffect(()=>{c===_.length-1&&f&&b()},[c,f,_.length]),_.length===0)return console.log("Rendering empty state - no questions available"),x.jsx("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:x.jsx("p",{children:"Generate a question to see practical scenarios based on real market data."})});console.log("Rendering question:",c);const D=_[c];return x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("h3",{className:"text-lg font-semibold",children:"Practice Scenarios"}),x.jsxs("span",{className:"text-sm text-blue-600",children:["Score: ",v,"/",_.length]})]}),x.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[x.jsx("p",{className:"font-medium mb-4",children:D.question}),x.jsx("div",{className:"space-y-2",children:D.options.map((I,T)=>x.jsx("button",{onClick:()=>y(T),disabled:f,className:`w-full p-3 text-left rounded ${f?T===D.correctAnswer?"bg-green-100 border-green-500":T===g?"bg-red-100 border-red-500":"bg-gray-50":"bg-gray-50 hover:bg-blue-50"} border transition-colors`,children:I},T))}),f&&x.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded",children:x.jsx("p",{className:"text-sm",children:D.explanation})}),f&&x.jsx("div",{className:"mt-4 flex justify-end",children:c<_.length-1?x.jsx(Ni,{onClick:S,className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Next Question"}):x.jsx(Ni,{onClick:O,className:"bg-green-600 hover:bg-green-700 text-white",children:"Try New Scenarios"})})]})]})},o_=["MMM","AOS","ABT","ABBV","ACN","ATVI","ADM","ADBE","ADP","AAP","AES","AFL","A","APD","AKAM","ALK","ALB","ARE","ALGN","ALLE","LNT","ALL","GOOGL","GOOG","MO","AMZN","AMCR","AMD","AEE","AAL","AEP","AXP","AIG","AMT","AWK","AMP","ABC","AME","AMGN","APH","ADI","ANSS","AON","APA","AAPL","AMAT","APTV","ACGL","ANET","AJG","AIZ","T","ATO","ADSK","AZO","AVB","AVY","AXON","BKR","BALL","BAC","BBWI","BAX","BDX","WRB","BRK.B","BBY","BIO","TECH","BIIB","BLK","BK","BA","BKNG","BWA","BXP","BSX","BMY","AVGO","BR","BRO","BF.B","BG","CHRW","CDNS","CZR","CPT","CPB","COF","CAH","KMX","CCL","CARR","CTLT","CAT","CBOE","CBRE","CDW","CE","CNC","CNP","CDAY","CF","CRL","SCHW","CHTR","CVX","CMG","CB","CHD","CI","CINF","CTAS","CSCO","C","CFG","CLX","CME","CMS","KO","CTSH","CL","CMCSA","CMA","CAG","COP","ED","STZ","CEG","COO","CPRT","GLW","CTVA","CSGP","COST","CTRA","CCI","CSX","CMI","CVS","DHI","DHR","DRI","DVA","DE","DAL","XRAY","DVN","DXCM","FANG","DLR","DFS","DISH","DIS","DG","DLTR","D","DPZ","DOV","DOW","DTE","DUK","DD","DXC","EMN","ETN","EBAY","ECL","EIX","EW","EA","ELV","LLY","EMR","ENPH","ETR","EOG","EPAM","EQT","EFX","EQIX","EQR","ESS","EL","ETSY","RE","EVRG","ES","EXC","EXPE","EXPD","EXR","XOM","FFIV","FDS","FICO","FAST","FRT","FDX","FITB","FRC","FE","FIS","FISV","FLT","FMC","F","FTNT","FTV","FOXA","FOX","BEN","FCX","GRMN","IT","GEHC","GEN","GNRC","GD","GE","GIS","GM","GPC","GILD","GL","GPN","GS","HAL","HIG","HAS","HCA","PEAK","HSIC","HSY","HES","HPE","HLT","HOLX","HD","HON","HRL","HST","HWM","HPQ","HUM","HBAN","HII","IBM","IEX","IDXX","ITW","ILMN","INCY","IR","PODD","INTC","ICE","IFF","IP","IPG","INTU","ISRG","IVZ","INVH","IQV","IRM","JBHT","JKHY","J","JNJ","JCI","JPM","JNPR","K","KDP","KEY","KEYS","KMB","KIM","KMI","KLAC","KHC","KR","LHX","LH","LRCX","LW","LVS","LDOS","LEN","LNC","LIN","LYV","LKQ","LMT","L","LOW","LYB","MTB","MRO","MPC","MKTX","MAR","MMC","MLM","MAS","MA","MTCH","MKC","MCD","MCK","MDT","MRK","META","MET","MTD","MGM","MCHP","MU","MSFT","MAA","MRNA","MHK","MOH","TAP","MDLZ","MPWR","MNST","MCO","MS","MOS","MSI","MSCI","NDAQ","NTAP","NFLX","NWL","NEM","NWSA","NWS","NEE","NKE","NI","NDSN","NSC","NTRS","NOC","NCLH","NRG","NUE","NVDA","NVR","NXPI","ORLY","OXY","ODFL","OMC","ON","OKE","ORCL","OGN","OTIS","PCAR","PKG","PARA","PH","PAYX","PAYC","PYPL","PNR","PEP","PKI","PFE","PCG","PM","PSX","PNW","PXD","PNC","POOL","PPG","PPL","PFG","PG","PGR","PLD","PRU","PEG","PTC","PSA","PHM","QRVO","PWR","QCOM","DGX","RL","RJF","RTX","O","REG","REGN","RF","RSG","RMD","RHI","ROK","ROL","ROP","ROST","RCL","SPGI","CRM","SBAC","SLB","STX","SEE","SRE","NOW","SHW","SPG","SWKS","SJM","SNA","SEDG","SO","LUV","SWK","SBUX","STT","STLD","STE","SYK","SYF","SNPS","SYY","TMUS","TROW","TTWO","TPR","TRGP","TGT","TEL","TDY","TFX","TER","TSLA","TXN","TXT","TMO","TJX","TSCO","TT","TDG","TRV","TRMB","TFC","TYL","TSN","USB","UDR","ULTA","UNP","UAL","UPS","URI","UNH","UHS","VLO","VTR","VRSN","VRSK","VZ","VRTX","VFC","VTRS","VICI","V","VMC","WAB","WBA","WMT","WBD","WM","WAT","WEC","WFC","WELL","WST","WDC","WRK","WY","WHR","WMB","WTW","GWW","WYNN","XEL","XYL","YUM","ZBRA","ZBH","ZION","ZTS"],UV=()=>{const t=Px(),{user:e}=ss(),{setIsPremium:n}=Wm(),[r,i]=w.useState(null),[o,s]=w.useState(!1);return w.useEffect(()=>{(async()=>{if(console.log("SuccessPage: Starting payment success handling"),console.log("Current user:",e==null?void 0:e.uid),!e){console.error("No user found in SuccessPage"),i("User not found. Please try logging in again.");return}try{console.log("Updating subscription status in Firestore..."),await mL(e.uid,"active"),console.log("Setting premium status in context..."),await n(!0),console.log("Updating localStorage..."),localStorage.setItem(`premium_status_${e.uid}`,JSON.stringify({isPremium:!0,timestamp:Date.now()})),s(!0),console.log("All updates completed successfully"),setTimeout(()=>{console.log("Redirecting to home page..."),t("/")},3e3)}catch(l){console.error("Error in SuccessPage:",l),i(l.message||"Failed to update subscription status")}})()},[t,n,e]),x.jsx("div",{className:"min-h-screen bg-blue-50 flex items-center justify-center p-4",children:x.jsxs(rr,{className:"max-w-md w-full",children:[x.jsxs(zi,{children:[x.jsx("div",{className:"flex items-center justify-center mb-4",children:r?x.jsx(pD,{className:"h-12 w-12 text-red-500"}):x.jsx(vD,{className:"h-12 w-12 text-green-500"})}),x.jsx(Wi,{className:"text-center",children:r?"Update Failed":"Payment Successful!"})]}),x.jsx(ir,{className:"space-y-4",children:r?x.jsx(Za,{variant:"destructive",children:x.jsx(el,{children:r})}):x.jsxs(x.Fragment,{children:[x.jsx("p",{className:"text-center text-gray-600",children:"Thank you for upgrading to premium access. You now have access to all advanced options trading strategies."}),x.jsxs("p",{className:"text-sm text-center text-gray-500",children:[o?"Premium status updated successfully! ":"","Redirecting you back to the application in a few seconds..."]})]})})]})})},BV=({companyName:t})=>{var a;const[e,n]=w.useState(null),[r,i]=w.useState(!1),[o,s]=w.useState(null);return w.useEffect(()=>{(async()=>{if(t){i(!0),s(null);try{const c=`https://en.wikipedia.org/w/api.php?action=query&list=search&srsearch=${t} company&format=json&origin=*`,f=await(await fetch(c)).json();if(f.query.search.length===0)throw new Error("No Wikipedia page found for this company");const p=f.query.search[0].pageid,g=`https://en.wikipedia.org/w/api.php?action=query&prop=extracts&exintro&explaintext&pageids=${p}&format=json&origin=*`,A=(await(await fetch(g)).json()).query.pages[p];n({title:A.title,extract:A.extract})}catch(c){s(c.message)}finally{i(!1)}}})()},[t]),x.jsxs(rr,{className:"mt-4",children:[x.jsxs(zi,{children:[x.jsx(Wi,{children:"Company Information"}),x.jsx(qm,{children:"Data from Wikipedia"})]}),x.jsxs(ir,{children:[r&&x.jsx("div",{className:"text-gray-600",children:"Loading company information..."}),o&&x.jsxs(Za,{variant:"destructive",children:[x.jsx(dS,{className:"h-4 w-4"}),x.jsx(el,{children:o})]}),e&&x.jsxs("div",{className:"space-y-2",children:[x.jsx("h3",{className:"font-semibold text-lg",children:e.title}),x.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:(a=e.extract)==null?void 0:a.split(`
`)[0]}),x.jsx("a",{href:`https://en.wikipedia.org/wiki/${encodeURIComponent(e.title)}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-sm",children:"Read more on Wikipedia"})]})]})]})},zV=({symbol:t})=>{const e=w.useRef(null),n=w.useRef(null);if(w.useEffect(()=>{if(!t)return;n.current&&n.current.remove();const i=document.createElement("script");return i.src="https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js",i.type="text/javascript",i.async=!0,i.innerHTML=JSON.stringify({interval:"1W",width:"100%",isTransparent:!1,height:"400",symbol:`${t}`,showIntervalTabs:!0,displayMode:"single",locale:"en",colorTheme:"light"}),n.current=i,e.current&&e.current.appendChild(i),()=>{n.current&&n.current.remove()}},[t]),!t)return null;const r=`https://www.tradingview.com/symbols/${t}/`;return x.jsxs(rr,{className:"mt-4",children:[x.jsxs(zi,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[x.jsx(Wi,{className:"text-sm font-medium",children:"Technical Analysis"}),x.jsxs("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-800 flex items-center gap-1",children:["View on TradingView",x.jsx(xD,{className:"h-4 w-4"})]})]}),x.jsx(ir,{children:x.jsx("div",{className:"tradingview-widget-container",ref:e,children:x.jsx("div",{className:"tradingview-widget-container__widget"})})})]})},WV=({stockPrice:t,strikePrice:e,premium:n,companyDetails:r})=>{const i=s=>s?s>=1e6?`$${(s/1e6).toFixed(2)}T`:s>=1e3?`$${(s/1e3).toFixed(2)}B`:`$${s.toFixed(2)}M`:"N/A",o=s=>s?s>=1e3?`${(s/1e3).toFixed(2)}B shares`:`${s.toFixed(2)}M shares`:"N/A";return x.jsxs("div",{className:"space-y-4",children:[r&&x.jsx(rr,{className:"bg-white",children:x.jsxs(ir,{className:"pt-6",children:[x.jsxs("div",{className:"flex items-start space-x-4",children:[r.logo&&x.jsx("img",{src:r.logo,alt:`${r.name} logo`,className:"w-16 h-16 object-contain"}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-semibold",children:r.name}),x.jsx("p",{className:"text-sm text-gray-500",children:r.finnhubIndustry})]})]}),x.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mt-4",children:[x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx(yD,{className:"w-4 h-4 text-gray-500"}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-gray-500",children:"Market Cap"}),x.jsx("p",{className:"font-medium",children:i(r.marketCapitalization)})]})]}),x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx(mD,{className:"w-4 h-4 text-gray-500"}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-gray-500",children:"Shares Outstanding"}),x.jsx("p",{className:"font-medium",children:o(r.shareOutstanding)})]})]}),x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx(gD,{className:"w-4 h-4 text-gray-500"}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-gray-500",children:"IPO Date"}),x.jsx("p",{className:"font-medium",children:r.ipo||"N/A"})]})]})]})]})}),(r==null?void 0:r.name)&&x.jsx(BV,{companyName:r.name}),(r==null?void 0:r.ticker)&&x.jsx(zV,{symbol:r.ticker})]})},Yl=(t,e,n,r)=>{const i=parseFloat(e),o=parseFloat(n),s=parseFloat(r);switch(t){case Q.COVERED_CALL:return{amount:(i*100).toFixed(2),description:"(100 shares)"};case Q.CASH_SECURED_PUT:return{amount:(o*100).toFixed(2),description:"(cash to buy 100 shares)"};case Q.LONG_CALL:return{amount:(s*100).toFixed(2),description:"(premium for 1 contract)"};case Q.PROTECTIVE_PUT:return{amount:(i*100+s*100).toFixed(2),description:"(100 shares + put premium)"};case Q.COLLAR_STRATEGY:return{amount:(i*100).toFixed(2),description:"(100 shares)"};default:return{amount:"0.00",description:""}}},Xl=(t,e,n,r)=>{const i=parseFloat(r),o=i*.8;switch(t){case Q.COVERED_CALL:return{amount:(i*100).toFixed(2),description:"premium received"};case Q.CASH_SECURED_PUT:return{amount:(i*100).toFixed(2),description:"premium received"};case Q.LONG_CALL:return{amount:(i*100).toFixed(2),description:"premium paid"};case Q.PROTECTIVE_PUT:return{amount:(i*100).toFixed(2),description:"premium paid"};case Q.COLLAR_STRATEGY:const s=o-i;return{amount:Math.abs(s*100).toFixed(2),description:s>0?"net debit paid":"net credit received"};default:return{amount:"0.00",description:""}}},HV=({symbol:t})=>{const e=w.useRef(null),n=w.useRef(null);return w.useEffect(()=>{if(!t)return;n.current&&(n.current.remove(),n.current=null);const r=document.createElement("script");return r.type="text/javascript",r.src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js",r.async=!0,r.innerHTML=JSON.stringify({autosize:!0,symbol:`${t}`,timezone:"Etc/UTC",theme:"light",style:"2",locale:"en",hide_legend:!0,range:"1M",allow_symbol_change:!1,save_image:!1,calendar:!1,support_host:"https://www.tradingview.com"}),n.current=r,e.current&&e.current.appendChild(r),()=>{n.current&&(n.current.remove(),n.current=null)}},[t]),t?x.jsxs(rr,{className:"mt-4",children:[x.jsx(zi,{children:x.jsxs(Wi,{className:"text-sm font-medium",children:[t," Price Chart"]})}),x.jsx(ir,{children:x.jsx("div",{className:"w-full h-96",children:x.jsxs("div",{ref:e,className:"tradingview-widget-container w-full h-full",children:[x.jsx("div",{className:"tradingview-widget-container__widget",style:{height:"calc(100% - 32px)",width:"100%"}}),x.jsx("div",{className:"tradingview-widget-copyright",children:x.jsx("a",{href:"https://www.tradingview.com/",rel:"noopener nofollow",target:"_blank",className:"text-xs text-blue-600 hover:text-blue-800",children:"Track all markets on TradingView"})})]})})})]}):null},s_="ctff27hr01qi0nfd3lugctff27hr01qi0nfd3lv0",qV=()=>{ss();const{isPremium:t}=Wm(),e=()=>{const W=Math.floor(Math.random()*o_.length);return o_[W]},[n,r]=w.useState(Q.OPTIONS_THEORY),[i,o]=w.useState(()=>e()),[s,a]=w.useState(!1),[l,c]=w.useState(""),[d,f]=w.useState(""),[p,g]=w.useState(""),[E,v]=w.useState({show:!1,correct:!1,message:""}),[A,_]=w.useState(""),[y,S]=w.useState(""),[b,O]=w.useState(null);w.useState("");const D=async W=>{try{const K=await(await fetch(`https://finnhub.io/api/v1/stock/profile2?symbol=${W}&token=${s_}`)).json();K&&O(K)}catch(oe){console.error("Error fetching company details:",oe)}},I=W=>![Q.OPTIONS_THEORY,Q.COVERED_CALL].includes(W),T=(W,oe)=>{let K=new Date(W),Y=0;for(;Y<oe;)K.setDate(K.getDate()+1),K.getDay()!==0&&K.getDay()!==6&&Y++;return K},R=(W,oe)=>{switch(oe){case Q.LONG_CALL:return W*1.05;case Q.COVERED_CALL:return W*1.08;case Q.CASH_SECURED_PUT:return W*.92;case Q.PROTECTIVE_PUT:return W*.9;case Q.COLLAR_STRATEGY:return W*1.1;default:return W*1.1}},P=W=>{switch(W){case Q.COVERED_CALL:return .004;case Q.LONG_CALL:return .015;case Q.CASH_SECURED_PUT:return .008;case Q.PROTECTIVE_PUT:return .012;case Q.COLLAR_STRATEGY:return .006;default:return .01}},N=async()=>{a(!0);try{console.log("Starting fetchStockData with:",{symbol:i}),await D(i);const W=T(new Date,10),K=await(await fetch(`https://finnhub.io/api/v1/quote?symbol=${i}&token=${s_}`)).json();if(console.log("Quote data:",K),K.c){const Y=K.c,M=-.05,G=Math.random()*(.15-M)+M,ee=Y*(1+G);console.log("Setting data with values:",{startingPrice:Y,randomChange:`${(G*100).toFixed(2)}%`,futurePrice:ee}),c(Y.toFixed(2));const ce=R(Y,n);f(ce.toFixed(2));const _e=P(n);return g((Y*_e).toFixed(2)),S(ee.toFixed(2)),_(W.toISOString().split("T")[0]),console.log("Data set successfully:",{stockPrice:Y.toFixed(2),strikePrice:(Y*1.05).toFixed(2),premium:(Y*.03).toFixed(2),futurePrice:ee.toFixed(2),expirationDate:W.toISOString().split("T")[0]}),!0}else return console.log("Missing required data:",{hasCurrentPrice:!!K.c}),v({show:!0,correct:!1,message:"No data available for this symbol"}),!1}catch(W){return console.error("Error fetching data:",W),v({show:!0,correct:!1,message:"Error fetching stock data"}),!1}finally{a(!1)}},$=async()=>{if(!i){v({show:!0,correct:!1,message:"Please enter both symbol and date"});return}await N()&&v({show:!0,correct:!0,message:""})},k=()=>{if(I(n)&&!t)return x.jsx("div",{className:"mt-8",children:x.jsx(ED,{})});const W=l&&d&&p&&y&&A;return x.jsx("div",{className:"space-y-8",children:W&&x.jsx("div",{className:"border-t pt-8",children:x.jsx(jV,{stockPrice:l,strikePrice:d,premium:p,symbol:i,expirationDate:A,futurePrice:y,selectedDate:new Date().toISOString().split("T")[0],strategy:n})})})};return x.jsx("div",{className:"min-h-screen bg-blue-50 p-8",children:x.jsxs(rr,{className:"max-w-4xl mx-auto bg-white mb-8",children:[x.jsx(zi,{children:x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsxs("div",{children:[x.jsx(Wi,{className:"text-2xl font-bold text-blue-900",children:"Options Trading Guide"}),x.jsx(qm,{children:"Learn options trading concepts with interactive examples"})]}),x.jsx(CV,{})]})}),x.jsxs(ir,{className:"space-y-8",children:[x.jsx(TV,{selectedStrategy:n,onStrategyChange:r}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Options Analysis Tool"}),x.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx(FC,{htmlFor:"symbol",children:"Stock Symbol"}),x.jsx(OC,{id:"symbol",placeholder:`Enter symbol (e.g., ${e()})`,value:i,onChange:W=>o(W.target.value.toUpperCase()),className:"bg-blue-50"})]}),x.jsx(Ni,{onClick:$,className:"w-full bg-blue-600 hover:bg-blue-700 text-white",disabled:s,children:s?x.jsxs("span",{className:"flex items-center",children:[x.jsx(fS,{className:"animate-spin mr-2"}),"Loading..."]}):"Analyze Stock"}),l&&d&&p&&x.jsx(WV,{stockPrice:l,strikePrice:d,premium:p,companyDetails:b}),E.show&&!E.correct&&x.jsxs(Za,{className:"bg-red-50",children:[x.jsx(dS,{className:"text-red-600"}),x.jsx(cS,{className:"text-red-800",children:"Error"}),x.jsx(el,{className:"whitespace-pre-line",children:E.message})]})]}),x.jsx("div",{className:"space-y-4",children:x.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[x.jsx("h4",{className:"font-medium mb-2",children:"Analysis"}),l&&d&&p?x.jsxs(x.Fragment,{children:[x.jsx(HV,{symbol:i}),x.jsx("div",{className:"mt-6",children:x.jsx(rr,{className:"bg-white",children:x.jsxs(ir,{className:"pt-6",children:[x.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Options Details"}),n===Q.COLLAR_STRATEGY?x.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-gray-500",children:"Current Stock Price"}),x.jsxs("p",{className:"font-medium",children:["$",l]})]}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-gray-500",children:"Call Strike (Short)"}),x.jsxs("p",{className:"font-medium",children:["$",d]})]}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-gray-500",children:"Put Strike (Long)"}),x.jsxs("p",{className:"font-medium",children:["$",(parseFloat(l)*.9).toFixed(2)]})]}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-gray-500",children:"Call Premium (Received)"}),x.jsxs("p",{className:"font-medium text-green-600",children:["+$",p," per share"]})]}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-gray-500",children:"Put Premium (Paid)"}),x.jsxs("p",{className:"font-medium text-red-600",children:["-$",(parseFloat(p)*.8).toFixed(2)," per share"]})]}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-gray-500",children:"Net Debit/Credit"}),x.jsxs("p",{className:`font-medium ${parseFloat(p)*.2>0?"text-green-600":"text-red-600"}`,children:["$",(parseFloat(p)*.2).toFixed(2)," per share"]})]}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-gray-500",children:"Maximum Profit"}),x.jsxs("p",{className:"font-medium",children:["$",(parseFloat(d)-parseFloat(l)+parseFloat(p)*.2).toFixed(2)," per share"]})]}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-gray-500",children:"Maximum Loss"}),x.jsxs("p",{className:"font-medium",children:["$",(parseFloat(l)-parseFloat(l)*.9-parseFloat(p)*.2).toFixed(2)," per share"]})]}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-gray-500",children:"Required Collateral"}),x.jsxs("p",{className:"font-medium",children:["$",Yl(n,l,d,p).amount,x.jsx("span",{className:"text-sm text-gray-500 ml-1",children:Yl(n,l,d,p).description})]})]}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-gray-500",children:"Initial Cash Flow"}),x.jsxs("p",{className:`font-medium ${parseFloat(p)*.2>0?"text-green-600":"text-red-600"}`,children:["$",Xl(n,l,d,p).amount,x.jsx("span",{className:"text-sm text-gray-500 ml-1",children:Xl(n,l,d,p).description})]})]}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-gray-500",children:"Trade Date"}),x.jsx("p",{className:"font-medium",children:new Date().toISOString().split("T")[0]})]}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-gray-500",children:"Expiration Date"}),x.jsxs("p",{className:"font-medium",children:["$",A]})]})]}):x.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-gray-500",children:"Current Stock Price"}),x.jsxs("p",{className:"font-medium",children:["$",l]})]}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-gray-500",children:"Strike Price"}),x.jsxs("p",{className:"font-medium",children:["$",d]})]}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-gray-500",children:"Option Premium"}),x.jsxs("p",{className:"font-medium",children:["$",p," per share"]})]}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-gray-500",children:"Total Cost"}),x.jsxs("p",{className:"font-medium",children:["$",(parseFloat(p)*100).toFixed(2)]})]}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-gray-500",children:"Required Collateral"}),x.jsxs("p",{className:"font-medium",children:["$",Yl(n,l,d,p).amount,x.jsx("span",{className:"text-sm text-gray-500 ml-1",children:Yl(n,l,d,p).description})]})]}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-gray-500",children:"Initial Cash Flow"}),x.jsxs("p",{className:`font-medium ${n===Q.COVERED_CALL||n===Q.CASH_SECURED_PUT?"text-green-600":"text-red-600"}`,children:[n===Q.COVERED_CALL||n===Q.CASH_SECURED_PUT?"+":"-","$",Xl(n,l,d,p).amount,x.jsx("span",{className:"text-sm text-gray-500 ml-1",children:Xl(n,l,d,p).description})]})]}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-gray-500",children:"Trade Date"}),x.jsx("p",{className:"font-medium",children:new Date().toISOString().split("T")[0]})]}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-gray-500",children:"Expiration Date"}),x.jsxs("p",{className:"font-medium",children:["$",A]})]})]})]})})})]}):x.jsx("p",{className:"text-gray-500",children:"Select a stock symbol and date to see analysis"})]})})]})]}),k()]})]})})},GV=()=>x.jsx(fL,{children:x.jsx(gL,{children:x.jsxs(FR,{children:[x.jsx(yf,{path:"/",element:x.jsx(qV,{})}),x.jsx(yf,{path:"/success",element:x.jsx(UV,{})})]})})});Eh.createRoot(document.getElementById("root")).render(x.jsx(Fn.StrictMode,{children:x.jsx(aP,{children:x.jsx(GV,{})})}));
